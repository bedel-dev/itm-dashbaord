{"version":3,"file":"ng-devui-auto-complete.mjs","sources":["../../devui/auto-complete/auto-complete-config.ts","../../devui/auto-complete/auto-complete-popup.component.ts","../../devui/auto-complete/auto-complete-popup.component.html","../../devui/auto-complete/auto-complete.directive.ts","../../devui/auto-complete/auto-complete.module.ts","../../devui/auto-complete/ng-devui-auto-complete.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class AutoCompleteConfig {\n  autoComplete = {\n    delay: 300,\n    minLength: 1,\n    itemTemplate: null,\n    noResultItemTemplate: null,\n    formatter: (item) => item ? (item.label || item.toString()) : '',\n    valueParser: (item) => item\n  };\n}\n","import {\n  CdkConnectedOverlay,\n  CdkOverlayOrigin,\n  ConnectedOverlayPositionChange,\n  ConnectedPosition,\n  VerticalConnectionPos\n} from '@angular/cdk/overlay';\nimport { Component, ElementRef, Input, TemplateRef, ViewChild } from '@angular/core';\nimport { ControlValueAccessor } from '@angular/forms';\nimport { fadeInOut } from 'ng-devui/utils';\nimport { AutoCompleteConfig } from './auto-complete-config';\n\n@Component({\n  selector: 'd-auto-complete-popup',\n  templateUrl: './auto-complete-popup.component.html',\n  styleUrls: ['auto-complete-popup.component.scss'],\n  animations: [fadeInOut],\n  preserveWhitespaces: false,\n})\nexport class AutoCompletePopupComponent implements ControlValueAccessor {\n  @Input() width: number;\n  @Input() cssClass: string;\n  @Input() maxHeight = 300;\n  @Input() disabled = false;\n  @Input() disabledKey: string;\n  @Input() source: any[];\n  @Input() position: any;\n  @Input() isOpen: boolean;\n  @Input() term: string;\n  @Input() popTipsText: string;\n  /**\n   * @deprecated\n   */\n  @Input() overview: string;\n  @Input() itemTemplate: TemplateRef<any>;\n  @Input() noResultItemTemplate: TemplateRef<any>;\n  @Input() searchingTemplate: TemplateRef<any>;\n  @Input() isSearching = false;\n  @Input() formatter: (item: any) => string;\n  @Input() dropdown: boolean;\n  @Input() selectWidth: any;\n  @Input() enableLazyLoad: boolean;\n  @Input() appendToBody = false;\n  @Input() cdkOverlayOffsetY = 0;\n  @Input() origin: CdkOverlayOrigin | undefined;\n  @Input() showAnimation = true;\n  @ViewChild('selectMenuElement') selectMenuElement: ElementRef;\n  @ViewChild('dropdownUl') dropdownUl: ElementRef;\n  @ViewChild(CdkConnectedOverlay) connectedOverlay: CdkConnectedOverlay;\n  activeIndex = 0;\n  hoverIndex = 0;\n  labelMinHeight = 20; // position.top小于20px时候，表示光标在第一行\n  showLoading = false;\n  overlayPositions: Array<ConnectedPosition>;\n  popPosition: VerticalConnectionPos = 'bottom';\n  popDirection: 'top' | 'bottom';\n  private value: any;\n  private onChange = (_: any) => null;\n  private onTouched = () => null;\n\n  constructor(private autoCompleteConfig: AutoCompleteConfig, public elementRef: ElementRef) {\n    this.formatter = this.autoCompleteConfig.autoComplete.formatter;\n  }\n\n  writeValue(obj): void {\n    this.value = obj;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  registerOnChange(fn): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn): void {\n    this.onTouched = fn;\n  }\n\n  onSelect(event, item) {\n    if (this.disabledKey && item && item[this.disabledKey]) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n    if (this.overview === 'single') {\n      // 单选场景和单行场景不需要冒泡\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    this.value = item;\n    this.onTouched();\n    this.onChange({ type: 'select', value: this.value });\n  }\n\n  selectCurrentItem(event) {\n    this.activeIndex = this.hoverIndex;\n    this.onSelect(event, this.source[this.hoverIndex]);\n  }\n\n  onActiveIndexChange(index) {\n    this.activeIndex = index;\n  }\n\n  reset() {\n    this.activeIndex = 0;\n    this.hoverIndex = 0;\n  }\n\n  scrollToActive(index?): void {\n    const that = this;\n    setTimeout(() => {\n      const scrollIndex = index === undefined ? this.activeIndex : index;\n      const selectIndex = scrollIndex;\n      const scrollPane: any = that.dropdownUl.nativeElement.children[selectIndex];\n      if (scrollPane.scrollIntoViewIfNeeded) {\n        scrollPane.scrollIntoViewIfNeeded(false);\n      } else {\n        const containerInfo = that.dropdownUl.nativeElement.getBoundingClientRect();\n        const elementInfo = scrollPane.getBoundingClientRect();\n        if (elementInfo.bottom > containerInfo.bottom || elementInfo.top < containerInfo.top) {\n          scrollPane.scrollIntoView(false);\n        }\n      }\n    });\n  }\n\n  next() {\n    if (this.isOpen && this.source && this.source.length) {\n      if (this.hoverIndex === this.source.length - 1) {\n        this.hoverIndex = 0;\n        this.scrollToActive(this.hoverIndex);\n        return;\n      }\n      this.hoverIndex = this.hoverIndex + 1;\n      this.scrollToActive(this.hoverIndex);\n    }\n  }\n\n  prev() {\n    if (this.isOpen && this.source && this.source.length) {\n      if (this.hoverIndex === 0) {\n        this.hoverIndex = this.source.length - 1;\n        this.scrollToActive(this.hoverIndex);\n        return;\n      }\n      this.hoverIndex = this.hoverIndex - 1;\n      this.scrollToActive(this.hoverIndex);\n    }\n  }\n\n  trackByFn(index, item) {\n    return index;\n  }\n\n  animationEnd($event) {\n    if (!this.isOpen && this.selectMenuElement) {\n      const targetElement = this.selectMenuElement.nativeElement;\n      setTimeout(() => {\n        targetElement.style.display = 'none';\n      });\n    }\n  }\n\n  loadMoreEvent($event) {\n    this.showLoading = true;\n    this.onChange({ type: 'loadMore', value: this });\n  }\n\n  loadFinish($event) {\n    this.showLoading = false;\n  }\n\n  onPositionChange(position: ConnectedOverlayPositionChange) {\n    this.popPosition = position.connectionPair.originY;\n  }\n}\n","<ng-container *ngIf=\"appendToBody\">\n  <ng-template\n    cdk-connected-overlay\n    [cdkConnectedOverlayOrigin]=\"origin\"\n    [cdkConnectedOverlayWidth]=\"width\"\n    [cdkConnectedOverlayOpen]=\"isOpen && !disabled\"\n    [cdkConnectedOverlayOffsetY]=\"cdkOverlayOffsetY\"\n    [cdkConnectedOverlayPositions]=\"overlayPositions\"\n    (positionChange)=\"onPositionChange($event)\"\n  >\n    <ng-template [ngTemplateOutlet]=\"popTpl\"> </ng-template>\n  </ng-template>\n</ng-container>\n\n<ng-container *ngIf=\"!appendToBody\">\n  <ng-template [ngTemplateOutlet]=\"popTpl\"> </ng-template>\n</ng-container>\n\n<ng-template #popTpl>\n  <div\n    class=\"devui-dropdown-menu\"\n    [ngClass]=\"{ 'devui-dropdown-menu-cdk': appendToBody }\"\n    [style.display]=\"isOpen && (source?.length || noResultItemTemplate) && !disabled ? 'inline-block' : 'none'\"\n    [style.top]=\"overview === 'multiline' ? (position?.top < labelMinHeight ? '50%' : '100%') : '100%'\"\n    [style.left]=\"overview === 'multiline' ? position?.left + 'px' : '0'\"\n    [@fadeInOut]=\"isOpen && !disabled ? (appendToBody ? popPosition : 'bottom') : 'void'\"\n    (@fadeInOut.done)=\"animationEnd($event)\"\n    [@.disabled]=\"!showAnimation\"\n    #selectMenuElement\n    dLoading\n    [showLoading]=\"showLoading\"\n    [backdrop]=\"true\"\n  >\n    <ul\n      class=\"devui-list-unstyled devui-scrollbar scroll-height\"\n      [style.maxHeight]=\"maxHeight + 'px'\"\n      dLazyLoad\n      [enableLazyLoad]=\"enableLazyLoad\"\n      (loadMore)=\"loadMoreEvent($event)\"\n      #dropdownUl\n    >\n      <ng-container *ngIf=\"!isSearching || !searchingTemplate\">\n        <li *ngIf=\"popTipsText && popTipsText.length > 0\" class=\"devui-popup-tips\">\n          {{ popTipsText }}\n        </li>\n        <li\n          *ngFor=\"let item of source; let $index = index; trackBy: trackByFn\"\n          class=\"devui-dropdown-item\"\n          [title]=\"formatter(item)\"\n          [ngClass]=\"{\n            selected: $index == activeIndex,\n            'devui-dropdown-bg': $index == hoverIndex,\n            disabled: disabledKey && item[disabledKey]\n          }\"\n          (click)=\"onSelect($event, item)\"\n        >\n          <ng-template\n            [ngTemplateOutlet]=\"itemTemplate || defaultItemTemplate\"\n            [ngTemplateOutletContext]=\"{\n              formatter: formatter,\n              term: term,\n              source: source,\n              item: item,\n              $index: $index\n            }\"\n          >\n          </ng-template>\n        </li>\n        <div class=\"devui-no-data-tip\" *ngIf=\"!source?.length && noResultItemTemplate\">\n          <ng-template [ngTemplateOutlet]=\"noResultItemTemplate\" [ngTemplateOutletContext]=\"{ term: term, source: source }\"> </ng-template>\n        </div>\n      </ng-container>\n      <div class=\"devui-no-data-tip\" *ngIf=\"isSearching && searchingTemplate\">\n        <ng-template [ngTemplateOutlet]=\"searchingTemplate\" [ngTemplateOutletContext]=\"{ term: term }\"> </ng-template>\n      </div>\n    </ul>\n  </div>\n</ng-template>\n\n<ng-template #defaultItemTemplate let-item=\"item\" let-term=\"term\">\n  <d-highlight [value]=\"formatter(item)\" [term]=\"term\"></d-highlight>\n</ng-template>\n","import { CdkOverlayOrigin, ConnectedPosition } from '@angular/cdk/overlay';\nimport {\n  ChangeDetectorRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostBinding,\n  HostListener,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { PositionService } from 'ng-devui/position';\nimport {\n  addClassToOrigin,\n  AppendToBodyDirection,\n  AppendToBodyDirectionsConfig,\n  DevConfigService,\n  removeClassFromOrigin,\n  WithConfig\n} from 'ng-devui/utils';\nimport { fromEvent, Observable, of, Subject, Subscription } from 'rxjs';\nimport { debounceTime, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { AutoCompleteConfig } from './auto-complete-config';\nimport { AutoCompletePopupComponent } from './auto-complete-popup.component';\n\n@Directive({\n  selector: '[dAutoComplete]',\n  exportAs: 'autoComplete',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AutoCompleteDirective),\n      multi: true,\n    },\n  ],\n})\nexport class AutoCompleteDirective implements OnInit, OnDestroy, OnChanges, ControlValueAccessor {\n  @HostBinding('attr.autocomplete') autocomplete = 'off';\n  @HostBinding('attr.autocapitalize') autocapitalize = 'off';\n  @HostBinding('attr.autocorrect') autocorrect = 'off';\n  @Input() disabled: boolean;\n  /**\n   * @deprecated\n   */\n  @Input() cssClass: string;\n  @Input() delay = 300;\n  /**\n   * @deprecated\n   */\n  @Input() minLength: number;\n  @Input() itemTemplate: TemplateRef<any>;\n  @Input() noResultItemTemplate: TemplateRef<any>;\n  @Input() searchingTemplate: TemplateRef<any>;\n  @Input() set isSearching(isSearching) {\n    if (this.popupRef && this.searchingTemplate) {\n      const pop = this.popupRef.instance;\n      pop.isSearching = isSearching;\n      pop.searchingTemplate = this.searchingTemplate;\n      if (isSearching) {\n        pop.isOpen = true;\n      }\n    }\n  }\n\n  @Input() appendToBody = false;\n  @Input() appendToBodyDirections: Array<AppendToBodyDirection | ConnectedPosition> = ['rightDown', 'leftDown', 'rightUp', 'leftUp'];\n  @Input() cdkOverlayOffsetY = 0; // 内部使用不开放\n  @Input() dAutoCompleteWidth: number;\n  @Input() formatter: (item: any) => string;\n  @Input() sceneType = ''; // sceneType使用场景：select(下拉框) suggest(联想)\n  @Input() tipsText = ''; // 提示文字\n  /*\n overview: border none multiline single\n */\n  @Input() overview: string;\n  @Input() latestSource: any[]; // 最近输入\n  @Input() source: any[];\n  @Input() valueParser: (item: any) => any;\n  @Input() searchFn: (term: string, target?: AutoCompleteDirective) => Observable<any[]>;\n  /**\n   * @deprecated\n   */\n  @Input() dropdown: boolean;\n  @Input() maxHeight = 300;\n  @Input() disabledKey: string;\n  @Input() @WithConfig() showAnimation = true;\n  /**\n   *  【可选】启用数据懒加载，默认不启用\n   */\n  @Input() enableLazyLoad = false;\n  @Input() allowEmptyValueSearch = false; // 在value为空时，是否允许进行搜索\n  @Output() loadMore = new EventEmitter<any>();\n  @Output() selectValue = new EventEmitter<any>();\n  @Output() transInputFocusEmit = new EventEmitter<any>(); // input状态传给父组件函数\n  /**\n   * @deprecated\n   */\n  @Output() changeDropDownStatus = new EventEmitter<any>();\n  @Output() toggleChange = new EventEmitter<boolean>();\n  KEYBOARD_EVENT_NOT_REFRESH = ['escape', 'enter', 'arrowup', 'arrowdown', /* ie 10 edge */ 'esc', 'up', 'down'];\n  popupRef: ComponentRef<AutoCompletePopupComponent>;\n\n  private destroy$ = new Subject();\n  i18nText: I18nInterface['autoComplete'];\n  popTipsText = '';\n  position: any;\n  focus = false;\n\n  private valueChanges: Observable<any[]>;\n  private value: any;\n  private subscription: Subscription;\n  private onChange = (_: any) => null;\n  private onTouched = () => null;\n\n  constructor(\n    private autoCompleteConfig: AutoCompleteConfig,\n    private elementRef: ElementRef,\n    private viewContainerRef: ViewContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private renderer: Renderer2,\n    private injector: Injector,\n    private positionService: PositionService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private i18n: I18nService,\n    private devConfigService: DevConfigService\n  ) {\n\n  }\n\n  ngOnInit() {\n    this.init();\n    this.setI18nText();\n    this.valueChanges = this.registerInputEvent(this.elementRef);\n    // 调用时机：input keyup\n    this.subscription = this.valueChanges.subscribe((source) => this.onSourceChange(source));\n\n    // 动态的创建了popup组件，\n    const factory = this.componentFactoryResolver.resolveComponentFactory(AutoCompletePopupComponent);\n    this.popupRef = this.viewContainerRef.createComponent(factory, this.viewContainerRef.length, this.injector);\n    this.fillPopup(this.source);\n\n    if (!this.searchFn) {\n      this.searchFn = (term) => {\n        return of(this.source.filter((item) => this.formatter(item).toLowerCase().indexOf(term.toLowerCase()) !== -1));\n      };\n    }\n\n    // 调用时机：选中回车或者鼠标单击下拉选项\n    this.popupRef.instance.registerOnChange((item) => {\n      if (item.type === 'loadMore') {\n        this.loadMore.emit(item.value);\n        return;\n      }\n      const value = this.valueParser(item.value);\n      this.writeValue(value);\n      this.onChange(value);\n      this.hidePopup();\n      this.selectValue.emit(item.value);\n      if (this.overview && this.overview !== 'single') {\n        setTimeout(() => {\n          // 这里稍微延迟一下，等待光标的位置发生变化，好重新获取光标的位置\n          this.restLatestSource();\n        }, 0);\n      }\n    });\n\n    this.setPositions();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes && this.popupRef && changes.source) {\n      this.fillPopup(this.source);\n    }\n    if (changes['appendToBodyDirections']) {\n      this.setPositions();\n    }\n  }\n\n  init() {\n    this.minLength = this.minLength ?? this.autoCompleteConfig.autoComplete.minLength;\n    this.itemTemplate = this.itemTemplate || this.autoCompleteConfig.autoComplete.itemTemplate;\n    this.noResultItemTemplate = this.noResultItemTemplate || this.autoCompleteConfig.autoComplete.noResultItemTemplate;\n    this.formatter = this.formatter || this.autoCompleteConfig.autoComplete.formatter;\n    this.valueParser = this.valueParser || this.autoCompleteConfig.autoComplete.valueParser;\n  }\n\n  setPositions() {\n    if (this.popupRef) {\n      this.popupRef.instance.overlayPositions =\n        this.appendToBodyDirections && this.appendToBodyDirections.length > 0\n          ? this.appendToBodyDirections\n            .map((position) => {\n              if (typeof position === 'string') {\n                return AppendToBodyDirectionsConfig[position];\n              } else {\n                return position;\n              }\n            })\n            .filter((position) => position !== undefined)\n          : undefined;\n    }\n  }\n\n  setI18nText() {\n    this.i18nText = this.i18n.getI18nText().autoComplete;\n    // this.i18nLang = this.i18n.getI18nText().locale; // 如果需要获取当前语言\n    this.i18n\n      .langChange()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((data) => {\n        this.i18nText = data.autoComplete;\n        // this.i18nLang = data.locale; // 如果需要获取当前语言\n      });\n  }\n\n  restLatestSource() {\n    if (this.latestSource && this.latestSource.length > 0) {\n      this.writeValue('');\n      this.clearInputValue();\n      this.showLatestSource();\n    }\n  }\n\n  // 调用时机：input keyup\n  onSourceChange(source) {\n    if (!this.elementRef.nativeElement.value) {\n      if (this.sceneType !== 'select' && !this.allowEmptyValueSearch) {\n        // 下拉场景不展示最近输入\n        this.showLatestSource();\n      } else {\n        this.showSource(source, true, true);\n      }\n    } else {\n      this.showSource(source, true, true);\n    }\n  }\n\n  private showLatestSource() {\n    let tempSource = [];\n    if (this.latestSource && this.latestSource.length > 0) {\n      this.searchFn('').subscribe((source) => {\n        const t = this.latestSource;\n        tempSource = t.filter((data) => {\n          if (!data.label) {\n            return source.find((item) => item === data);\n          } else {\n            return source.find((item) => item.label === data.label);\n          }\n        });\n\n        const pop = this.popupRef.instance;\n        pop.reset();\n        this.popTipsText = this.i18nText.latestInput;\n        this.fillPopup(tempSource);\n        this.openPopup();\n        this.changeDetectorRef.markForCheck();\n        this.updatePosition();\n      });\n    }\n\n    if (tempSource.length <= 0) {\n      this.hidePopup();\n    }\n  }\n\n  private showSource(source, setOpen, isReset) {\n    if ((source && source.length) || this.noResultItemTemplate) {\n      const pop = this.popupRef.instance;\n      if (isReset) {\n        pop.reset();\n      }\n      this.popTipsText = this.tipsText || '';\n      this.fillPopup(source, this.value);\n      if (setOpen) {\n        this.openPopup();\n      }\n      this.changeDetectorRef.markForCheck();\n      this.updatePosition();\n    } else {\n      this.hidePopup();\n    }\n  }\n\n  private updatePosition() {\n    if (this.appendToBody) {\n      setTimeout(() => {\n        if (this.popupRef.instance.connectedOverlay && this.popupRef.instance.connectedOverlay.overlayRef) {\n          this.popupRef.instance.connectedOverlay.overlayRef.updatePosition();\n        }\n      });\n    }\n  }\n\n  public openPopup(activeIndex = 0) {\n    this.popupRef.instance.activeIndex = activeIndex;\n    this.popupRef.instance.isOpen = true;\n    this.popupRef.instance.disabled = this.disabled;\n    addClassToOrigin(this.elementRef);\n    this.changeDropDownStatus.emit(true);\n    this.toggleChange.emit(true);\n  }\n\n  writeValue(obj): void {\n    this.value = this.formatter(obj) || '';\n    this.writeInputValue(this.value);\n  }\n\n  registerOnChange(fn): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n    if (this.popupRef) {\n      this.popupRef.instance.setDisabledState(isDisabled);\n    }\n  }\n\n  ngOnDestroy() {\n    this.unSubscription();\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  @HostListener('focus', ['$event'])\n  onFocus($event) {\n    this.focus = true;\n    this.transInputFocusEmit.emit({\n      focus: true,\n      popupRef: this.popupRef,\n    });\n    const isOpen = this.sceneType !== 'select';\n    if (this.sceneType === 'select') {\n      this.searchFn('').subscribe((source) => {\n        this.showSource(source, isOpen, false);\n      });\n    }\n  }\n\n  @HostListener('blur', ['$event'])\n  onBlur($event) {\n    this.focus = false;\n    // this.hidePopup();    // TODO: 直接做失焦关闭，与点击操作将有冲突，存在click未完成已经blur，这个改动需要考虑\n    this.onTouched();\n  }\n\n  @HostListener('keydown.esc', ['$event'])\n  onEscKeyup($event) {\n    this.hidePopup();\n  }\n\n  @HostListener('keydown.Enter', ['$event'])\n  onEnterKeyDown($event) {\n    if (!this.popupRef.instance.source || !this.popupRef.instance.isOpen) {\n      return;\n    }\n    if (this.popupRef) {\n      this.popupRef.instance.selectCurrentItem($event);\n    }\n  }\n\n  @HostListener('keydown.ArrowUp', ['$event'])\n  onArrowUpKeyDown($event) {\n    if (this.popupRef) {\n      $event.preventDefault();\n      $event.stopPropagation();\n      this.popupRef.instance.prev();\n    }\n  }\n\n  @HostListener('keydown.ArrowDown', ['$event'])\n  onArrowDownKeyDown($event) {\n    if (this.popupRef) {\n      $event.preventDefault();\n      $event.stopPropagation();\n      this.popupRef.instance.next();\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  onDocumentClick($event: Event) {\n    if (this.focus) {\n      this.transInputFocusEmit.emit({\n        focus: this.focus,\n        popupRef: this.popupRef,\n      });\n    }\n\n    // TODO: sceneType为'select'时，自定义了太多处理，十分不优雅，需要合一化\n    const hostElement = this.elementRef.nativeElement;\n    if (this.popupRef && this.popupRef.instance.isOpen) {\n      if ((!hostElement.contains($event.target) && this.sceneType === 'select') || this.sceneType !== 'select') {\n        this.hidePopup();\n      }\n      if (!hostElement.contains($event.target)) {\n        this.transInputFocusEmit.emit({\n          focus: false,\n          popupRef: this.popupRef,\n        });\n      }\n    } else if (hostElement.contains($event.target) && this.sceneType !== 'select') {\n      if (!this.elementRef.nativeElement.value && !this.allowEmptyValueSearch) {\n        this.showLatestSource();\n      } else {\n        this.searchFn(this.elementRef.nativeElement.value).subscribe((source) => {\n          this.showSource(source, true, false);\n        });\n      }\n    }\n  }\n\n  public hidePopup() {\n    if (this.popupRef) {\n      this.popupRef.instance.isOpen = false;\n      removeClassFromOrigin(this.elementRef);\n      this.changeDropDownStatus.emit(false);\n      this.toggleChange.emit(false);\n    }\n  }\n\n  private fillPopup(source?, term?: string) {\n    this.position = this.positionService.position(this.elementRef.nativeElement);\n    const pop = this.popupRef.instance;\n    pop.source = source;\n    pop.maxHeight = this.maxHeight;\n    pop.term = term;\n    pop.disabledKey = this.disabledKey;\n    pop.enableLazyLoad = this.enableLazyLoad;\n    pop.disabled = this.disabled;\n    if (this.appendToBody) {\n      pop.appendToBody = true;\n      pop.origin = new CdkOverlayOrigin(this.elementRef);\n      pop.width = this.dAutoCompleteWidth ? this.dAutoCompleteWidth : this.elementRef.nativeElement.offsetWidth;\n      pop.cdkOverlayOffsetY = this.cdkOverlayOffsetY;\n    } else {\n      pop.appendToBody = false;\n    }\n    [\n      'formatter',\n      'itemTemplate',\n      'noResultItemTemplate',\n      'cssClass',\n      'dropdown',\n      'popTipsText',\n      'position',\n      'overview',\n      'showAnimation',\n    ].forEach((key) => {\n      if (this[key] !== undefined) {\n        pop[key] = this[key];\n      }\n    });\n  }\n\n  private writeInputValue(value) {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', value);\n  }\n\n  private clearInputValue() {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', '');\n  }\n\n  private unSubscription() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = null;\n    }\n  }\n\n  onTermChange(term) {\n    this.value = term;\n    if (this.popupRef) {\n      this.popupRef.instance.term = term;\n    }\n    this.onChange(term);\n  }\n\n  private registerInputEvent(elementRef: ElementRef) {\n    return fromEvent(elementRef.nativeElement, 'input').pipe(\n      map((e: any) => e.target.value),\n      filter((term) => !this.disabled && this.searchFn && term.length >= 0),\n      debounceTime(this.delay),\n      tap((term) => this.onTermChange(term)),\n      switchMap((term) => this.searchFn(term, this))\n    );\n  }\n}\n","import { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { LoadingModule } from 'ng-devui/loading';\nimport { PositioningModule } from 'ng-devui/position';\nimport { HighlightModule, LazyLoadModule } from 'ng-devui/utils';\nimport { AutoCompleteConfig } from './auto-complete-config';\nimport { AutoCompletePopupComponent } from './auto-complete-popup.component';\nimport { AutoCompleteDirective } from './auto-complete.directive';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, OverlayModule, LazyLoadModule, LoadingModule, PositioningModule, HighlightModule],\n  exports: [AutoCompleteDirective, AutoCompletePopupComponent],\n  declarations: [AutoCompleteDirective, AutoCompletePopupComponent],\n  providers: [AutoCompleteConfig],\n\n})\nexport class AutoCompleteModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}