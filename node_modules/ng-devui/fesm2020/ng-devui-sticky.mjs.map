{"version":3,"file":"ng-devui-sticky.mjs","sources":["../../devui/sticky/sticky.component.ts","../../devui/sticky/sticky.module.ts","../../devui/sticky/ng-devui-sticky.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild\n} from '@angular/core';\nimport { WindowRef } from 'ng-devui/window-ref';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { filter, throttleTime } from 'rxjs/operators';\n\nexport type StickyStatus = 'normal' | 'follow' | 'stay' | 'remain';\n\n@Component({\n  selector: 'd-sticky',\n  template: `\n    <div #stickyWrapper [style.zIndex]=\"zIndex\">\n      <ng-content></ng-content>\n    </div>\n  `,\n  preserveWhitespaces: false,\n})\nexport class StickyComponent implements OnInit, AfterViewInit, OnDestroy {\n  @HostBinding('style.position') hostPosition = 'relative';\n  @Input() zIndex: number;\n  @Input() container: Element; // 默认值父容器\n  @Input() view: {\n    top?: number;\n    bottom?: number;\n  };\n  @Input() scrollTarget;\n\n  @Output() statusChange: EventEmitter<StickyStatus> = new EventEmitter<StickyStatus>();\n  @ViewChild('stickyWrapper', { static: true }) wrapper;\n\n  _prevStatus: StickyStatus = undefined;\n  _status: StickyStatus = 'normal';\n  set status(status: StickyStatus) {\n    if (status !== this._status) {\n      this._prevStatus = this._status;\n      this._status = status;\n      this.statusChange.emit(this._status);\n      this.statusProcess(this._status);\n    }\n  }\n  get status() {\n    return this._status;\n  }\n\n  parentNode;\n  containerLeft; // 用于监听是否是横向滚动\n\n  private THROTTLE_DELAY = 16;\n  private THROTTLE_TRIGGER = 100;\n  private scrollPreStart;\n  private scrollTimer;\n  subscription: Subscription;\n\n  constructor(private el: ElementRef, private windowRef: WindowRef) { }\n\n  ngOnInit() {\n    this.parentNode = this.el.nativeElement.parentNode;\n    if (!this.container) {\n      this.container = this.parentNode;\n    }\n  }\n\n  ngAfterViewInit() {\n    this.scrollTarget = this.scrollTarget || this.windowRef.window; // window有scroll事件，document.documentElement没有scroll事件\n    this.scrollTarget.addEventListener('scroll', this.throttle);\n    this.initScrollStatus(this.scrollTarget);\n    if (this.scrollTarget !== this.windowRef.window) {\n      this.subscription = fromEvent<Event>(this.windowRef.window, 'scroll')\n        .pipe(\n          throttleTime(100, undefined, { leading: true, trailing: true }),\n          filter(\n            (event) =>\n              event.target !== this.scrollTarget &&\n              (event.target === this.windowRef.window ||\n                event.target === this.windowRef.document || // fix ie11 document.contains is not defined\n                ((<HTMLElement>event.target).contains && (<HTMLElement>event.target).contains(this.scrollTarget)))\n          )\n        )\n        .subscribe((event) => {\n          this.statusProcess(this._status);\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    this.scrollTarget.removeEventListener('scroll', this.throttle);\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  statusProcess(status) {\n    switch (status) {\n    case 'normal':\n      this.wrapper.nativeElement.style.top = 'auto';\n      this.wrapper.nativeElement.style.left = 'auto';\n      this.wrapper.nativeElement.style.position = 'static';\n      break;\n    case 'follow':\n    {\n      const viewOffset = this.scrollTarget && this.scrollTarget !== this.windowRef.window ?\n        this.scrollTarget.getBoundingClientRect().top : 0;\n      this.wrapper.nativeElement.style.top = Number(viewOffset) + ((this.view && this.view.top) || 0) + 'px';\n      this.wrapper.nativeElement.style.left = this.wrapper.nativeElement.getBoundingClientRect().left + 'px';\n      this.wrapper.nativeElement.style.position = 'fixed';\n      break;\n    }\n    case 'stay':\n    {\n      this.wrapper.nativeElement.style.top = this.calculateRelativePosition(this.wrapper.nativeElement, this.parentNode, 'top') + 'px';\n      this.wrapper.nativeElement.style.left = 'auto';\n      this.wrapper.nativeElement.style.position = 'relative';\n      break;\n    }\n    case 'remain':\n    {\n      if (this.wrapper.nativeElement.style.position !== 'fixed' || this.wrapper.nativeElement.style.position !== 'absolute') {\n        this.wrapper.nativeElement.style.top = this.calculateRelativePosition(this.wrapper.nativeElement, this.parentNode, 'top') + 'px';\n        this.wrapper.nativeElement.style.left = 'auto';\n        this.wrapper.nativeElement.style.position = 'absolute'; // 要先转为absolute再计算，否则如果处于非fixed影响计算\n      }\n      this.wrapper.nativeElement.style.top =\n            this.calculateRemainPosition(this.wrapper.nativeElement, this.parentNode, this.container) + 'px';\n      this.wrapper.nativeElement.style.left = this.calculateRelativePosition(this.wrapper.nativeElement, this.parentNode, 'left') + 'px';\n      this.wrapper.nativeElement.style.position = 'relative';\n      break;\n    }\n    default:\n      break;\n    }\n  }\n\n  @HostListener('window:resize')\n  throttle = () => {\n    const fn = this.scrollAndResizeHock;\n    const time = Date.now();\n    if (this.scrollTimer) {\n      clearTimeout(this.scrollTimer);\n    }\n    if (!this.scrollPreStart) {\n      this.scrollPreStart = time;\n    }\n    if (time - this.scrollPreStart > this.THROTTLE_TRIGGER) {\n      fn();\n      this.scrollPreStart = null;\n      this.scrollTimer = null;\n    } else {\n      this.scrollTimer = setTimeout(() => {\n        fn();\n        this.scrollPreStart = null;\n        this.scrollTimer = null;\n      }, this.THROTTLE_DELAY);\n    }\n  };\n  scrollAndResizeHock = () => {\n    if (this.container.getBoundingClientRect().left - (this.containerLeft || 0) !== 0) {\n      this.status = 'stay';\n      this.containerLeft = this.container.getBoundingClientRect().left;\n    } else {\n      this.scrollHandler();\n    }\n  };\n\n  scrollHandler = () => {\n    const viewOffsetTop = this.scrollTarget && this.scrollTarget !== this.windowRef.window ?\n      this.scrollTarget.getBoundingClientRect().top : 0;\n    const computedStyle = this.windowRef.window.getComputedStyle(this.container);\n    if (this.parentNode.getBoundingClientRect().top - viewOffsetTop > ((this.view && this.view.top) || 0)) {\n      this.status = 'normal'; // 全局滑动（container!==parentNode）时候增加预判\n    } else if (\n      this.container.getBoundingClientRect().top +\n      parseInt(computedStyle.paddingTop, 10) +\n      parseInt(computedStyle.borderTopWidth, 10) -\n      viewOffsetTop >=\n      ((this.view && this.view.top) || 0)\n    ) {\n      this.status = 'normal';\n    } else if (\n      this.container.getBoundingClientRect().bottom -\n      parseInt(computedStyle.paddingBottom, 10) -\n      parseInt(computedStyle.borderBottomWidth, 10) <\n      viewOffsetTop +\n      ((this.view && this.view.top) || 0) +\n      this.wrapper.nativeElement.getBoundingClientRect().height +\n      ((this.view && this.view.bottom) || 0)\n    ) {\n      this.status = 'remain';\n    } else if (\n      this.container.getBoundingClientRect().top + parseInt(computedStyle.paddingTop, 10) - viewOffsetTop <\n      ((this.view && this.view.top) || 0)\n    ) {\n      this.status = 'follow';\n    }\n  };\n\n  calculateRelativePosition(element, relativeElement, direction) {\n    const key = {\n      left: ['left', 'Left'],\n      top: ['top', 'Top'],\n    };\n    if (this.windowRef.window && this.windowRef.window.getComputedStyle) {\n      const computedStyle = this.windowRef.window.getComputedStyle(relativeElement);\n      return (\n        element.getBoundingClientRect()[key[direction][0]] -\n        relativeElement.getBoundingClientRect()[key[direction][0]] -\n        parseInt(computedStyle['padding' + key[direction][1]], 10) -\n        parseInt(computedStyle['border' + key[direction][1] + 'Width'], 10)\n      );\n    }\n  }\n  calculateRemainPosition(element, relativeElement, container) {\n    if (this.windowRef.window && this.windowRef.window.getComputedStyle) {\n      const computedStyle = this.windowRef.window.getComputedStyle(container);\n      const result =\n        container.getBoundingClientRect().height -\n        element.getBoundingClientRect().height +\n        container.getBoundingClientRect().top -\n        relativeElement.getBoundingClientRect().top -\n        parseInt(computedStyle['paddingTop'], 10) -\n        parseInt(computedStyle['borderTopWidth'], 10) -\n        parseInt(computedStyle['paddingBottom'], 10) -\n        parseInt(computedStyle['borderBottomWidth'], 10);\n      return result < 0 ? 0 : result;\n    }\n  }\n\n  initScrollStatus(target) {\n    const scrollTargets = target === this.windowRef.window ?\n      [this.windowRef.document.documentElement, this.windowRef.document.body] : [target];\n    let flag = false;\n    scrollTargets.forEach((scrollTarget) => {\n      if (scrollTarget.scrollTop && scrollTarget.scrollTop > 0) {\n        flag = true;\n      }\n    });\n    if (flag) {\n      setTimeout(this.scrollHandler);\n    }\n  }\n\n  /**\n   * 提供给业务自己触发\n   * 用法：\n   * 1.捕获所有sticky：```@ViewChildren(StickyComponent) stickies;```\n   * 2.触发刷新：当需要手动触发更新的时候，比如订阅数据返回后页面高度发生变化可以调用 ```stickies.forEach(sticky => sticky.recalculatePosition());```\n   * 慎用，少用， 使用太多会影响性能。\n   */\n  public recalculatePosition() {\n    this.initScrollStatus(this.scrollTarget);\n  }\n}\n// TODO: 重构梳理状态\n","import { NgModule } from '@angular/core';\nimport { WindowRefModule } from 'ng-devui/window-ref';\nimport { StickyComponent } from './sticky.component';\n\n@NgModule({\n  imports: [\n    WindowRefModule\n  ],\n  declarations: [\n    StickyComponent\n  ],\n  exports: [\n    StickyComponent,\n  ],\n})\n\nexport class StickyModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}