{"version":3,"file":"ng-devui-input-number.mjs","sources":["../../devui/input-number/input-number.component.ts","../../devui/input-number/input-number.component.html","../../devui/input-number/input-number.module.ts","../../devui/input-number/ng-devui-input-number.ts"],"sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\n\nconst INPUT_NUMBER_CONTROL_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => InputNumberComponent),\n  multi: true\n};\n\nexport type InputSizeType = '' | 'sm' | 'lg';\n\n@Component({\n  selector: 'd-input-number',\n  templateUrl: './input-number.component.html',\n  styleUrls: ['./input-number.component.scss'],\n  providers: [INPUT_NUMBER_CONTROL_VALUE_ACCESSOR],\n  preserveWhitespaces: false,\n})\n\nexport class InputNumberComponent implements ControlValueAccessor, OnChanges, OnDestroy, AfterViewInit {\n  @Input() step = 1;\n  @Input() disabled = false;\n  @Input() size: InputSizeType = '';\n  @Input() decimalLimit;\n  @Input() autoFocus = false;\n  @Input() allowEmpty = false;\n  @Input() placeholder = '';\n  @Input() maxLength = 0;\n  @Input() reg: RegExp | string;\n  @Output() afterValueChanged = new EventEmitter<number>();\n  @Output() whileValueChanging = new EventEmitter<number>();\n  @ViewChild('incButton', { static: true }) incButton: ElementRef;\n  @ViewChild('decButton', { static: true }) decButton: ElementRef;\n  @ViewChild('inputElement', { static: true }) inputElement: ElementRef;\n\n  private value: number;\n  private _min: number = Number.MIN_SAFE_INTEGER;\n  private _max: number = Number.MAX_SAFE_INTEGER;\n  private incListener: Observable<any>;\n  private decListener: Observable<any>;\n  private incAction: Subscription;\n  private decAction: Subscription;\n  disabledInc = false;\n  disabledDec = false;\n  lastEmittedValue: number;\n  lastValue: number;\n  document: Document;\n\n  @Input() set min(val) {\n    if (val || val === 0) {\n      this._min = val;\n    }\n  }\n  get min() {\n    return this._min;\n  }\n\n  @Input() set max(val) {\n    if (val || val === 0) {\n      this._max = val;\n    }\n  }\n  get max() {\n    return this._max;\n  }\n\n  private onTouchedCallback = () => {\n  };\n\n  private onChangeCallback = (v: any) => {\n  };\n\n  constructor(private cdr: ChangeDetectorRef, private el: ElementRef, private renderer: Renderer2,\n              @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this.toggleDisabled(isDisabled);\n  }\n\n  writeValue(newValue: any): void {\n    this.lastEmittedValue = newValue;\n    this.setValue(this.ensureValueInRange(newValue));\n  }\n\n  private valueMustBeValid(value: number): boolean {\n    return !isNaN(typeof value !== 'number' ? parseFloat(value) : value);\n  }\n\n  private clamp(min: number, n: number, max: number) {\n    // 兼容writeValue时的undefined\n    let currentValue = max !== undefined ? Math.min(n, max) : n;\n    currentValue = min !== undefined ? Math.max(min, currentValue) : currentValue;\n    return currentValue;\n  }\n\n  private ensureValueInRange(value: number | null | undefined): number {\n    let safeValue;\n    if (this.allowEmpty && (value === null || value === undefined)) {\n      safeValue = null;\n    } else if (!this.valueMustBeValid(value)) {\n      safeValue = 0;\n    } else {\n      let currentValue = value;\n      if (!value) {\n        currentValue = 0;\n      }\n      safeValue = this.clamp(this.min, currentValue, this.max);\n    }\n    return safeValue;\n  }\n\n  private setValue(value: number | null): void {\n    this.value = value;\n    this.lastValue = value;\n    if (this.allowEmpty && value === null) {\n      this.subscribeDecAction();\n      this.subscribeIncAction();\n    } else {\n      if (!this.canDecrease()) {\n        this.unsubscribeDecAction();\n      } else {\n        this.subscribeDecAction();\n      }\n      if (!this.canIncrease()) {\n        this.unsubscribeIncAction();\n      } else {\n        this.subscribeIncAction();\n      }\n    }\n    this.renderer.setProperty(this.inputElement.nativeElement, 'value', value);\n    this.cdr.detectChanges();\n  }\n\n  ngAfterViewInit(): void {\n    this.registerListeners();\n    this.subscribeActions();\n    setTimeout(() => {\n      this.toggleDisabled(this.disabled);\n      if (!this.disabled) {\n        if (this.autoFocus) {\n          this.el.nativeElement.click();\n          this.inputElement.nativeElement.focus();\n        }\n      }\n    });\n    this.el.nativeElement.addEventListener('click', this.registerBlurListener.bind(this));\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (Object.prototype.hasOwnProperty.call(changes, 'min') || Object.prototype.hasOwnProperty.call(changes, 'max')) {\n      this.checkRangeValues(this.min, this.max);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribeActions();\n  }\n\n  registerListeners() {\n    if (this.incButton && this.incButton.nativeElement) {\n      this.incListener = fromEvent(this.incButton.nativeElement, 'click');\n    }\n    if (this.decButton && this.decButton.nativeElement) {\n      this.decListener = fromEvent(this.decButton.nativeElement, 'click');\n    }\n  }\n\n  subscribeActions() {\n    this.subscribeIncAction();\n    this.subscribeDecAction();\n  }\n\n  subscribeIncAction() {\n    if (this.incListener && !this.incAction) {\n      this.incAction = this.incListener.subscribe(this.increaseValue.bind(this));\n      this.disabledInc = false;\n    }\n  }\n\n  subscribeDecAction() {\n    if (this.decListener && !this.decAction) {\n      this.decAction = this.decListener.subscribe(this.decreaseValue.bind(this));\n      this.disabledDec = false;\n    }\n  }\n\n  unsubscribeActions() {\n    this.unsubscribeIncAction();\n    this.unsubscribeDecAction();\n  }\n\n  unsubscribeIncAction() {\n    if (this.incListener && this.incAction) {\n      this.incAction.unsubscribe();\n      this.incAction = null;\n      this.disabledInc = true;\n    }\n  }\n\n  unsubscribeDecAction() {\n    if (this.incListener && this.decAction) {\n      this.decAction.unsubscribe();\n      this.decAction = null;\n      this.disabledDec = true;\n    }\n  }\n\n  private increaseValue() {\n    this.inDecreaseValue('increase');\n  }\n\n  private decreaseValue() {\n    this.inDecreaseValue('decrease');\n  }\n\n  private inDecreaseValue(type: string) {\n    const canContinue = type === 'increase' ? this.canIncrease() : this.canDecrease();\n    if (canContinue) {\n      if (this.allowEmpty && (this.value === null || this.value === undefined)) {\n        this.updateValue(0);\n      } else {\n        const decimals = this.getMaxDecimals(this.value);\n        const floatValue = type === 'increase' ? (this.value + this.step) : (this.value - this.step);\n        if (this.matchReg(String(floatValue))) {\n          this.updateValue(parseFloat(floatValue.toFixed(decimals)));\n        }\n      }\n      this.inputElement.nativeElement.focus();\n    }\n  }\n\n  private matchReg(value) {\n    if (this.reg && !value.match(new RegExp(this.reg))) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  private canIncrease() {\n    if (this.allowEmpty && (this.value === null || this.value === undefined)) {\n      return (this.min + this.step) <= this.max;\n    } else {\n      return (this.value + this.step) <= this.max;\n    }\n  }\n\n  private canDecrease() {\n    if (this.allowEmpty && (this.value === null || this.value === undefined)) {\n      return (this.min + this.step) <= this.max;\n    } else {\n      return (this.value - this.step) >= this.min;\n    }\n  }\n\n  private toggleDisabled(disabled: boolean) {\n    if (disabled) {\n      this.unsubscribeActions();\n    } else {\n      this.subscribeActions();\n    }\n  }\n\n  ensureValueIsValid(event: Event) {\n    event.stopPropagation();\n    if (this.disabled) {\n      return;\n    }\n    const newValue = event.target['value'];\n    const parseValue = parseFloat(newValue as string);\n    let result;\n    if (this.allowEmpty && newValue === '') {\n      result = null;\n    } else if (!isNaN(parseValue)) {\n      result = parseValue;\n    } else {\n      result = this.value;\n    }\n    result = this.ensureValueInRange(result);\n    this.notifyWhileValueChanging(result);\n    this.updateValue(result);\n  }\n\n  private checkRangeValues(minValue, maxValue) {\n    if (maxValue < minValue) {\n      throw new Error(`max value must be greater than or equal to min value`);\n    }\n  }\n\n  private getDecimals(value: number): number {\n    const valueString = value.toString();\n    const integerLength = valueString.indexOf('.') + 1;\n    return valueString.length - integerLength;\n  }\n\n  private getMaxDecimals(currentValue) {\n    const stepPrecision = this.getDecimals(this.step);\n    const currentValuePrecision = this.getDecimals(currentValue as number);\n    if (!currentValue) {\n      return stepPrecision;\n    }\n    if (this.decimalLimit !== undefined && this.decimalLimit !== null) {\n      return this.decimalLimit;\n    }\n    return Math.max(currentValuePrecision, stepPrecision);\n  }\n\n  handleKeyDown(event: KeyboardEvent) {\n    this.handleBackspace(event);\n    this.keyBoardControl(event);\n  }\n\n  protectInput(event: Event) {\n    if (this.disabled) {\n      return;\n    }\n    let value = event.target['value'];\n    let input;\n    let selectionStart = event.target['selectionStart'];\n    let selectionEnd = event.target['selectionEnd'];\n    if (event['clipboardData']) {\n      input = event['clipboardData'].getData('text');\n      value = value.substring(0, selectionStart) + input + value.substring(selectionEnd);\n      event.preventDefault();\n    } else {\n      input = event['data'];\n      if (input === undefined || input === null) {\n        return;\n      }\n      selectionStart = selectionStart - input.length;\n      selectionEnd = selectionEnd - input.length;\n    }\n    if (this.maxLength && value.length > this.maxLength) {\n      this.setValue(this.lastValue);\n      return;\n    }\n    if (!this.matchReg(value)) {\n      this.setValue(this.lastValue);\n      return;\n    } else if (\n      value === '-' || value.match(/^\\s*(-|\\+)?\\d+\\.$/) || value.match(/^\\s*(-|\\+)?\\d+\\.[0-9]*0$/) || value.match(/^\\s*(-|\\+)0+$/)\n    ) {\n      // indeterminate state\n      return;\n    } else if (value.match(/^\\s*(-|\\+)?(\\d+|(\\d*(\\.\\d*)))$/)) {\n\n      if (this.decimalLimit !== undefined && this.decimalLimit !== null) {\n        value = parseFloat(value).toFixed(this.decimalLimit);\n      }\n      value = parseFloat(value as string);\n      if (!isNaN(value)) {\n        this.setValue(value);\n        this.notifyWhileValueChanging(value);\n        // updateValue会使输入游标跳到最后，这里设置输入游标归位\n        if (input !== null) {\n          setTimeout(() => {\n            event.target['setSelectionRange'](selectionStart + input.length, selectionStart + input.length);\n          }, 0);\n        }\n        return;\n      }\n    } else {\n      this.setValue(this.value);\n      setTimeout(() => {\n        event.target['setSelectionRange'](selectionStart, selectionStart);\n      }, 0);\n    }\n  }\n\n  private notifyValueChange() {\n    this.afterValueChanged.emit(this.value);\n    this.onChangeCallback(this.value);\n  }\n\n  private notifyWhileValueChanging(value) {\n    this.whileValueChanging.emit(value);\n  }\n\n  private updateValue(value) {\n    if (this.disabled) {\n      return;\n    }\n    this.setValue(value);\n    if (this.lastEmittedValue !== value) {\n      this.lastEmittedValue = value;\n      this.notifyValueChange();\n    }\n  }\n\n  handleBackspace(event: KeyboardEvent) {\n    if (event['key'] === 'Backspace') {\n      const oldValue = event.target['value'];\n      const selectionStart = event.target['selectionStart'];\n      const selectionEnd = event.target['selectionEnd'];\n      let newValue = oldValue.substring(0, selectionStart - 1) + oldValue.substring(selectionEnd);\n      if (newValue !== '-' && !newValue.match(/^\\s*(-|\\+)?\\d+\\.$/)) {\n        newValue = newValue === '' ? null : newValue;\n        this.notifyWhileValueChanging(newValue);\n      }\n    }\n  }\n\n  keyBoardControl(event: KeyboardEvent) {\n    const key = event['key'];\n    if (key === 'ArrowUp' || key === 'Up') {\n      event.preventDefault();\n      this.increaseValue();\n    } else if (key === 'ArrowDown' || key === 'Down') {\n      event.preventDefault();\n      this.decreaseValue();\n    } else if (key === 'Enter') {\n      this.inputElement.nativeElement.blur();\n    }\n  }\n\n  registerBlurListener() {\n    this.document.addEventListener('click', this.emitBlurEvent.bind(this), {\n      capture: true,\n      once: true,\n    });\n  }\n\n  emitBlurEvent(event: MouseEvent) {\n    if (!this.disabled && this.el.nativeElement !== event.target && !this.el.nativeElement.contains(event.target)) {\n      const blurEvt = this.document.createEvent('Event');\n      blurEvt.initEvent('blur', false, true);\n      this.el.nativeElement.dispatchEvent(blurEvt);\n      this.onTouchedCallback();\n    }\n  }\n}\n","<div\n  class=\"input-control-buttons\"\n  [ngClass]=\"{\n    disabled: disabled,\n    'devui-input-number-lg': size === 'lg',\n    'devui-input-number-sm': size === 'sm'\n  }\"\n>\n  <span class=\"input-control-button input-control-inc\" [ngClass]=\"{ disabled: disabledInc }\" #incButton>\n    <svg\n      class=\"devui-svg-icon-arrow\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    >\n      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M12.1464466,6.85355339 L8.35355339,10.6464466 C8.15829124,10.8417088 7.84170876,10.8417088 7.64644661,10.6464466 L3.85355339,6.85355339 C3.65829124,6.65829124 3.65829124,6.34170876 3.85355339,6.14644661 C3.94732158,6.05267842 4.07449854,6 4.20710678,6 L11.7928932,6 C12.0690356,6 12.2928932,6.22385763 12.2928932,6.5 C12.2928932,6.63260824 12.2402148,6.7597852 12.1464466,6.85355339 Z\"\n          fill-rule=\"nonzero\"\n        ></path>\n      </g>\n    </svg>\n  </span>\n  <span class=\"input-control-button input-control-dec\" [ngClass]=\"{ disabled: disabledDec }\" #decButton>\n    <svg\n      class=\"devui-svg-icon-arrow\"\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    >\n      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M12.1464466,6.85355339 L8.35355339,10.6464466 C8.15829124,10.8417088 7.84170876,10.8417088 7.64644661,10.6464466 L3.85355339,6.85355339 C3.65829124,6.65829124 3.65829124,6.34170876 3.85355339,6.14644661 C3.94732158,6.05267842 4.07449854,6 4.20710678,6 L11.7928932,6 C12.0690356,6 12.2928932,6.22385763 12.2928932,6.5 C12.2928932,6.63260824 12.2402148,6.7597852 12.1464466,6.85355339 Z\"\n          fill-rule=\"nonzero\"\n        ></path>\n      </g>\n    </svg>\n  </span>\n</div>\n<div\n  class=\"input-container\"\n  [ngClass]=\"{\n    'devui-input-number-lg': size === 'lg',\n    'devui-input-number-sm': size === 'sm'\n  }\"\n>\n  <input\n    class=\"input-box devui-input\"\n    [ngClass]=\"{ disabled: disabled }\"\n    [placeholder]=\"placeholder\"\n    [attr.readonly]=\"disabled ? '' : null\"\n    (keydown)=\"handleKeyDown($event)\"\n    (input)=\"protectInput($event)\"\n    (blur)=\"ensureValueIsValid($event)\"\n    (paste)=\"protectInput($event)\"\n    #inputElement\n  />\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { InputNumberComponent } from './input-number.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule\n  ],\n  exports: [InputNumberComponent],\n  declarations: [InputNumberComponent],\n  providers: [],\n})\n\nexport class InputNumberModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}