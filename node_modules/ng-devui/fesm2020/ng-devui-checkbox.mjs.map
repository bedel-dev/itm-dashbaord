{"version":3,"file":"ng-devui-checkbox.mjs","sources":["../../devui/checkbox/checkbox.component.ts","../../devui/checkbox/checkbox.component.html","../../devui/checkbox/checkbox-group.component.ts","../../devui/checkbox/checkbox-group.component.html","../../devui/checkbox/checkbox.module.ts","../../devui/checkbox/ng-devui-checkbox.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  TemplateRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DevConfigService, WithConfig } from 'ng-devui/utils';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'd-checkbox',\n  templateUrl: './checkbox.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./checkbox.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => CheckBoxComponent),\n      multi: true,\n    },\n  ],\n  preserveWhitespaces: false,\n})\nexport class CheckBoxComponent implements ControlValueAccessor, OnChanges {\n  static ID_SEED = 0;\n  @Input() name: string;\n  @Input() label: string;\n  @Input() cssClass: string;\n  @Input() color;\n  @Input() disabled = false;\n  @Input() isShowTitle = true;\n  @Input() title;\n  @Input() labelTemplate: TemplateRef<any>;\n  @Input() halfchecked = false;\n  @Input() @WithConfig() showAnimation = true;\n  @Input() beforeChange: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @Output() change: EventEmitter<boolean> = new EventEmitter<boolean>();\n  public animationUnlocked = false;\n  public id: number;\n  public checked: boolean;\n  private onChange = (_: any) => null;\n  private onTouch = () => null;\n\n  constructor(\n    private changeDetectorRef: ChangeDetectorRef,\n    private devConfigService: DevConfigService\n  ) {\n    this.id = CheckBoxComponent.ID_SEED++;\n  }\n\n  writeValue(checked: any): void {\n    if (this.animationUnlocked || checked !== null) {\n      this.checked = !!checked;\n      this.changeDetectorRef.markForCheck();\n      this.unlockAnimation();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouch = fn;\n  }\n\n  toggle($event) {\n    this.canChange().then((val) => {\n      if (this.disabled || !val) {\n        return;\n      }\n      this.checked = !this.checked;\n      this.onChange(this.checked);\n      this.change.next(this.checked);\n      this.onTouch();\n    });\n  }\n\n  private unlockAnimation() {\n    if (!this.animationUnlocked) {\n      setTimeout(() => {\n        this.animationUnlocked = true;\n      }, 0);\n    }\n  }\n\n  canChange() {\n    let changeResult = Promise.resolve(true);\n\n    if (this.beforeChange) {\n      const result: any = this.beforeChange(this.label);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          changeResult = result;\n        } else if (result.subscribe) {\n          changeResult = (result as Observable<boolean>).toPromise();\n        } else {\n          changeResult = Promise.resolve(result);\n        }\n      }\n    }\n\n    return changeResult;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (Object.prototype.hasOwnProperty.call(changes, 'halfchecked')) {\n      this.unlockAnimation();\n    }\n  }\n}\n","<div\n  class=\"devui-checkbox {{ cssClass }}\"\n  [ngClass]=\"{\n    active: checked,\n    halfchecked: halfchecked,\n    disabled: disabled,\n    unchecked: !checked\n  }\"\n>\n  <label title=\"{{ isShowTitle ? title || label : '' }}\" (click)=\"toggle($event)\">\n    <input\n      [name]=\"name || 'checkbox-' + id\"\n      class=\"devui-checkbox-input\"\n      type=\"checkbox\"\n      [checked]=\"checked\"\n      [disabled]=\"disabled\"\n      [indeterminate]=\"halfchecked\"\n      (click)=\"$event.stopPropagation()\"\n      (change)=\"$event.stopPropagation()\"\n    />\n    <span\n      class=\"devui-checkbox-material\"\n      [ngStyle]=\"{\n        'border-color': (checked || halfchecked) && color ? color : '',\n        'background-image': (color && halfchecked) || color ? 'linear-gradient(' + color + ', ' + color + ')' : '',\n        'background-color': color && halfchecked ? color : ''\n      }\"\n      [ngClass]=\"{\n        'custom-color': color,\n        'devui-checkbox-no-label': !label && !labelTemplate,\n        'devui-no-animation': !showAnimation || !animationUnlocked,\n        'devui-checkbox-default-background': !halfchecked\n      }\"\n    >\n      <span class=\"devui-checkbox-halfchecked-bg\"></span>\n      <svg\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        class=\"devui-checkbox-tick\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <polygon\n            fill-rule=\"nonzero\"\n            points=\"5.17391304 6.56521739 7.7173913 9.10869565 11.826087 5 13 6.17391304 7.7173913 11.4565217 4 7.73913043\"\n            class=\"devui-tick\"\n            [ngClass]=\"{\n              'devui-no-animation': !showAnimation || !animationUnlocked\n            }\"\n          ></polygon>\n        </g>\n      </svg>\n    </span>\n    <ng-template [ngIf]=\"!!label && !labelTemplate\">{{ label }}</ng-template>\n    <ng-template\n      [ngIf]=\"!!labelTemplate\"\n      [ngTemplateOutlet]=\"labelTemplate\"\n      [ngTemplateOutletContext]=\"{ $implicit: this, checked: checked, halfchecked: halfchecked, disabled: disabled, label: label }\"\n    >\n    </ng-template>\n  </label>\n</div>\n","import {\n  Component,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  TemplateRef\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  NG_VALUE_ACCESSOR\n} from '@angular/forms';\nimport { DevConfigService, WithConfig } from 'ng-devui/utils';\nimport { isArray } from 'lodash-es';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'd-checkbox-group',\n  templateUrl: './checkbox-group.component.html',\n  styleUrls: ['./checkbox-group.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => CheckBoxGroupComponent),\n    multi: true\n  }],\n  preserveWhitespaces: false,\n})\nexport class CheckBoxGroupComponent implements OnChanges, ControlValueAccessor {\n  static ID_SEED = 0;\n\n  @Input() name: string;\n  @Input() itemWidth: number;\n  @Input() color;\n  @Input() direction: 'row' | 'column' = 'column';\n  @Input() isShowTitle = true;\n  @Input() disabled = false;\n  @Input() options = [];\n  @Input() filterKey: string;\n  @Input() labelTemplate: TemplateRef<any>;\n  @Input() @WithConfig() showAnimation = true;\n  @Input() beforeChange: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @Output() change: EventEmitter<boolean> = new EventEmitter<boolean>();\n  values: any[] = [];\n  options_display = [];\n  private onChange = (_: any) => null;\n  private onTouch = () => null;\n  constructor(\n    private devConfigService: DevConfigService\n  ) {\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['options']) {\n      this.checkType();\n    }\n  }\n\n  checkType() {\n    this.options_display = [];\n    const checkedArray = [];\n    this.values.forEach(item => {\n      if (this.filterKey && item[this.filterKey]) {\n        checkedArray[item[this.filterKey]] = true;\n      } else {\n        checkedArray[item] = true;\n      }\n    });\n    this.options.forEach(item => {\n      const option = { isChecked: false };\n      option['value'] = item;\n      if (this.filterKey && item[this.filterKey]) {\n        if (checkedArray[item[this.filterKey]]) {\n          option['isChecked'] = true;\n        }\n      } else {\n        if (checkedArray[item]) {\n          option['isChecked'] = true;\n        }\n      }\n      this.options_display.push(option);\n    });\n  }\n\n  writeValue(inputArray: any): void {\n    if (inputArray && isArray(inputArray)) {\n      this.values = inputArray;\n      this.checkType();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouch = fn;\n  }\n\n  toggle($event, i) {\n    this.onChange(this.getCheckedArray());\n    this.onTouch();\n    this.change.next(this.options_display[i]);\n  }\n\n  getCheckedArray() {\n    const checkedArray = [];\n    this.options_display.forEach(item => {\n      if (item.isChecked) {\n        checkedArray.push(item.value);\n      }\n    });\n    return checkedArray;\n  }\n}\n","<div class=\"devui-checkbox-group\">\n  <ul [class.devui-checkbox-list-inline]=\"direction === 'row'\">\n    <li\n      *ngFor=\"let item of options_display; let i = index\"\n      [class.devui-checkbox-column-margin]=\"direction === 'column'\"\n      [ngStyle]=\"{ 'width.px': itemWidth }\"\n      [ngClass]=\"{ 'devui-checkbox-wrap': itemWidth !== undefined }\"\n    >\n      <span>\n        <d-checkbox\n          [name]=\"name\"\n          [label]=\"item['value'][filterKey] ? item['value'][filterKey] : item['value']\"\n          [(ngModel)]=\"item['isChecked']\"\n          [isShowTitle]=\"isShowTitle\"\n          [color]=\"color\"\n          [disabled]=\"this.disabled ? true : item['value']['disabled']\"\n          [labelTemplate]=\"labelTemplate\"\n          [showAnimation]=\"showAnimation\"\n          (ngModelChange)=\"toggle($event, i)\"\n          [beforeChange]=\"beforeChange\"\n        >\n        </d-checkbox>\n      </span>\n    </li>\n  </ul>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CheckBoxGroupComponent } from './checkbox-group.component';\nimport { CheckBoxComponent } from './checkbox.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule],\n  exports: [CheckBoxComponent, CheckBoxGroupComponent],\n  declarations: [CheckBoxComponent, CheckBoxGroupComponent],\n  providers: [],\n})\nexport class CheckBoxModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}