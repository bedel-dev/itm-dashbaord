{"version":3,"file":"ng-devui-data-table.mjs","sources":["../../devui/data-table/data-table.token.ts","../../devui/data-table/data-table-row.token.ts","../../devui/data-table/force-update-reason.model.ts","../../devui/data-table/editor-host.directive.ts","../../devui/data-table/tmpl/data-table-cell-edit-tmpl.component.ts","../../devui/data-table/tmpl/data-table-cell-view-tmpl.component.ts","../../devui/data-table/tmpl/data-table-head-cell-tmpl.component.ts","../../devui/data-table/tmpl/data-table-column-tmpl.component.ts","../../devui/data-table/display-cell-value.pipe.ts","../../devui/data-table/data-table-cell.component.ts","../../devui/data-table/data-table-cell.component.html","../../devui/data-table/data-table-row.component.ts","../../devui/data-table/data-table-row.component.html","../../devui/data-table/data-table-body.component.ts","../../devui/data-table/data-table-body.component.html","../../devui/data-table/data-table.model.ts","../../devui/data-table/table/head/th/th.token.ts","../../devui/data-table/table/head/th/sort/sort.component.ts","../../devui/data-table/table/head/th/sort/sort.component.html","../../devui/data-table/table/head/th/filter/filter.component.ts","../../devui/data-table/table/head/th/filter/filter.component.html","../../devui/data-table/table/head/th/th.component.ts","../../devui/data-table/table/head/th/th.component.html","../../devui/data-table/data-table-head.component.ts","../../devui/data-table/data-table-head.component.html","../../devui/data-table/table/body/tbody.component.ts","../../devui/data-table/table/body/tbody.component.html","../../devui/data-table/table/row/tr.component.ts","../../devui/data-table/table/row/tr.component.html","../../devui/data-table/table/head/thead.component.ts","../../devui/data-table/table/head/thead.component.html","../../devui/data-table/data-table.component.ts","../../devui/data-table/data-table.component.html","../../devui/data-table/table/body/td/td.service.ts","../../devui/data-table/table/body/td/td.component.ts","../../devui/data-table/table/body/td/td.component.html","../../devui/data-table/tmpl/data-table-cell-tmpl.component.ts","../../devui/data-table/data-table.module.ts","../../devui/data-table/utils/utils.ts","../../devui/data-table/ng-devui-data-table.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const DATA_TABLE = new InjectionToken('DATA_TABLE');\n","import { InjectionToken } from '@angular/core';\n\nexport const DATA_TABLE_ROW = new InjectionToken('DATA_TABLE_ROW');\n","export enum ForceUpdateReason {\n  RowUpdate\n}\n","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[dEditorHost]',\n})\nexport class EditorDirective {\n  constructor(public viewContainerRef: ViewContainerRef) { }\n}\n","import { ChangeDetectionStrategy, Component, ContentChild, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'd-cell-edit',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableCellEditTmplComponent {\n\n  @ContentChild(TemplateRef) template: TemplateRef<any>;\n\n  dataPicker;\n}\n","import { ChangeDetectionStrategy, Component, ContentChild, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'd-cell',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableCellViewTmplComponent {\n\n  @ContentChild(TemplateRef) template: TemplateRef<any>;\n\n}\n","import { ChangeDetectionStrategy, Component, ContentChild, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'd-head-cell',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableHeadCellTmplComponent {\n\n  @ContentChild(TemplateRef) template: TemplateRef<any>;\n\n}\n","import {\n  ChangeDetectionStrategy, Component, ContentChild, EventEmitter, Input, OnChanges,\n  OnDestroy, OnInit, Output, SimpleChanges, TemplateRef\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { FilterConfig } from '../data-table.model';\nimport { DataTableCellEditTmplComponent } from './data-table-cell-edit-tmpl.component';\nimport { DataTableCellViewTmplComponent } from './data-table-cell-view-tmpl.component';\nimport { DataTableHeadCellTmplComponent } from './data-table-head-cell-tmpl.component';\n\n@Component({\n  selector: 'd-column',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableColumnTmplComponent implements OnChanges, OnDestroy, OnInit {\n  @Input() advancedHeader: Array<{\n    header: string;\n    rowspan: number;\n    colspan: number;\n    [prop: string]: any;\n  }>;\n\n  @Input() maxWidth: string;\n  @Input() minWidth: string;\n  @Input() field: string;\n  @Input() header: string;\n  @Input() sortable: boolean;\n  @Input() editable: boolean;\n  @Input() filterable: boolean;\n  @Input() closeFilterWhenScroll: boolean;\n  @Input() cellClass: string;\n  @Input() nestedColumnIndent = 16;\n  @Input() width: string;\n  // @Input() fixed?: boolean;\n  @Input() fixedLeft?: string;\n  @Input() fixedRight?: string;\n  @Input() extraOptions: any;\n  @Input() order: number = Number.MAX_VALUE;\n  @Input() nestedColumn = false;\n  /**\n* 传入筛选列表\n*/\n  @Input() filterList: Array<FilterConfig>;\n  @Output() filterChange = new EventEmitter<FilterConfig[]>();\n  @Output() filterToggle = new EventEmitter<{\n    isOpen: boolean;\n    checklist: FilterConfig[];\n  }>();\n  @Input() filterMultiple = true;\n  @Input() filterIconActive: boolean;\n  @Input() filterBoxWidth: any;\n  @Input() filterBoxHeight: any;\n  @Input() beforeFilter: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @ContentChild(DataTableCellViewTmplComponent) cellCmp: DataTableCellViewTmplComponent;\n  @ContentChild(DataTableCellEditTmplComponent) cellEditCmp: DataTableCellEditTmplComponent;\n  @ContentChild(DataTableHeadCellTmplComponent) headCellTmpl: DataTableHeadCellTmplComponent;\n  @Input() customFilterTemplate: TemplateRef<any>;\n  @Input() extraFilterTemplate: TemplateRef<any>;\n  @Input() searchFn: (term: string) => Observable<Array<any>>;\n  orderChange = new EventEmitter<SimpleChanges>();\n  widthChange = new EventEmitter<SimpleChanges>();\n  _formatter: (item: any, row?: any) => string;\n\n  // 鼠标是否移动到当前表头单元格\n  selected = false;\n\n  // @deprecated\n  @Input() fieldType = 'text';\n\n  constructor() {\n\n  }\n  ngOnInit(): void {}\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['order']) {\n      this.orderChange.emit(changes['order'].currentValue);\n    }\n\n    if (changes['width']) {\n      this.widthChange.emit(changes['width'].currentValue);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.orderChange.unsubscribe();\n  }\n\n  // column.extraOptions?.dateFormat\n\n  emitFilterData(filterData) {\n    this.filterChange.emit(filterData);\n  }\n\n  emitFilterToggle(data: {\n    isOpen: boolean;\n    checklist: FilterConfig[];\n  }) {\n    this.filterToggle.emit(data);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { formatDate } from 'ng-devui/utils';\nimport type { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Pipe({ name: 'disPlayCellValuePipe' })\nexport class DisPlayCellValuePipe implements PipeTransform {\n  datePicker = {\n    format: {\n      date: 'y/MM/dd',\n      time: 'y/MM/dd HH:mm'\n    }\n  };\n\n  constructor() { }\n  transform(rowItem, rowIndex, column: DataTableColumnTmplComponent): any {\n    if (!column || !column.field) {\n      return null;\n    }\n\n    if (column.field === '$index') {\n      return rowIndex + 1;\n    }\n\n    const cellItem = rowItem[column.field];\n\n    switch (column.fieldType) {\n    case 'date': {\n      let pattern;\n      if (column.extraOptions && column.extraOptions.dateFormat) {\n        pattern = column.extraOptions.dateFormat;\n      } else {\n        pattern = column.extraOptions && column.extraOptions.showTime ?\n          this.datePicker.format.time : this.datePicker.format.date;\n      }\n      return cellItem ? formatDate(new Date(cellItem), pattern) : '';\n    }\n    case 'select':\n    case 'treeSelect':\n      if (column.extraOptions && column.extraOptions.multiple) {\n        if (cellItem && cellItem.length > 0) {\n          let displayValue;\n          if (column.extraOptions.filterKey) {\n            displayValue = cellItem.map(item => item[column.extraOptions.filterKey]).join(';');\n          } else {\n            displayValue = cellItem.join(';');\n          }\n          return displayValue;\n        } else {\n          return '--';\n        }\n      } else {\n        let displayValue;\n        if (column.extraOptions && column.extraOptions.filterKey) {\n          displayValue = cellItem ? cellItem[column.extraOptions.filterKey] : cellItem;\n        } else {\n          displayValue = cellItem;\n        }\n        return displayValue === 0 ? 0 : (displayValue || '--');\n      }\n    default:\n      if (cellItem === null || cellItem === undefined || cellItem === '') {\n        return '--';\n      } else {\n        return cellItem;\n      }\n    }\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ComponentFactoryResolver,\n  ElementRef,\n  HostBinding,\n  Inject,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChange,\n  ViewChild\n} from '@angular/core';\nimport { InputNumberComponent } from 'ng-devui/input-number';\nimport { SelectComponent } from 'ng-devui/select';\nimport { TreeSelectComponent } from 'ng-devui/tree-select';\nimport { stopPropagationIfExist } from 'ng-devui/utils';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { DATA_TABLE_ROW } from './data-table-row.token';\nimport { DATA_TABLE } from './data-table.token';\nimport { EditorDirective } from './editor-host.directive';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Component({\n  selector: 'd-data-table-cell,[dDataTableCell]',\n  templateUrl: './data-table-cell.component.html',\n  preserveWhitespaces: false,\n})\nexport class DataTableCellComponent implements OnInit, OnChanges, OnDestroy {\n  @ViewChild(EditorDirective) editorHost: EditorDirective;\n  @Input() rowIndex: number;\n  @Input() colIndex: number;\n  @Input() column: DataTableColumnTmplComponent;\n  @Input() rowItem: any;\n  @Input() editModel: string;\n  @Input() isEditRow: boolean;\n  @Input() timeout: number;\n  @Input() tableLevel: number;\n\n  @HostBinding('class.editable-cell') get isEditable() {\n    return this.column.editable && !this.isCellEdit && this.column.extraOptions?.editableTip !== 'btn';\n  }\n  isCellEdit: boolean;\n  forceUpdateSubscription: Subscription;\n  documentClickSubscription: Subscription;\n  tdMousedownSubscription: Subscription;\n  tdMouseupSubscription: Subscription;\n  clickInTd: boolean;\n  cellEditorClickSubscription: Subscription;\n  cellActionSubscription: Subscription;\n  clickCount = 0; // 记录点击次数\n  timeoutId; // 延时id\n  fieldEditDenied: boolean;\n  templateEditorActive: boolean; // 通过模板生成的编辑控件激活\n  dynamicEditorActive: boolean; // 动态生成的编辑控件激活\n\n  constructor(@Inject(DATA_TABLE) public dt: any, private changeDetectorRef: ChangeDetectorRef,\n              private componentFactoryResolver: ComponentFactoryResolver,\n              @Inject(DATA_TABLE_ROW) public rowComponent: any, private cellRef: ElementRef, private ngZone: NgZone) {\n\n  }\n\n  ngOnInit(): void {\n    this.forceUpdateSubscription = this.rowComponent.forceUpdateEvent.subscribe(_ => this.forceUpdate());\n    if (this.column.editable) {\n      this.tdMousedownSubscription = fromEvent(this.cellRef.nativeElement, 'mousedown').subscribe(event => {\n        this.clickInTd = true;\n      });\n\n      this.tdMouseupSubscription = fromEvent(this.cellRef.nativeElement, 'mouseup').subscribe(event => {\n        this.clickInTd = false;\n      });\n    }\n    this.ngZone.runOutsideAngular(() => {\n      this.cellRef.nativeElement.addEventListener(\n        'click',\n        this.onCellClick.bind(this)\n      );\n      this.cellRef.nativeElement.addEventListener(\n        'dblclick',\n        this.onCellDBClick.bind(this)\n      );\n    });\n  }\n\n  ngOnChanges(changes: { [propKey: string]: SimpleChange }) {\n    const rowItem = changes['rowItem'];\n    if (rowItem) {\n      this.updateEditable(rowItem);\n    }\n  }\n\n  updateEditable(rowItem) {\n    const currentConfig = rowItem.currentValue['$editDeniedConfig'];\n    if (!currentConfig) {\n      if (this.fieldEditDenied) {\n        this.fieldEditDenied = false;\n      }\n    } else {\n      const index = currentConfig.findIndex((config: string) => {\n        return config === this.column.field;\n      });\n      if (index === -1) {\n        if (this.fieldEditDenied) {\n          this.fieldEditDenied = false;\n        }\n      } else {\n        if (!this.fieldEditDenied) {\n          this.fieldEditDenied = true;\n        }\n      }\n    }\n  }\n\n  onCellClick($event) {\n    const cellSelectedEventArg = {\n      rowIndex: this.rowIndex,\n      colIndex: this.colIndex,\n      column: this.column,\n      rowItem: this.rowItem,\n      cellComponent: this,\n      rowComponent: this.rowComponent\n    };\n\n    this.clickCount++;\n    if (this.clickCount === 1) {\n      this.timeoutId = setTimeout(() => {\n        if (this.clickCount === 1) {\n          this.dt.onCellClick(cellSelectedEventArg);\n        }\n        this.clickCount = 0;\n        clearTimeout(this.timeoutId);\n      }, this.timeout);\n    }\n  }\n\n  onCellDBClick($event) {\n    const cellSelectedEventArg = {\n      rowIndex: this.rowIndex,\n      colIndex: this.colIndex,\n      column: this.column,\n      rowItem: this.rowItem,\n      cellComponent: this,\n      rowComponent: this.rowComponent\n    };\n    this.dt.onCellDBClick(cellSelectedEventArg);\n  }\n\n  forceUpdate() {\n    this.changeDetectorRef.markForCheck();\n  }\n\n  finishCellEdit($event?: Event) {\n    if (this.editModel !== 'cell') {\n      return;\n    }\n\n    this.isCellEdit = false;\n    this.editorHost.viewContainerRef.clear();\n    this.dynamicEditorActive = false;\n    this.templateEditorActive = false;\n\n    if (this.documentClickSubscription) {\n      this.unSubscription(this.documentClickSubscription);\n    }\n\n    if (this.cellEditorClickSubscription) {\n      this.unSubscription(this.cellEditorClickSubscription);\n    }\n    stopPropagationIfExist($event);\n\n    this.dt.onCellEditEnd({\n      rowIndex: this.rowIndex,\n      colIndex: this.colIndex,\n      column: this.column,\n      rowItem: this.rowItem,\n      cellComponent: this,\n      rowComponent: this.rowComponent\n    });\n  }\n\n  isCellEditEnable(column, rowItem) {\n    if (this.editModel === 'cell') {\n      return this.isCellEdit;\n    }\n\n    return this.isEditRow;\n  }\n\n  ngOnDestroy(): void {\n    if (this.forceUpdateSubscription) {\n      this.unSubscription(this.forceUpdateSubscription);\n    }\n\n    if (this.documentClickSubscription) {\n      this.unSubscription(this.documentClickSubscription);\n    }\n\n    if (this.cellEditorClickSubscription) {\n      this.unSubscription(this.cellEditorClickSubscription);\n    }\n\n    if (this.cellActionSubscription) {\n      this.unSubscription(this.cellActionSubscription);\n    }\n    if (this.tdMousedownSubscription) {\n      this.unSubscription(this.tdMousedownSubscription);\n    }\n    if (this.tdMouseupSubscription) {\n      this.unSubscription(this.tdMouseupSubscription);\n    }\n  }\n\n  private unSubscription(sbscription: Subscription) {\n    if (sbscription) {\n      sbscription.unsubscribe();\n      /* eslint-disable-next-line no-param-reassign */\n      sbscription = null;\n    }\n  }\n\n  creatCellEditor() {\n    let componentFactory;\n    let editorComponent;\n    switch (this.column.fieldType) {\n    case 'number':\n      editorComponent = InputNumberComponent;\n      break;\n    case 'select':\n      editorComponent = SelectComponent;\n      break;\n    case 'treeSelect':\n      editorComponent = TreeSelectComponent;\n      break;\n    default:\n      this.templateEditorActive = true;\n      break;\n    }\n\n    if (editorComponent) {\n      componentFactory = this.componentFactoryResolver.resolveComponentFactory(editorComponent);\n      const viewContainerRef = this.editorHost.viewContainerRef;\n      viewContainerRef.clear();\n      const componentRef = viewContainerRef.createComponent<{ writeValue: Function; registerOnChange: Function }>(componentFactory);\n      const componentInstance = componentRef.instance;\n      if (this.column.extraOptions) {\n        componentFactory.inputs.forEach((input) => {\n          if (this.column.extraOptions[input.templateName]) {\n            componentInstance[input.propName] = this.column.extraOptions[input.templateName];\n          }\n        });\n      }\n      componentInstance.writeValue(this.rowItem[this.column.field]);\n      componentInstance.registerOnChange((value) => {\n        this.rowItem[this.column.field] = value;\n        if (this.column.extraOptions && this.column.extraOptions.finishEditingAfterValueChange) {\n          this.finishCellEdit();\n        }\n      });\n      this.dynamicEditorActive = true;\n    }\n  }\n\n  cellEditing($event) {\n    $event.stopPropagation();\n    $event.preventDefault();\n    let beforeEdit = Promise.resolve(undefined);\n    if (this.dt.beforeCellEdit) {\n      beforeEdit = this.dt.beforeCellEdit(this.rowItem, this.column);\n    }\n    beforeEdit.then((extraOptions?: any) => {\n      if (extraOptions) {\n        this.column.extraOptions = extraOptions;\n      }\n      this.dt.cellEditorClickEvent.emit($event);\n      const cellSelectedEventArg = {\n        rowIndex: this.rowIndex,\n        colIndex: this.colIndex,\n        column: this.column,\n        rowItem: this.rowItem,\n        cellComponent: this,\n        rowComponent: this.rowComponent\n      };\n      if (this.column.editable && this.editModel === 'cell') {\n        this.isCellEdit = true;\n        this.creatCellEditor();\n        this.documentClickSubscription = this.dt.documentClickEvent.subscribe(\n          event => {\n            if (event === 'cancel' || (!this.cellRef.nativeElement.contains(event.target) && !this.clickInTd)) {\n              this.ngZone.run(() => {\n                this.finishCellEdit();\n              });\n            }\n            this.clickInTd = false;\n          }\n        );\n        this.cellEditorClickSubscription = this.dt.cellEditorClickEvent.subscribe(\n          event => {\n            if (!this.cellRef.nativeElement.contains(event.target)) {\n              this.finishCellEdit();\n            }\n          }\n        );\n        this.dt.onCellEditStart(cellSelectedEventArg);\n      }\n    });\n  }\n\n  toggleChildTable(rowItem) {\n    rowItem.$isChildTableOpen = !rowItem.$isChildTableOpen;\n    this.dt.setRowChildToggleStatus(rowItem, rowItem.$isChildTableOpen);\n  }\n}\n","<ng-template *ngIf=\"!column.editable || fieldEditDenied\" [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n\n<ng-container *ngIf=\"column.editable && !fieldEditDenied\">\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip === 'btn'\" class=\"cell-container\">\n    <div class=\"cell-container-inner not-break modify-holder\">\n      <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n      <span class=\"cell-modify\" (click)=\"cellEditing($event)\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16px\" height=\"16px\" version=\"1.1\">\n          <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"none\" stroke-width=\"1\">\n            <path\n              d=\"M 9.48528 3.41421 L 10.8995 2 L 13.7279 4.82843 L 12.3137 6.24264 L 9.48528 3.41421 Z M 5.24264 13.3137 L 2.41421 13.3137 L 2.41421 10.4853 L 8.77817 4.12132 L 11.6066 6.94975 L 5.24264 13.3137 Z\"\n            />\n          </g>\n        </svg>\n      </span>\n    </div>\n  </div>\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip !== 'btn'\" class=\"cell-editable\" (click)=\"cellEditing($event)\">\n    <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n  </div>\n  <div [ngClass]=\"{ 'edit-padding-fix': dynamicEditorActive }\">\n    <ng-template dEditorHost></ng-template>\n  </div>\n  <ng-template\n    *ngIf=\"templateEditorActive\"\n    [ngTemplateOutlet]=\"column.cellEditCmp ? column.cellEditCmp.template : column.fieldType === 'date' ? dateEditTempate : textEditTempate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      $implicit: this,\n      row: rowComponent\n    }\"\n  >\n  </ng-template>\n</ng-container>\n\n<ng-template #cellViewTemp>\n  <ng-container *ngIf=\"column.nestedColumn\">\n    <span *ngIf=\"tableLevel > 0\" class=\"cell-placeholder\" [ngStyle]=\"{ width: tableLevel * column.nestedColumnIndent + 'px' }\"></span>\n    <span [style.visibility]=\"rowItem.children ? 'visible' : 'hidden'\" class=\"childtable-toggler\" (click)=\"toggleChildTable(rowItem)\">\n      <ng-container *ngIf=\"rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-close\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <rect x=\"4\" y=\"7\" width=\"8\" height=\"2\"></rect>\n          </g>\n        </svg>\n\n        <span *ngIf=\"column.extraOptions?.iconFoldTable\" [innerHTML]=\"column.extraOptions?.iconFoldTable | safe: 'html'\"></span>\n      </ng-container>\n      <ng-container *ngIf=\"!rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconUnFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-open-folder\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <path\n              d=\"M8.75,4 L8.75,7.25 L12,7.25 L12,8.75 L8.749,8.75 L8.75,12 L7.25,12 L7.249,8.75 L4,8.75 L4,7.25 L7.25,7.25 L7.25,4 L8.75,4 Z\"\n            ></path>\n          </g>\n        </svg>\n        <span *ngIf=\"column.extraOptions?.iconUnFoldTable\" [innerHTML]=\"column.extraOptions?.iconUnFoldTable | safe: 'html'\"></span>\n      </ng-container>\n    </span>\n  </ng-container>\n  <ng-template\n    [ngTemplateOutlet]=\"column.cellCmp ? column.cellCmp.template : textViewTemplate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      cellItem: rowItem[column.field],\n      cellValue: rowItem | disPlayCellValuePipe: rowIndex:column,\n      $implicit: this,\n      row: rowComponent,\n      tableLevel: tableLevel\n    }\"\n  >\n  </ng-template>\n</ng-template>\n\n<ng-template let-cellValue=\"cellValue\" #textViewTemplate>\n  <span [attr.title]=\"cellValue\">{{ cellValue }}</span>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #textEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"form-group full-width\">\n      <div class=\"input-group full-width\">\n        <input\n          [dAutoFocus]=\"cell && cell.isCellEdit\"\n          [type]=\"column.fieldType\"\n          class=\"devui-form-control\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          [attr.maxlength]=\"column.extraOptions?.maxlength\"\n          [attr.minlength]=\"column.extraOptions?.minlength\"\n          [attr.pattern]=\"column.extraOptions?.pattern\"\n          (keydown.enter)=\"cell && cell.finishCellEdit($event)\"\n          [placeholder]=\"column.placeholder || ''\"\n        />\n      </div>\n    </div>\n  </form>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #dateEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"devui-form-group\">\n      <div class=\"devui-input-group devui-dropdown-origin\">\n        <input\n          class=\"devui-form-control search\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          dDatepicker\n          appendToBody\n          [dateFormat]=\"column.extraOptions?.dateFormat\"\n          #datePicker=\"datepicker\"\n          (ngModelChange)=\"!column.extraOptions?.showTime && cell && cell.finishCellEdit()\"\n          [maxDate]=\"column.extraOptions?.maxDate\"\n          [minDate]=\"column.extraOptions?.minDate\"\n          [cssClass]=\"column.extraOptions?.cssClass\"\n          [dateConfig]=\"column.extraOptions?.dateConfig\"\n          [locale]=\"column.extraOptions?.locale\"\n          [customViewTemplate]=\"column.extraOptions?.customViewTemplate\"\n          [disabled]=\"column.extraOptions?.disabled\"\n          [placeholder]=\"column.placeholder || ''\"\n          [autoOpen]=\"true\"\n          [showTime]=\"column.extraOptions?.showTime\"\n        />\n        <div class=\"devui-input-group-addon\" (click)=\"datePicker.toggle()\">\n          <i class=\"icon icon-calendar\"></i>\n        </div>\n      </div>\n    </div>\n  </form>\n</ng-template>\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostBinding,\n  Inject,\n  Input,\n  NgZone,\n  OnInit,\n  Output\n} from '@angular/core';\nimport { DATA_TABLE_ROW } from './data-table-row.token';\nimport { DATA_TABLE } from './data-table.token';\nimport { ForceUpdateReason } from './force-update-reason.model';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Component({\n  selector: 'd-data-table-row, [dDataTableRow]',\n  templateUrl: './data-table-row.component.html',\n  styleUrls: ['./data-table-row.component.scss'],\n  preserveWhitespaces: false,\n  providers: [{\n    provide: DATA_TABLE_ROW,\n    useExisting: forwardRef(() => DataTableRowComponent)\n  }],\n})\nexport class DataTableRowComponent implements OnInit {\n  @Input() rowItem: any;\n  @HostBinding('style.font-weight') fontWeight = 'normal';\n  @HostBinding('style.vertical-align') verticalAlign = 'middle';\n  @Input() selectable: boolean;\n  @Input() checkable: boolean;\n  @Input() showExpandToggle: boolean;\n  @Input() rowIndex: number;\n  @Input() allChecked: boolean;\n  @Input() columns: DataTableColumnTmplComponent[];\n  @Input() editModel: string;\n  @Input() editRowItem: any;\n  @Input() resizeable: boolean;\n  @Input() timeout: number;\n  @Input() tableLevel: number;\n  @Input() nestedIndex: string;\n  @Input() generalRowHoveredData: boolean;\n  @Output() detailChange = new EventEmitter<any>();\n\n  forceUpdateEvent = new EventEmitter<ForceUpdateReason>();\n\n  clickCount = 0; // 记录点击次数\n  timeoutId; // 延时id\n\n  constructor(@Inject(DATA_TABLE) public dt: any, private changeDetectorRef: ChangeDetectorRef,\n              private rowRef: ElementRef, private ngZone: NgZone) {\n  }\n\n  ngOnInit(): void {\n    this.ngZone.runOutsideAngular(() => {\n      this.rowRef.nativeElement.addEventListener(\n        'click',\n        this.onRowClick.bind(this)\n      );\n      this.rowRef.nativeElement.addEventListener(\n        'dblclick',\n        this.onRowDBClick.bind(this)\n      );\n      if (this.generalRowHoveredData) {\n        this.rowRef.nativeElement.addEventListener(\n          'mouseenter',\n          this.onRowMouseEnter.bind(this)\n        );\n        this.rowRef.nativeElement.addEventListener(\n          'mouseleave',\n          this.onRowMouseLeave.bind(this)\n        );\n      }\n    });\n  }\n\n  forceUpdate() {\n    this.changeDetectorRef.markForCheck();\n    this.forceUpdateEvent.emit(ForceUpdateReason.RowUpdate);\n  }\n\n  onRowClick($event) {\n    this.clickCount++;\n    if (this.clickCount === 1) {\n      this.timeoutId = setTimeout(() => {\n        if (this.clickCount === 1) {\n          this.dt.onRowClick({ rowIndex: this.rowIndex, nestedIndex: this.nestedIndex, rowItem: this.rowItem, rowComponent: this });\n        }\n        this.clickCount = 0;\n        clearTimeout(this.timeoutId);\n      }, this.timeout);\n    }\n  }\n\n  onRowDBClick($event) {\n    this.dt.onRowDBClick({ rowIndex: this.rowIndex, nestedIndex: this.nestedIndex, rowItem: this.rowItem, rowComponent: this });\n  }\n\n  onRowMouseEnter($event) {\n    this.ngZone.run(() => {\n      this.rowItem.$hovered = true;\n    });\n  }\n\n  onRowMouseLeave($event) {\n    this.ngZone.run(() => {\n      this.rowItem.$hovered = false;\n    });\n  }\n\n  onRowCheckChange($event, rowIndex, nestedIndex, rowItem) {\n    rowItem.$checked = $event;\n    rowItem.$halfChecked = false;\n    this.dt.setRowCheckStatus({ rowItem, rowIndex, nestedIndex, checked: $event });\n  }\n\n  toggle() {\n    if (this.rowItem['$isDetailOpen'] === undefined) {\n      this.rowItem['$isDetailOpen'] = !!this.rowItem.$expandConfig?.expand;\n    }\n    this.rowItem['$isDetailOpen'] = !this.rowItem['$isDetailOpen'];\n    if (this.rowItem.$expandConfig) {\n      this.rowItem.$expandConfig.expand = !this.rowItem.$expandConfig.expand;\n    }\n    this.detailChange.emit({ state: this.rowItem['$isDetailOpen'], index: this.rowIndex });\n    this.dt.onDetailToggle({ state: this.rowItem['$isDetailOpen'], index: this.rowIndex });\n  }\n\n  trackByFn(index, item) {\n    return index;\n  }\n}\n","<td *ngIf=\"showExpandToggle\" class=\"devui-detail-cell\" [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\" [style.left]=\"0\">\n  <div *ngIf=\"rowItem.detail || rowItem?.$expandConfig\" (click)=\"toggle()\">\n    <span [style.vertical-align]=\"'middle'\" *ngIf=\"!rowItem['$isDetailOpen'] && !rowItem.$expandConfig?.expand\">\n      <svg\n        class=\"svg-icon-arrow\"\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n        </g>\n      </svg>\n    </span>\n    <span [style.vertical-align]=\"'middle'\" *ngIf=\"(rowItem && rowItem['$isDetailOpen']) || rowItem.$expandConfig?.expand\">\n      <svg\n        class=\"svg-icon-arrow\"\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <polygon points=\"11.5 12 8 8.23076923 4.5 12 3 10.3846154 8 5 13 10.3846154\"></polygon>\n        </g>\n      </svg>\n    </span>\n  </div>\n</td>\n<td\n  *ngIf=\"checkable\"\n  class=\"devui-checkable-cell\"\n  [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n  [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '36px' : '0'\"\n>\n  <d-checkbox\n    [ngModelOptions]=\"{ standalone: true }\"\n    (ngModelChange)=\"onRowCheckChange($event, rowIndex, nestedIndex, rowItem)\"\n    [ngModel]=\"rowItem.$checked\"\n    [halfchecked]=\"rowItem.$halfChecked\"\n    [disabled]=\"rowItem.$checkDisabled || rowItem.$disabled\"\n    dTooltip\n    [content]=\"rowItem.$checkBoxTips\"\n    [position]=\"['top', 'right', 'bottom', 'left']\"\n    [showAnimation]=\"false\"\n  >\n  </d-checkbox>\n</td>\n<ng-container *ngFor=\"let column of columns; let colIndex = index; trackBy: trackByFn\">\n  <td\n    dDataTableCell\n    [rowIndex]=\"rowIndex\"\n    [colIndex]=\"colIndex\"\n    [column]=\"column\"\n    [rowItem]=\"rowItem\"\n    [editModel]=\"rowItem.$$editModel || editModel\"\n    [isEditRow]=\"rowItem.$$edit\"\n    [timeout]=\"timeout\"\n    [tableLevel]=\"tableLevel\"\n    class=\"{{ column.cellClass ? column.cellClass : '' }}\"\n    [ngClass]=\"{\n      'devui-sticky-left-cell': column.fixedLeft,\n      'devui-sticky-right-cell': column.fixedRight,\n      'devui-last-sticky-left-cell': column.fixedLeft && !columns[colIndex + 1]?.fixedLeft,\n      'devui-first-sticky-right-cell': column.fixedRight && !columns[colIndex - 1]?.fixedRight\n    }\"\n    [style.left]=\"column.fixedLeft ? column.fixedLeft : null\"\n    [style.right]=\"column.fixedRight ? column.fixedRight : null\"\n  ></td>\n</ng-container>\n","import { Component, Inject, Input, OnChanges, SimpleChanges, TemplateRef } from '@angular/core';\nimport { TableExpandConfig, TableWidthConfig } from './data-table.model';\nimport { DATA_TABLE } from './data-table.token';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Component({\n  selector: 'd-data-table-body, [dDataTableBody]',\n  templateUrl: './data-table-body.component.html',\n  styleUrls: ['./data-table-body.component.scss'],\n  preserveWhitespaces: false,\n  // changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableBodyComponent implements OnChanges {\n  @Input() checkable: boolean;\n  @Input() showExpandToggle: boolean;\n  @Input() allChecked: boolean;\n  @Input() selectable: boolean;\n  @Input() editModel: string;\n  @Input() editRowItem: any;\n  @Input() dataSource: any[] = [];\n  @Input() resizeable: boolean;\n  @Input() columns: DataTableColumnTmplComponent[];\n  @Input() detailTemplateRef: TemplateRef<any>;\n  @Input() timeout: number;\n  @Input() type: string;\n  @Input() rowHoveredHighlight: boolean;\n  @Input() tableLevel: number;\n  @Input() nestedIndex = '-1';\n  @Input() virtualScroll;\n  @Input() tableWidthConfig: TableWidthConfig[];\n  @Input() headerExpandConfig: TableExpandConfig;\n  @Input() generalRowHoveredData: boolean;\n  childTdColspan: number;\n  constructor(@Inject(DATA_TABLE) public dt: any) {\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['columns'] && this.columns) {\n      let columnSpan = this.columns.length;\n      if (this.showExpandToggle) {\n        columnSpan += 1;\n      }\n      if (this.checkable) {\n        columnSpan += 1;\n      }\n      this.childTdColspan = columnSpan;\n    }\n  }\n\n  trackByFn(index, item) {\n    return index;\n  }\n}\n","<tr *ngIf=\"headerExpandConfig?.expand\">\n  <td [attr.colspan]=\"tableWidthConfig.length\">\n    <ng-template\n      [ngTemplateOutlet]=\"headerExpandConfig?.expandTemplateRef || default\"\n      [ngTemplateOutletContext]=\"{ $implicit: this, columns: columns }\"\n    >\n    </ng-template>\n    <ng-template #default>\n      <div>{{ headerExpandConfig?.description }}</div>\n    </ng-template>\n  </td>\n</tr>\n<ng-container *ngIf=\"!virtualScroll; else scrollViewTpl\">\n  <ng-container *ngFor=\"let rowItem of dataSource; trackBy: trackByFn; let rowIndex = index\">\n    <ng-template [ngTemplateOutlet]=\"trTable\" [ngTemplateOutletContext]=\"{ rowItem: rowItem, rowIndex: rowIndex }\"> </ng-template>\n  </ng-container>\n</ng-container>\n\n<ng-template #scrollViewTpl>\n  <ng-container *cdkVirtualFor=\"let rowItem of dataSource; trackBy: trackByFn; let rowIndex = index\">\n    <ng-template [ngTemplateOutlet]=\"trTable\" [ngTemplateOutletContext]=\"{ rowItem: rowItem || {}, rowIndex: rowIndex }\"> </ng-template>\n  </ng-container>\n</ng-template>\n\n<ng-template #trTable let-rowIndex=\"rowIndex\" let-rowItem=\"rowItem\">\n  <tr\n    *ngIf=\"!rowItem?.$draggable\"\n    dDataTableRow\n    [generalRowHoveredData]=\"generalRowHoveredData\"\n    [resizeable]=\"resizeable\"\n    [checkable]=\"checkable\"\n    [rowIndex]=\"rowIndex\"\n    [rowItem]=\"rowItem\"\n    [columns]=\"columns\"\n    [editRowItem]=\"editRowItem\"\n    [editModel]=\"editModel\"\n    [allChecked]=\"allChecked\"\n    [showExpandToggle]=\"showExpandToggle\"\n    [timeout]=\"timeout\"\n    [tableLevel]=\"tableLevel\"\n    [nestedIndex]=\"nestedIndex\"\n    class=\"{{ rowItem.$rowClass ? rowItem.$rowClass : '' }}\"\n    [ngClass]=\"{ 'table-row-selected': rowItem.$checked }\"\n  ></tr>\n  <tr\n    *ngIf=\"rowItem?.$draggable\"\n    dDataTableRow\n    dDraggable\n    [generalRowHoveredData]=\"generalRowHoveredData\"\n    [resizeable]=\"resizeable\"\n    [checkable]=\"checkable\"\n    [rowIndex]=\"rowIndex\"\n    [rowItem]=\"rowItem\"\n    [columns]=\"columns\"\n    [editRowItem]=\"editRowItem\"\n    [editModel]=\"editModel\"\n    [allChecked]=\"allChecked\"\n    [showExpandToggle]=\"showExpandToggle\"\n    [timeout]=\"timeout\"\n    [tableLevel]=\"tableLevel\"\n    [nestedIndex]=\"nestedIndex\"\n    class=\"{{ rowItem.$rowClass ? rowItem.$rowClass : '' }}\"\n    [ngClass]=\"{ 'table-row-selected': rowItem.$checked }\"\n    [dragData]=\"{ data: rowItem }\"\n    [dragScope]=\"rowItem?.$draggable['scope']\"\n    [dragOverClass]=\"rowItem?.$draggable['class']\"\n    [dragHandle]=\"rowItem?.$draggable['handler']\"\n  ></tr>\n  <tr *ngIf=\"rowItem && rowItem['$isDetailOpen'] && rowItem.detail\">\n    <td [attr.colspan]=\"checkable ? 2 : 1\"></td>\n    <td [attr.colspan]=\"columns.length\" class=\"detail-content\" [style.padding]=\"'13px'\">\n      <ng-template\n        [ngTemplateOutlet]=\"detailTemplateRef || default\"\n        [ngTemplateOutletContext]=\"{ $implicit: this, detail: rowItem.detail, rowIndex: rowIndex, rowItem: rowItem }\"\n      >\n      </ng-template>\n      <ng-template #default let-detail=\"detail\" let-rowIndex=\"rowIndex\" let-rowItem=\"rowItem\">\n        <div>{{ detail }}</div>\n      </ng-template>\n    </td>\n  </tr>\n  <tr class=\"expand-row\" *ngIf=\"rowItem?.$expandConfig?.expand\">\n    <td *ngIf=\"checkable\"></td>\n    <td *ngIf=\"showExpandToggle\"></td>\n    <td [attr.colspan]=\"columns.length\">\n      <ng-template\n        [ngTemplateOutlet]=\"rowItem.$expandConfig?.expandTemplateRef || default\"\n        [ngTemplateOutletContext]=\"{ $implicit: this, columns: columns, rowIndex: rowIndex, rowItem: rowItem }\"\n      >\n      </ng-template>\n      <ng-template #default>\n        <div>{{ rowItem.$expandConfig?.description }}</div>\n      </ng-template>\n    </td>\n  </tr>\n  <tr class=\"child-table\" *ngIf=\"rowItem['$isChildTableOpen'] && rowItem['children']\">\n    <td [attr.colspan]=\"childTdColspan\">\n      <table\n        class=\"devui-table {{ type ? 'table-' + type : '' }} {{ rowHoveredHighlight ? 'table-hover' : '' }}\"\n        [style.table-layout]=\"'fixed'\"\n      >\n        <colgroup>\n          <col [style.width]=\"config.width\" *ngFor=\"let config of tableWidthConfig\" />\n        </colgroup>\n        <tbody\n          dDataTableBody\n          [dataSource]=\"rowItem['children']\"\n          [resizeable]=\"resizeable\"\n          [columns]=\"columns\"\n          [checkable]=\"checkable\"\n          [allChecked]=\"allChecked\"\n          [selectable]=\"selectable\"\n          [editModel]=\"editModel\"\n          [editRowItem]=\"editRowItem\"\n          [showExpandToggle]=\"showExpandToggle\"\n          [detailTemplateRef]=\"detailTemplateRef\"\n          [timeout]=\"timeout\"\n          [type]=\"type\"\n          [rowHoveredHighlight]=\"rowHoveredHighlight\"\n          [tableLevel]=\"tableLevel + 1\"\n          [nestedIndex]=\"nestedIndex + ',' + rowIndex\"\n          [tableWidthConfig]=\"tableWidthConfig\"\n          [generalRowHoveredData]=\"generalRowHoveredData\"\n        ></tbody>\n      </table>\n    </td>\n  </tr>\n</ng-template>\n","import { TemplateRef } from '@angular/core';\nimport type { DataTableCellComponent } from './data-table-cell.component';\nimport type { DataTableRowComponent } from './data-table-row.component';\nimport type { TableThComponent } from './table/head/th/th.component';\nimport type { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\nexport interface CellSelectedEventArg {\n  rowIndex: number;\n  colIndex: number;\n  column: DataTableColumnTmplComponent;\n  rowItem: any;\n  cellComponent: DataTableCellComponent;\n  rowComponent: DataTableRowComponent;\n}\n\nexport enum SortDirection {\n  ASC = 'ASC',\n  DESC = 'DESC',\n  default = ''\n}\n\nexport interface RowSelectedEventArg {\n  rowIndex: number;\n  nestedIndex: string;\n  rowItem: any;\n  rowComponent: DataTableRowComponent;\n}\n\nexport interface SortEventArg {\n  field?: string;\n  direction: SortDirection;\n  column?: DataTableColumnTmplComponent;\n  th?: TableThComponent;\n}\n\nexport interface RowCheckChangeEventArg {\n  rowIndex: number;\n  nestedIndex: string;\n  rowItem: any;\n  checked: boolean;\n}\n\nexport interface ColumnDefs {\n  render: (data: any, row: any) => any;\n  target: string;\n}\n\nexport interface FilterConfig {\n  id?: number | string;\n  name: string;\n  value: any;\n  checked?: boolean; // for Multiple\n  selected?: boolean; // for Radio\n}\n\nexport interface CheckableRelation {\n  upward: boolean;\n  downward: boolean;\n}\n\nexport interface TableExpandConfig {\n  expand?: boolean;\n  expandTemplateRef?: TemplateRef<any>;\n  description?: string;\n}\n\nexport interface ColumnResizeEventArg {\n  currentColumn: DataTableColumnTmplComponent;\n  nextColumn: DataTableColumnTmplComponent;\n}\n\nexport enum ColumnAdjustStrategy {\n  disable = 0, // 不可调整\n  mouseup = 1, // 列宽在鼠标松开时变化\n  mousemove = 2 // 列宽随着鼠标移动变化\n}\n\nexport interface TableCheckStatusArg {\n  pageAllChecked?: boolean;\n  pageHalfChecked?: boolean;\n}\n\nexport interface TableWidthConfig {\n  field: string;\n  width: string;\n}\n\nexport enum EditableTip {\n  hover = 'hover',\n  btn = 'btn'\n}\n\nexport interface RowToggleStatusEventArg {\n  rowItem: any;\n  open: boolean;\n}\n\nexport interface TableCheckOptions {\n  label: string;\n  onChecked: Function;\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const TABLE_TH = new InjectionToken('TABLE_TH');\n","import { Component, EventEmitter, HostBinding, Input, OnInit, Output } from '@angular/core';\nimport { SortDirection, SortEventArg } from '../../../../data-table.model';\n\n@Component({\n  selector: 'd-table-sort',\n  templateUrl: './sort.component.html',\n  styleUrls: ['./sort.component.scss']\n})\nexport class SortComponent implements OnInit {\n  @Input() sortDirection: SortDirection;\n  @HostBinding('class.devui-icon-show')\n  @Input() showSortIcon = false;\n  @Output() sortEvent = new EventEmitter<SortEventArg>();\n\n  @HostBinding('class.devui-icon-show')\n  get canShow() {\n    return this.showSortIcon || (this.sortDirection === 'ASC') || (this.sortDirection === 'DESC');\n  }\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  sort() {\n    switch (this.sortDirection) {\n    case SortDirection.ASC:\n      this.sortDirection = SortDirection.DESC;\n      break;\n    case 'DESC':\n      this.sortDirection = SortDirection.default;\n      break;\n    case SortDirection.default:\n    default:\n      this.sortDirection = SortDirection.ASC;\n    }\n    this.sortEvent.emit({ direction: this.sortDirection });\n  }\n}\n","<span (click)=\"sort()\" class=\"sort-clickable\">\n  <i\n    class=\"datatable-svg\"\n    [ngClass]=\"{\n      'sort-icon-default': !sortDirection,\n      'sort-icon-asc': sortDirection === 'ASC',\n      'sort-icon-desc': sortDirection === 'DESC',\n      'sort-icon-default-visible': showSortIcon\n    }\"\n  >\n    <svg\n      width=\"16px\"\n      height=\"16px\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    >\n      <defs>\n        <circle id=\"sort-svg-path-1\" cx=\"8\" cy=\"8\" r=\"8\"></circle>\n        <filter x=\"-34.4%\" y=\"-21.9%\" width=\"168.8%\" height=\"168.8%\" filterUnits=\"objectBoundingBox\" id=\"filter-2\">\n          <feOffset dx=\"0\" dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\n          <feGaussianBlur stdDeviation=\"1.5\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur>\n          <feColorMatrix\n            values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.085309222 0\"\n            type=\"matrix\"\n            in=\"shadowBlurOuter1\"\n          ></feColorMatrix>\n        </filter>\n      </defs>\n      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <use fill-rule=\"evenodd\" xlink:href=\"#sort-svg-path-1\"></use>\n        <polygon points=\"8 4 11 7 5 7\"></polygon>\n        <polygon points=\"8 12 5 9 11 9\"></polygon>\n      </g>\n    </svg>\n  </i>\n</span>\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectorRef, Component, EventEmitter, HostBinding, Inject, Input, OnChanges, OnDestroy, OnInit,\n  Output, SimpleChanges, TemplateRef, ViewChild\n} from '@angular/core';\nimport { DropDownDirective } from 'ng-devui/dropdown';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { BehaviorSubject, fromEvent, Observable, of, Subscription } from 'rxjs';\nimport { debounceTime, map, switchMap } from 'rxjs/operators';\nimport { FilterConfig } from '../../../../data-table.model';\nimport { TABLE_TH } from '../th.token';\n\n@Component({\n  selector: 'd-table-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.scss']\n})\nexport class FilterComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() beforeFilter: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() customFilterTemplate: TemplateRef<any>;\n  @Input() extraFilterTemplate: TemplateRef<any>;\n  @Input() searchFn: (term: string) => Observable<Array<any>>;\n  @Input() filterList: Array<FilterConfig>;\n  @Input() filterIconActive: boolean;\n  @Input() filterMultiple = true;\n  @Input() filterBoxWidth: any;\n  @Input() filterBoxHeight: any;\n  @Input() column: any; // 为配置column方式兼容自定义过滤模板context\n  @Input() closeWhenScroll: boolean;\n  @Input() showFilterIcon = false;\n\n  @Output() filterIconActiveChange = new EventEmitter<boolean>(true);\n  @Output() filterChange = new EventEmitter<FilterConfig[]>();\n  @Output() filterToggle = new EventEmitter<{\n    isOpen: boolean;\n    checklist: FilterConfig[];\n  }>();\n\n  @HostBinding('class.devui-icon-show')\n  get canShow() {\n    return this.showFilterIcon || this.filterIconActive || this.filterIconActiveInner;\n  }\n\n  @ViewChild('filterDropdown') filterDropdown;\n  private sourceSubject: BehaviorSubject<any>;\n  private sourceSubscription: Subscription;\n  private filterSubscription: Subscription;\n  private i18nSubscription: Subscription;\n  private searchElement;\n  checkedListForFilter = [];\n  filterListDisplay = [];\n  searchText = '';\n  selectedItem: any;\n  isFilterHidden = false;\n  filterHalfChecked: boolean;\n  filterAllChecked: boolean;\n  i18nCommonText: I18nInterface['common'];\n  filterIconActiveInner: boolean;\n  DEBONCE_TIME = 300;\n  document: Document;\n  constructor(private ref: ChangeDetectorRef, private i18n: I18nService, @Inject(TABLE_TH) private thComponent: any,\n              @Inject(DOCUMENT) private doc: any) {\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    if (!this.searchFn) {\n      this.searchFn = (item) => {\n        return of(\n          (this.filterList ? this.filterList : [])\n            .filter(value => value.name.toLowerCase().includes(item.toLowerCase()))\n        );\n      };\n    }\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nCommonText = data.common;\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['filterList'] || changes['filterMultiple'] || changes['filterIconActive']) {\n      if (this.filterIconActive !== undefined) { return; }\n      if (this.filterList) {\n        if (!this.filterMultiple) {\n          this.selectedItem = this.filterList.filter(item => item.selected)[0];\n          this.filterIconActiveInner = (this.selectedItem !== undefined && !!Object.keys(this.selectedItem).length);\n        } else {\n          const checkedList = this.filterList.filter(item => item.checked);\n          if (checkedList.length) {\n            this.filterIconActiveInner = true;\n          } else {\n            this.filterIconActiveInner = false;\n          }\n        }\n      }\n      this.filterIconActiveChange.emit(this.filterIconActiveInner);\n    }\n  }\n\n  closeFilter(dropdown: DropDownDirective) {\n    dropdown.toggle();\n  }\n\n  getFilterDataMultiple() {\n    // 兼容当前当用户未传入id时，使用name做重名判断\n    const keyValue = this.checkedListForFilter.length\n      ? Object.prototype.hasOwnProperty.call(this.checkedListForFilter[0], 'id') ? 'id' : 'name' : '';\n    const checkedList = this.removeDuplication(this.checkedListForFilter, keyValue).filter(item => item.checked);\n    this.setFilterIconActive(checkedList);\n    this.filterChange.emit(checkedList);\n  }\n\n  removeDuplication(array, key) {\n    const hash = {};\n    return array.reduceRight((item, next) => {\n      if (!hash[next[key]]) {\n        hash[next[key]] = true;\n        item.push(next);\n      }\n      return item;\n    }, []);\n  }\n\n  setFilterIconActive(checkedData) {\n    if (Array.isArray(checkedData) ? checkedData.length : checkedData) {\n      this.filterIconActiveInner = true;\n    } else {\n      this.filterIconActiveInner = false;\n    }\n    this.filterIconActiveChange.emit(this.filterIconActiveInner);\n  }\n\n  getFilterDataRadio(item) {\n    this.selectedItem = item;\n    this.setFilterIconActive(item);\n    this.filterChange.emit(item);\n  }\n\n  canFilter(isOpen) {\n    let changeResult = Promise.resolve(true);\n\n    if (this.beforeFilter) {\n      const result: any = this.beforeFilter(isOpen);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          changeResult = result;\n        } else if (result.subscribe) {\n          changeResult = (result as Observable<boolean>).toPromise();\n        } else {\n          changeResult = Promise.resolve(result);\n        }\n      }\n    }\n\n    return changeResult;\n  }\n\n  resetSources() {\n    this.checkedListForFilter = [];\n    if (this.sourceSubscription) {\n      this.sourceSubscription.unsubscribe();\n    }\n    if (this.filterSubscription) {\n      this.filterSubscription.unsubscribe();\n    }\n  }\n\n  onContainerScroll = () => {\n    this.closeFilter(this.filterDropdown);\n  };\n\n  showFilterContent($event) {\n    if (this.closeWhenScroll) {\n      const tableViewElement = this.thComponent.tableViewRefElement.nativeElement.querySelector('.devui-scrollbar.scroll-view');\n      if ($event) {\n        this.document.addEventListener('scroll', this.onContainerScroll);\n        if (tableViewElement) { tableViewElement.addEventListener('scroll', this.onContainerScroll); }\n      } else {\n        this.document.removeEventListener('scroll', this.onContainerScroll);\n        if (tableViewElement) { tableViewElement.removeEventListener('scroll', this.onContainerScroll); }\n      }\n    }\n    this.searchText = '';\n    this.canFilter(!$event).then((change) => {\n      if (!$event) {\n        this.resetSources();\n        return;\n      }\n      if (!change) {\n        this.isFilterHidden = true;\n        return;\n      }\n      this.isFilterHidden = false;\n      if (!this.customFilterTemplate) {\n        this.registerFilterChange();\n      }\n    });\n    const keyValue = this.checkedListForFilter.length\n      ? Object.prototype.hasOwnProperty.call(this.checkedListForFilter[0], 'id') ? 'id' : 'name' : '';\n    const checkedList = this.removeDuplication(this.checkedListForFilter, keyValue).filter(item => item.checked);\n    this.filterToggle.emit({\n      isOpen: $event,\n      checklist: checkedList\n    });\n  }\n\n  filterCheckAll($event) {\n    this.filterHalfChecked = false;\n    // 全选时只针对当前面板操作，全不选时针对所有数据\n    if ($event) {\n      this.filterListDisplay.forEach(item => {\n        item.checked = $event;\n        this.checkedListForFilter.push(item);\n      });\n    } else {\n      this.filterList.forEach(item => {\n        item.checked = $event;\n        this.checkedListForFilter.push(item);\n      });\n    }\n  }\n\n  setHalfChecked() {\n    this.filterHalfChecked = false;\n    const checked = this.filterListDisplay.filter(item => item.checked);\n    if (checked.length === this.filterListDisplay.length) {\n      this.filterAllChecked = true;\n    } else if (checked.length > 0) {\n      this.filterHalfChecked = true;\n    } else {\n      this.filterAllChecked = false;\n      this.filterHalfChecked = false;\n    }\n  }\n\n  checkboxChange($event, item) {\n    this.checkedListForFilter.push(item);\n    this.setHalfChecked();\n  }\n\n  searchInputValueChangeEvent() {\n    this.filterSubscription = fromEvent(this.searchElement, 'input')\n      .pipe(\n        map((e: any) => e.target.value),\n        debounceTime(this.DEBONCE_TIME) // hard code need refactory\n      )\n      .subscribe(term => {\n        return this.sourceSubject.next(term);\n      });\n  }\n\n  registerFilterChange(): void {\n    this.sourceSubject = new BehaviorSubject<any>('');\n    setTimeout(() => {\n      this.searchElement = this.document.querySelector('.data-table-column-filter-content input');\n      this.searchInputValueChangeEvent();\n    });\n    this.sourceSubscription = this.sourceSubject.pipe(switchMap(term => this.searchFn(term))).subscribe(options => {\n      this.filterListDisplay = options;\n      this.checkedListForFilter.push(...options.filter(item => item.checked));\n      this.setHalfChecked();\n      this.ref.markForCheck();\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n    }\n    this.resetSources();\n  }\n}\n","<span\n  dDropDown\n  appendToBody\n  [appendToBodyDirections]=\"['centerDown', 'centerUp', 'rightDown', 'leftDown', 'rightUp', 'leftUp']\"\n  [closeScope]=\"'blank'\"\n  (toggleEvent)=\"showFilterContent($event)\"\n  #filterDropdown=\"d-dropdown\"\n>\n  <span dDropDownToggle>\n    <i\n      class=\"filter-icon\"\n      [ngClass]=\"{\n        'filter-icon-active': filterIconActive || filterIconActiveInner,\n        'filter-icon-visiable': showFilterIcon\n      }\"\n    >\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g>\n            <polygon points=\"10.0085775 7 10.0085775 15 6 13 6 7 2 3 2 1 14 1 14 3\"></polygon>\n          </g>\n        </g>\n      </svg>\n    </i>\n  </span>\n  <div\n    dDropDownMenu\n    class=\"devui-dropdown-menu\"\n    [ngClass]=\"{ 'filter-content-hidden': isFilterHidden }\"\n    [style.width]=\"filterBoxWidth || '250px'\"\n    [ngStyle]=\"{ 'min-height': filterBoxHeight ? filterBoxHeight : '60px' }\"\n  >\n    <ng-template\n      *ngIf=\"filterDropdown.isOpen\"\n      [ngTemplateOutlet]=\"customFilterTemplate || (filterMultiple ? filterContentTmplForMultiple : filterContentTmplForRadio)\"\n      [ngTemplateOutletContext]=\"{\n        $implicit: this,\n        filterListDisplay: filterListDisplay,\n        dropdown: filterDropdown,\n        column: column\n      }\"\n    >\n    </ng-template>\n  </div>\n</span>\n\n<ng-template #filterContentTmplForMultiple let-filterListMultiple=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div class=\"filter-search-container\">\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\">\n      <d-checkbox\n        style=\"display: inline-block\"\n        [label]=\"i18nCommonText?.checkAll\"\n        (change)=\"filterCheckAll($event)\"\n        [halfchecked]=\"filterHalfChecked\"\n        [(ngModel)]=\"filterAllChecked\"\n      >\n      </d-checkbox>\n      <ng-container *ngIf=\"extraFilterTemplate\">\n        <ng-template\n          [ngTemplateOutlet]=\"extraFilterTemplate\"\n          [ngTemplateOutletContext]=\"{ checked: filterAllChecked, halfChecked: filterHalfChecked }\"\n        >\n        </ng-template>\n      </ng-container>\n      <div class=\"line\"></div>\n      <cdk-virtual-scroll-viewport\n        itemSize=\"30\"\n        minBufferPx=\"300\"\n        maxBufferPx=\"500\"\n        class=\"normal-filter-list-container devui-scrollbar\"\n        [style.height]=\"filterBoxHeight ? 'calc(' + filterBoxHeight + ' - 180px)' : 30 * (filterListMultiple?.length || 1) + 'px'\"\n        [style.maxHeight]=\"filterBoxHeight ? 'none' : '250px'\"\n      >\n        <div *cdkVirtualFor=\"let item of filterListMultiple\" class=\"checkbox-group\">\n          <d-checkbox [label]=\"item.name\" [(ngModel)]=\"item.checked\" (change)=\"checkboxChange($event, item)\"> </d-checkbox>\n        </div>\n        <div class=\"no-data-container\" *ngIf=\"!filterListMultiple?.length\">{{ i18nCommonText?.noData }}</div>\n      </cdk-virtual-scroll-viewport>\n    </div>\n    <div class=\"line\"></div>\n    <div style=\"text-align: center\">\n      <span class=\"button-style\" (click)=\"getFilterDataMultiple(); closeFilter(dropdown)\">{{ i18nCommonText?.btnOk }}</span>\n    </div>\n  </div>\n</ng-template>\n<ng-template #filterContentTmplForRadio let-filterListRadio=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div>\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\" role=\"menu\">\n      <div class=\"normal-filter-list-container devui-scrollbar\" role=\"menuitem\" [style.maxHeight]=\"filterBoxHeight ? 'none' : '350px'\">\n        <div\n          [title]=\"item.name\"\n          *ngFor=\"let item of filterListRadio\"\n          class=\"drop-down-item\"\n          [ngClass]=\"{ 'filter-item-active': selectedItem === item }\"\n          (click)=\"getFilterDataRadio(item); closeFilter(dropdown)\"\n        >\n          {{ item.name }}\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectorRef, Component, ElementRef, EventEmitter,\n  forwardRef, HostBinding, HostListener, Inject, Input,\n  NgZone, OnChanges, OnDestroy, Output, Renderer2, SimpleChanges, TemplateRef\n} from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { FilterConfig, SortDirection, SortEventArg } from '../../../data-table.model';\nimport { TABLE_TH } from './th.token';\n\n@Component({\n  /* eslint-disable-next-line @angular-eslint/component-selector*/\n  selector: '[dHeadCell]',\n  templateUrl: './th.component.html',\n  providers: [{\n    provide: TABLE_TH,\n    useExisting: forwardRef(() => TableThComponent)\n  }],\n})\nexport class TableThComponent implements OnChanges, OnDestroy {\n  @HostBinding('class.resizeable') resizeEnabledClass = false;\n  @HostBinding('class.operable') operableClass = false;\n  @HostBinding('class.sort-active') sortActiveClass = false;\n  @HostBinding('class.filter-active') filterActiveClass = false;\n  @HostBinding('class.devui-sticky-left-cell') stickyLeftClass = false;\n  @HostBinding('class.devui-sticky-right-cell') stickyRightClass = false;\n  @HostBinding('style.left') stickyLeftStyle: string;\n  @HostBinding('style.right') stickyRightStyle: string;\n\n  @Input() resizeEnabled: boolean;\n  @Input() filterable: boolean;\n  @Input() beforeFilter: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() customFilterTemplate: TemplateRef<any>;\n  @Input() extraFilterTemplate: TemplateRef<any>;\n  @Input() searchFn: (term: string) => Observable<Array<any>>;\n  @Input() showFilterIcon = false;\n  @Input() filterList: Array<FilterConfig>;\n  @Input() filterIconActive: boolean;\n  @Input() filterMultiple = true;\n  @Input() closeFilterWhenScroll: boolean;\n  @Input() filterBoxWidth: any;\n  @Input() filterBoxHeight: any;\n  @Output() filterChange = new EventEmitter<FilterConfig[]>();\n  @Output() filterToggle = new EventEmitter<{\n    isOpen: boolean;\n    checklist: FilterConfig[];\n  }>();\n\n  @HostBinding('class.can-sort')\n  @Input() sortable: boolean;\n  @Input() sortDirection: SortDirection;\n  @Input() showSortIcon = false;\n  @Output() sortDirectionChange = new EventEmitter<SortDirection>();\n  @Output() sortChange = new EventEmitter<SortEventArg>();\n\n  @Input() colDraggable: boolean;\n\n  @Input() nestedColumn: boolean;\n  @Input() iconFoldTable: string;\n  @Input() iconUnFoldTable: string;\n\n  @Input() tableViewRefElement: ElementRef;\n\n  @Output() resizeEndEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() resizeStartEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() resizingEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  @Input() minWidth: string;\n  @Input() maxWidth: string;\n\n  @Input() fixedLeft: string;\n  @Input() fixedRight: string;\n  @HostBinding('class.devui-last-sticky-left-cell')\n  @Input() isLastFixedLeft: boolean;\n  @HostBinding('class.devui-first-sticky-right-cell')\n  @Input() isFirstFixedRight: boolean;\n\n  resizeBarRefElement: HTMLElement;\n  element: HTMLElement;\n  subscription: Subscription;\n  resizing = false;\n  resizeNodeEvent: any;\n  resizeOverlay: HTMLElement;\n  nextElement: any;\n  initialWidth: number;\n  totalWidth: number;\n  mouseDownScreenX: number;\n  resizeHandleElement: HTMLElement;\n  tableElement: HTMLElement;\n\n  // 以下为内部传递参数，不对外暴露\n  @Input() childrenTableOpen: boolean;\n  @Output() toggleChildrenTableEvent = new EventEmitter<boolean>();\n  @Output() tapEvent = new EventEmitter<any>();\n  @Input() column: any; // 为配置column方式兼容自定义过滤模板context\n  document: Document;\n\n  constructor(element: ElementRef, private renderer2: Renderer2, private zone: NgZone, private cdr: ChangeDetectorRef,\n              @Inject(DOCUMENT) private doc: any) {\n    this.element = element.nativeElement;\n    this.document = this.doc;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['resizeEnabled']) {\n      if (this.resizeEnabled) {\n        this.resizeEnabledClass = true;\n        if (!this.resizeHandleElement) {\n          this.resizeHandleElement = this.renderer2.createElement('span');\n          this.renderer2.addClass(this.resizeHandleElement, 'resize-handle');\n          this.renderer2.appendChild(this.element.firstChild, this.resizeHandleElement);\n          this.resizeNodeEvent = this.renderer2.listen(this.resizeHandleElement, 'click', (event) => event.stopPropagation());\n        }\n      } else {\n        this.resizeEnabledClass = false;\n      }\n    }\n\n    if (changes['filterable'] || changes['sortable'] || changes['resizeEnabled'] || changes['colDraggable']) {\n      if (this.filterable || this.sortable || this.resizeEnabled || this.colDraggable) {\n        this.operableClass = true;\n      } else {\n        this.operableClass = false;\n      }\n    }\n\n    if (changes['filterIconActive']) {\n      if (this.filterIconActive) {\n        this.filterActiveClass = true;\n      } else {\n        this.filterActiveClass = false;\n      }\n    }\n\n    if (changes['sortDirection']) {\n      if (this.sortDirection === SortDirection.ASC || this.sortDirection === SortDirection.DESC) {\n        this.sortActiveClass = true;\n      } else {\n        this.sortActiveClass = false;\n      }\n    }\n\n    if (changes['fixedLeft']) {\n      if (this.fixedLeft) {\n        this.stickyLeftClass = true;\n        this.stickyLeftStyle = this.fixedLeft;\n      } else {\n        this.stickyLeftClass = false;\n        this.stickyLeftStyle = null;\n      }\n    }\n    if (changes['fixedRight']) {\n      if (this.fixedRight) {\n        this.stickyRightClass = true;\n        this.stickyRightStyle = this.fixedRight;\n      } else {\n        this.stickyRightClass = false;\n        this.stickyRightStyle = null;\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._destroySubscription();\n    if (this.resizeNodeEvent) {\n      this.resizeNodeEvent();\n    }\n  }\n\n  onFilterIconActive(active) {\n    this.filterActiveClass = active;\n  }\n\n  onTap(event) {\n    this.tapEvent.emit(event);\n  }\n\n  toggleChildrenTable() {\n    this.childrenTableOpen = !this.childrenTableOpen;\n    this.toggleChildrenTableEvent.emit(this.childrenTableOpen);\n  }\n\n  emitFilterData(filterData) {\n    this.filterChange.emit(filterData);\n  }\n\n  emitFilterToggle(data: {\n    isOpen: boolean;\n    checklist: FilterConfig[];\n  }) {\n    this.filterToggle.emit(data);\n  }\n\n  onSort(event: SortEventArg) {\n    this.sortDirection = event.direction;\n    if (event.direction === SortDirection.default) {\n      this.sortActiveClass = false;\n    } else {\n      this.sortActiveClass = true;\n    }\n    this.sortDirectionChange.emit(event.direction);\n    this.sortChange.emit({ ...event, th: this });\n  }\n\n  clearSortOrder() {\n    this.sortDirection = SortDirection.default;\n    this.sortActiveClass = false;\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMousedown(event: MouseEvent): void {\n    const isHandle = (<HTMLElement>event.target).classList.contains('resize-handle');\n\n    if (isHandle) {\n      this.resizeStartEvent.emit(event); // emit begin resize event\n\n      this.initialWidth = this.element.clientWidth;\n      const initialOffset = this.element.offsetLeft;\n      this.mouseDownScreenX = event.clientX;\n      event.stopPropagation();\n      this.nextElement = this.element.nextElementSibling;\n      this.resizing = true;\n      this.totalWidth = this.nextElement ? this.initialWidth + this.nextElement.clientWidth : this.initialWidth;\n\n      // create resizeOverlay\n      this.resizeOverlay = this.renderer2.createElement('div');\n      this.renderer2.appendChild(this.element.firstElementChild, this.resizeOverlay);\n      this.renderer2.addClass(this.resizeOverlay, 'resize-overlay');\n      this.renderer2.listen(this.resizeOverlay, 'click', (clickEvent: Event) => clickEvent.stopPropagation());\n\n      this.renderer2.addClass(this.tableViewRefElement.nativeElement, 'table-view-selector');\n\n      const resizeBar = this.renderer2.createElement('div');\n      this.renderer2.addClass(resizeBar, 'resize-bar');\n\n      this.tableElement = this.tableViewRefElement.nativeElement.querySelector('.devui-scrollbar table');\n      if (this.tableElement) {\n        this.renderer2.appendChild(this.tableElement, resizeBar);\n        this.renderer2.setStyle(resizeBar, 'display', 'block');\n        this.renderer2.setStyle(resizeBar, 'left', initialOffset + this.initialWidth + 'px');\n        this.resizeBarRefElement = resizeBar;\n      }\n\n      this.renderer2.addClass(this.element, 'hover-bg');\n\n      const mouseup = fromEvent(this.document, 'mouseup');\n      this.subscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup(ev));\n\n      this.zone.runOutsideAngular(() => {\n        this.document.addEventListener('mousemove', this.bindMousemove);\n      });\n    }\n  }\n\n  onMouseup(event: MouseEvent): void {\n    this.zone.run(() => {\n      const movementX = event.clientX - this.mouseDownScreenX;\n      const newWidth = this.initialWidth + movementX;\n\n      const finalWidth = this.getFinalWidth(newWidth);\n      this.resizing = false;\n\n      // destroy overlay\n      this.renderer2.removeChild(this.element, this.resizeOverlay);\n\n      this.renderer2.removeClass(this.tableViewRefElement.nativeElement, 'table-view-selector');\n\n      this.renderer2.removeClass(this.element, 'hover-bg');\n      if (this.tableElement) {\n        this.renderer2.removeChild(this.tableElement, this.resizeBarRefElement);\n      }\n\n      this.resizeEndEvent.emit({ width: finalWidth, beforeWidth: this.initialWidth });\n    });\n    if (this.subscription && !this.subscription.closed) {\n      this._destroySubscription();\n    }\n\n    this.document.removeEventListener('mousemove', this.bindMousemove);\n  }\n\n  bindMousemove = (e) => {\n    this.move(e);\n  };\n\n  move(event: MouseEvent): void {\n\n    const movementX = event.clientX - this.mouseDownScreenX;\n    const newWidth = this.initialWidth + movementX;\n\n    const finalWidth = this.getFinalWidth(newWidth);\n    if (this.resizeBarRefElement) {\n      this.renderer2.setStyle(this.resizeBarRefElement, 'left', `${finalWidth + this.element.offsetLeft}px`);\n    }\n    this.resizingEvent.emit({ width: finalWidth });\n  }\n\n  private getFinalWidth(newWidth: number): number {\n    const minWidth = this.handleWidth(this.minWidth);\n    const maxWidth = this.handleWidth(this.maxWidth);\n\n    const overMinWidth = !this.minWidth || newWidth >= minWidth;\n    const underMaxWidth = !this.maxWidth || newWidth <= maxWidth;\n\n    const finalWidth = !overMinWidth ? minWidth : !underMaxWidth ? maxWidth : newWidth;\n    return finalWidth;\n  }\n\n  private handleWidth(width: string | number) {\n    if (!width) {\n      return;\n    }\n    if (typeof width === 'number') {\n      return width;\n    }\n    if (width.includes('%')) {\n      const tableWidth = this.tableViewRefElement.nativeElement.clientWidth;\n      return (tableWidth * parseInt(width, 10)) / 100;\n    }\n    return parseInt(width.replace(/[^\\d]+/, ''), 10);\n  }\n\n  private _destroySubscription() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = undefined;\n    }\n  }\n}\n","<div class=\"header-container\">\n  <i class=\"drag-icon\" (mousedown)=\"onTap($event)\">\n    <svg\n      width=\"16px\"\n      height=\"16px\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    >\n      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M4.5,1.5 L5.5,1.5 C6.05228475,1.5 6.5,1.94771525 6.5,2.5 L6.5,3.5 C6.5,4.05228475 6.05228475,4.5 5.5,4.5 L4.5,4.5 C3.94771525,4.5 3.5,4.05228475 3.5,3.5 L3.5,2.5 C3.5,1.94771525 3.94771525,1.5 4.5,1.5 Z M10.5,1.5 L11.5,1.5 C12.0522847,1.5 12.5,1.94771525 12.5,2.5 L12.5,3.5 C12.5,4.05228475 12.0522847,4.5 11.5,4.5 L10.5,4.5 C9.94771525,4.5 9.5,4.05228475 9.5,3.5 L9.5,2.5 C9.5,1.94771525 9.94771525,1.5 10.5,1.5 Z M4.5,6.5 L5.5,6.5 C6.05228475,6.5 6.5,6.94771525 6.5,7.5 L6.5,8.5 C6.5,9.05228475 6.05228475,9.5 5.5,9.5 L4.5,9.5 C3.94771525,9.5 3.5,9.05228475 3.5,8.5 L3.5,7.5 C3.5,6.94771525 3.94771525,6.5 4.5,6.5 Z M10.5,6.5 L11.5,6.5 C12.0522847,6.5 12.5,6.94771525 12.5,7.5 L12.5,8.5 C12.5,9.05228475 12.0522847,9.5 11.5,9.5 L10.5,9.5 C9.94771525,9.5 9.5,9.05228475 9.5,8.5 L9.5,7.5 C9.5,6.94771525 9.94771525,6.5 10.5,6.5 Z M4.5,11.5 L5.5,11.5 C6.05228475,11.5 6.5,11.9477153 6.5,12.5 L6.5,13.5 C6.5,14.0522847 6.05228475,14.5 5.5,14.5 L4.5,14.5 C3.94771525,14.5 3.5,14.0522847 3.5,13.5 L3.5,12.5 C3.5,11.9477153 3.94771525,11.5 4.5,11.5 Z M10.5,11.5 L11.5,11.5 C12.0522847,11.5 12.5,11.9477153 12.5,12.5 L12.5,13.5 C12.5,14.0522847 12.0522847,14.5 11.5,14.5 L10.5,14.5 C9.94771525,14.5 9.5,14.0522847 9.5,13.5 L9.5,12.5 C9.5,11.9477153 9.94771525,11.5 10.5,11.5 Z\"\n          fill=\"#C7CAD0\"\n        ></path>\n      </g>\n    </svg>\n  </i>\n  <ng-container *ngIf=\"nestedColumn\">\n    <span class=\"childtable-toggler\" (click)=\"toggleChildrenTable()\">\n      <ng-container *ngIf=\"childrenTableOpen\">\n        <svg\n          *ngIf=\"!iconFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-close\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <rect x=\"4\" y=\"7\" width=\"8\" height=\"2\"></rect>\n          </g>\n        </svg>\n        <span class=\"customized-icon\" *ngIf=\"iconFoldTable\" [innerHTML]=\"iconFoldTable | safe: 'html'\"></span>\n      </ng-container>\n      <ng-container *ngIf=\"!childrenTableOpen\">\n        <svg\n          *ngIf=\"!iconUnFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-open-folder\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <path\n              d=\"M8.75,4 L8.75,7.25 L12,7.25 L12,8.75 L8.749,8.75 L8.75,12 L7.25,12 L7.249,8.75 L4,8.75 L4,7.25 L7.25,7.25 L7.25,4 L8.75,4 Z\"\n            ></path>\n          </g>\n        </svg>\n        <span class=\"customized-icon\" *ngIf=\"iconUnFoldTable\" [innerHTML]=\"iconUnFoldTable | safe: 'html'\"></span>\n      </ng-container>\n    </span>\n  </ng-container>\n  <span class=\"title\" [ngStyle]=\"{ flex: sortable ? 'inherit' : 1 }\">\n    <ng-content></ng-content>\n  </span>\n  <d-table-sort *ngIf=\"sortable\" [sortDirection]=\"sortDirection\" [showSortIcon]=\"showSortIcon\" (sortEvent)=\"onSort($event)\"></d-table-sort>\n  <d-table-filter\n    *ngIf=\"filterable\"\n    [showFilterIcon]=\"showFilterIcon\"\n    [beforeFilter]=\"beforeFilter\"\n    [customFilterTemplate]=\"customFilterTemplate\"\n    [extraFilterTemplate]=\"extraFilterTemplate\"\n    [column]=\"column\"\n    [searchFn]=\"searchFn\"\n    [filterList]=\"filterList\"\n    [filterIconActive]=\"filterIconActive\"\n    (filterIconActiveChange)=\"onFilterIconActive($event)\"\n    [filterMultiple]=\"filterMultiple\"\n    [closeWhenScroll]=\"closeFilterWhenScroll\"\n    [filterBoxWidth]=\"filterBoxWidth\"\n    [filterBoxHeight]=\"filterBoxHeight\"\n    (filterChange)=\"emitFilterData($event)\"\n    (filterToggle)=\"emitFilterToggle($event)\"\n  ></d-table-filter>\n</div>\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit, ChangeDetectorRef, Component, DoCheck, ElementRef, EventEmitter, Inject, Input,\n  IterableDiffers, KeyValueDiffers, NgZone, OnChanges, OnDestroy, OnInit, Output, QueryList, SimpleChanges, ViewChildren\n} from '@angular/core';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { Subscription } from 'rxjs';\nimport { SortDirection, SortEventArg, TableCheckOptions } from './data-table.model';\nimport { DATA_TABLE } from './data-table.token';\nimport { TableThComponent } from './table/head/th/th.component';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Component({\n  selector: 'd-data-table-head,[dDataTableHead]',\n  templateUrl: './data-table-head.component.html',\n  styleUrls: ['./data-table-head.component.scss'],\n  preserveWhitespaces: false,\n})\nexport class DataTableHeadComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy, DoCheck {\n  @Input() checkable: boolean;\n  @Input() headerCheckDisabled: boolean;\n  @Input() headerCheckVisible: boolean;\n  @Input() checkOptions: TableCheckOptions[];\n  @Input() showExpandToggle: boolean;\n  @Input() pageAllChecked: boolean;\n  @Input() columns: DataTableColumnTmplComponent[];\n  @Input() multiSort: SortEventArg[] = [];\n  @Input() resizeable: boolean;\n  @Input() maxHeight: string;\n  @Input() showSortIcon: boolean;\n  @Input() showFilterIcon: boolean;\n  @Input() colDropFreezeTo: number;\n  @Input() colDraggable: boolean;\n  @Input() fixHeader: boolean;\n  @Input() dataSource: any[] = [];\n  @Input() tableViewRefElement: ElementRef;\n  @Input() tableBodyEl: ElementRef;\n  @Input() checkableColumn: DataTableColumnTmplComponent;\n  @Input() showExpandToggleColumn: DataTableColumnTmplComponent;\n  @Output() headClickSortEvent = new EventEmitter<SortEventArg>();\n  @Output() resizeHandlerEvent = new EventEmitter<any>();\n  @Input() halfChecked: boolean;\n  @Input() childrenTableOpen: boolean;\n  @Output() beginResizeHandlerEvent = new EventEmitter<any>();\n  @Output() resizingHandlerEvent = new EventEmitter<any>();\n  @Output() dragTableEndEvent = new EventEmitter<any>();\n\n  @ViewChildren(TableThComponent) thList: QueryList<TableThComponent>;\n\n  objDiffer: {};\n\n  isDrag: boolean;\n  dragBoxLeft;\n  dragCellRef: HTMLElement;\n\n  searchQuery: { [key: string]: any } = {};\n  multiSortArray: SortEventArg[] = [];\n  sortField: string;\n  sortDirection: 'ASC' | 'DESC' | '';\n  isDetailOpen: boolean;\n  rowItem = undefined;\n  mirror;\n  bindDrag;\n  lastDropTarget;\n  originCellIndex;\n  lastCellIndex;\n  originTable;\n  fixOriginTable;\n  fakeTable;\n  mainFakeTable;\n  classes = {\n    originTable: 'sindu_origin_table',\n    draggableTable: 'sindu_dragger',\n    dragging: 'sindu_dragging',\n    static: 'sindu_static',\n    handle: 'sindu_handle',\n  };\n  el;\n  grabbed;\n  source;\n  item;\n  initialSibling;\n  currentSibling;\n  offsetX;\n  offsetY;\n  bodyOverflow;\n  oldCoord = 0;\n  mirrorContainer;\n  // 用于多行多列头部\n  rowCount;\n  rowCountArray;\n  fixFakeTableEl;\n  fixTableOffsetTop;\n  childTables = [];\n  dataSourceChange = false;\n\n  scrollViewEl;\n  scrollViewRect;\n  fixTableScrollViewEl;\n  animationRequestId;\n  colOffset = 0;\n  secondHeaderOffset = 0;\n  cellMapOffset = 0;\n  cellMap = {};\n  iterableDiffer;\n  searchText = '';\n\n  i18nCommonText: I18nInterface['common'];\n  filterHalfChecked: boolean;\n  filterAllChecked: boolean;\n  filterListDisplay = [];\n  isFilterHidden = false;\n  columnForFilter;\n  private i18nSubscription: Subscription;\n  checkedListForFilter = [];\n  document: Document;\n  documentElement: HTMLElement;\n  constructor(@Inject(DATA_TABLE) public dt: any,\n              private zone: NgZone,\n              private element: ElementRef,\n              private differs: KeyValueDiffers,\n              private iterableDiffers: IterableDiffers,\n              private ref: ChangeDetectorRef,\n              private i18n: I18nService,\n              @Inject(DOCUMENT) private doc: any) {\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.document = this.doc;\n    this.documentElement = this.doc.documentElement;\n  }\n\n  ngOnInit() {\n    if (this.colDraggable) {\n      this.iterableDiffer = this.iterableDiffers.find([]).create(null);\n      this.objDiffer = {};\n      this.dataSource.forEach((data, index) => {\n        this.objDiffer[index] = this.differs.find(data).create();\n      });\n    }\n\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nCommonText = data.common;\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ((changes['columns'] || changes.multiSort) && this.columns) {\n      this.multiSortArray = [];\n      this.columns.forEach(column => {\n        if (column.sortable) {\n          const sortIndex = this.multiSort.findIndex(item => item['field'] === column.field);\n          this.multiSortArray.push({\n            field: column.field,\n            direction: sortIndex !== -1 ? this.multiSort[sortIndex].direction : SortDirection.default\n          });\n        }\n      });\n    }\n    if (changes['columns'] && this.columns) {\n      this.rowCount = Math.max(... this.columns.map(column => {\n        if (column.advancedHeader) {\n          return column.advancedHeader.length;\n        } else {\n          return 0;\n        }\n      }));\n      if (this.rowCount > 0) {\n        this.rowCountArray = new Array(this.rowCount);\n        this.initAdvanceHeader();\n      }\n      if (this.colDraggable) {\n        this.rerenderTables();\n      }\n    }\n    if (changes && changes.dataSource) {\n      if (this.colDraggable) {\n        this.rerenderTables();\n      }\n    }\n\n    if (this.colDraggable && changes['tableBodyEl'] && this.tableBodyEl) {\n      if (this.fixHeader && this.tableBodyEl && this.dataSource.length) {\n        this.fixOriginTable = this.tableBodyEl.nativeElement;\n        this.renderFixFakeTableEl();\n        this.fixFakeTableEl.style.display = 'none';\n        this.fixTableScrollViewEl = this.fixOriginTable.parentNode.parentNode;\n        this.ref.markForCheck();\n      }\n    }\n  }\n\n  ngDoCheck() {\n    if (!this.colDraggable) {\n      return;\n    }\n    this.dataSource.forEach((elt, index) => {\n      const objDiffer = this.objDiffer[index];\n      if (!objDiffer) {\n        return;\n      }\n      const objChanges = objDiffer.diff(elt);\n      if (objChanges) {\n        objChanges.forEachChangedItem((changeItem) => {\n          if (changeItem.key === '$isChildTableOpen' && elt.children && elt.children.length) {\n            this.rerenderTables();\n          }\n\n          if (changeItem.key === 'children') {\n            this.rerenderTables();\n          }\n        });\n      }\n    });\n\n    const changes = this.iterableDiffer.diff(this.columns);\n    if (changes) {\n      this.createCellMap();\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.colDraggable) {\n      // set mirror container to table-wrap element\n      this.mirrorContainer = this.element.nativeElement.parentNode.parentNode;\n      this.bodyOverflow = this.documentElement.style.overflow;\n      this.detecteOriginTable();\n      setTimeout(() => { // wait for table render ready\n        this.renderFakeTable();\n        this.el.style.display = 'none';\n\n      });\n      this.documentElement.addEventListener('resize', this.renderFakeTable);\n      this.createCellMap();\n      this.scrollViewEl = this.originTable.parentNode.parentNode;\n      this.scrollViewRect = this.scrollViewEl.getBoundingClientRect();\n\n    }\n  }\n\n  createCellMap() {\n    let cellIndex = 0;\n    this.columns.forEach((column, index) => {\n      if (!column.advancedHeader) {\n        this.cellMap[cellIndex] = { name: column.field, sortKey: [index] };\n        cellIndex++;\n      } else {\n        if (column.advancedHeader[0].colspan) {\n          this.cellMap[cellIndex] = {\n            name: column.field, isAdvanceHeader: true,\n            sortKey: [index], headerLength: column.advancedHeader[0].colspan\n          };\n          cellIndex++;\n        } else {\n          Object.keys(this.cellMap).forEach(key => {\n            const item = this.cellMap[key];\n            if (item.isAdvanceHeader && item.sortKey.length < item.headerLength) {\n              item.sortKey.push(index);\n            }\n          });\n        }\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.colDraggable) {\n      this.documentElement.removeEventListener('resize', this.renderFakeTable);\n    }\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n    }\n  }\n\n  onHeadClick(event: SortEventArg, column: DataTableColumnTmplComponent) {\n    event.field = column.field;\n    delete event.th;\n    this.headClickSortEvent.emit(event);\n  }\n\n  onCheckAllChange() {\n    this.dt.onCheckAllChange(this.pageAllChecked);\n  }\n\n  onSearchQueryChange() {\n    this.dt.onSearchQueryChange(this.searchQuery);\n  }\n\n  canFilterable(column: DataTableColumnTmplComponent) {\n    return column.field && column.field !== '$index' && column.filterable;\n  }\n\n  getIfExistMultiSort(field): any {\n    const column = this.columns.find(item => item['field'] === field);\n    return !!column.sortable;\n  }\n\n  getSortDirection(field): any {\n    if (!this.multiSortArray) {\n      return false;\n    }\n    const filterField = this.multiSortArray.filter(item => {\n      return item['field'] === field;\n    });\n    if (filterField.length !== 0) {\n      return filterField[0]['direction'];\n    } else {\n      return undefined;\n    }\n  }\n\n  onResize($event, column) {\n    this.resizeHandlerEvent.emit({\n      ...$event,\n      field: column.field\n    });\n  }\n\n  onBeginResize($event) {\n    const thRenderWidthList = [];\n    this.thList.forEach(th => {\n      thRenderWidthList.push({ field: th.element.getAttribute('field'), width: th.element.clientWidth });\n    });\n    this.beginResizeHandlerEvent.emit({ event: $event, thRenderWidthList });\n  }\n\n  onResizing($event, column) {\n    this.resizingHandlerEvent.emit({\n      ...$event,\n      field: column.field\n    });\n  }\n\n  // 初始化多行表头，为了兼容resizeable对表头互相影响数据做了记录\n  initAdvanceHeader() {\n    if (this.resizeable) {\n      this.columns.forEach((column, colIndex) => {\n        if (column['advancedHeader']) {\n          column['advancedHeader'].forEach((item, rowIndex) => {\n            item['$rowIndex'] = rowIndex;\n            item['$colIndex'] = colIndex;\n            item['$cols'] = new Array(item.colspan).fill(1).map((v, i) => colIndex + i);\n          });\n        }\n        column['$colIndex'] = colIndex;\n      });\n    }\n  }\n\n  trackByFn(index, item) {\n    return index;\n  }\n\n  onTap(e) {\n    e.preventDefault();\n    this.originCellIndex = this.findCellIndex(e);\n    setTimeout(() => { // fix chrome bug, mousedown的时候会错误的触发mousemove\n      this.documentElement.addEventListener('mousemove', this.handleMousemove);\n      this.documentElement.addEventListener('mouseup', () => {\n        this.documentElement.removeEventListener('mousemove', this.handleMousemove);\n      });\n    });\n  }\n\n  handleMousemove = (e) => {\n    e.preventDefault();\n    this.documentElement.removeEventListener('mousemove', this.handleMousemove);\n    this.documentElement.addEventListener('mousedown', this.grab);\n    this.documentElement.addEventListener('mouseup', this.release);\n    setTimeout(() => { // fix chrome bug, mousedown的时候会错误的触发mousemove\n      this.dispatchMousedown();\n    });\n  };\n\n  grab = (e) => {\n    e.preventDefault();\n    this.documentElement.removeEventListener('mousedown', this.grab);\n    this.addClass(this.documentElement, 'gu-unselectable');\n    const context = this.canStart(e.target);\n    this.grabbed = context;\n    this.documentElement.addEventListener('mousemove', this.startBecauseMouseMoved);\n  };\n\n  startBecauseMouseMoved = (e) => {\n    e.preventDefault();\n    if (!this.grabbed) {\n      return;\n    }\n    this.documentElement.removeEventListener('mousemove', this.startBecauseMouseMoved);\n    this.documentElement.addEventListener('mousemove', this.drag);\n    this.source = this.grabbed.source;\n    this.item = this.grabbed.item;\n    this.initialSibling = this.currentSibling = this.nextEl(this.grabbed.item);\n    this.addClass(this.item, 'gu-transit');\n    this.el.style.display = 'flex';\n    this.el.style.position = 'relative';\n    this.originTable.style.display = 'none';\n    if (this.fixHeader) {\n      this.fixTableOffsetTop = this.fixOriginTable.parentNode.parentNode.scrollTop;\n      this.fixFakeTableEl.style.display = 'flex';\n      this.fixOriginTable.style.display = 'none';\n      this.fixFakeTableEl.style.position = 'relative';\n    }\n    this.offsetX = 15;\n    this.offsetY = 15;\n    this.renderMirrorImage(this.item);\n  };\n\n  release = (e) => {\n    e.preventDefault();\n    this.grabbed = null;\n    this.documentElement.removeEventListener('mousemove', this.drag);\n    this.documentElement.removeEventListener('mouseup', this.release);\n    const to = Array.from(this.el.children).indexOf(this.item);\n    this.removeMirrorImage();\n    this.el.style.display = 'none';\n    this.originTable.style.display = 'table';\n    if (this.fixHeader) {\n      this.fixFakeTableEl.style.display = 'none';\n      this.fixOriginTable.style.display = 'table';\n      this.fixFakeTableEl.style.position = 'absolute';\n    }\n    this.documentElement.style.overflow = this.bodyOverflow;\n    this.documentElement.removeEventListener('mouseup', this.release);\n    if (this.item) {\n      this.rmClass(this.item, 'gu-transit');\n    }\n    this.sortColumn(this.originCellIndex.x, to);\n    cancelAnimationFrame(this.animationRequestId);\n  };\n\n  sortColumn = (from, to) => {\n    if (from === to) {\n      return;\n    }\n    let offset = 0;\n    if (this.checkable) {\n      offset++;\n    }\n    if (this.showExpandToggle) {\n      offset++;\n    }\n    from = from - offset;\n    to = to - offset;\n    let toCell = this.cellMap[to].sortKey[0];\n    let fromCell = this.cellMap[from].sortKey[0];\n    let loopCount = 1;\n    if (this.cellMap[from].isAdvanceHeader) {\n      loopCount = this.cellMap[from].headerLength;\n      if (from > to) {\n        fromCell = this.cellMap[from].sortKey[this.cellMap[from].headerLength - 1];\n      }\n    }\n    if (this.cellMap[to].isAdvanceHeader && from < to) {\n      toCell = this.cellMap[to].sortKey[this.cellMap[to].headerLength - 1];\n    }\n    for (let i = 0; i < loopCount; i++) {\n      this.dragTableEndEvent.emit({ from: fromCell, to: toCell });\n    }\n  };\n\n  sort = ({ list, from, to }) => {\n    if (!list[from] && !list[to]) {\n      return;\n    }\n    if (from < to) {\n      this.appendSibling({ target: list[from], origin: list[to] });\n    } else {\n      this.insertBeforeSibling({ target: list[from], origin: list[to] });\n    }\n  };\n\n  appendSibling({ target, origin }) {\n    if (!target) {\n      return;\n    }\n    target.parentNode.insertBefore(target, origin ? origin.nextElementSibling : null);\n  }\n\n  getOffset(el) {\n    const rect = el.getBoundingClientRect();\n    return {\n      left: rect.left + this.getScroll('scrollLeft', 'pageXOffset'),\n      top: rect.top + this.getScroll('scrollTop', 'pageYOffset')\n    };\n  }\n  getScroll(scrollProp, offsetProp) {\n    if (typeof window !== undefined && typeof window[offsetProp] !== 'undefined') {\n      return window[offsetProp];\n    }\n    if (this.documentElement.clientHeight) {\n      return this.documentElement[scrollProp];\n    }\n    return this.document.body[scrollProp];\n  }\n\n  dispatchMousedown() {\n    const { el, originCellIndex } = this;\n    el.children[originCellIndex.x].dispatchEvent(this.getTouchyEvent());\n  }\n\n  getTouchyEvent() {\n    let event;\n    // This is true only for IE,firefox\n    if (this.document.createEvent) {\n      // To create a mouse event , first we need to create an event and then initialize it.\n      event = this.document.createEvent('MouseEvent');\n      event.initMouseEvent('mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    } else {\n      event = new MouseEvent('mousedown', {\n        'view': window,\n        'bubbles': true,\n        'cancelable': true\n      });\n    }\n    return event;\n  }\n\n  removeMirrorImage() {\n    if (this.mirror) {\n      this.documentElement.removeEventListener('mousemove', this.grab);\n      this.getParent(this.mirror).removeChild(this.mirror);\n      this.mirror = null;\n      setTimeout(() => {\n        this.rmClass(this.mirrorContainer, 'gu-unselectable');\n        this.rmClass(this.documentElement, 'gu-unselectable');\n      });\n    }\n  }\n\n  canStart(item) {\n    while (this.getParent(item) && this.isContainer(this.getParent(item)) === false) {\n      item = this.getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    const source = this.getParent(item);\n    if (!source) {\n      return;\n    }\n    return {\n      item: item,\n      source: source\n    };\n  }\n\n  detecteOriginTable() {\n    let target = this.element.nativeElement;\n    while (target.nodeName !== 'TABLE') {\n      target = target.parentElement;\n    }\n    this.originTable = target;\n    if (this.fixHeader && this.tableBodyEl) {\n      this.fixOriginTable = this.tableBodyEl.nativeElement;\n      this.detecteChildTables(this.fixOriginTable);\n    } else {\n      this.detecteChildTables(this.originTable);\n    }\n  }\n\n  rerenderTables = () => {\n    this.dataSourceChange = true;\n    if (this.fixHeader && this.tableBodyEl && this.dataSource.length) {\n      this.fixOriginTable = this.tableBodyEl.nativeElement;\n      setTimeout(() => {\n        this.renderFixFakeTableEl();\n        this.fixFakeTableEl.style.display = 'none';\n      });\n    } else {\n      this.detecteOriginTable();\n      setTimeout(() => {\n        this.renderFakeTable();\n        this.el.style.display = 'none';\n      });\n    }\n  };\n\n  renderFakeTable() {\n    if (this.el && !this.dataSourceChange) {\n      return;\n    }\n    this.childTables = [];\n    this.detecteChildTables(this.originTable);\n    const fakeTable = this.buildFakeTable(this.originTable);\n    this.fakeTable = fakeTable;\n    const el = fakeTable.reduce((previous, current) => {\n      const li = this.document.createElement('li');\n      if (current) {\n        li.appendChild(current);\n      }\n      return previous.appendChild(li) && previous;\n    }, this.document.createElement('ul'));\n    this.el = el;\n    this.renderEl(el, this.originTable, fakeTable);\n  }\n\n  renderFixFakeTableEl() {\n    if (this.fixFakeTableEl && !this.dataSourceChange) {\n      return;\n    }\n    const fakeTable = this.buildFakeTable(this.fixOriginTable);\n    this.mainFakeTable = fakeTable;\n    const el = fakeTable.reduce((previous, current) => {\n      const li = this.document.createElement('li');\n      li.appendChild(current);\n      return previous.appendChild(li) && previous;\n    }, this.document.createElement('ul'));\n    this.fixFakeTableEl = el;\n    this.renderEl(el, this.fixOriginTable, this.mainFakeTable);\n  }\n  buildFakeTable(table) {\n    this.colOffset = 0;\n    this.secondHeaderOffset = 0;\n    return Array.from(table.rows[0].children).map((cell, index) => {\n      return this.getColumnAsTableByIndex(table, index, (<any>cell).colSpan, (<any>cell).rowSpan);\n    });\n  }\n\n  renderEl(el, originEl, fakeTables) {\n    if (typeof window === undefined) {\n      return;\n    }\n    this.sizeColumnFake(fakeTables, originEl);\n    this.css(el, {\n      position: 'absolute',\n    });\n    if (originEl.parentNode.children[0].nodeName === 'UL') {\n      originEl.parentNode.removeChild(originEl.parentNode.children[0]);\n      this.insertBeforeSibling({ target: el, origin: originEl });\n    } else {\n      this.insertBeforeSibling({ target: el, origin: originEl });\n    }\n\n    // render every wrapper of table(element li)\n    const spacing = window.getComputedStyle(originEl).getPropertyValue('border-spacing').split(' ')[0];\n    const attr = 'margin-right';\n    const length = el.children.length;\n    Array.from(el.children).forEach((li, dex) => {\n      if (spacing && dex < (length - 1)) {\n        (<any>li).style[attr] = `-${spacing}`;\n      }\n    });\n    this.addClass(el.parentElement, this.classes.dragging);\n    this.addClass(el, this.classes.draggableTable);\n    this.addClass(el, 'sindu_column');\n  }\n\n  sizeColumnFake(fakeTables, originEl) {\n    // calculate width of every column\n    Array.from(originEl.rows[0].children).forEach(\n      (cell, index) => {\n        if (!fakeTables[index]) {\n          return;\n        }\n        const w = (<any>cell).getBoundingClientRect().width;\n        const t = fakeTables[index];\n        this.css(t, { width: `${w}px` });\n        this.css(t.rows[0].children[0], { width: `${w}px` });\n      }\n    );\n  }\n\n  css(el, cssList) {\n    Object.keys(cssList).forEach((k) => {\n      el.style[k] = cssList[k];\n    });\n    return el;\n  }\n\n  insertBeforeSibling({ target, origin }) {\n    if (!target) {\n      return;\n    }\n    origin.parentNode.insertBefore(target, origin);\n  }\n\n  findCellIndex(e) {\n    let target = e.target;\n    while (target.nodeName !== 'TH') {\n      target = target.parentElement || target.parentNode;\n    }\n    return { x: target.cellIndex, y: target.parentElement.rowIndex };\n  }\n\n  renderMirrorImage(target) {\n    if (this.mirror) {\n      return;\n    }\n\n    this.mirror = target.cloneNode(true);\n    const getFixTableTotalHeight = () => {\n      return this.fixOriginTable.parentNode.parentNode.parentNode.getBoundingClientRect().height;\n    };\n    const getTableTotalHeight = () => {\n      return this.originTable.parentNode.parentNode.parentNode.getBoundingClientRect().height;\n    };\n    // 固定表头表格时，对拖动内容进行截取\n    if (this.fixHeader) {\n      const to = Array.from(this.el.children).indexOf(target);\n      const fixTarget = this.fixFakeTableEl.children[to].children[0].cloneNode(true);\n      const fixTargetContainer = this.document.createElement('div');\n      const mirrorHeight = Math.min(parseInt(this.maxHeight, 10), getFixTableTotalHeight());\n      fixTargetContainer.style.height = mirrorHeight + 'px';\n      fixTargetContainer.style.overflow = 'hidden';\n      fixTargetContainer.appendChild(fixTarget);\n      fixTarget.style.maxHeight = this.maxHeight;\n      fixTarget.style.top = '-' + this.fixTableOffsetTop + 'px';\n      this.mirror.appendChild(fixTargetContainer);\n    }\n\n    // 设置最大高度，但不是固定表头的表格\n    if (!this.fixHeader && this.maxHeight) {\n      const mirrorHeight = Math.min(parseInt(this.maxHeight, 10), getTableTotalHeight());\n      this.mirror.style.height = mirrorHeight + 'px';\n      this.mirror.style.overflow = 'hidden';\n    }\n    this.mirror.style.visibility = 'hidden';\n    const thNode = this.mirror.querySelector('th');\n    this.addClass(thNode, 'hover');\n    this.rmClass(this.mirror, 'gu-transit');\n    this.addClass(this.mirror, 'gu-mirror');\n    this.mirrorContainer.appendChild(this.mirror);\n    this.addClass(this.mirrorContainer, 'gu-unselectable');\n  }\n\n  lookupClass(className) {\n    const cache = {};\n    const start = '(?:^|\\\\s)';\n    const end = '(?:\\\\s|$)';\n    let cached = cache[className];\n    if (cached) {\n      cached.lastIndex = 0;\n    } else {\n      cache[className] = cached = new RegExp(start + className + end, 'g');\n    }\n    return cached;\n  }\n\n  addClass(el, className) {\n    const current = el.className;\n    if (!current.length) {\n      el.className = className;\n    } else if (!this.lookupClass(className).test(current)) {\n      el.className += ' ' + className;\n    }\n  }\n\n  rmClass(el, className) {\n    el.className = el.className.replace(this.lookupClass(className), ' ').trim();\n  }\n\n  drag = (e) => {\n    e.preventDefault();\n    if (!this.mirror) {\n      return;\n    }\n    const clientX = this.getCoord('clientX', e);\n    const clientY = this.getCoord('clientY', e);\n    if (this.animationRequestId) {\n      cancelAnimationFrame(this.animationRequestId);\n      this.animationRequestId = null;\n    }\n    this.handleScroll(clientX, clientY, e);\n    this.documentElement.style.overflow = 'hidden';\n\n    const x = clientX - this.offsetX;\n    const y = clientY - this.offsetY;\n    this.mirror.style.left = x + 'px';\n    this.mirror.style.top = y + 'px';\n    this.mirror.style.visibility = 'visible';\n\n    const elementBehindCursor = this.getElementBehindPoint(this.mirror, clientX, clientY);\n    const dropTarget = this.findDropTarget(elementBehindCursor, clientX, clientY);\n    if (!dropTarget) {\n      return;\n    }\n\n    const immediate = this.getImmediateChild(dropTarget, elementBehindCursor);\n    let reference;\n    if (immediate) {\n      reference = this.getReference(dropTarget, immediate, clientX);\n    }\n\n    const changed = dropTarget !== null && dropTarget !== this.lastDropTarget;\n    if (changed || dropTarget === null) {\n      this.lastDropTarget = dropTarget;\n    }\n    if (\n      (reference === null && changed) ||\n      reference !== this.item &&\n      reference !== this.nextEl(this.item)\n    ) {\n      let mover;\n      const nowCord = e.pageX;\n      if (nowCord < this.oldCoord) {\n        mover = reference; // upward or right\n      } else {\n        mover = reference ? (reference.previousElementSibling ? reference.previousElementSibling : reference) : dropTarget.lastElementChild;\n      }\n      this.oldCoord = nowCord;\n\n      let from;\n      let to;\n      let moverIndex;\n      let fixItemRect;\n      let fixItem;\n      let fixMoverRect;\n      let fixMover;\n      if (this.fixHeader) {\n        from = Array.from(this.el.children).indexOf(this.item);\n        to = Array.from(this.el.children).indexOf(reference);\n        moverIndex = Array.from(this.el.children).indexOf(mover);\n        fixItem = Array.from(this.fixFakeTableEl.children)[from];\n        fixItemRect = fixItem.getBoundingClientRect();\n        fixMover = Array.from(this.fixFakeTableEl.children)[moverIndex];\n        fixMoverRect = moverIndex !== -1 && fixMover.getBoundingClientRect();\n      }\n\n      const moverRect = mover && mover.getBoundingClientRect();\n      const itemRact = this.item.getBoundingClientRect();\n      this.moveTarget(dropTarget, this.item, reference);\n      if (this.fixHeader) {\n        this.moveTarget(this.fixFakeTableEl, Array.from(this.fixFakeTableEl.children)[from], Array.from(this.fixFakeTableEl.children)[to]);\n      }\n      if (mover && moverRect) {\n        this.animate(moverRect, mover, 300);\n        this.animate(itemRact, this.item, 300);\n      }\n      if (this.fixHeader && moverIndex !== -1 && fixMoverRect) {\n        this.animate(fixMoverRect, fixMover, 300);\n        this.animate(fixItemRect, fixItem, 300);\n      }\n    }\n  };\n\n  handleScroll(x, y, e) {\n    this.scrollViewRect = this.scrollViewEl.getBoundingClientRect();\n    let fixTableScrollViewRect;\n    if (this.fixHeader) {\n      this.fixTableScrollViewEl = this.fixOriginTable.parentNode.parentNode;\n      fixTableScrollViewRect = this.fixTableScrollViewEl.getBoundingClientRect();\n    }\n    let scrollLeft = this.scrollViewEl.scrollLeft;\n    const range = 150;\n    const scrollToLeft = () => {\n      scrollLeft -= 50;\n      if (this.fixHeader) {\n        this.fixTableScrollViewEl.scrollTo(scrollLeft, 0);\n      }\n      this.scrollViewEl.scrollTo(scrollLeft, 0);\n      this.animationRequestId = requestAnimationFrame(scrollToLeft);\n      this.documentElement.dispatchEvent(e);\n    };\n\n    const scrollToRight = () => {\n      scrollLeft += 50;\n      if (this.fixHeader) {\n        this.fixTableScrollViewEl.scrollTo(scrollLeft, 0);\n      }\n      this.scrollViewEl.scrollTo(scrollLeft, 0);\n      this.animationRequestId = requestAnimationFrame(scrollToRight);\n      this.documentElement.dispatchEvent(e);\n    };\n    if (!this.fixHeader && (y < this.scrollViewRect.top || y > this.scrollViewRect.bottom)) {\n      return;\n    }\n    if (this.fixHeader && (y < this.scrollViewRect.top || y > fixTableScrollViewRect.bottom)) {\n      return;\n    }\n\n    if (this.scrollViewRect.left < x && x < (this.scrollViewRect.left + range)) {\n      this.animationRequestId = requestAnimationFrame(scrollToLeft);\n    }\n    if ((this.scrollViewRect.right - range) < x && x < this.scrollViewRect.right) {\n      this.animationRequestId = requestAnimationFrame(scrollToRight);\n    }\n  }\n\n  moveTarget(container, target, reference) {\n    container.insertBefore(target, reference);\n  }\n\n  getParent(el) {\n    return el.parentNode === this.document ? null : el.parentNode;\n  }\n\n  getEventHost(e) {\n    if (e.targetTouches && e.targetTouches.length) {\n      return e.targetTouches[0];\n    }\n    if (e.changedTouches && e.changedTouches.length) {\n      return e.changedTouches[0];\n    }\n    return e;\n  }\n\n  getCoord(coord, e) {\n    const host = this.getEventHost(e);\n    return host[coord];\n  }\n\n  getLongestRow = (table) => {\n    let result = table.rows[0];\n    Array.from(table.rows).forEach((row) => {\n      const rowL = (<any>row).children.length;\n      const resultL = result.children.length;\n      result = rowL > resultL ? row : result;\n    });\n    return result;\n  };\n  getColumnAsTableByIndex(table, selectedColIndex, colSpan, rowSpan) {\n    const skipRowIndexList = this.getDataBetween(0, 0 + rowSpan);\n    const cTable = table.cloneNode(true);\n    cTable.removeChild(cTable.firstChild); // remove colgroup\n    if (this.fixHeader) {\n      cTable.deleteCaption();\n    } else if (!this.fixHeader && cTable.tBodies.length > 1) {\n      cTable.removeChild(cTable.tBodies[0]);\n    }\n    this.origin2DragItem(cTable);\n    const empty = (node) => {\n      while (node.firstChild) {\n        node.removeChild(node.firstChild);\n      }\n    };\n    const insertBodyColList = this.getDataBetween(selectedColIndex - 1 + this.colOffset, selectedColIndex + this.colOffset + colSpan);\n    const insertHeaderColList = this.getDataBetween(selectedColIndex + this.secondHeaderOffset - 1, selectedColIndex +\n      this.secondHeaderOffset + colSpan - rowSpan + 1);\n    const getTreeTableCol = (row, rowIndex) => {\n      const target = this.getChildTableColumn((<any>row).children[0].children[0], selectedColIndex);\n      empty((<any>row).children[0]);\n      (<any>row).children[0].appendChild(target);\n    };\n    const getMultipleHCol = (row, rowIndex) => {\n      if (rowIndex === 0) {\n        const target = (<any>row).children[selectedColIndex];\n        empty(row);\n        if (target) {\n          (<any>row).appendChild(target);\n        }\n        return;\n      }\n      if (rowIndex === 1) {\n        const targets = insertHeaderColList.map((colIndex) => {\n          return (<any>row).children[colIndex];\n        });\n        empty(row);\n        targets.forEach((target) => {\n          if (target) {\n            (<any>row).appendChild(target);\n          }\n        });\n        return;\n      } else {\n        const targets = insertBodyColList.map((colIndex) => {\n          return (<any>row).children[colIndex];\n        });\n        empty(row);\n        targets.forEach((target) => {\n          if (target) {\n            (<any>row).appendChild(target);\n          }\n        });\n      }\n    };\n\n    const getNormalTableCol = (row, rowIndex) => {\n      if (rowIndex === 0) {\n        const target = (<any>row).children[selectedColIndex];\n        empty(row);\n        if (target) {\n          (<any>row).appendChild(target);\n        }\n      } else {\n        const target = (<any>row).children[selectedColIndex + this.colOffset];\n        empty(row);\n        if (target && skipRowIndexList.indexOf(rowIndex) === -1) {\n          (<any>row).appendChild(target);\n        }\n      }\n    };\n\n    Array.from(cTable.rows).forEach((row, rowIndex) => {\n      if ((<any>row).classList.contains('child-table')) {\n        getTreeTableCol(row, rowIndex);\n      } else {\n        if (colSpan > 1) {\n          getMultipleHCol(row, rowIndex);\n        } else {\n          getNormalTableCol(row, rowIndex);\n        }\n      }\n      this.css(row, { height: `${table.rows[rowIndex].getBoundingClientRect().height}px` });\n    });\n    this.colOffset += (colSpan - 1);\n    this.secondHeaderOffset = rowSpan > 1 ? this.secondHeaderOffset - 1 : this.secondHeaderOffset;\n    return cTable;\n  }\n\n  getDataBetween(form, end) {\n    const result = [];\n    for (let i = form + 1; i < end; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n\n  getChildTableColumn = (table, index) => {\n    const cTable = table.cloneNode(true);\n    this.origin2DragItem(cTable);\n    const empty = (node) => {\n      while (node.firstChild) {\n        node.removeChild(node.firstChild);\n      }\n    };\n    Array.from(cTable.rows).forEach((row) => {\n      if ((<any>row).classList.contains('child-table')) {\n        const target = this.getChildTableColumn((<any>row).children[0].children[0], index);\n        empty((<any>row).children[0]);\n        (<any>row).children[0].appendChild(target);\n      } else {\n        const target = (<any>row).children[index];\n        empty(row);\n        if (target) {\n          (<any>row).appendChild(target);\n        }\n      }\n    });\n    this.sizeChildColumnFake(cTable, table, index);\n    return cTable;\n  };\n\n  sizeChildColumnFake(fakeTable, originEl, index) {\n    // calculate width of every column\n    const cell = Array.from(this.originTable.rows[0].children)[index];\n    const w = (<any>cell).getBoundingClientRect().width;\n    this.css(fakeTable, { width: `${w}px` });\n    this.css(fakeTable.rows[0].children[0], { width: `${w}px` });\n\n    // calculate height of every cell\n    const rowHeights = Array.from(originEl.rows)\n      .map(row => (<any>row).children[0].getBoundingClientRect().height);\n    Array.from(fakeTable.rows).forEach((row, rowIndex) => {\n      this.css(row, { height: `${rowHeights[rowIndex]}px` });\n    });\n  }\n\n  detecteChildTables = (table) => {\n    Array.from(table.rows).forEach((row, index) => {\n      if ((<any>row).classList.contains('child-table')) {\n        const childTable = (<any>table.rows[index]).children[0].children[0];\n        this.childTables.push(childTable);\n        this.detecteChildTables(childTable);\n      }\n    });\n  };\n  origin2DragItem(liTable) {\n    this.css(liTable, { 'table-layout': 'fixed', width: 'initial', height: 'initial', padding: 0, margin: 0 });\n    ['width', 'height', 'id'].forEach((p) => {\n      liTable.removeAttribute(p);\n    });\n  }\n\n  getElementBehindPoint(point, x, y) {\n    const p = point || {};\n    const state = p.className;\n    p.className += ' gu-hide';\n    const el = this.document.elementFromPoint(x, y);\n    p.className = state;\n    return el;\n  }\n\n  findDropTarget(elementBehindCursor, clientX, clientY) {\n    let target = elementBehindCursor;\n    const accepted = () => {\n      const droppable = this.isContainer(target);\n      if (droppable === false) {\n        return false;\n      }\n\n      const immediate = this.getImmediateChild(target, elementBehindCursor);\n      if (!immediate) {\n        return false;\n      }\n      const reference = this.getReference(target, immediate, clientX);\n      const initial = this.isInitialPlacement(target, reference);\n      if (initial) {\n        return true; // should always be able to drop it right back where it was\n      }\n      return true;\n    };\n\n    while (target && !accepted()) {\n      target = this.getParent(target);\n    }\n    return target;\n  }\n\n  getReference = (dropTarget, target, x) => {\n    const resolve = (after) => {\n      return after ? this.nextEl(target) : target;\n    };\n\n    const inside = () => { // faster, but only available if dropped inside a child element\n      const rect = target.getBoundingClientRect();\n      return resolve(x > rect.left + this.getRectWidth(rect) / 2);\n    };\n\n    const outside = () => { // slower, but able to figure out any position\n      const len = dropTarget.children.length;\n      let i;\n      let el;\n      let rect;\n      for (i = 0; i < len; i++) {\n        el = dropTarget.children[i];\n        rect = el.getBoundingClientRect();\n        if ((rect.left + rect.width / 2) > x) {\n          return el;\n        }\n      }\n      return null;\n    };\n\n    const reference = target !== dropTarget ? inside() : outside();\n    return reference;\n  };\n\n  getRectWidth(rect) {\n    return rect.width || (rect.right - rect.left);\n  }\n  getRectHeight(rect) {\n    return rect.height || (rect.bottom - rect.top);\n  }\n\n  nextEl(el) {\n    return el.nextElementSibling || manually();\n    function manually() {\n      let sibling = el;\n      do {\n        sibling = sibling.nextSibling;\n      } while (sibling && sibling.nodeType !== 1);\n      return sibling;\n    }\n  }\n\n  isInitialPlacement(target, s) {\n    let sibling;\n    if (s !== undefined) {\n      sibling = s;\n    } else if (this.mirror) {\n      sibling = this.currentSibling;\n    } else {\n      sibling = this.nextEl(this.item);\n    }\n    return target === this.source && sibling === this.initialSibling;\n  }\n\n  isContainer(el) {\n    return el === this.el;\n  }\n\n  getImmediateChild = (dropTarget, target) => {\n    let immediate = target;\n    const isElementDropFreeze = (element) => {\n      const index = Array.from(element.parentNode.children).indexOf(element);\n      return index < this.colDropFreezeTo;\n    };\n    while (immediate !== dropTarget && this.getParent(immediate) !== dropTarget) {\n      immediate = this.getParent(immediate);\n    }\n    if (immediate === this.documentElement || isElementDropFreeze(immediate)) {\n      return null;\n    }\n    return immediate;\n  };\n\n  animate(prevRect, target, time) {\n    if (time) {\n      if (!prevRect || !target) {\n        return;\n      }\n      const currentRect = target.getBoundingClientRect();\n      target.style.transition = 'none';\n      target.style.transform = 'translate3d(' + (prevRect.left - currentRect.left) + 'px,' + (prevRect.top - currentRect.top) + 'px,0)';\n      target.style.transition = 'all ' + time + 'ms cubic-bezier(0.755, 0.05, 0.855, 0.06)';\n      target.style.transform = 'translate3d(0,0,0)';\n      clearTimeout(target.animated);\n      target.animated = setTimeout(function () {\n        target.style.transition = '';\n        target.style.transform = '';\n        target.animated = false;\n      }, time);\n    }\n  }\n\n  toggleChildrenTable(event) {\n    this.childrenTableOpen = !this.childrenTableOpen;\n    this.dt.onToggleAllChildrenTable(this.childrenTableOpen);\n  }\n\n  onOptionSelect(option: TableCheckOptions) {\n    if (option.onChecked) {\n      option.onChecked();\n    }\n  }\n}\n","<ng-container>\n  <ng-template [ngTemplateOutlet]=\"defaultHeadTemplate\" [ngTemplateOutletContext]=\"{ $implicit: this }\" *ngIf=\"!(rowCount > 0)\">\n  </ng-template>\n  <ng-template\n    [ngTemplateOutlet]=\"AdvancedHeadTmpl\"\n    [ngTemplateOutletContext]=\"{ $implicit: this, rows: rowCountArray }\"\n    *ngIf=\"rowCount > 0\"\n  >\n  </ng-template>\n</ng-container>\n\n<!-- begin:template: header label template-->\n<ng-template #defaultHeadTemplate let-head=\"\">\n  <tr>\n    <th\n      *ngIf=\"showExpandToggle\"\n      class=\"devui-detail-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable\"\n      class=\"devui-checkable-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <th\n      dHeadCell\n      *ngFor=\"let column of columns; trackBy: trackByFn; let last = last; let colIndex = index\"\n      [minWidth]=\"column.minWidth\"\n      [maxWidth]=\"column.maxWidth\"\n      [attr.field]=\"column.field\"\n      [showSortIcon]=\"showSortIcon\"\n      [showFilterIcon]=\"showFilterIcon\"\n      [sortable]=\"getIfExistMultiSort(column.field)\"\n      [sortDirection]=\"getSortDirection(column.field)\"\n      (sortChange)=\"onHeadClick($event, column)\"\n      [filterable]=\"canFilterable(column)\"\n      [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n      [filterList]=\"column.filterList\"\n      [column]=\"column\"\n      [filterMultiple]=\"column.filterMultiple\"\n      [filterBoxWidth]=\"column.filterBoxWidth\"\n      [filterBoxHeight]=\"column.filterBoxHeight\"\n      [filterIconActive]=\"column.filterIconActive\"\n      [beforeFilter]=\"column.beforeFilter\"\n      [customFilterTemplate]=\"column.customFilterTemplate\"\n      [extraFilterTemplate]=\"column.extraFilterTemplate\"\n      [searchFn]=\"column.searchFn\"\n      (filterChange)=\"column.emitFilterData($event)\"\n      (filterToggle)=\"column.emitFilterToggle($event)\"\n      [fixedLeft]=\"column.fixedLeft\"\n      [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n      [fixedRight]=\"column.fixedRight\"\n      [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n      [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n      (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n      (tapEvent)=\"onTap($event)\"\n      [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n      [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n      [tableViewRefElement]=\"tableViewRefElement\"\n      [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n      [childrenTableOpen]=\"childrenTableOpen\"\n      [ngClass]=\"{\n        sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n        'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n      }\"\n      [resizeEnabled]=\"resizeable\"\n      (resizeEndEvent)=\"onResize($event, column)\"\n      (resizeStartEvent)=\"onBeginResize($event)\"\n      (resizingEvent)=\"onResizing($event, column)\"\n    >\n      <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n      <ng-container *ngIf=\"column.headCellTmpl?.template\">\n        <ng-template\n          [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n          [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n        ></ng-template>\n      </ng-container>\n    </th>\n  </tr>\n</ng-template>\n<!--end:tempate-->\n\n<ng-template let-head=\"\" let-rows=\"rows\" #AdvancedHeadTmpl>\n  <tr *ngFor=\"let rowContex of rows; let rowIndex = index\">\n    <th\n      *ngIf=\"showExpandToggle && rowIndex === 0\"\n      class=\"devui-detail-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable && rowIndex === 0\"\n      class=\"devui-checkable-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <ng-container *ngFor=\"let column of columns; trackBy: trackByFn; let colIndex = index; let last = last\">\n      <th\n        dHeadCell\n        *ngIf=\"column.advancedHeader && column.advancedHeader[rowIndex]?.rowspan && column.advancedHeader[rowIndex]?.colspan\"\n        [attr.rowspan]=\"column.advancedHeader[rowIndex]?.rowspan\"\n        [attr.colspan]=\"column.advancedHeader[rowIndex]?.colspan\"\n        [style.textAlign]=\"\n          rowIndex !== column.advancedHeader.length - 1 &&\n          (column.advancedHeader[rowIndex]?.rowspan > 0 || column.advancedHeader[rowIndex]?.colspan > 0)\n            ? 'center'\n            : ''\n        \"\n        [minWidth]=\"column.minWidth\"\n        [attr.field]=\"column.field\"\n        [maxWidth]=\"column.maxWidth\"\n        [resizeEnabled]=\"resizeable && rowIndex === column.advancedHeader.length - 1 && !last\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field) && rowIndex === column.advancedHeader.length - 1\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column) && rowIndex === column.advancedHeader.length - 1\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n      >\n        <span *ngIf=\"rowIndex < rows.length - 1 || !column.headCellTmpl?.template\" [attr.title]=\"column.advancedHeader[rowIndex].header\">{{\n          column.advancedHeader[rowIndex].header\n        }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template && rowIndex === rows.length - 1\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{\n              column: column,\n              $implicit: head,\n              rowIndex: rowIndex,\n              colIndex: colIndex\n            }\"\n          >\n          </ng-template>\n        </ng-container>\n      </th>\n      <th\n        dHeadCell\n        *ngIf=\"!column.advancedHeader && rowIndex === 0\"\n        [minWidth]=\"column.minWidth\"\n        [maxWidth]=\"column.maxWidth\"\n        [attr.field]=\"column.field\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field)\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column)\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n        [resizeEnabled]=\"resizeable\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [attr.rowspan]=\"rows?.length || 1\"\n      >\n        <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n          ></ng-template>\n        </ng-container>\n      </th>\n    </ng-container>\n    <!-- <th width=\"0\"  *ngIf=\"resizeable\"></th> -->\n  </tr>\n</ng-template>\n","import { Component, ContentChild, Input, OnInit, TemplateRef } from '@angular/core';\nimport { TableWidthConfig } from '../../data-table.model';\nimport { TableTrComponent } from '../row/tr.component';\n\n@Component({\n  /* eslint-disable-next-line @angular-eslint/component-selector*/\n  selector: '[dTableBody]',\n  templateUrl: './tbody.component.html',\n  styleUrls: ['./tbody.component.scss']\n})\nexport class TableTbodyComponent implements OnInit {\n  @Input() dataSource: any[] = [];\n  @Input() rowTemplete: TemplateRef<TableTrComponent>;\n  @Input() nestedLayer = 0;\n  @Input() nestedIndex = '-1';\n  @Input() virtualScroll;\n  @Input() tableWidthConfig: TableWidthConfig[];\n  @Input() minHeight: string;\n  @Input() minHeightStretchRow: TemplateRef<any>;\n\n  @ContentChild(TemplateRef) rowTempleteForSelect: TemplateRef<TableTrComponent>;\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  trackByFn(index) {\n    return index;\n  }\n}\n","<ng-container *ngIf=\"!virtualScroll; else scrollViewTpl\">\n  <ng-container *ngFor=\"let rowItem of dataSource; trackBy: trackByFn; let rowIndex = index\">\n    <ng-template\n      [ngTemplateOutlet]=\"trTable\"\n      [ngTemplateOutletContext]=\"{ rowItem: rowItem, rowIndex: rowIndex, nestedLayer: nestedLayer, nestedIndex: nestedIndex }\"\n    >\n    </ng-template>\n  </ng-container>\n</ng-container>\n\n<ng-template #scrollViewTpl>\n  <ng-container *cdkVirtualFor=\"let rowItem of dataSource; trackBy: trackByFn; let rowIndex = index\">\n    <ng-template\n      [ngTemplateOutlet]=\"trTable\"\n      [ngTemplateOutletContext]=\"{ rowItem: rowItem, rowIndex: rowIndex, nestedLayer: nestedLayer, nestedIndex: nestedIndex }\"\n    >\n    </ng-template>\n  </ng-container>\n</ng-template>\n\n<ng-template #trTable let-rowIndex=\"rowIndex\" let-rowItem=\"rowItem\" let-nestedLayer=\"nestedLayer\" let-nestedIndex=\"nestedIndex\">\n  <ng-template\n    [ngTemplateOutlet]=\"rowTemplete\"\n    [ngTemplateOutletContext]=\"{ rowItem: rowItem, rowIndex: rowIndex, nestedLayer: nestedLayer, nestedIndex: nestedIndex }\"\n  ></ng-template>\n  <tr class=\"child-table\" *ngIf=\"rowItem['children'] && rowItem['$isChildTableOpen']\" [style.height]=\"minHeight ? '40px' : null\">\n    <td [attr.colspan]=\"tableWidthConfig.length\">\n      <table class=\"devui-table\" [style.table-layout]=\"'fixed'\">\n        <colgroup>\n          <col [style.width]=\"config.width\" *ngFor=\"let config of tableWidthConfig\" />\n        </colgroup>\n        <tbody\n          dTableBody\n          [rowTemplete]=\"rowTemplete\"\n          [dataSource]=\"rowItem['children']\"\n          [tableWidthConfig]=\"tableWidthConfig\"\n          [nestedLayer]=\"nestedLayer + 1\"\n          [nestedIndex]=\"nestedIndex + ',' + rowIndex\"\n        ></tbody>\n      </table>\n    </td>\n  </tr>\n</ng-template>\n\n<ng-template [ngTemplateOutlet]=\"minHeightStretchRow\"></ng-template>\n","import {\n  AfterContentInit, Component, ContentChildren, ElementRef, EventEmitter, OnInit, Output, QueryList, Renderer2\n} from '@angular/core';\nimport { RowCheckChangeEventArg, TableCheckOptions } from '../../data-table.model';\nimport { TableThComponent } from '../head/th/th.component';\n\n@Component({\n  /* eslint-disable-next-line @angular-eslint/component-selector*/\n  selector: '[dTableRow]',\n  templateUrl: './tr.component.html',\n  styleUrls: ['./tr.component.scss']\n})\nexport class TableTrComponent implements OnInit, AfterContentInit {\n  @ContentChildren(TableThComponent) thList: QueryList<TableThComponent>;\n  headerCheckable: boolean;\n  headerCheckDisabled: boolean;\n  headerRowspan = 1;\n  headerCheckOptions: TableCheckOptions[];\n\n  headerChecked: boolean;\n  headerHalfChecked: boolean;\n  firstTh: TableThComponent;\n\n  @Output() headerCheckStatusEvent = new EventEmitter<boolean>();\n  @Output() checkStatusEvent = new EventEmitter<RowCheckChangeEventArg>();\n  constructor(\n    private eleRef: ElementRef,\n    private render2: Renderer2\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ngAfterContentInit() {\n    if (this.thList) {\n      this.firstTh = this.thList.first;\n    }\n    this.initFixedColumnStatus();\n  }\n\n  initFixedColumnStatus() {\n    const fixLeftList = this.eleRef.nativeElement.querySelectorAll('.devui-sticky-left-cell');\n    const fixRightList = this.eleRef.nativeElement.querySelectorAll('.devui-sticky-right-cell');\n    if (fixLeftList?.length) {\n      const lastEle = fixLeftList[fixLeftList.length - 1];\n      this.render2.addClass(lastEle, 'devui-last-sticky-left-cell');\n    }\n\n    if (fixRightList?.length) {\n      const firstEle = fixRightList[0];\n      this.render2.addClass(firstEle, 'devui-first-sticky-right-cell');\n    }\n\n\n  }\n\n  onHeaderCheckChange(checked) {\n    this.headerChecked = checked;\n    this.headerHalfChecked = false;\n    this.headerCheckStatusEvent.emit(checked);\n  }\n\n  onOptionSelect(option: TableCheckOptions) {\n    if (option.onChecked) {\n      option.onChecked();\n    }\n  }\n}\n","<th\n  *ngIf=\"headerCheckable\"\n  [attr.rowspan]=\"headerRowspan\"\n  class=\"devui-checkable-cell\"\n  [ngClass]=\"{ 'devui-sticky-left-cell': firstTh?.fixedLeft }\"\n  [style.left]=\"'0px'\"\n>\n  <d-checkbox\n    class=\"check-box-all\"\n    [name]=\"'checkbox'\"\n    (change)=\"onHeaderCheckChange($event)\"\n    [(ngModel)]=\"headerChecked\"\n    [halfchecked]=\"headerHalfChecked\"\n    [disabled]=\"headerCheckDisabled\"\n  ></d-checkbox>\n\n  <div *ngIf=\"headerCheckOptions && headerCheckOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n    <div dDropDownToggle>\n      <svg\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        height=\"16px\"\n        version=\"1.1\"\n        viewBox=\"0 0 16 16\"\n        width=\"16px\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n          <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n        </g>\n      </svg>\n    </div>\n    <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n      <li *ngFor=\"let option of headerCheckOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n        <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n      </li>\n    </ul>\n  </div>\n</th>\n<ng-content></ng-content>\n","import {\n  AfterContentInit, Component, ContentChildren, EventEmitter, Input, OnChanges, OnDestroy, OnInit, QueryList, SimpleChanges\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { TableCheckOptions, TableCheckStatusArg } from '../../data-table.model';\nimport { TableTrComponent } from '../row/tr.component';\nimport { TableThComponent } from './th/th.component';\n\n@Component({\n  /* eslint-disable-next-line @angular-eslint/component-selector*/\n  selector: '[dTableHead]',\n  templateUrl: './thead.component.html'\n})\nexport class TableTheadComponent implements OnInit, AfterContentInit, OnDestroy, OnChanges {\n  @Input() checkable: boolean;\n  @Input() checkDisabled: boolean;\n  @Input() checkOptions: TableCheckOptions[];\n  @ContentChildren(TableTrComponent) headerRowList: QueryList<TableTrComponent>;\n  @ContentChildren(TableThComponent, { descendants: true }) thList: QueryList<TableThComponent>;\n\n  headerFirstRow: TableTrComponent;\n  nestedTh: TableThComponent;\n  toggleTableSubscription: Subscription;\n  checkStatusSubscription: Subscription;\n  headerCheckStatusEvent = new EventEmitter<boolean>();\n  headerChildrenTableToggleEvent = new EventEmitter<boolean>();\n\n  constructor() { }\n\n  ngOnInit() {}\n\n  ngAfterContentInit() {\n    if (this.headerRowList) {\n      this.headerFirstRow = this.headerRowList.first;\n      if (this.headerFirstRow) {\n        this.headerFirstRow.headerRowspan = this.headerRowList.length;\n        this.headerFirstRow.headerCheckable = this.checkable;\n        this.headerFirstRow.headerCheckDisabled = this.checkDisabled;\n        this.headerFirstRow.headerCheckOptions = this.checkOptions;\n\n        this.checkStatusSubscription = this.headerFirstRow.headerCheckStatusEvent.subscribe((status) => {\n          this.headerCheckStatusEvent.emit(status);\n        });\n      }\n    }\n    if (this.thList) {\n      this.setNestedThToggle();\n      this.thList.changes.subscribe((list) => {\n        this.setNestedThToggle();\n      });\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (\n      (changes['checkable'] && !changes['checkable'].isFirstChange()) ||\n      (changes['checkDisabled'] && !changes['checkDisabled'].isFirstChange()) ||\n      (changes['checkOptions'] && !changes['checkOptions'].isFirstChange())\n    ) {\n      if (this.headerFirstRow) {\n        this.headerFirstRow.headerRowspan = this.headerRowList.length;\n        this.headerFirstRow.headerCheckable = this.checkable;\n        this.headerFirstRow.headerCheckDisabled = this.checkDisabled;\n        this.headerFirstRow.headerCheckOptions = this.checkOptions;\n      }\n    }\n  }\n\n  setNestedThToggle() {\n    this.nestedTh = this.thList.find(th => {\n      return th.nestedColumn;\n    });\n\n    if (this.nestedTh) {\n      this.toggleTableSubscription = this.nestedTh.toggleChildrenTableEvent.subscribe((childrenTableOpen) => {\n        this.headerChildrenTableToggleEvent.emit(childrenTableOpen);\n      });\n    }\n  }\n\n  setHeaderCheckStatus(status: TableCheckStatusArg) {\n    if (status.pageAllChecked !== undefined) {\n      this.headerFirstRow.headerChecked = status.pageAllChecked;\n    }\n\n    if (status.pageHalfChecked !== undefined) {\n      this.headerFirstRow.headerHalfChecked = status.pageHalfChecked;\n    }\n  }\n\n  setHeaderToggleStatus(open: boolean) {\n    if (this.nestedTh) {\n      this.nestedTh.childrenTableOpen = open;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.checkStatusSubscription) {\n      this.checkStatusSubscription.unsubscribe();\n      this.checkStatusSubscription = null;\n    }\n    if (this.toggleTableSubscription) {\n      this.toggleTableSubscription.unsubscribe();\n      this.toggleTableSubscription = null;\n    }\n  }\n}\n","<ng-content></ng-content>\n","import { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  AfterContentInit,\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostBinding,\n  Inject,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { merge, Subscription } from 'rxjs';\nimport { switchMap, takeUntil } from 'rxjs/operators';\nimport {\n  CellSelectedEventArg, CheckableRelation, ColumnResizeEventArg, RowCheckChangeEventArg,\n  RowSelectedEventArg, SortEventArg, TableCheckOptions, TableCheckStatusArg,\n  TableExpandConfig, TableWidthConfig\n} from './data-table.model';\nimport { DATA_TABLE } from './data-table.token';\nimport { TableTbodyComponent } from './table/body/tbody.component';\nimport { TableThComponent } from './table/head/th/th.component';\nimport { TableTheadComponent } from './table/head/thead.component';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\n\n@Component({\n  selector: 'd-data-table',\n  templateUrl: './data-table.component.html',\n  styleUrls: [\n    './data-table.component.scss',\n    './data-table.component.color.scss'\n  ],\n  // changeDetection: ChangeDetectionStrategy.OnPush,\n  exportAs: 'dataTable',\n  preserveWhitespaces: false,\n  providers: [{\n    provide: DATA_TABLE,\n    useExisting: forwardRef(() => DataTableComponent)\n  }],\n})\nexport class DataTableComponent implements OnDestroy, OnInit, OnChanges, AfterContentInit, AfterViewInit {\n  /**\n   * 【可选】Datatable是否提供勾选行的功能\n   */\n  @Input() checkable: boolean;\n  /**\n   * 【可选】表头checkbox是否disabled\n   */\n  @Input() headerCheckDisabled: boolean;\n  /**\n   * 【可选】表头checkbox是否可见\n   */\n  @Input() headerCheckVisible = true;\n  /**\n   * 【可选】表头选中的下拉项及操作\n   */\n  @Input() checkOptions: TableCheckOptions[];\n  /**\n   * 【可选】是否提供显示行详情的功能\n   */\n  @Input() showExpandToggle: boolean;\n  /**\n   * 【可选】是否固定表头（在表格超过容器最大高度时，表格可滚动时生效）\n   */\n  @Input() fixHeader: boolean;\n  /**\n   * 【可选】表格在超出容器时，是否可以通过滚动查看表格内容\n   */\n  @Input() scrollable: boolean;\n  /**\n   * 【可选】默认表格使用的表格类型，可选值为'cell' @deprecated\n   */\n  @Input() editModel = 'cell';\n  /**\n   * 【可选】限制表格最大宽度，默认撑满父容器\n   */\n  @Input() maxWidth: string;\n  /**\n   * 【可选】限制最大高度，默认\n   */\n  @Input() maxHeight: string;\n  /**\n   * 表格类型 @deprecated\n   */\n  @Input() type: any;\n  /**\n   * 鼠标悬浮行时是否高亮\n   */\n  @Input() rowHoveredHighlight = true;\n  /**\n   * 鼠标悬浮行时$hovered是否记录到rowItem中\n   */\n  @Input() generalRowHoveredData;\n  /**\n   * 表格自定义样式\n   */\n  @Input() cssClass: string;\n  /**\n   * 表格宽度\n   */\n  @Input() tableWidth = '100%';\n  /**\n   * 表格高度\n   */\n  @Input() tableHeight: string;\n  /**\n   * 固定表头指定高度是否包含表头的高度，`tableHeight`设置的高度默认是表格body的高度\n   */\n  @Input() containFixHeaderHeight = false;\n  /**\n   * 【可选】是否限制多列排序的输出限制为一项\n   */\n  @Input() onlyOneColumnSort: boolean;\n  /**\n   * 【可选】多列选择数组，用来指导那几列会被排序\n   */\n  @Input() multiSort: SortEventArg[] = [];\n  /**\n   * 【可选】是否可以拖拽调整列宽\n   */\n  @Input() resizeable: boolean;\n  /**\n   * 【可选】用来自定义表格是否可以拖动\n   */\n  @Input() colDraggable: boolean;\n  /**\n   * 【可选】用来自定义不可拖拽的前几列\n   */\n  @Input() colDropFreezeTo = 0;\n  /**\n   * 【可选】用来自定义详情页的模板 @deprecated\n   */\n  @Input() detailTemplateRef: TemplateRef<any>;\n  /**\n   * 【可选】同时绑定单击、双击事件时，用于区分点击的时间间隔,默认300ms，两个事件不同时使用可以指定为0\n   */\n  @Input() timeout = 300;\n  /**\n   * 【可选】配置表头操作未激活状态下是否显示操作区域，默认不显示\n   */\n  @Input() showOperationArea = false;\n  /**\n   * 【可选】是否显示排序未激活图标，默认不显示,\n   */\n  @Input() showSortIcon = false;\n  /**\n   * 【可选】是否显示筛选未激活图标，默认不显示,\n   */\n  @Input() showFilterIcon = false;\n  /**\n   * 多列选择Change事件，用来更新多列选择数组, column param\n   * */\n  @Output() multiSortChange = new EventEmitter<SortEventArg[]>();\n  /**\n   * 表格单元格点击事件\n   */\n  @Output() cellClick = new EventEmitter<CellSelectedEventArg>();\n  /**\n   * 表格单元格双击事件\n   */\n  @Output() cellDBClick = new EventEmitter<CellSelectedEventArg>();\n  /**\n   * 表格行点击事件\n   */\n  @Output() rowClick = new EventEmitter<RowSelectedEventArg>();\n  /**\n   * 表格行双击事件\n   */\n  @Output() rowDBClick = new EventEmitter<RowSelectedEventArg>();\n  /**\n  * 行detail toggle事件\n  */\n  @Output() detialToggle = new EventEmitter<any>();\n  /**\n   * 表格单元格开始编辑前的拦截事件\n   */\n  @Input() beforeCellEdit: (rowItem: any, column: any) => Promise<any>;\n  /**\n   * 表格单元格开始编辑事件\n   */\n  @Output() cellEditStart = new EventEmitter<CellSelectedEventArg>();\n  /**\n   * 表格单元格结束编辑事件\n   */\n  @Output() cellEditEnd = new EventEmitter<CellSelectedEventArg>();\n  /**\n   * 某行的勾选状态变化事件\n   */\n  @Output() rowCheckChange = new EventEmitter<RowCheckChangeEventArg>();\n  /**\n   * 当前页码全勾选状态变化事件\n   */\n  @Output() checkAllChange = new EventEmitter<boolean>();\n  /**\n   * 延迟懒加载完成事件\n   */\n  @Output() loadMore = new EventEmitter<any>();\n  /**\n   * 列宽变化事件\n   */\n  @Output() resize = new EventEmitter<ColumnResizeEventArg>();\n  /**\n   * 当前表格层级，默认为0，在树形表格场景下自增长\n   * 内部嵌套使用，不对外暴露\n   */\n  @Input() tableLevel = 0;\n  /**\n   * 配置树形表格的父子选中是否互相关联\n   * upward：选中子关联父\n   * downward： 选中父关联子\n   */\n  @Input() checkableRelation: CheckableRelation = { upward: true, downward: true };\n  /**\n   * 异步加载子列表\n   */\n  @Input() loadChildrenTable: (rowItem: any) => Promise<any>;\n  /**\n   * 异步加载全部子列表\n   */\n  @Input() loadAllChildrenTable: () => Promise<any>;\n  /**\n   * 是否虚拟滚动\n   */\n  @Input() virtualScroll;\n  /**\n   * 配置header的展开内容\n   */\n  @Input() headerExpandConfig: TableExpandConfig;\n  /**\n   * 子列表关闭事件\n   */\n  @Output() childrenTableClose = new EventEmitter<any>();\n  /**\n   * 全部子列表关闭事件\n   */\n  @Output() allChildrenTableClose = new EventEmitter<any>();\n  /**\n   * 虚拟滚动配置\n   */\n  @Input() virtualItemSize = 40;\n  @Input() virtualMinBufferPx = 80;\n  @Input() virtualMaxBufferPx = 200;\n\n  /**\n   * 懒加载\n   */\n  @Input() lazy: boolean;\n  /**\n   * 列宽配置\n   */\n  @Input() tableWidthConfig: TableWidthConfig[] = [];\n  /**\n   * 表头是否有背景色\n   */\n  @Input() headerBg: boolean;\n  /**\n   * 表格布局\n   */\n  @Input() tableLayout: 'fixed' | 'auto' = 'fixed';\n  /**\n   * 表格边框类型，默认有行边框，bordered：全边框，borderless：无边框\n   */\n  @Input() borderType: '' | 'bordered' | 'borderless' = '';\n  /**\n   * 表格是否展示为斑马纹间隔\n   */\n  @Input() striped: boolean;\n  /**\n   * 表格内部滚动事件\n   */\n  @Output() tableScrollEvent = new EventEmitter<Event>();\n\n  @Input() minHeight: string;\n\n  @Output() columnDragEnd = new EventEmitter<any>();\n\n  /**\n   * 表格尺寸，sm对应行高40px， md对应行高48px，lg对应行高56px\n   */\n  @Input() size: 'xs' | 'sm' | 'md' | 'lg' = 'sm';\n\n  @Input() shadowType: 'normal' | 'embed' = 'embed';\n\n  @Input() tableOverflowType: 'overlay' | 'auto' = 'auto';\n\n  @ContentChildren(DataTableColumnTmplComponent) columns: QueryList<DataTableColumnTmplComponent>;\n  @ContentChild(TableTheadComponent) innerHeader: TableTheadComponent;\n  @ContentChild(TableTbodyComponent) innerBody: TableTbodyComponent;\n  @ContentChildren(TableThComponent, { descendants: true }) thList: QueryList<TableThComponent>;\n  @ContentChild('noResultTemplateRef') noResultTemplate: TemplateRef<any>;\n  @ViewChild('fixHeaderContainerRef') fixHeaderContainerRefElement: ElementRef;\n  @ViewChild('tableView', { static: true }) tableViewRefElement: ElementRef;\n  @ViewChild('cdkVirtualScrollViewport') virtualScrollViewport: CdkVirtualScrollViewport;\n  @ViewChild('normalScroll') normalScrollElement: ElementRef;\n  @ViewChild('scrollViewTpl') vitualScrollElement: TemplateRef<any>;\n  @ViewChild('devuiNormalScrollBody', {read: ElementRef}) devuiNormalScrollBody: ElementRef;\n\n  @HostBinding('style.height') get hostHeight() {\n    return (this.tableHeight && this.dataSource.length) ? this.tableHeight : null;\n  }\n\n  @HostBinding('class.devui-table-shadow') get hasShadow() {\n    return this.shadowType === 'normal';\n  }\n\n  hasWidthScroll: boolean;\n\n  hasHeightScroll: boolean;\n\n  _dataSource: any[] = [];\n  _pageAllChecked = false;\n  selectable = true;\n  allChecked: number[] = [];\n  selectedRowItem: any;\n  selectedColumnItem: any;\n  isCellEdit: boolean;\n  editRowItem: any;\n  documentClickEvent = new EventEmitter<any>();\n  cellEditorClickEvent = new EventEmitter<Event>();\n  _hideColumn: string[] = [];\n  _columns: DataTableColumnTmplComponent[];\n  displayDataSource: any[];\n  headertoggleTableSubscription: Subscription;\n  headerCheckStatusSubscription: Subscription;\n  searchQueryChange = new EventEmitter<{ [key: string]: any }>();\n  halfChecked = false;\n  childrenTableOpen: boolean;\n  private scrollY = 0;\n  BUILTIN_COL_WIDTH = '36px';\n  BUILTIN_COL_WIDTH_EXTRA = '55px';\n\n  tableBodyEl: ElementRef;\n  onDocumentClickListen: any;\n\n  _tableTotalWidth = 0;\n  _lastColSize = 0;\n\n  @ViewChild('tableBody') set content(content: ElementRef) {\n    setTimeout(() => {\n      this.tableBodyEl = content;\n      if (this.virtualScroll) {\n        this.initVirtualBodyHeight();\n      }\n    });\n  }\n\n  @Input() set dataSource(dataSource: any[]) {\n    if (dataSource === null || !dataSource) {\n    /* eslint-disable-next-line no-param-reassign */\n      dataSource = [];\n    }\n    this._dataSource = dataSource;\n    const hasChecked = this.dataSource.some(this.hasChecked);\n    const hasUnChecked = this.dataSource.some(this.hasUnChecked);\n    this._pageAllChecked = dataSource && dataSource.length > 0 && !hasUnChecked;\n    this.halfChecked = hasChecked && hasUnChecked;\n\n    if (this.innerHeader) {\n      this.innerHeader.setHeaderCheckStatus({pageAllChecked: this._pageAllChecked, pageHalfChecked: this.halfChecked});\n    }\n\n    if (this.virtualScroll) {\n      this.initVirtualBodyHeight();\n    }\n    this.initScrollStatus();\n  }\n\n  get dataSource() {\n    return this._dataSource;\n  }\n\n  @Input() set hideColumn(hideColumn: string[]) {\n    this._hideColumn = hideColumn;\n    if (this._columns) {\n      this.updateColumns();\n    }\n  }\n\n  get hideColumn() {\n    return this._hideColumn;\n  }\n\n  @Input() set pageAllChecked(pageAllChecked: boolean) {\n    if (this.dataSource) {\n      this._dataSource = this.setCheckedStatus(this.dataSource, pageAllChecked);\n    }\n    this._pageAllChecked = pageAllChecked;\n    this.halfChecked = this.dataSource.some(this.hasChecked) && this.dataSource.some(this.hasUnChecked);\n  }\n\n  get pageAllChecked() {\n    return this._pageAllChecked;\n  }\n\n  virtualBodyHeight;\n  document: Document;\n  constructor(\n    private elementRef: ElementRef,\n    private ngZone: NgZone,\n    private renderer: Renderer2,\n    private cdr: ChangeDetectorRef,\n    @Inject(DOCUMENT) private doc: any) {\n    this.onDocumentClickListen = this.onDocumentClick.bind(this);\n    this.document = this.doc;\n  }\n\n  initVirtualBodyHeight() {\n    setTimeout(() => {\n      if (this.virtualScrollViewport) {\n        this.virtualScrollViewport.checkViewportSize();\n      }\n    });\n    if (this.tableHeight && this.tableHeight !== 'auto') {\n      this.virtualBodyHeight = this.tableHeight;\n      return;\n    }\n\n    if (!this.maxHeight) {\n      this.virtualBodyHeight = null;\n      return;\n    }\n\n    if (this.tableBodyEl) {\n      const tableHeader = this.tableBodyEl.nativeElement.querySelector('thead');\n      const tableHeaderHeight = (tableHeader?.offsetHeight + 8) || 0;\n      const curTotalHeight = this.dataSource.length * this.virtualItemSize + tableHeaderHeight;\n      this.virtualBodyHeight = curTotalHeight < parseInt(this.maxHeight, 10) ? curTotalHeight + 'px' : this.maxHeight;\n      return;\n    }\n  }\n\n  private getColumns() {\n    const cols = this.columns\n      .filter(column => {\n        return !this.hideColumn.some(field => column.field === field);\n      });\n    cols.sort((first, second) => first.order - second.order);\n    return cols;\n  }\n\n  // life hook start\n  ngOnInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.document.addEventListener('click', this.onDocumentClickListen);\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['checkable']) {\n      const checkColIndex = this.tableWidthConfig.findIndex((config) => {\n        return config.field === 'checkbox';\n      });\n      if (this.checkable) {\n        if (checkColIndex < 0) {\n          if (this.showExpandToggle) {\n            this.tableWidthConfig.splice(1, 0, {field: 'checkbox', width: this.BUILTIN_COL_WIDTH});\n          } else {\n            this.tableWidthConfig.unshift({field: 'checkbox', width: this.BUILTIN_COL_WIDTH});\n          }\n        }\n      } else {\n        if (checkColIndex > -1) {\n          this.tableWidthConfig.splice(checkColIndex, 1);\n        }\n      }\n    }\n\n    if (changes['showExpandToggle']) {\n      const expandColIndex = this.tableWidthConfig.findIndex((config) => {\n        return config.field === 'expand';\n      });\n      if (this.showExpandToggle) {\n        if (expandColIndex < 0) {\n          this.tableWidthConfig.unshift({field: 'expand', width: this.BUILTIN_COL_WIDTH});\n        }\n      } else {\n        if (expandColIndex > -1) {\n          this.tableWidthConfig.splice(expandColIndex, 1);\n        }\n      }\n    }\n\n    if (\n      this.virtualScroll &&\n      ((changes['tableHeight'] && !changes.tableHeight.firstChange) ||\n      (changes['maxHeight'] && !changes.maxHeight.firstChange) ||\n      (changes['virtualScroll'] && !changes.virtualScroll.firstChange))\n    ) {\n      this.initVirtualBodyHeight();\n    }\n  }\n\n  onDocumentClick($event: Event) {\n    this.documentClickEvent.emit($event);\n  }\n\n  ngAfterContentInit() {\n    if (this.columns.length > 0) {\n      this.updateColumns();\n      this.columns.forEach((col) => {\n        col.orderChange.subscribe(() => {\n          this.updateColumns();\n        });\n        col.widthChange.subscribe(() => {\n          this.updateColumns();\n        });\n      });\n    }\n\n    if (this.innerHeader) {\n      this.headerCheckStatusSubscription = this.innerHeader.headerCheckStatusEvent.subscribe((status) => {\n        this.onCheckAllChange(status);\n      });\n      this.headertoggleTableSubscription = this.innerHeader.headerChildrenTableToggleEvent.subscribe((status) => {\n        this.onToggleAllChildrenTable(status);\n      });\n    } else {\n      this.columns.changes.subscribe(() => {\n        this.updateColumns();\n      });\n    }\n\n    setTimeout(() => {\n      this.initScrollStatus();\n    });\n  }\n\n  public initScrollStatus() {\n    if (this.tableOverflowType !== 'overlay') {\n      return;\n    }\n    const ele = this.virtualScroll ? this.virtualScrollViewport?.elementRef?.nativeElement : this.normalScrollElement?.nativeElement;\n    this.hasWidthScroll = ele && ele.scrollWidth > ele.clientWidth;\n    this.hasHeightScroll = ele && ele.scrollHeight > ele.clientHeight;\n  }\n\n  ngAfterViewInit() {\n    this.thList.forEach(th => {\n      th.tableViewRefElement = this.tableViewRefElement;\n    });\n    this.thList.changes.subscribe((list) => {\n      list.forEach(th => {\n        th.tableViewRefElement = this.tableViewRefElement;\n      });\n    });\n    if (this.onlyOneColumnSort) {\n      this.resetThSortOrder();\n    }\n    this.initScrollClass();\n  }\n\n  // 初始化时判断是否存在横向滚动，并加上相应类名\n  initScrollClass() {\n    const ele = this.normalScrollElement?.nativeElement || this.vitualScrollElement?.elementRef?.nativeElement;\n    if (ele.clientWidth !== ele.scrollWidth) {\n      this.setScrollViewClass('left');\n    }\n  }\n\n  private resetThSortOrder() {\n    merge(...this.thList?.map(th => th.sortChange)).pipe(\n      takeUntil(this.thList.changes)\n    ).subscribe((sortEvent: SortEventArg) => {\n      this.thList.filter(th => th !== sortEvent.th).forEach(th => th.clearSortOrder());\n    });\n\n    this.thList.changes.pipe(\n      switchMap(() => merge(...this.thList.map(th => th.sortChange)))\n    ).subscribe((sortEvent: SortEventArg) => {\n      this.thList.filter(th => th !== sortEvent.th).forEach(th => th.clearSortOrder());\n    });\n  }\n\n  public updateColumns() {\n    this._columns = this.getColumns();\n    this.tableWidthConfig = [];\n    if (this.showExpandToggle) {\n      this.tableWidthConfig.push({field: 'expand', width: this.BUILTIN_COL_WIDTH});\n    }\n    if (this.checkable) {\n      if (this.checkOptions && this.checkOptions.length > 0) {\n        this.tableWidthConfig.push({field: 'checkbox', width: this.BUILTIN_COL_WIDTH_EXTRA});\n      } else {\n        this.tableWidthConfig.push({field: 'checkbox', width: this.BUILTIN_COL_WIDTH});\n      }\n    }\n\n    this._columns.forEach((col) => {\n      this.tableWidthConfig.push({field: col.field, width: col.width});\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.unSubscription();\n    this.document.removeEventListener('click', this.onDocumentClickListen);\n  }\n\n  onHandleSort(column: SortEventArg) {\n    if (this.multiSort && this.multiSort.length > 0) {\n      const multiSortIndex = this.multiSort.findIndex(item => item.field === column.field);\n      if (multiSortIndex !== -1) {\n        this.multiSort.splice(multiSortIndex, 1);\n      }\n\n      if (column.direction === '') {\n        this.multiSortChange.emit(this.multiSort);\n        return;\n      }\n\n      if (!this.onlyOneColumnSort) {\n        this.multiSort.push(column);\n      } else {\n        this.multiSort = [column];\n      }\n    } else {\n      this.multiSort = [column];\n    }\n    this.multiSortChange.emit(this.multiSort);\n  }\n\n  onCellClick($event: CellSelectedEventArg) {\n    this.selectedRowItem = $event.rowItem;\n    this.selectedColumnItem = $event.column;\n    this.ngZone.run(() => {\n      this.cellClick.emit($event);\n    });\n  }\n\n  onCellEditStart($event: CellSelectedEventArg) {\n    this.isCellEdit = true;\n    this.cellEditStart.emit($event);\n  }\n\n  onCellEditEnd($event: CellSelectedEventArg) {\n    this.isCellEdit = false;\n    this.cellEditEnd.emit($event);\n  }\n\n  onCellDBClick($event: CellSelectedEventArg) {\n    this.ngZone.run(() => {\n      this.cellDBClick.emit($event);\n    });\n  }\n\n  onRowClick($event: RowSelectedEventArg) {\n    this.selectedRowItem = $event.rowItem;\n    this.ngZone.run(() => {\n      this.rowClick.emit($event);\n    });\n  }\n\n  onRowDBClick($event: RowSelectedEventArg) {\n    this.ngZone.run(() => {\n      this.rowDBClick.emit($event);\n    });\n  }\n\n  onDetailToggle($event: any) {\n    this.detialToggle.emit($event);\n  }\n\n  // 判断数据是否存在选中状态\n  private hasChecked = (data) => {\n    if (data.$checked) {\n      return true;\n    }\n    if (data.children) {\n      return data.children.some(this.hasChecked);\n    }\n  };\n\n  // 判断数据是否存在未选中状态\n  private hasUnChecked = (data) => {\n    if (!data.$checked) {\n      return true;\n    }\n    if (data.children) {\n      return data.children.some(this.hasUnChecked);\n    }\n  };\n\n  setRowCheckStatus($event: RowCheckChangeEventArg) {\n    // 处理children的选中\n    if ($event.rowItem.children && this.checkableRelation.downward) {\n      this.setCheckedStatus($event.rowItem.children, $event.checked);\n    }\n\n    // 处理parents的选中\n    if (this.checkableRelation.upward) {\n      const nestedIndexArray = $event.nestedIndex.split(',');\n      nestedIndexArray.shift();\n      const nestedIndexArrayToInt = nestedIndexArray.map((value) => {\n        return parseInt(value, 10);\n      });\n      // 通过选中行的父级索引设置父的选中状态\n      this.setParentCheckStatus(nestedIndexArrayToInt);\n    }\n\n    // 处理整个table header的选中\n    const hasChecked = this.dataSource.some(this.hasChecked);\n    if ($event) {\n      const hasUnChecked = this.dataSource.some(this.hasUnChecked);\n      this._pageAllChecked = !hasUnChecked;\n      this.halfChecked = hasChecked && hasUnChecked;\n    } else {\n      this._pageAllChecked = false;\n      this.halfChecked = hasChecked;\n    }\n\n    if (this.innerHeader) {\n      this.innerHeader.setHeaderCheckStatus({pageAllChecked: this._pageAllChecked, pageHalfChecked: this.halfChecked});\n    }\n    this.rowCheckChange.emit($event);\n  }\n\n  private setParentCheckStatus(nestedIndex) {\n    if (nestedIndex.length > 0) {\n      const topIndex = nestedIndex[0];\n      const topParent = this.dataSource[topIndex];\n      const argNestedIndex = [...nestedIndex];\n      argNestedIndex.shift();\n      const lastParent = this.findLastParent(topParent, argNestedIndex);\n      this.setSelfCheckStatus(lastParent);\n\n      nestedIndex.pop();\n      if (nestedIndex.length > 0) {\n        this.setParentCheckStatus(nestedIndex);\n      }\n    }\n  }\n\n  private findLastParent(source, indexArray) {\n    if (source && indexArray.length > 0) {\n      const topIndex = indexArray[0];\n      const topParent = source.children[topIndex];\n      indexArray.shift();\n      return this.findLastParent(topParent, indexArray);\n    } else {\n      return source;\n    }\n  }\n\n  private setSelfCheckStatus(data) {\n    if (data && data.children) {\n      const hasUnChecked = data.children.some((child) => {\n        return !child.$checked;\n      });\n\n      const hasChecked = data.children.some((child) => {\n        return child.$checked || child.$halfChecked;\n      });\n\n      data.$checked = !hasUnChecked;\n      data.$halfChecked = hasUnChecked && hasChecked;\n    }\n  }\n\n  private setCheckedStatus(data, checked, toggle?: boolean) {\n    return data.map(item => {\n      if (!(item.$checkDisabled || item.$disabled)) {\n        if ((toggle && item.$checked === undefined) || !toggle) {\n          item.$checked = checked;\n          item.$halfChecked = false;\n        }\n      }\n\n      if (item.children) {\n        item.children = this.setCheckedStatus(item.children, checked, toggle);\n      }\n      return item;\n    });\n  }\n\n  onCheckAllChange($event: boolean) {\n    this.pageAllChecked = $event;\n    this.checkAllChange.emit($event);\n  }\n\n  onSearchQueryChange($event: { [key: string]: any }) {\n    this.searchQueryChange.emit($event);\n  }\n\n  getSelectedRowItem(): any[] {\n    return this.selectedRowItem;\n  }\n\n  onLoadMore(event) {\n    this.loadMore.emit(this);\n  }\n\n  private updateColumnsWidth() {\n    this.tableWidthConfig = [];\n    if (this.showExpandToggle) {\n      const expandWidth = this.elementRef.nativeElement.querySelector('.devui-detail-cell').clientWidth;\n      this.tableWidthConfig.push({field: 'expand', width: expandWidth + 'px'});\n    }\n    if (this.checkable) {\n      const checkboxWidth = this.elementRef.nativeElement.querySelector('.devui-checkable-cell').clientWidth;\n      this.tableWidthConfig.push({field: 'checkbox', width: checkboxWidth + 'px'});\n\n    }\n    this._columns.forEach((col) => {\n      this.tableWidthConfig.push({field: col.field, width: col.width});\n    });\n  }\n\n  beginResizeHandlerEvent($event) {\n    const thRenderWidthList = $event.thRenderWidthList;\n    if (thRenderWidthList.length > 0) {\n      this._tableTotalWidth = this.elementRef.nativeElement.querySelector('.table-wrap').offsetWidth;\n      // 兼容d-column表头分组场景\n      const reverseThList = thRenderWidthList.reverse();\n      this._columns.forEach(column => {\n        const thItem = reverseThList.find(th => th.field === column.field);\n        if (thItem) {\n          column.width = thItem.width + 'px';\n        }\n      });\n\n      if (!this._lastColSize) {\n        this._lastColSize = parseInt(this._columns.slice(-1)[0].width, 10);\n      }\n      this.updateColumnsWidth();\n    }\n    this.onDocumentClick($event.event);\n  }\n\n  onResizingFixedHandler({ field, width }) {\n    if (this.resizeable) {\n      const index = this.tableWidthConfig.findIndex((config) => {\n        return config.field === field;\n      });\n      if (index > -1) {\n        setTimeout(() => {\n          this.tableWidthConfig[index].width = width + 'px';\n        });\n      }\n    }\n  }\n\n  onResizeHandler({ width, field }) {\n    if (width < 0) {\n      return;\n    }\n    const index = this.tableWidthConfig.findIndex((config) => {\n      return config.field === field;\n    });\n    if (index > -1) {\n      this.tableWidthConfig[index].width = width + 'px';\n    }\n    const curTotal = this.tableWidthConfig.reduce((pre, cur) => {\n      const value = pre + parseInt(cur.width, 10);\n      return value;\n    }, 0);\n    let columnResizeEventArg;\n    this._columns = this._columns.map((column, colIndex) => {\n      if (column.field === field) {\n        column.width = parseInt(width, 10) + 'px';\n        columnResizeEventArg = { currentColumn: column, nextColumn: this._columns[colIndex + 1] };\n        this.resize.emit(columnResizeEventArg);\n      }\n      return column;\n    });\n\n    const changeSize = curTotal - this._tableTotalWidth;\n    const lastCol = this._columns.slice(-1)[0];\n    const lastColWidth = parseInt(lastCol.width, 10);\n    if (changeSize < 0 && columnResizeEventArg.nextColumn) {\n      const newSize = parseInt(lastCol.width) - changeSize + 'px';\n      lastCol.width = newSize;\n      this.tableWidthConfig[this.tableWidthConfig.length - 1].width = newSize;\n    } else if (this._lastColSize < lastColWidth) {\n      const lastChange = (lastColWidth - this._lastColSize) > changeSize ? changeSize : (lastColWidth - this._lastColSize);\n      lastCol.width = lastColWidth - lastChange + 'px';\n      this.tableWidthConfig[this.tableWidthConfig.length - 1].width = lastColWidth - lastChange + 'px';\n    }\n  }\n\n  handleDragTable({ from, to }) {\n    this.columnDragEnd.emit({ from, to });\n    const sortArray = (array, fromE, toE) => {\n      if (fromE < toE) {\n        const fromEData = array[fromE];\n        for (let i = 0; i < array.length; i++) {\n          if (i >= fromE && i < toE) {\n            this.ngZone.run(() => {\n              array[i] = array[i + 1];\n            });\n          }\n        }\n        this.ngZone.run(() => {\n          array[toE] = fromEData;\n        });\n      }\n\n      if (fromE > toE) {\n        const fromEData = array[fromE];\n        for (let i = array.length; i > 0; i--) {\n          if (i <= fromE && i > toE) {\n            array[i] = array[i - 1];\n          }\n        }\n        array[toE] = fromEData;\n      }\n    };\n    sortArray(this._columns, from, to);\n    this._columns.forEach((item, index) => {\n      item.order = index;\n    });\n  }\n\n  onBodyScroll(event: Event) {\n    const target = <HTMLElement>event.target;\n\n    if (this.isCellEdit) {\n      // Y轴滚动距离超过tr高度时取消目前编辑状态\n      if (this.scrollY === 0) {\n        this.scrollY = target.scrollTop;\n      }\n      const offset = target.scrollTop - this.scrollY;\n      if (offset > 40 || offset < -40) {\n        this.cancelEditingStatus();\n        this.scrollY = 0;\n      }\n    }\n\n    const scrollLeft = target.scrollLeft;\n    if (scrollLeft === 0) {\n      if (target.clientWidth === target.scrollWidth) {\n        this.setScrollViewClass('none');\n      } else {\n        this.setScrollViewClass('left');\n      }\n    } else if (scrollLeft + target.clientWidth === target.scrollWidth) {\n      this.setScrollViewClass('right');\n    } else {\n      this.setScrollViewClass('middle');\n    }\n\n    if (this.fixHeader) {\n      (<HTMLElement>this.fixHeaderContainerRefElement.nativeElement).scrollLeft = scrollLeft;\n    }\n\n    this.tableScrollEvent.emit(event);\n  }\n\n  private setScrollViewClass(position: string) {\n    const element = this.tableViewRefElement.nativeElement;\n    const className = 'devui-talbe-scorll-' + position;\n    const elClassList = element.classList;\n    if (!elClassList.contains(className)) {\n      for (let index = 0; index < elClassList.length; index++) {\n        const clName = elClassList[index];\n        if (clName.startsWith('devui-talbe-scorll-')) {\n          this.renderer.removeClass(element, clName);\n        }\n      }\n      this.renderer.addClass(element, className);\n    }\n  }\n\n  private unSubscription() {\n    if (this.headerCheckStatusSubscription) {\n      this.headerCheckStatusSubscription.unsubscribe();\n      this.headerCheckStatusSubscription = null;\n    }\n\n    if (this.headertoggleTableSubscription) {\n      this.headertoggleTableSubscription.unsubscribe();\n      this.headertoggleTableSubscription = null;\n    }\n  }\n\n  setRowChildToggleStatus(rowItem: any, open: boolean) {\n    if (open) {\n      let loadChildrenResult = Promise.resolve(true);\n      if (this.loadChildrenTable) {\n        loadChildrenResult = this.loadChildrenTable(rowItem);\n      }\n      loadChildrenResult.then(() => {\n        // 异步加载子表格是检查选中状态\n        if (rowItem.$checked && this.checkableRelation.downward) {\n          this.setCheckedStatus(rowItem.children, rowItem.$checked, true);\n        }\n      });\n    } else {\n      this.childrenTableClose.emit(rowItem);\n    }\n  }\n\n  setTableChildrenToggleStatus(open: boolean) {\n    this.onToggleAllChildrenTable(open);\n    if (this.innerHeader) {\n      this.innerHeader.setHeaderToggleStatus(open);\n    } else {\n      this.childrenTableOpen = open;\n    }\n  }\n\n  private travelChildrenToggleStatus(data, open: boolean) {\n    return data.map(item => {\n      if (item.children) {\n        item.$isChildTableOpen = open;\n        item.children = this.travelChildrenToggleStatus(item.children, open);\n      }\n      return item;\n    });\n  }\n\n  // 切换表头的子表格展开收起\n  onToggleAllChildrenTable(open: boolean) {\n    this.childrenTableOpen = open;\n    if (open) {\n      let loadAllChildrenResult = Promise.resolve(true);\n      if (this.loadAllChildrenTable) {\n        loadAllChildrenResult = this.loadAllChildrenTable();\n      }\n      loadAllChildrenResult.then(() => {\n        this.dataSource.forEach(item => {\n          if (item.$checked && item.children) {\n            this.setCheckedStatus(item.children, true, true);\n          }\n        });\n        this.travelChildrenToggleStatus(this.dataSource, open);\n      });\n    } else {\n      this.travelChildrenToggleStatus(this.dataSource, open);\n      this.allChildrenTableClose.emit();\n    }\n  }\n\n  cancelEditingStatus() {\n    this.documentClickEvent.emit('cancel');\n  }\n\n  private collectCheckedRows(dist: Array<any>, source: Array<any>) {\n    source.forEach(row => {\n      if (row.$checked) {\n        dist.push(row);\n      }\n      if (row.children) {\n        this.collectCheckedRows(dist, row.children);\n      }\n    });\n  }\n\n  getCheckedRows() {\n    if (this.checkableRelation.upward) {\n      // 如果children的选中状态关联parent的选中状态,只需返回最外层的数据\n      return this.dataSource ? this.dataSource.filter(item => item.$checked || item.$halfChecked) : [];\n    } else {\n      // 如果children的选中状态不关联parent的选中状态,遍历dataSource,将所有的选中行平级返回\n      const checkedRows = [];\n      this.collectCheckedRows(checkedRows, this.dataSource);\n      return checkedRows;\n    }\n  }\n\n  setTableCheckStatus(status: TableCheckStatusArg) {\n    if (status.pageAllChecked !== undefined) { // 设置全选\n      if (this.dataSource) {\n        this._dataSource = this.setCheckedStatus(this.dataSource, status.pageAllChecked);\n      }\n      this._pageAllChecked = status.pageAllChecked;\n      if (status.pageAllChecked) { // 全选为true\n        this.halfChecked = false;\n      } else {\n        this.halfChecked = this.dataSource.some(this.hasChecked) && this.dataSource.some(this.hasUnChecked);\n      }\n    }\n\n    if (status.pageHalfChecked !== undefined) { // 设置半选\n      this.halfChecked = status.pageHalfChecked;\n    }\n\n    if (this.innerHeader) {\n      this.innerHeader.setHeaderCheckStatus({pageAllChecked: this._pageAllChecked, pageHalfChecked: this.halfChecked});\n    }\n  }\n\n  // 更新cdk虚拟滚动viewport size并重新渲染，解决父层高度变化渲染数据size没有更新问题\n  updateVirtualScrollSize() {\n    this.virtualScrollViewport.checkViewportSize();\n  }\n}\n","<div class=\"devui-data-table {{ cssClass }}\">\n  <div class=\"devui-table-view {{ containFixHeaderHeight ? 'contain-fix-height' : '' }}\" #tableView>\n    <div\n      *ngIf=\"fixHeader\"\n      #fixHeaderContainerRef\n      class=\"table-wrap\"\n      [style.overflow-x]=\"'hidden'\"\n      [style.scrollbar-width]=\"'none'\"\n      [style.overflow-y]=\"tableOverflowType === 'overlay' ? 'overlay' : 'scroll'\"\n      [style.max-height]=\"maxHeight ? maxHeight : null\"\n      [style.max-width]=\"maxWidth ? maxWidth : null\"\n      [style.width]=\"!maxWidth ? tableWidth : null\"\n    >\n      <table\n        class=\"devui-table devui-table-{{ size }} {{ borderType ? 'table-' + borderType : '' }} {{ fixHeader ? 'table-fix-header' : '' }} {{\n          headerBg ? 'header-bg' : ''\n        }} {{ striped ? 'table-striped' : '' }}\"\n        [ngClass]=\"{ 'area-active': showOperationArea }\"\n        [style.table-layout]=\"tableLayout\"\n      >\n        <colgroup>\n          <col *ngFor=\"let config of tableWidthConfig\" [style.width]=\"config.width\" />\n        </colgroup>\n        <ng-container *ngTemplateOutlet=\"HeaderContent\"></ng-container>\n        <ng-template *ngIf=\"!innerHeader\" [ngTemplateOutlet]=\"headerTpl\"></ng-template>\n      </table>\n    </div>\n\n    <div\n      #normalScroll\n      cdkScrollable\n      dLazyLoad\n      [enableLazyLoad]=\"lazy\"\n      (loadMore)=\"onLoadMore($event)\"\n      *ngIf=\"!virtualScroll; else scrollViewTpl\"\n      class=\"devui-scrollbar\"\n      [ngClass]=\"{\n        'scroll-view': scrollable,\n        'overflow-overlay': tableOverflowType === 'overlay',\n        'table-wrap': !fixHeader,\n        'has-width-scroll': hasWidthScroll,\n        'has-height-scroll': hasHeightScroll\n      }\"\n      [style.height]=\"tableHeight ? tableHeight : null\"\n      [style.max-height]=\"maxHeight ? maxHeight : null\"\n      [style.max-width]=\"maxWidth ? maxWidth : null\"\n      [style.width]=\"!maxWidth ? tableWidth : null\"\n      (scroll)=\"onBodyScroll($event)\"\n    >\n      <table\n        #tableBody\n        class=\"devui-table devui-table-{{ size }} {{ borderType ? 'table-' + borderType : '' }} {{\n          rowHoveredHighlight ? 'table-hover' : ''\n        }} {{ headerBg ? 'header-bg' : '' }} {{ striped ? 'table-striped' : '' }}\"\n        [ngClass]=\"{ 'area-active': showOperationArea }\"\n        [style.table-layout]=\"tableLayout\"\n        [style.height]=\"minHeight ? minHeight : null\"\n        [style.position]=\"tableOverflowType === 'overlay' ? null : 'relative'\"\n      >\n        <colgroup>\n          <col *ngFor=\"let config of tableWidthConfig\" [style.width]=\"config.width\" />\n        </colgroup>\n        <ng-container *ngIf=\"!fixHeader\">\n          <ng-container *ngTemplateOutlet=\"HeaderContent\"></ng-container>\n          <ng-template *ngIf=\"!innerHeader\" [ngTemplateOutlet]=\"headerTpl\"></ng-template>\n        </ng-container>\n        <tbody\n          dTableBody\n          dSortable\n          *ngIf=\"innerBody\"\n          [dataSource]=\"dataSource\"\n          [tableWidthConfig]=\"tableWidthConfig\"\n          [rowTemplete]=\"innerBody.rowTempleteForSelect\"\n          [minHeight]=\"minHeight\"\n          [minHeightStretchRow]=\"innerBody.minHeightStretchRow\"\n        ></tbody>\n        <tbody\n          *ngIf=\"!innerBody\"\n          dDataTableBody\n          #devuiNormalScrollBody\n          [dataSource]=\"dataSource\"\n          [resizeable]=\"resizeable\"\n          [columns]=\"_columns\"\n          [checkable]=\"checkable\"\n          [allChecked]=\"_pageAllChecked\"\n          [selectable]=\"selectable\"\n          [editModel]=\"editModel\"\n          [editRowItem]=\"editRowItem\"\n          [showExpandToggle]=\"showExpandToggle\"\n          [detailTemplateRef]=\"detailTemplateRef\"\n          [timeout]=\"timeout\"\n          [type]=\"type\"\n          [rowHoveredHighlight]=\"rowHoveredHighlight\"\n          [tableLevel]=\"tableLevel\"\n          [tableWidthConfig]=\"tableWidthConfig\"\n          [headerExpandConfig]=\"headerExpandConfig\"\n          [generalRowHoveredData]=\"generalRowHoveredData\"\n        ></tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div\n  class=\"devui-no-result-wrapper\"\n  [ngClass]=\"{ 'overlay-table-no-result': tableOverflowType === 'overlay' }\"\n  *ngIf=\"!dataSource?.length && noResultTemplate != null\"\n>\n  <ng-template [ngTemplateOutlet]=\"noResultTemplate\" [ngTemplateOutletContext]=\"{ $implicit: this }\"></ng-template>\n</div>\n\n<ng-template #scrollViewTpl>\n  <cdk-virtual-scroll-viewport\n    #cdkVirtualScrollViewport\n    dLazyLoad\n    [enableLazyLoad]=\"lazy\"\n    (loadMore)=\"onLoadMore($event)\"\n    [itemSize]=\"virtualItemSize\"\n    [minBufferPx]=\"virtualMinBufferPx\"\n    [maxBufferPx]=\"virtualMaxBufferPx\"\n    class=\"devui-scrollbar viewport-wrapper\"\n    [ngClass]=\"{\n      'scroll-view': scrollable,\n      'overflow-overlay': tableOverflowType === 'overlay',\n      'virtual-scroll-wrap': !fixHeader,\n      'has-width-scroll': hasWidthScroll,\n      'has-height-scroll': hasHeightScroll\n    }\"\n    [style.height]=\"virtualBodyHeight\"\n    [style.max-height]=\"maxHeight ? maxHeight : null\"\n    [style.max-width]=\"maxWidth ? maxWidth : null\"\n    [style.width]=\"!maxWidth ? tableWidth : null\"\n    (scroll)=\"onBodyScroll($event)\"\n  >\n    <table\n      #tableBody\n      class=\"devui-table devui-table-{{ size }} {{ borderType ? 'table-' + borderType : '' }} {{\n        rowHoveredHighlight ? 'table-hover' : ''\n      }} {{ headerBg ? 'header-bg' : '' }} {{ striped ? 'table-striped' : '' }}\"\n      [ngClass]=\"{ 'area-active': showOperationArea }\"\n      [style.table-layout]=\"tableLayout\"\n      [style.height]=\"minHeight ? minHeight : null\"\n    >\n      <colgroup>\n        <col *ngFor=\"let config of tableWidthConfig\" [style.width]=\"config.width\" />\n      </colgroup>\n      <ng-container *ngIf=\"!fixHeader\">\n        <ng-container *ngTemplateOutlet=\"HeaderContent\"></ng-container>\n        <ng-template *ngIf=\"!innerHeader\" [ngTemplateOutlet]=\"headerTpl\"></ng-template>\n      </ng-container>\n      <tbody\n        dTableBody\n        dSortable\n        *ngIf=\"innerBody\"\n        [dataSource]=\"dataSource\"\n        [tableWidthConfig]=\"tableWidthConfig\"\n        [virtualScroll]=\"virtualScroll\"\n        [rowTemplete]=\"innerBody.rowTempleteForSelect\"\n        [minHeight]=\"minHeight\"\n        [minHeightStretchRow]=\"innerBody.minHeightStretchRow\"\n      ></tbody>\n      <tbody\n        *ngIf=\"!innerBody\"\n        dDataTableBody\n        [dataSource]=\"dataSource\"\n        [resizeable]=\"resizeable\"\n        [columns]=\"_columns\"\n        [checkable]=\"checkable\"\n        [allChecked]=\"_pageAllChecked\"\n        [selectable]=\"selectable\"\n        [editModel]=\"editModel\"\n        [editRowItem]=\"editRowItem\"\n        [showExpandToggle]=\"showExpandToggle\"\n        [detailTemplateRef]=\"detailTemplateRef\"\n        [timeout]=\"timeout\"\n        [type]=\"type\"\n        [rowHoveredHighlight]=\"rowHoveredHighlight\"\n        [tableLevel]=\"tableLevel\"\n        [virtualScroll]=\"virtualScroll\"\n        [tableWidthConfig]=\"tableWidthConfig\"\n        [headerExpandConfig]=\"headerExpandConfig\"\n        [generalRowHoveredData]=\"generalRowHoveredData\"\n      ></tbody>\n    </table>\n  </cdk-virtual-scroll-viewport>\n</ng-template>\n\n<ng-template #headerTpl>\n  <thead\n    dDataTableHead\n    [resizeable]=\"resizeable\"\n    [tableViewRefElement]=\"tableViewRefElement\"\n    [tableBodyEl]=\"tableBodyEl\"\n    [multiSort]=\"multiSort\"\n    [columns]=\"_columns\"\n    [pageAllChecked]=\"_pageAllChecked\"\n    [checkable]=\"checkable\"\n    [checkOptions]=\"checkOptions\"\n    [headerCheckDisabled]=\"headerCheckDisabled\"\n    [headerCheckVisible]=\"headerCheckVisible\"\n    [showExpandToggle]=\"showExpandToggle\"\n    [showSortIcon]=\"showSortIcon\"\n    [showFilterIcon]=\"showFilterIcon\"\n    (resizeHandlerEvent)=\"onResizeHandler($event)\"\n    (headClickSortEvent)=\"onHandleSort($event)\"\n    [halfChecked]=\"halfChecked\"\n    [maxHeight]=\"maxHeight\"\n    (beginResizeHandlerEvent)=\"beginResizeHandlerEvent($event)\"\n    (resizingHandlerEvent)=\"onResizingFixedHandler($event)\"\n    [fixHeader]=\"fixHeader\"\n    (dragTableEndEvent)=\"handleDragTable($event)\"\n    [dataSource]=\"dataSource\"\n    [colDropFreezeTo]=\"colDropFreezeTo\"\n    [colDraggable]=\"colDraggable\"\n    [childrenTableOpen]=\"childrenTableOpen\"\n  ></thead>\n</ng-template>\n<ng-template #HeaderContent><ng-content select=\"thead\"></ng-content></ng-template>\n","import { EventEmitter, Injectable } from '@angular/core';\n\n@Injectable()\nexport class TableTdService {\n  tableCellClickEvent = new EventEmitter<Event>();\n  constructor() { }\n}\n","import {\n  Component, ElementRef, EventEmitter,\n  HostBinding, Input, OnChanges, OnDestroy, OnInit,\n  Output, SimpleChanges\n} from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { EditableTip } from '../../../data-table.model';\nimport { TableTdService } from './td.service';\n\n@Component({\n  /* eslint-disable-next-line @angular-eslint/component-selector*/\n  selector: '[dTableCell]',\n  templateUrl: './td.component.html',\n  styleUrls: ['./td.component.scss']\n})\nexport class TableTdComponent implements OnInit, OnChanges, OnDestroy {\n  @HostBinding('class.devui-sticky-left-cell') stickyLeftClass: boolean;\n  @HostBinding('class.devui-sticky-right-cell') stickyRightClass: boolean;\n  @HostBinding('style.left') stickyLeftStyle: string;\n  @HostBinding('style.right') stickyRightStyle: string;\n  @Input() editable: boolean;\n  @Input() editableTip = EditableTip.hover;\n  @Input() nestedColumn = false;\n  @Input() nestedLayer: number;\n  @Input() field: string;\n  @Input() rowItem: any;\n  @Input() fixedLeft: string;\n  @Input() fixedRight: string;\n  @Input() iconFoldTable: string;\n  @Input() iconUnFoldTable: string;\n  @Input() nestedColumnIndent = 16;\n  @Input() beforeEditStart: (rowItem, field) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() beforeEditEnd: (rowItem, field) => boolean | Promise<boolean> | Observable<boolean>;\n  @Output() toggleChildTableEvent = new EventEmitter<boolean>();\n  @Input() editing: boolean;\n  @Output() editStatusEvent = new EventEmitter<boolean>();\n  /**\n   * 编辑状态调整 @deprecated\n   */\n  @Output() editingChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.editable-cell') get isEditable() {\n    return this.editable && !this.editing && this.editableTip !== 'btn';\n  }\n\n  private documentClickSubscription: Subscription;\n  private tdMousedownSubscription: Subscription;\n  private tdMouseupSubscription: Subscription;\n  private clickInTd: boolean;\n  private tdClickSubscription: Subscription;\n  private currentEditing = false;\n  constructor(private elementRef: ElementRef, private tdService: TableTdService) { }\n\n  ngOnInit() {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['fixedLeft']) {\n      if (this.fixedLeft) {\n        this.stickyLeftClass = true;\n        this.stickyLeftStyle = this.fixedLeft;\n      } else {\n        this.stickyLeftClass = false;\n        this.stickyLeftStyle = null;\n      }\n    }\n\n    if (changes['fixedRight']) {\n      if (this.fixedRight) {\n        this.stickyRightClass = true;\n        this.stickyRightStyle = this.fixedRight;\n      } else {\n        this.stickyRightClass = false;\n        this.stickyRightStyle = null;\n      }\n    }\n\n    if (changes['editing'] && changes['editing'].currentValue && !this.currentEditing) {\n      this.bindEditClickEvent();\n    }\n  }\n\n  startEditing(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    let beforePromise = Promise.resolve(true);\n    if (this.beforeEditStart) {\n      const result: any = this.beforeEditStart(this.rowItem, this.field);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          beforePromise = result;\n        } else if (result.subscribe) {\n          beforePromise = (result as Observable<boolean>).toPromise();\n        } else {\n          beforePromise = Promise.resolve(result);\n        }\n      }\n    }\n\n    beforePromise.then((canStart) => {\n      if (canStart) {\n        this.editing = true;\n        this.currentEditing = true;\n        this.editingChange.emit(true);\n        this.editStatusEvent.emit(true);\n        this.tdService.tableCellClickEvent.emit(event);\n        this.bindEditClickEvent();\n      }\n    });\n  }\n\n  bindEditClickEvent() {\n    this.documentClickSubscription = fromEvent(document, 'click').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n      })\n    ).subscribe((clickEvent) => {\n      if (!this.elementRef.nativeElement.contains(clickEvent.target) && !this.clickInTd) {\n        this.finishCellEdit();\n      }\n      this.clickInTd = false;\n    });\n    this.tdMousedownSubscription = fromEvent(this.elementRef.nativeElement, 'mousedown').subscribe(event => {\n      this.clickInTd = true;\n    });\n\n    this.tdMouseupSubscription = fromEvent(this.elementRef.nativeElement, 'mouseup').subscribe(event => {\n      this.clickInTd = false;\n    });\n\n    this.tdClickSubscription = this.tdService.tableCellClickEvent.subscribe((clickEvent) => {\n      if (!this.elementRef.nativeElement.contains(clickEvent.target)) {\n        this.finishCellEdit();\n      }\n    });\n  }\n\n  removeEditClickEvent() {\n    if (this.documentClickSubscription) {\n      this.documentClickSubscription.unsubscribe();\n      this.documentClickSubscription = null;\n    }\n    if (this.tdClickSubscription) {\n      this.tdClickSubscription.unsubscribe();\n      this.tdClickSubscription = null;\n    }\n  }\n\n  finishCellEdit() {\n    let beforePromise = Promise.resolve(true);\n    if (this.beforeEditEnd) {\n      const result: any = this.beforeEditEnd(this.rowItem, this.field);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          beforePromise = result;\n        } else if (result.subscribe) {\n          beforePromise = (result as Observable<boolean>).toPromise();\n        } else {\n          beforePromise = Promise.resolve(result);\n        }\n      }\n    }\n    beforePromise.then((canEnd) => {\n      if (canEnd) {\n        this.editing = false;\n        this.currentEditing = false;\n        this.editingChange.emit(false);\n        this.editStatusEvent.emit(false);\n        this.removeEditClickEvent();\n      }\n    });\n  }\n\n  toggleChildTable(rowItem) {\n    rowItem.$isChildTableOpen = !rowItem.$isChildTableOpen;\n    this.toggleChildTableEvent.emit(rowItem.$isChildTableOpen);\n  }\n\n  ngOnDestroy(): void {\n    if (this.documentClickSubscription) {\n      this.documentClickSubscription.unsubscribe();\n      this.documentClickSubscription = null;\n    }\n    if (this.tdClickSubscription) {\n      this.tdClickSubscription.unsubscribe();\n      this.tdClickSubscription = null;\n    }\n\n    if (this.tdMousedownSubscription) {\n      this.tdMousedownSubscription.unsubscribe();\n      this.tdMousedownSubscription = null;\n    }\n\n    if (this.tdMouseupSubscription) {\n      this.tdMouseupSubscription.unsubscribe();\n      this.tdMouseupSubscription = null;\n    }\n  }\n}\n","<ng-container *ngIf=\"editable && !editing\">\n  <div *ngIf=\"editableTip === 'btn'\" class=\"cell-container\">\n    <div class=\"cell-container-inner not-break modify-holder\">\n      <ng-template\n        [ngTemplateOutlet]=\"nestedTmp\"\n        [ngTemplateOutletContext]=\"{ nestedColumn: nestedColumn, rowItem: rowItem, nestedLayer: nestedLayer }\"\n      ></ng-template>\n      <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n      <span class=\"cell-modify\" (click)=\"startEditing($event)\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16px\" height=\"16px\" version=\"1.1\">\n          <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"none\" stroke-width=\"1\">\n            <path\n              d=\"M 9.48528 3.41421 L 10.8995 2 L 13.7279 4.82843 L 12.3137 6.24264 L 9.48528 3.41421 Z M 5.24264 13.3137 L 2.41421 13.3137 L 2.41421 10.4853 L 8.77817 4.12132 L 11.6066 6.94975 L 5.24264 13.3137 Z\"\n            />\n          </g>\n        </svg>\n      </span>\n    </div>\n  </div>\n\n  <div *ngIf=\"editableTip !== 'btn'\" class=\"cell-editable not-break\" (click)=\"startEditing($event)\">\n    <ng-template\n      [ngTemplateOutlet]=\"nestedTmp\"\n      [ngTemplateOutletContext]=\"{ nestedColumn: nestedColumn, rowItem: rowItem, nestedLayer: nestedLayer }\"\n    ></ng-template>\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </div>\n</ng-container>\n\n<ng-container *ngIf=\"!editable || editing\">\n  <ng-template\n    [ngTemplateOutlet]=\"nestedTmp\"\n    [ngTemplateOutletContext]=\"{ nestedColumn: nestedColumn, rowItem: rowItem, nestedLayer: nestedLayer }\"\n  ></ng-template>\n  <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n</ng-container>\n\n<ng-template #content><ng-content></ng-content></ng-template>\n\n<ng-template #nestedTmp let-nestedColumn=\"nestedColumn\" let-rowItem=\"rowItem\" let-nestedLayer=\"nestedLayer\">\n  <ng-container *ngIf=\"nestedColumn\">\n    <span *ngIf=\"nestedLayer > 0\" class=\"cell-placeholder\" [ngStyle]=\"{ width: nestedLayer * nestedColumnIndent + 'px' }\"></span>\n    <span [style.visibility]=\"rowItem.children ? 'visible' : 'hidden'\" class=\"childtable-toggler\" (click)=\"toggleChildTable(rowItem)\">\n      <ng-container *ngIf=\"rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!iconFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-close\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <rect x=\"4\" y=\"7\" width=\"8\" height=\"2\"></rect>\n          </g>\n        </svg>\n        <span *ngIf=\"iconFoldTable\" [innerHTML]=\"iconFoldTable | safe: 'html'\"></span>\n      </ng-container>\n      <ng-container *ngIf=\"!rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!iconUnFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-open-folder\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <path\n              d=\"M8.75,4 L8.75,7.25 L12,7.25 L12,8.75 L8.749,8.75 L8.75,12 L7.25,12 L7.249,8.75 L4,8.75 L4,7.25 L7.25,7.25 L7.25,4 L8.75,4 Z\"\n            ></path>\n          </g>\n        </svg>\n        <span *ngIf=\"iconUnFoldTable\" [innerHTML]=\"iconUnFoldTable | safe: 'html'\"></span>\n      </ng-container>\n    </span>\n  </ng-container>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, ContentChild, Input } from '@angular/core';\nimport { DataTableCellEditTmplComponent } from './data-table-cell-edit-tmpl.component';\nimport { DataTableCellViewTmplComponent } from './data-table-cell-view-tmpl.component';\n\n@Component({\n  selector: 'd-cell-template',\n  template: '',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class DataTableCellTmplComponent {\n  @Input() type: string;\n  @ContentChild(DataTableCellViewTmplComponent) view: DataTableCellViewTmplComponent;\n  @ContentChild(DataTableCellEditTmplComponent) edit: DataTableCellEditTmplComponent;\n\n}\n","import { ScrollingModule } from '@angular/cdk/scrolling';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { ButtonModule } from 'ng-devui/button';\nimport { CheckBoxModule } from 'ng-devui/checkbox';\nimport { DCommonModule } from 'ng-devui/common';\nimport { DatepickerModule } from 'ng-devui/datepicker';\nimport { DragDropModule } from 'ng-devui/dragdrop';\nimport { DropDownModule } from 'ng-devui/dropdown';\nimport { InputNumberComponent, InputNumberModule } from 'ng-devui/input-number';\nimport { PaginationModule } from 'ng-devui/pagination';\nimport { SelectComponent, SelectModule } from 'ng-devui/select';\nimport { TooltipModule } from 'ng-devui/tooltip';\nimport { TreeSelectComponent, TreeSelectModule } from 'ng-devui/tree-select';\nimport { LazyLoadModule, SafePipeModule } from 'ng-devui/utils';\nimport { WindowRefModule } from 'ng-devui/window-ref';\nimport { DataTableBodyComponent } from './data-table-body.component';\nimport { DataTableCellComponent } from './data-table-cell.component';\nimport { DataTableHeadComponent } from './data-table-head.component';\nimport { DataTableRowComponent } from './data-table-row.component';\nimport { DataTableComponent } from './data-table.component';\nimport { DisPlayCellValuePipe } from './display-cell-value.pipe';\nimport { EditorDirective } from './editor-host.directive';\nimport { TableTbodyComponent } from './table/body/tbody.component';\nimport { TableTdComponent } from './table/body/td/td.component';\nimport { TableTdService } from './table/body/td/td.service';\nimport { FilterComponent } from './table/head/th/filter/filter.component';\nimport { SortComponent } from './table/head/th/sort/sort.component';\nimport { TableThComponent } from './table/head/th/th.component';\nimport { TableTheadComponent } from './table/head/thead.component';\nimport { TableTrComponent } from './table/row/tr.component';\nimport { DataTableCellEditTmplComponent } from './tmpl/data-table-cell-edit-tmpl.component';\nimport { DataTableCellTmplComponent } from './tmpl/data-table-cell-tmpl.component';\nimport { DataTableCellViewTmplComponent } from './tmpl/data-table-cell-view-tmpl.component';\nimport { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';\nimport { DataTableHeadCellTmplComponent } from './tmpl/data-table-head-cell-tmpl.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    WindowRefModule,\n    ScrollingModule,\n    PaginationModule,\n    DCommonModule,\n    DatepickerModule,\n    SelectModule,\n    CheckBoxModule,\n    ButtonModule,\n    InputNumberModule,\n    DropDownModule,\n    TreeSelectModule,\n    SafePipeModule,\n    TooltipModule,\n    DragDropModule,\n    LazyLoadModule\n  ],\n  exports: [\n    DataTableComponent,\n    DataTableColumnTmplComponent,\n    DataTableCellViewTmplComponent,\n    DataTableCellEditTmplComponent,\n    DataTableBodyComponent,\n    DataTableHeadComponent,\n    DataTableCellComponent,\n    DataTableRowComponent,\n    DataTableCellTmplComponent,\n    DataTableHeadCellTmplComponent,\n    TableThComponent,\n    FilterComponent,\n    SortComponent,\n    TableTheadComponent,\n    TableTrComponent,\n    TableTbodyComponent,\n    TableTdComponent\n  ],\n  declarations: [\n    DataTableComponent,\n    DataTableColumnTmplComponent,\n    DataTableCellViewTmplComponent,\n    DataTableCellEditTmplComponent,\n    DataTableBodyComponent,\n    DataTableHeadComponent,\n    DataTableCellComponent,\n    DataTableRowComponent,\n    DataTableCellTmplComponent,\n    DataTableHeadCellTmplComponent,\n    DisPlayCellValuePipe,\n    EditorDirective,\n    TableThComponent,\n    FilterComponent,\n    SortComponent,\n    TableTheadComponent,\n    TableTrComponent,\n    TableTbodyComponent,\n    TableTdComponent\n  ],\n\n  providers: [ TableTdService ],\n})\nexport class DataTableModule {\n}\n","export const simDeepClone = obj => {\n  if (obj === null) { return null; }\n  if (typeof obj === 'object') {\n    return JSON.parse(JSON.stringify(obj));\n  } else if (typeof obj === 'string') {\n    try {\n      return JSON.parse(obj);\n    } catch (e) {\n      console.error(e);\n    }\n  } else {\n    return obj;\n  }\n};\n\nexport const highPerformanceFilter = (arr, func) => {\n  let res = [];\n  const arrLength = arr.length;\n  // 经过调查，在小于10000或大于99999条数据的时候，for循环速度比filter速度会快7至8倍左右\n  if (arrLength < 10000 || arrLength > 99999) {\n    for (let a = 0; a < arrLength; a++) {\n      if (func(arr[a],a)) {\n        res.push(arr[a]);\n      }\n    }\n  } else {\n    res = arr.filter(func);\n  }\n  return res;\n};\n\n\n// 生成随机Id\nexport const generateId = () => {\n  let timeStamp = new Date().getTime();\n  if (window.performance && typeof window.performance.now === \"function\") {\n    timeStamp += performance.now();\n  }\n  const id = 'aaaaaaaaaaaaaaabaaaaaaaaaaaaaaa'.replace(/[ab]/g, function (item) {\n    const res = (timeStamp + Math.random() * 16) % 16 | 0;\n    timeStamp = Math.floor(timeStamp / 16);\n    return (item === 'a' ? res : (res & 0x3 | 0x8)).toString(16);\n  });\n  return id;\n};\n\nexport const highPerformanceExpandObjectInArray = (oldObj, attr) => {\n  oldObj[Symbol.iterator] = function() {\n    return {\n      next:function() {\n        const array = Reflect.ownKeys(oldObj);\n        if (this.index < array.length-1) {\n          const key = array[this.index];\n          this.index++;\n          return { value: oldObj[key] };\n        } else {\n          return { done: true };\n        }\n      },\n      index:0\n    };\n  };\n  if(attr) {\n    const newObj=[];\n    for(let i=0;i<attr.length;i++) {\n      if(Object.prototype.hasOwnProperty.call(oldObj, attr[i])) {\n        newObj.push(oldObj[attr[i]]);\n      }\n    }\n    return newObj;\n  }\n  return [...oldObj];\n};\n\n\n// 将一些公共方法拆分出来\nexport const getNodeIndex = (nodeId, treeTableArray) => { // 找到节点在总数据中的位置的方法\n  return treeTableArray.findIndex((v) => v.node_id === nodeId);\n};\n\nexport class FindChild { // 寻找子节点\n  allChildCol: any = [];\n\n  getChildrenOfItem(node, treeTableArray) { // 找到节点下的子节点的方法\n    const data: any = highPerformanceFilter(treeTableArray, item => item.parent_node_id === node.node_id);\n    return data;\n  }\n\n  getAllChildrenOfItem(node, treeTableArray) { // 找到节点下所有子集的方法\n    this.allChildCol = [];\n    this.getAllChildrenData(node, treeTableArray);\n    return this.allChildCol;\n  }\n\n  getAllChildrenData(node, treeTableArray) {\n    const childData = this.getChildrenOfItem(node, treeTableArray);\n    const newArray = [...childData];\n    newArray.push(node);\n    this.allChildCol = [...this.allChildCol, ...newArray];\n    for(let i=0; i<childData.length; i++) {\n      if(childData[i].node_type) {\n        this.getAllChildrenData(childData[i], treeTableArray);\n      }\n    }\n  }\n}\n\nexport const distinct = (recordArr, nodeArr) => { // 数组去重的方法\n  const arr = recordArr.concat(nodeArr);\n  const result = [];\n  const obj = {};\n  for(const i of arr) {\n    if(!obj[i.node_id]) {\n      result.push(i);\n      obj[i.node_id] = 1;\n    }\n  }\n  return result;\n};\n\nexport const highPerformanceMap = (arr, func) => {\n  let res = [];\n  const arrLength = arr.length;\n  if (arrLength < 10000 || arrLength > 99999) {\n    for (let a = 0; a < arrLength; a++) {\n      const rs=func(arr[a],a);\n      if (rs) {\n        res.push(rs);\n      }\n    }\n  } else {\n    res = arr.map(func);\n  }\n  return res;\n};\n\nexport const flatTreeData = (dataSource: any[]) => {\n  const flatData = [];\n\n  const travelObj = (arr, parentId) => {\n    arr.forEach(item => {\n      if (item.children) {\n        const obj = {\n          id: generateId(),\n          node_id: generateId(),\n          node_type: 1,\n          parent_node_id: parentId,\n          ...item\n        };\n        const children = obj.children;\n        delete obj.children;\n        flatData.push(obj);\n        travelObj(children, obj.node_id);\n      } else {\n        const obj = {\n          id: generateId(),\n          node_id: generateId(),\n          node_type: 0,\n          parent_node_id: parentId,\n          ...item\n        };\n        flatData.push(obj);\n      }\n    });\n  };\n\n  travelObj(dataSource, null);\n\n  return flatData;\n};\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}