{"version":3,"file":"ng-devui-dragdrop.mjs","sources":["../../devui/dragdrop/shared/utils.ts","../../devui/dragdrop/touch-support/dragdrop-touch.ts","../../devui/dragdrop/services/drag-drop.service.ts","../../devui/dragdrop/shared/preserve-next-event-emitter.ts","../../devui/dragdrop/directives/drag-preview.component.ts","../../devui/dragdrop/directives/drag-preview.component.html","../../devui/dragdrop/directives/drag-preview.directive.ts","../../devui/dragdrop/directives/draggable.directive.ts","../../devui/dragdrop/directives/batch-draggable.directive.ts","../../devui/dragdrop/directives/drag-preivew-clone-from-domRef.component.ts","../../devui/dragdrop/services/drag-drop-desc-reg.service.ts","../../devui/dragdrop/services/drag-drop-descendant-sync.service.ts","../../devui/dragdrop/services/drag-drop-sync.service.ts","../../devui/dragdrop/directives/drag-sync.directive.ts","../../devui/dragdrop/directives/dragdrop-sync-box.directive.ts","../../devui/dragdrop/directives/drop-scroll-enhance.type.ts","../../devui/dragdrop/directives/drop-scroll-enhance.directive.ts","../../devui/dragdrop/directives/drop-scroll-enhance-side.directive.ts","../../devui/dragdrop/shared/drop-event.model.ts","../../devui/dragdrop/directives/droppable.directive.ts","../../devui/dragdrop/directives/drop-sort-sync.directive.ts","../../devui/dragdrop/directives/sortable.directive.ts","../../devui/dragdrop/drag-drop.module.ts","../../devui/dragdrop/ng-devui-dragdrop.ts"],"sourcesContent":["import { ElementRef } from '@angular/core';\n\nexport class Utils {\n  /**\n   * Polyfill for element.matches.\n   * See: https://developer.mozilla.org/en/docs/Web/API/Element/matches#Polyfill\n   * element\n   */\n  public static matches(element: any, selectorName: string): boolean {\n    const proto: any = Element.prototype;\n\n    const func =\n      proto['matches'] ||\n      proto.matchesSelector ||\n      proto.mozMatchesSelector ||\n      proto.msMatchesSelector ||\n      proto.oMatchesSelector ||\n      proto.webkitMatchesSelector ||\n      function (s) {\n        const matches = (this.document || this.ownerDocument).querySelectorAll(s);\n        let i = matches.length;\n        while (--i >= 0 && matches.item(i) !== this) {\n          // do nothing\n        }\n        return i > -1;\n      };\n\n    return func.call(element, selectorName);\n  }\n\n  /**\n   * Applies the specified css class on nativeElement\n   * elementRef\n   * className\n   */\n  public static addClass(elementRef: ElementRef | any, className: string) {\n    if (className === undefined) {return; }\n    const e = this.getElementWithValidClassList(elementRef);\n\n    if (e) {\n      e.classList.add(className);\n    }\n  }\n\n  /**\n   * Removes the specified class from nativeElement\n   * elementRef\n   * className\n   */\n  public static removeClass(elementRef: ElementRef | any, className: string) {\n    if (className === undefined) {return; }\n    const e = this.getElementWithValidClassList(elementRef);\n\n    if (e) {\n      e.classList.remove(className);\n    }\n  }\n\n  /**\n   * Gets element with valid classList\n   *\n   * elementRef\n   * @returns ElementRef | null\n   */\n  private static getElementWithValidClassList(elementRef: ElementRef) {\n    const e = elementRef instanceof ElementRef ? elementRef.nativeElement : elementRef;\n\n    if (e.classList !== undefined && e.classList !== null) {\n      return e;\n    }\n\n    return null;\n  }\n\n  public static slice(args, slice?, sliceEnd?) {\n    const ret = [];\n    let len = args.length;\n\n    if (len === 0) { return ret; }\n\n    const start = slice < 0\n      ? Math.max(0, slice + len)\n      : slice || 0;\n\n    if (sliceEnd !== undefined) {\n      len = sliceEnd < 0\n        ? sliceEnd + len\n        : sliceEnd;\n    }\n\n    while (len-- > start) {\n      ret[len - start] = args[len];\n    }\n    return ret;\n  }\n\n  // 动态添加styles\n  public static addElStyles(el: any, styles: any) {\n    if (styles instanceof Object) {\n      for (const s in styles) {\n        if (Object.prototype.hasOwnProperty.call(styles, s)) {\n          if (Array.isArray(styles[s])) {\n            // 用于支持兼容渐退\n            styles[s].forEach(val => {\n              el.style[s] = val;\n            });\n          } else {\n            el.style[s] = styles[s];\n          }\n        }\n      }\n    }\n  }\n  public static dispatchEventToUnderElement(event: DragEvent, target?: HTMLElement, eventType?: string) {\n    const up = target || <HTMLElement>(event.target);\n    up.style.display = 'none';\n    const {x, y} = {x: event.clientX, y: event.clientY};\n    const under = document.elementFromPoint(x, y);\n    up.style.display = '';\n    if (!under) {\n      return event;\n    }\n    const ev = document.createEvent('DragEvent');\n    ev.initMouseEvent(eventType || event.type, true, true, window, 0,\n      event.screenX, event.screenY, event.clientX, event.clientY,\n      event.ctrlKey, event.altKey, event.shiftKey, event.metaKey,\n      event.button, event.relatedTarget);\n    if (ev.dataTransfer !== null) {\n      ev.dataTransfer.setData('text', '');\n      ev.dataTransfer.effectAllowed = event.dataTransfer.effectAllowed;\n    }\n    under.dispatchEvent(ev);\n    return event;\n  }\n}\n","/**\n * 2020.03.23-Modified from https://github.com/Bernardo-Castilho/dragdroptouch, license: MIT，reason:Converting .js file to .ts file\n */\nexport class DragDropTouch {\n  static readonly THRESHOLD = 5; // pixels to move before drag starts\n  static readonly OPACITY = 0.5; // drag image opacity\n  static readonly DBLCLICK = 500; // max ms between clicks in a double click\n  static readonly DRAG_OVER_TIME = 300; // interval ms when drag over\n  static readonly CTX_MENU = 900; // ms to hold before raising 'contextmenu' event\n  static readonly IS_PRESS_HOLD_MODE = true; // decides of press & hold mode presence\n  static readonly PRESS_HOLD_AWAIT = 400; // ms to wait before press & hold is detected\n  static readonly PRESS_HOLD_MARGIN = 25; // pixels that finger might shiver while pressing\n  static readonly PRESS_HOLD_THRESHOLD = 0; // pixels to move before drag starts\n  static readonly DRAG_HANDLE_ATTR = 'data-drag-handle-selector';\n\n  static readonly rmvAttrs = 'id,class,style,draggable'.split(',');\n  static readonly kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n  static readonly ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY'.split(',');\n  private static instance: DragDropTouch = null;\n\n  dataTransfer: DataTransfer;\n  lastClick = 0;\n  lastTouch: TouchEvent;\n  // touched element\n  lastTarget: HTMLElement;\n  // touched draggble element\n  dragSource: HTMLElement;\n  ptDown: {x: number; y: number};\n  isDragEnabled: boolean;\n  isDropZone: boolean;\n  pressHoldInterval;\n  img;\n  imgCustom;\n  imgOffset;\n  // for continual drag over event even touch point stop at a certain point for a while.\n  dragoverTimer;\n  // for bind touch move and touch end event to touch target incase virtual scroll cause\n  // document no longer get capture/ bubble of touchmove event from dom removed from document tree\n  touchTarget: EventTarget;\n  touchmoveListener: EventListener;\n  touchendListener: EventListener;\n  listenerOpt: boolean | EventListenerOptions;\n\n  constructor() {\n    // enforce singleton pattern\n    if (DragDropTouch.instance) {\n      throw new Error('DragDropTouch instance already created.');\n    }\n    // detect passive event support\n    // https://github.com/Modernizr/Modernizr/issues/1894\n    let supportsPassive = false;\n    if (typeof document !== 'undefined') {\n      document.addEventListener('test', () => {}, {\n        get passive() {\n          supportsPassive = true;\n          return true;\n        }\n      });\n      // listen to touch events\n      if (DragDropTouch.isTouchDevice()) {\n        // 能响应触摸事件\n        const d = document;\n        const ts = this.touchstart;\n        const tmod = this.touchmoveOnDocument;\n        const teod = this.touchendOnDocument;\n        const opt = supportsPassive ? { passive: false, capture: false } : false;\n        const optPassive = supportsPassive ? {passive: true} : false;\n        d.addEventListener('touchstart', ts, opt);\n        d.addEventListener('touchmove', tmod, optPassive);\n        d.addEventListener('touchend', teod);\n        d.addEventListener('touchcancel', teod);\n        this.touchmoveListener = this.touchmove;\n        this.touchendListener = this.touchend;\n        this.listenerOpt = opt;\n      }\n    }\n  }\n  /**\n   * Gets a reference to the @see:DragDropTouch singleton.\n   */\n  static getInstance() {\n    if (!DragDropTouch.instance) {\n      DragDropTouch.instance = new DragDropTouch();\n    }\n    return DragDropTouch.instance;\n  }\n  static isTouchDevice() {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      return false;\n    }\n    const d: Document = document;\n    const w: Window = window;\n    let bool;\n    if ('ontouchstart' in d  // normal mobile device\n      || 'ontouchstart' in w\n      || navigator.maxTouchPoints > 0\n      || navigator['msMaxTouchPoints'] > 0\n      || window['DocumentTouch'] && document instanceof window['DocumentTouch']) {\n      bool = true;\n    } else {\n      const fakeBody = document.createElement('fakebody');\n      fakeBody.innerHTML += `\n      <style>\n        @media (touch-enabled),(-webkit-touch-enabled),(-moz-touch-enabled),(-o-touch-enabled){\n          #touch_test {\n            top: 42px;\n            position: absolute;\n          }\n        }\n      </style>`;\n      document.documentElement.appendChild(fakeBody);\n      const touchTestNode = document.createElement('div');\n      touchTestNode.id = 'touch_test';\n      fakeBody.appendChild(touchTestNode);\n      bool = touchTestNode.offsetTop === 42;\n      fakeBody.parentElement.removeChild(fakeBody);\n    }\n    return bool;\n  }\n  // ** event listener binding\n  bindTouchmoveTouchend (e: TouchEvent) {\n    this.touchTarget = e.target;\n    e.target.addEventListener('touchmove', this.touchmoveListener, this.listenerOpt);\n    e.target.addEventListener('touchend', this.touchendListener);\n    e.target.addEventListener('touchcancel', this.touchendListener);\n  }\n  removeTouchmoveTouchend () {\n    if (this.touchTarget) {\n      this.touchTarget.removeEventListener('touchmove', this.touchmoveListener);\n      this.touchTarget.removeEventListener('touchend', this.touchendListener);\n      this.touchTarget.removeEventListener('touchcancel', this.touchendListener);\n      this.touchTarget = undefined;\n    }\n  }\n  // ** event handlers\n  touchstart = (e: TouchEvent) => {\n    if (this.shouldHandle(e)) {\n      // raise double-click and prevent zooming\n      if (Date.now() - this.lastClick < DragDropTouch.DBLCLICK) {\n        if (this.dispatchEvent(e, 'dblclick', e.target)) {\n          e.preventDefault();\n          this.reset();\n          return;\n        }\n      }\n      // clear all variables\n      this.reset();\n      // get nearest draggable element\n      const src = this.closestDraggable(e.target);\n      if (src) {\n        this.dragSource = src;\n        this.ptDown = this.getPoint(e);\n        this.lastTouch = e;\n        if (DragDropTouch.IS_PRESS_HOLD_MODE) {\n          this.pressHoldInterval = setTimeout(() => {\n            this.bindTouchmoveTouchend(e);\n            this.isDragEnabled = true;\n            this.touchmove(e);\n          }, DragDropTouch.PRESS_HOLD_AWAIT);\n        } else {\n          e.preventDefault();\n          this.bindTouchmoveTouchend(e);\n        }\n      }\n    }\n  };\n  touchmoveOnDocument = (e) => {\n    if (this.shouldCancelPressHoldMove(e)) {\n      this.reset();\n      return;\n    }\n  };\n  touchmove = (e: TouchEvent) => {\n    if (this.shouldCancelPressHoldMove(e)) {\n      this.reset();\n      return;\n    }\n    if (this.shouldHandleMove(e) || this.shouldHandlePressHoldMove(e)) {\n      const target = this.getTarget(e);\n      // start dragging\n      if (this.dragSource && !this.img && this.shouldStartDragging(e)) {\n        this.dispatchEvent(e, 'dragstart', this.dragSource);\n        this.createImage(e);\n      }\n      // continue dragging\n      if (this.img) {\n        this.clearDragoverInterval();\n        this.lastTouch = e;\n        e.preventDefault(); // prevent scrolling\n        if (target !== this.lastTarget) {\n          // according to drag drop implementation of the browser, dragenterB is supposed to fired before dragleaveA\n          this.dispatchEvent(e, 'dragenter', target);\n          this.dispatchEvent(this.lastTouch, 'dragleave', this.lastTarget);\n          this.lastTarget = target;\n        }\n        this.moveImage(e);\n        this.isDropZone = this.dispatchEvent(e, 'dragover', target);\n        // should continue dispatch dragover event when touch position stay still\n        this.setDragoverInterval(e);\n      }\n    }\n  };\n  touchendOnDocument = (e) => {\n    if (this.shouldHandle(e)) {\n      if (!this.img) {\n        this.dragSource = null;\n        this.lastClick = Date.now();\n      }\n      // finish dragging\n      this.destroyImage();\n      if (this.dragSource) {\n        this.reset();\n      }\n    }\n  };\n  touchend = (e) => {\n    if (this.shouldHandle(e)) {\n      // user clicked the element but didn't drag, so clear the source and simulate a click\n      if (!this.img) {\n        this.dragSource = null;\n        // browser will dispatch click event after trigger touchend, since touchstart didn't preventDefault\n        this.lastClick = Date.now();\n      }\n      // finish dragging\n      this.destroyImage();\n      if (this.dragSource) {\n        if (e.type.indexOf('cancel') < 0 && this.isDropZone) {\n          this.dispatchEvent(this.lastTouch, 'drop', this.lastTarget);\n        }\n        this.dispatchEvent(this.lastTouch, 'dragend', this.dragSource);\n        this.reset();\n      }\n    }\n  };\n  // ** utilities\n  // ignore events that have been handled or that involve more than one touch\n  shouldHandle(e) {\n    return e &&\n    !e.defaultPrevented &&\n    e.touches && e.touches.length < 2;\n  }\n  // use regular condition outside of press & hold mode\n  shouldHandleMove(e) {\n    return !DragDropTouch.IS_PRESS_HOLD_MODE && this.shouldHandle(e);\n  }\n  // allow to handle moves that involve many touches for press & hold\n  shouldHandlePressHoldMove(e) {\n    return DragDropTouch.IS_PRESS_HOLD_MODE &&\n      this.isDragEnabled && e && e.touches && e.touches.length;\n  }\n  // reset data if user drags without pressing & holding\n  shouldCancelPressHoldMove(e) {\n    return DragDropTouch.IS_PRESS_HOLD_MODE && !this.isDragEnabled &&\n      this.getDelta(e) > DragDropTouch.PRESS_HOLD_MARGIN;\n  }\n  // start dragging when mouseover element matches drag handler selector and specified delta is detected\n  shouldStartDragging(e) {\n    const dragHandleSelector = this.getDragHandle();\n    // start dragging when mouseover element matches drag handler selector\n    if (dragHandleSelector && !this.matchSelector(e.target, dragHandleSelector)) {\n      return false;\n    }\n    // start dragging when specified delta is detected\n    const delta = this.getDelta(e);\n    return delta > DragDropTouch.THRESHOLD ||\n        (DragDropTouch.IS_PRESS_HOLD_MODE && delta >= DragDropTouch.PRESS_HOLD_THRESHOLD);\n  }\n  // find drag handler selector for dragstart only with partial element\n  getDragHandle() {\n    if (this.dragSource) {\n      return this.dragSource.getAttribute(DragDropTouch.DRAG_HANDLE_ATTR) || '';\n    }\n    return '';\n  }\n  // test if element matches selector\n  matchSelector(element, selector) {\n    if (selector) {\n      const proto = Element.prototype;\n      const func =\n          proto['matches'] ||\n          proto['matchesSelector'] ||\n          proto['mozMatchesSelector'] ||\n          proto['msMatchesSelector'] ||\n          proto['oMatchesSelector'] ||\n          proto['webkitMatchesSelector'] ||\n          function (s) {\n            const matches = (this.document || this.ownerDocument).querySelectorAll(s);\n            let i = matches.length;\n            while (--i >= 0 && matches.item(i) !== this) {\n              // do nothing\n            }\n            return i > -1;\n          };\n      return func.call(element, selector);\n    }\n    return true;\n  }\n  // clear all members\n  reset() {\n    this.removeTouchmoveTouchend();\n    this.destroyImage();\n    this.dragSource = null;\n    this.lastTouch = null;\n    this.lastTarget = null;\n    this.ptDown = null;\n    this.isDragEnabled = false;\n    this.isDropZone = false;\n    this.dataTransfer = new DragDropTouch.DataTransfer();\n    clearInterval(this.pressHoldInterval);\n    this.clearDragoverInterval();\n  }\n  // get point for a touch event\n  getPoint(e, page?) {\n    if (e && e.touches) {\n      e = e.touches[0];\n    }\n    return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };\n  }\n  // get distance between the current touch event and the first one\n  getDelta(e) {\n    if (DragDropTouch.IS_PRESS_HOLD_MODE && !this.ptDown) { return 0; }\n    const p = this.getPoint(e);\n    return Math.abs(p.x - this.ptDown.x) + Math.abs(p.y - this.ptDown.y);\n  }\n  // get the element at a given touch event\n  getTarget(e: TouchEvent) {\n    const pt = this.getPoint(e);\n    let el = document.elementFromPoint(pt.x, pt.y);\n    while (el && getComputedStyle(el).pointerEvents === 'none') {\n      el = el.parentElement;\n    }\n    return <HTMLElement>el;\n  }\n  // create drag image from source element\n  createImage(e) {\n    // just in case...\n    if (this.img) {\n      this.destroyImage();\n    }\n    // create drag image from custom element or drag source\n    const src = this.imgCustom || this.dragSource;\n    this.img = src.cloneNode(true);\n    this.copyStyle(src, this.img);\n    this.img.style.top = this.img.style.left = '-9999px';\n    // if creating from drag source, apply offset and opacity\n    if (!this.imgCustom) {\n      const rc = src.getBoundingClientRect();\n      const pt = this.getPoint(e);\n      this.imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\n      this.img.style.opacity = DragDropTouch.OPACITY.toString();\n    }\n    // add image to document\n    this.moveImage(e);\n    document.body.appendChild(this.img);\n  }\n  // dispose of drag image element\n  destroyImage() {\n    if (this.img && this.img.parentElement) {\n      this.img.parentElement.removeChild(this.img);\n    }\n    this.img = null;\n    this.imgCustom = null;\n  }\n  // move the drag image element\n  moveImage(e) {\n    requestAnimationFrame(() => {\n      if (this.img) {\n        const pt = this.getPoint(e, true);\n        const s = this.img.style;\n        s.position = 'absolute';\n        s.pointerEvents = 'none';\n        s.zIndex = '999999';\n        s.left = Math.round(pt.x - this.imgOffset.x) + 'px';\n        s.top = Math.round(pt.y - this.imgOffset.y) + 'px';\n      }\n    });\n  }\n  // copy properties from an object to another\n  copyProps (dst, src, props) {\n    for (let i = 0; i < props.length; i++) {\n      const p = props[i];\n      dst[p] = src[p];\n    }\n  }\n  // copy styles/attributes from drag source to drag image element\n  copyStyle(src, dst) {\n    // remove potentially troublesome attributes\n    DragDropTouch.rmvAttrs.forEach(function (att) {\n      dst.removeAttribute(att);\n    });\n    // copy canvas content\n    if (src instanceof HTMLCanvasElement) {\n      const canSrc = src;\n      const canDst = dst;\n      canDst.width = canSrc.width;\n      canDst.height = canSrc.height;\n      canDst.getContext('2d').drawImage(canSrc, 0, 0);\n    }\n    // copy canvas content for nested canvas element\n    const srcCanvases = src.querySelectorAll('canvas');\n    if (srcCanvases.length > 0) {\n      const dstCanvases = dst.querySelectorAll('canvas');\n      for (let i = 0; i < dstCanvases.length; i++) {\n        const cSrc = srcCanvases[i];\n        const cDst = dstCanvases[i];\n        cDst.getContext('2d').drawImage(cSrc, 0, 0);\n      }\n    }\n    // copy style (without transitions)\n    const cs = getComputedStyle(src);\n    for (let i = 0; i < cs.length; i++) {\n      const key = cs[i];\n      if (key.indexOf('transition') < 0) {\n        dst.style[key] = cs[key];\n      }\n    }\n    dst.style.pointerEvents = 'none';\n    // and repeat for all children\n    for (let i = 0; i < src.children.length; i++) {\n      this.copyStyle(src.children[i], dst.children[i]);\n    }\n  }\n  // synthesize and dispatch an event\n  // returns true if the event has been handled (e.preventDefault == true)\n  dispatchEvent(e, type, target) {\n    if (e && target) {\n      const evt = document.createEvent('Event');\n      const t = e.touches ? e.touches[0] : e;\n      evt.initEvent(type, true, true);\n      const obj = {\n        button: 0,\n        which: 0,\n        buttons: 1,\n        dataTransfer: this.dataTransfer\n      };\n      this.copyProps(evt, e, DragDropTouch.kbdProps);\n      this.copyProps(evt, t, DragDropTouch.ptProps);\n      this.copyProps(evt, {fromTouch: true}, ['fromTouch']); // mark as from touch event\n      this.copyProps(evt, obj, Object.keys(obj));\n\n      target.dispatchEvent(evt);\n      return evt.defaultPrevented;\n    }\n    return false;\n  }\n  // gets an element's closest draggable ancestor\n  closestDraggable(e) {\n    for (; e; e = e.parentElement) {\n      if (e.hasAttribute('draggable') && e.draggable) {\n        return e;\n      }\n    }\n    return null;\n  }\n  // repeat dispatch dragover event when touch point stay still\n  setDragoverInterval(e) {\n    this.dragoverTimer = setInterval(() => {\n      const target = this.getTarget(e);\n      if (target !== this.lastTarget) {\n        this.dispatchEvent(e, 'dragenter', target);\n        this.dispatchEvent(e, 'dragleave', this.lastTarget);\n        this.lastTarget = target;\n      }\n      this.isDropZone = this.dispatchEvent(e, 'dragover', target);\n    }, DragDropTouch.DRAG_OVER_TIME);\n  }\n  clearDragoverInterval() {\n    if (this.dragoverTimer) {\n      clearInterval(this.dragoverTimer);\n      this.dragoverTimer = undefined;\n    }\n  }\n\n}\n/* eslint-disable-next-line @typescript-eslint/no-namespace */\nexport namespace DragDropTouch {\n  /**\n     * Object used to hold the data that is being dragged during drag and drop operations.\n     *\n     * It may hold one or more data items of different types. For more information about\n     * drag and drop operations and data transfer objects, see\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\">HTML Drag and Drop API</a>.\n     *\n     * This object is created automatically by the @see:DragDropTouch singleton and is\n     * accessible through the @see:dataTransfer property of all drag events.\n     */\n  export class DataTransfer implements DataTransfer {\n    files;\n    items;\n    private _data;\n    /**\n     * Gets or sets the type of drag-and-drop operation currently selected.\n     * The value must be 'none',  'copy',  'link', or 'move'.\n     */\n    private _dropEffect;\n    get dropEffect() {\n      return this._dropEffect;\n    }\n    set dropEffect(value) {\n      this._dropEffect = value;\n    }\n    /**\n     * Gets or sets the types of operations that are possible.\n     * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',\n     * 'linkMove', 'move', 'all' or 'uninitialized'.\n     */\n    private _effectAllowed;\n    get effectAllowed() {\n      return this._effectAllowed;\n    }\n    set effectAllowed(value) {\n      this._effectAllowed = value;\n    }\n    /**\n     * Gets an array of strings giving the formats that were set in the @see:dragstart event.\n     */\n    private _types;\n    get types() {\n      return Object.keys(this._data);\n    }\n\n    constructor () {\n      this._dropEffect = 'move';\n      this._effectAllowed = 'all';\n      this._data = {};\n    }\n    /**\n       * Removes the data associated with a given type.\n       *\n       * The type argument is optional. If the type is empty or not specified, the data\n       * associated with all types is removed. If data for the specified type does not exist,\n       * or the data transfer contains no data, this method will have no effect.\n       *\n       * @param type Type of data to remove.\n       */\n    clearData (type) {\n      if (type !== null) {\n        delete this._data[type];\n      } else {\n        this._data = null;\n      }\n    }\n    /**\n     * Retrieves the data for a given type, or an empty string if data for that type does\n     * not exist or the data transfer contains no data.\n     *\n     * @param type Type of data to retrieve.\n     */\n    getData (type) {\n      return this._data[type] || '';\n    }\n\n    /**\n     * Set the data for a given type.\n     *\n     * For a list of recommended drag types, please see\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.\n     *\n     * @param type Type of data to add.\n     * @param value Data to add.\n     */\n    setData (type, value) {\n      this._data[type] = value;\n    }\n    /**\n     * Set the image to be used for dragging if a custom one is desired.\n     *\n     * @param img An image element to use as the drag feedback image.\n     * @param offsetX The horizontal offset within the image.\n     * @param offsetY The vertical offset within the image.\n     */\n    setDragImage (img, offsetX, offsetY) {\n      const ddt = DragDropTouch.getInstance();\n      ddt.imgCustom = img;\n      ddt.imgOffset = { x: offsetX, y: offsetY };\n    }\n  }\n\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { DragPreviewDirective } from '../directives/drag-preview.directive';\nimport { Utils } from '../shared/utils';\nimport { DragDropTouch } from '../touch-support/dragdrop-touch';\nimport { DraggableDirective } from './../directives/draggable.directive';\n\n@Injectable()\nexport class DragDropService {\n  dragData: any;\n  draggedEl: any;\n  draggedElIdentity: any;\n  batchDragData: Array<{\n    identity?: any;\n    draggable: DraggableDirective;\n    dragData: any;\n  }>;\n  batchDragGroup: string;\n  batchDragStyle: Array<string>;\n  batchDragging: boolean;\n  scope: string | Array<string>;\n  dropTargets = [];\n  dropEvent: Subject<any> = new Subject();\n  dragEndEvent = new Subject<any>();\n  dragStartEvent = new Subject<any>();\n  dropOnItem: boolean;\n  dragFollow: boolean;\n  dragFollowOptions: {\n    appendToBody?: boolean;\n  };\n  dropOnOrigin: boolean;\n  draggedElFollowingMouse: boolean;\n  dragOffset: {\n    top: number;\n    left: number;\n    offsetLeft: number;\n    offsetTop: number;\n    width?: number;\n    height?: number;\n  };\n  subscription: Subscription = new Subscription();\n  dragEmptyImage = new Image();\n  dragCloneNode: any;\n  dragOriginPlaceholder: any;\n  dragItemContainer: any;\n  dragItemParentName = '';\n  dragItemChildrenName = '';\n  intersectionObserver: any = null;\n  sub;\n  dragOriginPlaceholderNextSibling: any;\n  touchInstance;\n\n  /* 协同拖拽需要 */\n  dragElShowHideEvent = new Subject<boolean>();\n  dragSyncGroupDirectives;\n  /* 预览功能 */\n  dragPreviewDirective: DragPreviewDirective;\n  document: Document;\n\n  constructor(private ngZone: NgZone, @Inject(DOCUMENT) private doc: any) {\n    this.touchInstance = DragDropTouch.getInstance();\n    // service not support OnInit, only support OnDestroy, so write in constructor\n    // safari的img必须要有src\n    this.dragEmptyImage.src\n      = 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==';\n    this.document = this.doc;\n  }\n  newSubscription() {\n    this.subscription.unsubscribe();\n    // eslint-disable-next-line no-return-assign\n    return this.subscription = new Subscription();\n  }\n\n  enableDraggedCloneNodeFollowMouse() {\n    if (!this.dragCloneNode) {\n      this.dragItemContainer = this.draggedEl.parentElement;\n      if (this.dragPreviewDirective && this.dragPreviewDirective.dragPreviewTemplate) {\n        this.dragPreviewDirective.createPreview();\n        this.dragCloneNode = this.dragPreviewDirective.getPreviewElement();\n        this.dragItemContainer = this.document.body;\n      } else {\n        this.dragCloneNode = this.draggedEl.cloneNode(true);\n      }\n\n      this.dragCloneNode.style.margin = '0';\n      if (this.dragFollowOptions && this.dragFollowOptions.appendToBody) {\n        this.dragItemContainer = this.document.body;\n        this.copyStyle(this.draggedEl, this.dragCloneNode);\n      }\n\n      if (this.dragItemChildrenName !== '') {\n        const parentElement = this.dragItemParentName === '' ? this.dragCloneNode : this.document.querySelector(this.dragItemParentName);\n        const dragItemChildren = parentElement.querySelectorAll(this.dragItemChildrenName);\n        this.interceptChildNode(parentElement, dragItemChildren);\n      }\n      // 拷贝canvas的内容\n      const originCanvasArr = this.draggedEl.querySelectorAll('canvas');\n      const targetCanvasArr = this.dragCloneNode.querySelectorAll('canvas');\n      [].forEach.call(targetCanvasArr, (canvas, index) => {\n        canvas.getContext('2d').drawImage(originCanvasArr[index], 0, 0);\n      });\n\n      this.ngZone.runOutsideAngular(() => {\n        this.document.addEventListener('dragover', this.followMouse4CloneNode, { capture: true, passive: true });\n      });\n      this.dragCloneNode.style.width = this.dragOffset.width + 'px';\n      this.dragCloneNode.style.height = this.dragOffset.height + 'px';\n\n      if (!(this.dragPreviewDirective\n        && this.dragPreviewDirective.dragPreviewTemplate\n        && this.dragPreviewDirective.dragPreviewOptions\n        && this.dragPreviewDirective.dragPreviewOptions.skipBatchPreview)) {\n        // 批量拖拽样式\n        if (this.batchDragging && this.batchDragData && this.batchDragData.length > 1) {\n          // 创建一个节点容器\n          const node = this.document.createElement('div');\n          node.appendChild(this.dragCloneNode);\n          node.classList.add('batch-dragged-node');\n\n          /* 计数样式定位 */\n          if (this.batchDragStyle && this.batchDragStyle.length && this.batchDragStyle.indexOf('badge') > -1) {\n            const badge = this.document.createElement('div');\n            badge.innerText = String(this.batchDragData.length);\n            badge.classList.add('batch-dragged-node-count');\n            node.style.position = 'relative';\n            const style = {\n              position: 'absolute',\n              right: '5px',\n              top: '-12px',\n              height: '24px',\n              width: '24px',\n              borderRadius: '12px',\n              fontSize: '14px',\n              lineHeight: '24px',\n              textAlign: 'center',\n              color: '#fff',\n              background: ['#5170ff', 'var(--brand-1, #5170ff)']\n            };\n            Utils.addElStyles(badge, style);\n            node.appendChild(badge);\n          }\n\n          /* 层叠感样式定位 */\n          if (this.batchDragStyle && this.batchDragStyle.length && this.batchDragStyle.indexOf('stack') > -1) {\n            let stack = 2;\n            if (this.batchDragData.length === 2) {\n              stack = 1;\n            }\n            for (let i = 0; i < stack; i++) {\n              const stackNode = this.dragCloneNode.cloneNode(false);\n              const stackStyle = {\n                position: 'absolute',\n                left: -5 * (i + 1) + 'px',\n                top: -5 * (i + 1) + 'px',\n                zIndex: String(- (i + 1)),\n                width: this.dragOffset.width + 'px',\n                height: this.dragOffset.height + 'px',\n                background: '#fff',\n                border: ['1px solid #5170ff', '1px solid var(--brand-1, #5170ff)']\n              };\n              Utils.addElStyles(stackNode, stackStyle);\n              node.appendChild(stackNode);\n            }\n          }\n          this.dragCloneNode = node;\n        }\n      }\n\n      this.dragCloneNode.classList.add('drag-clone-node');\n      if (!(this.dragPreviewDirective && this.dragPreviewDirective.dragPreviewTemplate)) {\n        this.dragCloneNode.style.width = this.dragOffset.width + 'px';\n        this.dragCloneNode.style.height = this.dragOffset.height + 'px';\n      }\n      this.dragCloneNode.style.position = 'fixed';\n      this.dragCloneNode.style.zIndex = '1090';\n      this.dragCloneNode.style.pointerEvents = 'none';\n      this.dragCloneNode.style.top = this.dragOffset.top + 'px';\n      this.dragCloneNode.style.left = this.dragOffset.left + 'px';\n      this.dragCloneNode.style.willChange = 'left, top';\n      this.dragItemContainer.appendChild(this.dragCloneNode);\n      this.ngZone.runOutsideAngular(() => {\n        setTimeout(() => {\n          if (this.draggedEl) {\n            this.draggedEl.style.display = 'none';\n            this.dragElShowHideEvent.next(false);\n            if (this.dragOriginPlaceholder) {\n              this.dragOriginPlaceholder.style.display = 'block';\n            }\n          }\n        });\n      });\n    }\n  }\n\n  disableDraggedCloneNodeFollowMouse() {\n    if (this.dragCloneNode) {\n      this.document.removeEventListener('dragover', this.followMouse4CloneNode, { capture: true });\n      this.dragItemContainer.removeChild(this.dragCloneNode);\n      this.draggedEl.style.display = '';\n      this.dragElShowHideEvent.next(true);\n    }\n    if (this.dragPreviewDirective && this.dragPreviewDirective.dragPreviewTemplate) {\n      this.dragPreviewDirective.destroyPreview();\n    }\n    this.dragCloneNode = undefined;\n    this.dragItemContainer = undefined;\n\n    if (this.intersectionObserver) {\n      this.intersectionObserver.disconnect();\n    }\n  }\n\n  interceptChildNode(parentNode, childNodeList) {\n    const interceptOptions = {\n      root: parentNode\n    };\n    this.intersectionObserver = new IntersectionObserver(this.setChildNodeHide, interceptOptions);\n    [].forEach.call(childNodeList, childNode => {\n      this.intersectionObserver.observe(childNode);\n    });\n  }\n\n  setChildNodeHide(entries) {\n    entries.forEach(element => {\n      const { isIntersecting, target: childNode } = element;\n      if (isIntersecting) {\n        childNode.style.display = 'block';\n      } else {\n        childNode.style.display = 'none';\n      }\n    });\n  }\n\n  followMouse4CloneNode = (event) => {\n    const { offsetLeft, offsetTop } = this.dragOffset;\n    const { clientX, clientY } = event;\n    requestAnimationFrame(() => {\n      if (!this.dragCloneNode) { return; }\n      this.dragCloneNode.style.left = clientX - offsetLeft + 'px';\n      this.dragCloneNode.style.top = clientY - offsetTop + 'px';\n    });\n  };\n\n  getBatchDragData(identity?, order: ((a: any, b: any) => number) | 'select' | 'draggedElFirst' = 'draggedElFirst') {\n    const result = this.batchDragData.map(dragData => dragData.dragData);\n    if (typeof order === 'function') {\n      result.sort(<((a: any, b: any) => number)>order);\n    } else if (order === 'draggedElFirst') {\n      let dragData = this.dragData;\n      if (identity) {\n        const realDragData = this.batchDragData.filter(dd => dd.identity === identity).pop().dragData;\n        dragData = realDragData;\n      }\n      result.splice(result.indexOf(dragData), 1);\n      result.splice(0, 0, dragData);\n    }\n    return result;\n  }\n\n  /** usage:\n   * constructor(..., private dragDropService: DragDropService) {}\n   * cleanBatchDragData() { this.dragDropService.cleanBatchDragData(); }\n   */\n  public cleanBatchDragData() {\n    const batchDragData = this.batchDragData;\n    if (this.batchDragData) {\n      this.batchDragData\n        .filter(dragData => dragData.draggable)\n        .map(dragData => dragData.draggable)\n        .forEach(draggable => {draggable.batchDraggable.dragData = undefined;});\n      this.batchDragData = undefined;\n      this.batchDragGroup = undefined;\n    }\n    return batchDragData;\n  }\n\n  public copyStyle(source, target) {\n    ['id', 'class', 'style', 'draggable'].forEach(function (att) {\n      target.removeAttribute(att);\n    });\n\n    // copy style (without transitions)\n    const computedStyle = getComputedStyle(source);\n    for (let i = 0; i < computedStyle.length; i++) {\n      const key = computedStyle[i];\n      if (key.indexOf('transition') < 0) {\n        target.style[key] = computedStyle[key];\n      }\n    }\n    target.style.pointerEvents = 'none';\n    // and repeat for all children\n    for (let i = 0; i < source.children.length; i++) {\n      this.copyStyle(source.children[i], target.children[i]);\n    }\n  }\n\n}\n","import { EventEmitter } from '@angular/core';\n\nexport class PreserveNextEventEmitter<T> extends EventEmitter<T> {\n  /** 保留注册的 generatorOrNext构成的函数*/\n  private _schedulerFns: Set<any>;\n  private _isAsync: boolean;\n  get schedulerFns() { return this._schedulerFns; }\n\n  constructor(isAsync = false) {\n    super(isAsync);\n    this._isAsync = isAsync;\n  }\n\n  forceCallback(value: T, once = false) {\n    if (this.schedulerFns && this.schedulerFns.size) {\n      this.schedulerFns.forEach(fn => {\n        fn (value);\n      });\n      if (once) {\n        this.cleanCallbackFn();\n      }\n    }\n  }\n  cleanCallbackFn() {\n    this._schedulerFns = undefined;\n  }\n\n  emit(value?: T) { super.emit(value); }\n\n  subscribe(generatorOrNext?: any, error?: any, complete?: any): any {\n    let schedulerFn: (t: any) => any;\n\n    if (generatorOrNext && typeof generatorOrNext === 'object') {\n      schedulerFn = this._isAsync ? (value: any) => {\n        setTimeout(() => generatorOrNext.next(value));\n      } : (value: any) => { generatorOrNext.next(value); };\n    } else {\n      schedulerFn = this._isAsync ? (value: any) => { setTimeout(() => generatorOrNext(value)); } :\n        (value: any) => { generatorOrNext(value); };\n    }\n    if (!this._schedulerFns) {\n      this._schedulerFns = new Set<any>();\n    }\n    this._schedulerFns.add(schedulerFn);\n\n    return super.subscribe(generatorOrNext, error, complete);\n  }\n\n}\n","import {  ChangeDetectorRef, Component, ElementRef, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'd-drag-preview',\n  templateUrl: './drag-preview.component.html',\n  preserveWhitespaces: false,\n})\n\nexport class DragPreviewComponent {\n  element;\n  data;\n  draggedEl;\n  dragData;\n  batchDragData;\n  dragSyncDOMElements;\n  templateRef: TemplateRef<any>;\n  constructor(private el: ElementRef, private cdr: ChangeDetectorRef) {\n    this.element =  el.nativeElement;\n  }\n  public updateTemplate() {\n    this.cdr.detectChanges();\n  }\n\n}\n","<ng-template\n  [ngTemplateOutlet]=\"templateRef\"\n  [ngTemplateOutletContext]=\"{\n    data: data,\n    draggedEl: draggedEl,\n    dragData: dragData,\n    batchDragData: batchDragData,\n    dragSyncDOMElements: dragSyncDOMElements\n  }\"\n>\n</ng-template>\n","import { ComponentFactoryResolver, Directive, Input, TemplateRef } from '@angular/core';\nimport { OverlayContainerRef } from 'ng-devui/overlay-container';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { DragPreviewComponent } from './drag-preview.component';\n\n@Directive({\n  selector: '[dDraggable][dDragPreview]',\n  exportAs: 'dDragPreview'\n})\n\nexport class DragPreviewDirective {\n  @Input('dDragPreview') dragPreviewTemplate: TemplateRef<any>;\n  @Input() dragPreviewData;\n  @Input() dragPreviewOptions = {\n    skipBatchPreview: false\n  };\n  public previewRef;\n  constructor(private componentFactoryResolver: ComponentFactoryResolver,\n              private overlayContainerRef: OverlayContainerRef, private dragDropService: DragDropService) {\n  }\n\n  public createPreview() {\n    const finalComponentFactoryResolver = this.componentFactoryResolver;\n\n    const previewRef = this.overlayContainerRef.createComponent(\n      finalComponentFactoryResolver.resolveComponentFactory(DragPreviewComponent)\n    );\n    this.previewRef = previewRef;\n    this.updateData();\n    return this.previewRef;\n  }\n\n  public updateData() {\n    Object.assign(this.previewRef.instance, {\n      templateRef: this.dragPreviewTemplate,\n      data: this.dragPreviewData,\n      draggedEl: this.dragDropService.draggedEl,\n      dragData: this.dragDropService.dragData,\n      batchDragData:  this.dragDropService.batchDragData && this.dragDropService.getBatchDragData(),\n      dragSyncDOMElements: this.dragDropService.dragSyncGroupDirectives && this.getDragSyncDOMElements()\n    });\n    this.previewRef.instance.updateTemplate();\n  }\n\n  public destroyPreview() {\n    if (this.previewRef) {\n      this.previewRef.hostView.destroy();\n    }\n  }\n\n  public getPreviewElement() {\n    return this.previewRef && this.previewRef.instance.element;\n  }\n  private getDragSyncDOMElements() {\n    return this.dragDropService.dragSyncGroupDirectives.map(dir => dir.el.nativeElement);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit, Directive, ElementRef, EventEmitter,\n  HostBinding, Inject, Input, NgZone, OnDestroy, OnInit, Optional, Output, Renderer2, Self\n} from '@angular/core';\nimport { fromEvent, Subject, Subscription } from 'rxjs';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { Utils } from '../shared/utils';\nimport { PreserveNextEventEmitter } from './../shared/preserve-next-event-emitter';\nimport { DragPreviewDirective } from './drag-preview.directive';\n\n@Directive({\n  selector: '[dDraggable]'\n})\n/**\n * Makes an element draggable by adding the draggable html attribute\n */\nexport class DraggableDirective implements OnInit, AfterViewInit, OnDestroy {\n  @HostBinding('draggable') draggable = true;\n  /**\n   * The data that will be available to the droppable directive on its `dropEvent()` event.\n   */\n  @Input() dragData;\n\n  /**\n   * The selector that defines the drag Handle. If defined drag will only be allowed if dragged from the selector element.\n   */\n  @HostBinding('attr.data-drag-handle-selector') // host-binding attribute for communicate with touch support js\n  @Input() dragHandle: string;\n\n  /**\n   * Currently not used\n   */\n  @Input() dragEffect = 'move';\n\n  /**\n   * Defines compatible drag drop pairs. Values must match both in draggable and droppable.dropScope.\n   */\n  @Input() dragScope: string | Array<string> = 'default';\n\n  @Input() dragHandleClass = 'drag-handle';\n  /**\n   * CSS class applied on the draggable that is applied when the item is being dragged.\n   */\n  @Input() dragOverClass: string;\n\n  /**\n   * Event fired when Drag is started\n   */\n  @Output() dragStartEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n   * @deprecated\n   * Event fired while the element is being dragged\n   * 为了性能优化，该函数废弃，请用(drag)自行监听， 如果不需要angular脏检测则最好用runOutsideAngular的addEventListener监听以获得好的性能\n   */\n  @Output() dragEvent: PreserveNextEventEmitter<any> = new PreserveNextEventEmitter<any>();\n\n  /**\n   * Event fired when dragged ends\n   */\n  @Output() dragEndEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n   * Keeps track of mouse over element that is used to determine drag handles\n   */\n  private mouseOverElement: any;\n  @Output() dropEndEvent: PreserveNextEventEmitter<any> = new PreserveNextEventEmitter<any>();\n  @Input()\n  public get disabled(): boolean {\n    return this._disabled;\n  }\n\n  public set disabled(value: boolean) {\n    this._disabled = value;\n    this.draggable = !this._disabled;\n  }\n  private _disabled: boolean;\n\n  @Input() enableDragFollow = false; // 默认false使用浏览器H5API拖拽, 否则使用原dom定位偏移\n  @Input() dragFollowOptions: {\n    appendToBody?: boolean;\n  };\n  @Input() originPlaceholder: {\n    show?: boolean;\n    tag?: string;\n    style?: {[cssProperties: string]: string};\n    text?: string;\n    removeDelay?: number; // 单位: ms\n  };\n  @Input() dragIdentity: any; // 用于虚拟滚动的恢复\n\n  @Input() dragItemParentName = ''; // 当前拖拽元素的类名或元素名称（类名需要加.）,主要用于子节点的截取操作\n  @Input() dragItemChildrenName = ''; // 当前拖拽元素的子节点类名或元素名称（类名需要加.）\n\n  dragsSub: Subscription = new Subscription();\n  destroyDragEndSub: Subscription = new Subscription();\n  isDestroyed: boolean;\n  private delayRemoveOriginPlaceholderTimer;\n  public batchDraggable;\n  private dragOriginPlaceholder;\n  private dragOriginPlaceholderNextSibling;\n  public dragElShowHideEvent = new Subject<boolean>();\n  public beforeDragStartEvent = new Subject<boolean>();\n  document: Document;\n\n  constructor(public el: ElementRef, private renderer: Renderer2, private dragDropService: DragDropService, private ngZone: NgZone,\n              @Optional() @Self() public dragPreviewDirective: DragPreviewDirective, @Inject(DOCUMENT) private doc: any\n  ) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.dragsSub.add(fromEvent(this.el.nativeElement, 'mouseover').subscribe(event => this.mouseover(event)));\n      this.dragsSub.add(fromEvent(this.el.nativeElement, 'dragstart').subscribe(event => this.dragStart(event)));\n      this.dragsSub.add(fromEvent(this.el.nativeElement, 'dragend').subscribe(event => this.dragEnd(event)));\n    });\n  }\n\n  dropSubscription() {\n    this.dragDropService.newSubscription().add(\n      this.dragDropService.dropEvent.subscribe((event) => {\n        this.mouseOverElement = undefined;\n        this.renderer.removeClass(this.el.nativeElement, this.dragOverClass);\n        this.dropEndEvent.emit(event);\n        // 兼容虚拟滚动后被销毁\n        if (this.isDestroyed) {\n          if (this.dropEndEvent.schedulerFns && this.dropEndEvent.schedulerFns.size > 0) {\n            this.dropEndEvent.forceCallback(event, true);\n          }\n        }\n        if (this.dragDropService.dragOriginPlaceholder) {\n          if (this.originPlaceholder && this.originPlaceholder.removeDelay > 0\n            && !this.dragDropService.dropOnOrigin) { // 非drop到自己的情况\n            this.delayRemoveOriginPlaceholder();\n          } else {\n            this.removeOriginPlaceholder();\n          }\n          this.dragDropService.draggedElIdentity = undefined;\n        }\n        this.dragDropService.subscription.unsubscribe();\n      })).add(\n      this.dragDropService.dragElShowHideEvent.subscribe(this.dragElShowHideEvent)\n    );\n  }\n\n  ngAfterViewInit() {\n    this.applyDragHandleClass();\n    if (this.dragIdentity) {\n      if (this.dragDropService.draggedEl && this.dragIdentity === this.dragDropService.draggedElIdentity) {\n        if (this.originPlaceholder && this.originPlaceholder.show !== false) {\n          this.insertOriginPlaceholder();\n        }\n        this.dragDropService.draggedEl = this.el.nativeElement;\n        this.el.nativeElement.style.display = 'none'; // recovery don't need to emit event\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    // 兼容虚拟滚动后被销毁\n    this.isDestroyed = true;\n    if (this.dragDropService.draggedEl === this.el.nativeElement) {\n      this.destroyDragEndSub = new Subscription();\n      this.destroyDragEndSub.add(fromEvent(this.el.nativeElement, 'dragend').subscribe(event => {\n        this.dragEnd(event);\n        if (this.dropEndEvent.schedulerFns && this.dropEndEvent.schedulerFns.size > 0) {\n          this.dropEndEvent.forceCallback(event, true);\n        }\n        this.destroyDragEndSub.unsubscribe();\n        this.destroyDragEndSub = undefined;\n      }));\n      if (this.originPlaceholder && this.originPlaceholder.show !== false\n        && this.dragDropService.dragOriginPlaceholder && this.dragDropService.draggedElIdentity) {\n        // 如果有originPlaceholder 则销毁\n        this.removeOriginPlaceholder();\n      }\n    }\n    this.dragsSub.unsubscribe();\n  }\n\n  dragStart(e) {\n    if (this.allowDrag(e)) {\n      this.renderer.addClass(this.el.nativeElement, this.dragOverClass);\n      this.dragDropService.dragData = this.dragData;\n      this.dragDropService.scope = this.dragScope;\n      this.dragDropService.draggedEl = this.el.nativeElement;\n      this.dragDropService.draggedElIdentity = this.dragIdentity;\n      this.dragDropService.dragFollow = this.enableDragFollow;\n      this.dragDropService.dragFollowOptions = this.dragFollowOptions;\n      this.dragDropService.dragItemParentName = this.dragItemParentName;\n      this.dragDropService.dragItemChildrenName = this.dragItemChildrenName;\n      this.beforeDragStartEvent.next();\n      if (this.dragPreviewDirective && this.dragPreviewDirective.dragPreviewTemplate) {\n        this.dragDropService.dragFollow = true;\n        this.dragDropService.dragPreviewDirective = this.dragPreviewDirective;\n      }\n      if (this.batchDraggable) {\n        if (this.batchDraggable.dragData) {\n          // 有dragData证明被加入到了group里\n          if (this.dragDropService.batchDragData && this.dragDropService.batchDragData.length > 1) {\n            this.dragDropService.batchDragging = true;\n            this.dragDropService.batchDragStyle = this.batchDraggable.batchDragStyle;\n          }\n        } else if (this.batchDraggable.batchDragLastOneAutoActiveEventKeys) {\n          const batchActiveAble = this.batchDraggable.batchDragLastOneAutoActiveEventKeys\n            .map(key => e[key])\n            .some(eventKey => eventKey === true);\n          if (batchActiveAble) {\n            if (this.dragDropService.batchDragData && this.dragDropService.batchDragData.length > 0) {\n              this.batchDraggable.active();\n              if (!this.batchDraggable.dragData) {\n                // 如果用户没做任何处理把项目加到组里则加到组里\n                this.batchDraggable.addToBatchGroup();\n              }\n              if (this.dragDropService.batchDragData.some(dragData => dragData.draggable === this)) {\n                this.dragDropService.batchDragging = true;\n                this.dragDropService.batchDragStyle = this.batchDraggable.batchDragStyle;\n              }\n            }\n          }\n        }\n      }\n      const targetOffset = this.el.nativeElement.getBoundingClientRect();\n      if (this.dragDropService.dragFollow) {\n        const mousePositionXY = this.mousePosition(e);\n        // 用于出现transform的场景position:fixed相对位置变更\n        const transformOffset = this.checkAndGetViewPointChange(this.el.nativeElement);\n        this.dragDropService.dragOffset = {\n          left: targetOffset.left,\n          top: targetOffset.top,\n          offsetLeft: mousePositionXY.x - targetOffset.left + transformOffset.offsetX,\n          offsetTop: mousePositionXY.y - targetOffset.top + transformOffset.offsetY,\n          width: targetOffset.width,\n          height: targetOffset.height\n        };\n        this.dragDropService.enableDraggedCloneNodeFollowMouse();\n      } else {\n        this.dragDropService.dragOffset = {\n          left: targetOffset.left,\n          top: targetOffset.top,\n          offsetLeft: null,\n          offsetTop: null,\n          width: targetOffset.width,\n          height: targetOffset.height\n        };\n      }\n      if (this.originPlaceholder && this.originPlaceholder.show !== false) {\n        this.insertOriginPlaceholder(false);\n      }\n      if (this.dragDropService.batchDragging\n        && this.dragDropService.batchDragData && this.dragDropService.batchDragData.length > 1) {\n        this.dragDropService.batchDragData.map(dragData => dragData.draggable)\n          .filter(draggable => draggable && draggable !== this)\n          .forEach((draggable) => {\n            if (draggable.originPlaceholder && draggable.originPlaceholder.show !== false) {\n              draggable.insertOriginPlaceholder(true, false);\n              draggable.el.nativeElement.style.display = 'none';\n            } else {\n              setTimeout(() => {draggable.el.nativeElement.style.display = 'none'; });\n            }\n          });\n      }\n      // Firefox requires setData() to be called otherwise the drag does not work.\n      if (e.dataTransfer !== null) {\n        e.dataTransfer.setData('text', '');\n      }\n      e.dataTransfer.effectAllowed = this.dragEffect;\n      this.dropSubscription();\n      if (this.dragDropService.dragFollow) {\n        if (typeof DataTransfer.prototype.setDragImage === 'function') {\n          e.dataTransfer.setDragImage(this.dragDropService.dragEmptyImage, 0 , 0);\n        } else {\n          e.srcElement.style.display = 'none';\n          this.dragDropService.dragElShowHideEvent.next(false);\n        }\n      }\n      e.stopPropagation();\n      this.dragStartEvent.emit(e);\n      this.dragDropService.dragStartEvent.next(e);\n    } else {\n      e.preventDefault();\n    }\n  }\n\n  dragEnd(e) {\n    this.renderer.removeClass(this.el.nativeElement, this.dragOverClass);\n    this.dragDropService.dragEndEvent.next(e);\n    this.mouseOverElement = undefined;\n    if (this.dragDropService.draggedEl) {\n      // 当dom被清除的的时候不会触发dragend，所以清理工作部分交给了drop，但是内部排序的时候dom不会被清理，dragend防止和drop重复操作清理动作\n      if (this.dragDropService.dragFollow) {\n        this.dragDropService.disableDraggedCloneNodeFollowMouse();\n      }\n      if (this.dragDropService.dragOriginPlaceholder) {\n        this.removeOriginPlaceholder();\n      }\n      if (this.dragDropService.batchDragging && this.dragDropService.batchDragData && this.dragDropService.batchDragData.length > 1) {\n        this.dragDropService.batchDragData.map(dragData => dragData.draggable)\n          .filter(draggable => draggable && draggable !== this)\n          .forEach((draggable) => {\n            if (draggable.originPlaceholder && draggable.originPlaceholder.show !== false) {\n              draggable.el.nativeElement.style.display = '';\n              draggable.removeOriginPlaceholder();\n            } else {\n              draggable.el.nativeElement.style.display = '';\n            }\n          });\n      }\n      if (this.batchDraggable && !this.batchDraggable.batchDragActive) {\n        this.batchDraggable.removeFromBatchGroup();\n        this.dragDropService.batchDragging = false;\n        this.dragDropService.batchDragStyle = undefined;\n      }\n      if (this.dragDropService.subscription) {\n        this.dragDropService.subscription.unsubscribe();\n      }\n      this.dragDropService.dragData = undefined;\n      this.dragDropService.scope = undefined;\n      this.dragDropService.draggedEl = undefined;\n      this.dragDropService.dragFollow = undefined;\n      this.dragDropService.dragFollowOptions = undefined;\n      this.dragDropService.dragOffset = undefined;\n      this.dragDropService.draggedElIdentity = undefined;\n      this.dragDropService.dragPreviewDirective = undefined;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n    this.dragEndEvent.emit(e);\n  }\n\n  mouseover(e) {\n    this.mouseOverElement = e.target;\n  }\n\n  private allowDrag(e) {\n    if (!this.draggable) {\n      return false;\n    }\n    if (this.batchDraggable && !this.batchDraggable.allowAddToBatchGroup()) {  // 批量拖拽判断group是否相同\n      return false;\n    }\n    if (this.dragHandle) {\n      if (e && e.fromTouch) {return true; } // from touchstart dispatch event\n      if (!this.mouseOverElement) { return false; }\n      return Utils.matches(this.mouseOverElement, this.dragHandle);\n    } else {\n      return true;\n    }\n  }\n\n  private applyDragHandleClass() {\n    const dragElement = this.getDragHandleElement();\n    if (!dragElement) {\n      return;\n    }\n    if (this.draggable) {\n      Utils.addClass(dragElement, this.dragHandleClass);\n    } else {\n      Utils.removeClass(this.el, this.dragHandleClass);\n    }\n  }\n\n  private getDragHandleElement() {\n    let dragElement = this.el;\n    if (this.dragHandle) {\n      dragElement = this.el.nativeElement.querySelector(this.dragHandle);\n    }\n    return dragElement;\n  }\n\n  private mousePosition(event) {\n    return {\n      x: event.clientX,\n      y: event.clientY\n    };\n  }\n  public insertOriginPlaceholder = (directShow = true, updateService = true) => {\n    if (this.delayRemoveOriginPlaceholderTimer) {\n      clearTimeout(this.delayRemoveOriginPlaceholderTimer);\n      this.delayRemoveOriginPlaceholderTimer = undefined;\n    }\n\n    const node = this.document.createElement(this.originPlaceholder.tag || 'div');\n    const rect =  this.el.nativeElement.getBoundingClientRect();\n    if (directShow) {\n      node.style.display = 'block';\n    } else {\n      node.style.display = 'none';\n    }\n\n    node.style.width = rect.width + 'px';\n    node.style.height = rect.height + 'px';\n    node.classList.add('drag-origin-placeholder');\n    if (this.originPlaceholder.text) {\n      node.innerText = this.originPlaceholder.text;\n    }\n    if (this.originPlaceholder.style) {\n      Utils.addElStyles(node, this.originPlaceholder.style);\n    }\n    if (updateService) {\n      this.dragDropService.dragOriginPlaceholder = node;\n      this.dragDropService.dragOriginPlaceholderNextSibling = this.el.nativeElement.nextSibling;\n    } else {\n      node.classList.add('side-drag-origin-placeholder');\n      const originCloneNode = this.el.nativeElement.cloneNode(true);\n      originCloneNode.style.margin = 0;\n      originCloneNode.style.pointerEvents = 'none';\n      originCloneNode.style.opacity = '0.3';\n      node.appendChild(originCloneNode);\n    }\n    this.dragOriginPlaceholder = node;\n    this.dragOriginPlaceholderNextSibling = this.el.nativeElement.nextSibling;\n    this.el.nativeElement.parentElement.insertBefore(node, this.el.nativeElement.nextSibling);\n  };\n\n  public removeOriginPlaceholder = (updateService = true) => {\n    if (this.dragOriginPlaceholder) {\n      this.dragOriginPlaceholder.parentElement.removeChild(this.dragOriginPlaceholder);\n    }\n    if (updateService) {\n      this.dragDropService.dragOriginPlaceholder = undefined;\n      this.dragDropService.dragOriginPlaceholderNextSibling = undefined;\n    }\n    this.dragOriginPlaceholder = undefined;\n    this.dragOriginPlaceholderNextSibling = undefined;\n  };\n  public delayRemoveOriginPlaceholder = (updateService = true) => {\n    const timeout = this.originPlaceholder.removeDelay;\n    const delayOriginPlaceholder = this.dragOriginPlaceholder;\n    const dragOriginPlaceholderNextSibling = this.findNextSibling(this.dragOriginPlaceholderNextSibling);\n\n    // 需要临时移动位置，保证被ngFor刷新之后位置是正确的\n    // ngFor刷新的原理是有变化的部分都刷新，夹在变化部分中间的内容将被刷到变化部分之后的位置，所以需要恢复位置\n    // setTimeout是等ngFor的View刷新, 后续需要订阅sortContainer的view的更新才需要重新恢复位置\n    if (delayOriginPlaceholder.parentElement.contains(dragOriginPlaceholderNextSibling)) {\n      delayOriginPlaceholder.parentElement.insertBefore(\n        delayOriginPlaceholder,\n        dragOriginPlaceholderNextSibling\n      );\n    }\n    setTimeout(() => {\n      if (delayOriginPlaceholder.parentElement.contains(dragOriginPlaceholderNextSibling)) {\n        delayOriginPlaceholder.parentElement.insertBefore(\n          delayOriginPlaceholder,\n          dragOriginPlaceholderNextSibling\n        );\n      }\n      delayOriginPlaceholder.classList.add('delay-deletion');\n      this.delayRemoveOriginPlaceholderTimer = setTimeout(() => {\n        delayOriginPlaceholder.parentElement.removeChild(delayOriginPlaceholder);\n        if (this.document.body.contains(this.el.nativeElement)) {\n          this.el.nativeElement.style.display = '';\n          this.dragDropService.dragElShowHideEvent.next(false);\n        }\n      }, timeout);\n      if (updateService) {\n        this.dragDropService.dragOriginPlaceholder = undefined;\n        this.dragDropService.dragOriginPlaceholderNextSibling = undefined;\n      }\n      this.dragOriginPlaceholder = undefined;\n      this.dragOriginPlaceholderNextSibling = undefined;\n    });\n  };\n  findNextSibling(currentNextSibling) {\n    if (!this.dragDropService.batchDragData) {\n      return currentNextSibling;\n    } else {\n      if (this.dragDropService.batchDragData\n        .map(dragData => dragData.draggable && dragData.draggable.el.nativeElement)\n        .indexOf(currentNextSibling) > -1) {\n        currentNextSibling = currentNextSibling.nextSibling;\n      }\n      return currentNextSibling;\n    }\n  }\n\n  private checkAndGetViewPointChange(element: HTMLElement) {\n    if (!element.parentNode) { return null; }\n    // 模拟一个元素测预测位置和最终位置是否符合，如果不符合则是有transform等造成的偏移\n    const elementPosition = element.getBoundingClientRect();\n    const testEl = this.document.createElement('div');\n    Utils.addElStyles(testEl, {\n      opacity: '0',\n      position: 'fixed',\n      top: elementPosition.top + 'px',\n      left: elementPosition.left + 'px',\n      width: '1px',\n      height: '1px',\n      zIndex: '-999999',\n    });\n    element.parentNode.appendChild(testEl);\n    const testElPosition = testEl.getBoundingClientRect();\n    element.parentNode.removeChild(testEl);\n    return {\n      offsetX: testElPosition.left - elementPosition.left,\n      offsetY: testElPosition.top - elementPosition.top\n    };\n  }\n}\n","import { AfterViewInit, Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, Self, SimpleChanges } from '@angular/core';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { DraggableDirective } from './draggable.directive';\nexport type BatchDragStyle = 'badge' | 'stack' | string;\n@Directive({\n  selector: '[dDraggable][batchDrag]',\n  exportAs: 'dBatchDraggable'\n})\n\nexport class BatchDraggableDirective implements OnInit, OnChanges, OnDestroy, AfterViewInit {\n  @Input() batchDragGroup = 'default';\n  @Input() batchDragActive = false;\n  @Input() batchDragLastOneAutoActiveEventKeys = ['ctrlKey'];\n  @Output() batchDragActiveEvent = new EventEmitter<any>();\n  dragData;\n  needToRestore = false;\n  @Input() batchDragStyle: Array<BatchDragStyle> = ['badge', 'stack'];\n\n  constructor(@Self() private draggable: DraggableDirective,  private dragDropService: DragDropService) {\n    this.draggable.batchDraggable = this;\n  }\n\n  ngOnInit() {\n    this.initDragDataByIdentity();\n  }\n\n  ngOnDestroy() {\n    this.draggable.batchDraggable = undefined;\n    if (this.dragData) {\n      if (this.dragData.draggable === this.draggable) {\n        this.dragData.draggable = undefined;\n        if (!this.dragData.identity) {\n          this.removeFromBatchGroup();\n        }\n      }\n    }\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['batchDragActive'])  {\n      if (!this.initDragDataByIdentity()) {\n        if (this.batchDragActive) {\n          if (!this.dragData && this.allowAddToBatchGroup()) {\n            this.addToBatchGroup();\n          }\n        } else {\n          this.removeFromBatchGroup();\n        }\n      }\n    }\n  }\n  ngAfterViewInit() {\n    if (this.needToRestore) {\n      this.restoreDragDataViewAfterViewInit();\n      this.needToRestore = false;\n    }\n  }\n  initDragDataByIdentity() {\n    const dragData = this.findInBatchDragDataByIdentities();\n    if (dragData) {\n      if (this.batchDragActive) {\n        if (!this.dragData) {\n          this.addToBatchGroup(dragData);\n          this.registerRestoreDragDataViewAfterViewInitWhiteDragging();\n        }\n      } else {\n        this.removeFromBatchGroup(dragData);\n      }\n    }\n    return dragData;\n  }\n\n  registerRestoreDragDataViewAfterViewInitWhiteDragging() {\n    if (this.dragDropService.draggedEl && this.dragDropService.draggedElIdentity &&\n      this.dragDropService.draggedEl !== this.draggable.el.nativeElement) {\n      this.needToRestore = true;\n    }\n  }\n  restoreDragDataViewAfterViewInit() {\n    const draggable = this.draggable;\n    if (draggable.originPlaceholder && draggable.originPlaceholder.show !== false) {\n      draggable.insertOriginPlaceholder(true, false);\n    }\n    draggable.el.nativeElement.style.display = 'none';\n  }\n\n  allowAddToBatchGroup() {\n    if (!this.dragDropService.batchDragGroup) {\n      return true;\n    } else {\n      return this.batchDragGroup === this.dragDropService.batchDragGroup;\n    }\n  }\n  addToBatchGroup(dragData?) {\n    this.dragDropService.batchDragGroup = this.dragDropService.batchDragGroup || this.batchDragGroup;\n    if (dragData) {\n      dragData.draggable = this.draggable;\n      dragData.dragData = this.draggable.dragData;\n      this.dragData = dragData;\n    } else {\n      this.dragData = this.dragData || {\n        identity: this.draggable.dragIdentity || undefined,\n        draggable: this.draggable,\n        dragData: this.draggable.dragData\n      };\n      this.dragDropService.batchDragData = this.addToArrayIfNotExist(this.dragDropService.batchDragData, this.dragData);\n    }\n  }\n  removeFromBatchGroup(dragData?) {\n    this.deleteFromArrayIfExist(this.dragDropService.batchDragData, dragData || this.dragData);\n    this.dragData = undefined;\n    if (!(this.dragDropService.batchDragData && this.dragDropService.batchDragData.length)) {\n      this.dragDropService.batchDragGroup = undefined;\n    }\n  }\n\n  private addToArrayIfNotExist(array: any[], target: any) {\n    array = array || [];\n    if (array.indexOf(target) === -1) {\n      array.push(target);\n    }\n    return array;\n  }\n\n  private deleteFromArrayIfExist(array: any[], target: any) {\n    if (!array) { return; }\n    if (array.length > 0) {\n      const index = array.indexOf(target);\n      if (index > -1) {\n        array.splice(index, 1);\n      }\n    }\n    return array;\n  }\n\n  private findInBatchDragDataByIdentities() {\n    if (!this.draggable.dragIdentity) {\n      return null;\n    } else if (!this.dragDropService.batchDragData) {\n      return undefined;\n    } else {\n      return this.dragDropService.batchDragData.filter(dragData => dragData.identity === this.draggable.dragIdentity).pop();\n    }\n  }\n\n  active() {\n    this.batchDragActiveEvent.emit({el: this.draggable.el.nativeElement, data: this.draggable.dragData});\n  }\n\n  public updateDragData() {\n    // 选中状态才更新\n    if (!this.dragData) {return; }\n    // 需要维持内存地址不变\n    Object.assign(this.dragData, {\n      identity: this.draggable.dragIdentity || undefined,\n      draggable: this.draggable,\n      dragData: this.draggable.dragData\n    });\n  }\n}\n","import {  AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\nimport { DragDropService } from '../services/drag-drop.service';\n\n@Component({\n  selector: 'd-drag-preview-clone-dom-ref',\n  template: '',\n  preserveWhitespaces: false,\n})\n\nexport class DragPreviewCloneDomRefComponent implements AfterViewInit, OnChanges, OnDestroy {\n  @Input() domRef: HTMLElement;\n  @Input() copyStyle = true;\n  cloneNode;\n  constructor(private el: ElementRef, private cdr: ChangeDetectorRef, private dragDropService: DragDropService) {\n  }\n  ngAfterViewInit() {\n    if (!this.cloneNode) {\n      this.createView();\n    }\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['domRef']) {\n      if (this.cloneNode) {\n        this.destroyView();\n        this.createView();\n      } else {\n        this.createView();\n      }\n    }\n  }\n  ngOnDestroy() {\n    if (this.cloneNode) {\n      this.destroyView();\n    }\n\n  }\n\n  createView() {\n    if (this.domRef) {\n      this.cloneNode = this.domRef.cloneNode(true);\n      if (this.copyStyle) {\n        this.dragDropService.copyStyle(this.domRef, this.cloneNode);\n      }\n      this.el.nativeElement.appendChild(this.cloneNode);\n    }\n  }\n  destroyView() {\n    if (this.cloneNode) {\n      if (this.el.nativeElement.contains(this.cloneNode)) {\n        this.el.nativeElement.removeChild(this.cloneNode);\n      }\n      this.cloneNode = undefined;\n    }\n  }\n  public updateTemplate() {\n    this.cdr.detectChanges();\n  }\n\n}\n","import { Directive, Injectable, OnDestroy, OnInit, QueryList } from '@angular/core';\nimport { BehaviorSubject, Observable, Subject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Injectable()\nexport class DescendantRegisterService<T> {\n  protected _result: Array<T> = [];\n  protected changeSubject: Subject<Array<T>> = new BehaviorSubject<Array<T>>([]);\n  public changes: Observable<Array<T>> = this.changeSubject.asObservable().pipe(\n    debounceTime(200)\n  );\n  public register(t: T) {\n    if (!t) {return; }\n    const index = this._result.indexOf(t);\n    if (index === -1) {\n      this._result.push(t);\n      this.changeSubject.next(this._result);\n    }\n  }\n  public unregister(t: T) {\n    if (!t) {return; }\n    const index = this._result.indexOf(t);\n    if (index > -1) {\n      this._result.splice(index, 1);\n      this.changeSubject.next(this._result);\n    }\n  }\n  public queryResult() {\n    return this._result.concat([]);\n  }\n}\n\n@Directive()\n/* eslint-disable-next-line @angular-eslint/directive-class-suffix */\nexport class DescendantChildren<T> implements OnInit, OnDestroy {\n  constructor (private drs: DescendantRegisterService<T>) {}\n  protected descendantItem: T;\n  ngOnInit() {\n    this.drs.register(this.descendantItem);\n  }\n  ngOnDestroy() {\n    this.drs.unregister(this.descendantItem);\n  }\n}\n\nexport class DescendantRoot<T> extends QueryList<T> {\n  protected sub: Subscription;\n  constructor(private drs: DescendantRegisterService<T>) {\n    super();\n  }\n  public on() {\n    if (this.sub) { return; }\n    this.reset(this.drs.queryResult());\n    this.sub = this.drs.changes.subscribe(result => {this.reset(result); });\n  }\n\n  public off() {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { DragSyncDirective } from '../directives/drag-sync.directive';\nimport { DropSortSyncDirective } from '../directives/drop-sort-sync.directive';\nimport { DescendantRegisterService } from './drag-drop-desc-reg.service';\n\n@Injectable()\nexport class DragSyncDescendantRegisterService extends DescendantRegisterService<DragSyncDirective> {}\n@Injectable()\nexport class DropSortSyncDescendantRegisterService extends DescendantRegisterService<DropSortSyncDirective> {}\n","import { Injectable, QueryList } from '@angular/core';\nimport { DragSyncDirective } from '../directives/drag-sync.directive';\nimport { DropSortSyncDirective } from '../directives/drop-sort-sync.directive';\n\n@Injectable()\nexport class DragDropSyncService {\n  dragSyncList: QueryList<DragSyncDirective>;\n\n  dropSortSyncList: QueryList<DropSortSyncDirective>;\n\n  public updateDragSyncList(list: QueryList<DragSyncDirective>) {\n    this.dragSyncList = list;\n  }\n  public getDragSyncByGroup(groupName: string) {\n    if (groupName === '') {\n      return [];\n    }\n    return this.dragSyncList ? this.dragSyncList.filter(dragSync => dragSync.dragSyncGroup === groupName) : [];\n  }\n\n  public updateDropSyncList(list: QueryList<DropSortSyncDirective>) {\n    this.dropSortSyncList = list;\n  }\n  public getDropSyncByGroup(groupName: string) {\n    if (groupName === '') {\n      return [];\n    }\n    return this.dropSortSyncList ? this.dropSortSyncList.filter(dropSync => dropSync.dropSyncGroup === groupName) : [];\n  }\n}\n","import { Directive, ElementRef, Inject, Input, OnDestroy, OnInit, Optional, Self } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DescendantChildren } from '../services/drag-drop-desc-reg.service';\nimport { DragSyncDescendantRegisterService } from '../services/drag-drop-descendant-sync.service';\nimport { DragDropSyncService } from '../services/drag-drop-sync.service';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { DraggableDirective } from './draggable.directive';\n\n@Directive({\n  selector: '[dDragSync]',\n  exportAs: 'dDragSync'\n})\nexport class DragSyncDirective extends DescendantChildren<DragSyncDirective> implements OnInit, OnDestroy {\n  @Input('dDragSync') dragSyncGroup = '';\n  subscription: Subscription = new Subscription();\n  syncGroupDirectives: Array<DragSyncDirective>;\n\n  constructor(\n    public el: ElementRef,\n    @Optional() @Self() private draggable: DraggableDirective,\n    private dragDropSyncService: DragDropSyncService,\n    private dragDropService: DragDropService,\n    private dragSyncDrs: DragSyncDescendantRegisterService,\n  ) {\n    super(dragSyncDrs);\n    this.descendantItem = this;\n  }\n\n  ngOnInit() {\n    if (this.draggable) {\n      this.subscription.add(this.draggable.dragElShowHideEvent.subscribe(this.subDragElEvent));\n      this.subscription.add(this.draggable.beforeDragStartEvent.subscribe(() => {\n        this.syncGroupDirectives = this.dragDropSyncService.getDragSyncByGroup(this.dragSyncGroup).filter(directive => directive !== this);\n        this.dragDropService.dragSyncGroupDirectives = this.syncGroupDirectives;\n      }));\n      this.subscription.add(this.draggable.dropEndEvent.subscribe(() => {\n        this.dragDropService.dragSyncGroupDirectives = undefined;\n        this.syncGroupDirectives = undefined;\n      }));\n    }\n    super.ngOnInit();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n    super.ngOnDestroy();\n  }\n\n  subDragElEvent = (bool: boolean) => {\n    this.syncGroupDirectives.forEach(dir => this.renderDisplay(dir.el.nativeElement, bool));\n  };\n\n  renderDisplay(nativeEl: HTMLElement, bool: boolean) {\n    nativeEl.style.display = bool ? '' : 'none';\n  }\n\n}\n","import { AfterViewInit, Directive, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DescendantRoot } from '../services/drag-drop-desc-reg.service';\nimport { DragSyncDescendantRegisterService, DropSortSyncDescendantRegisterService } from '../services/drag-drop-descendant-sync.service';\nimport { DragDropSyncService } from '../services/drag-drop-sync.service';\nimport { DragSyncDirective } from './drag-sync.directive';\nimport { DropSortSyncDirective } from './drop-sort-sync.directive';\n\n@Directive({\n  selector: '[dDragDropSyncBox]',\n  exportAs: 'dDragDropSyncBox',\n  providers: [\n    DragDropSyncService,\n    DragSyncDescendantRegisterService,\n    DropSortSyncDescendantRegisterService,\n  ]\n})\nexport class DragDropSyncBoxDirective implements OnInit, AfterViewInit, OnDestroy {\n  sub = new Subscription();\n  // @ContentChildren(DragSyncDirective, {descendants: true})\n  dragSyncList: DescendantRoot<DragSyncDirective>;\n  // @ContentChildren(DropSortSyncDirective, {descendants: true})\n  dropSyncList: DescendantRoot<DropSortSyncDirective>;\n  constructor(private dragDropSyncService: DragDropSyncService,\n              private dragSyncDrs: DragSyncDescendantRegisterService,\n              private dropSortSyncDrs: DropSortSyncDescendantRegisterService) {\n  }\n\n  ngOnInit() {\n    this.dragSyncList = new DescendantRoot<DragSyncDirective>(this.dragSyncDrs);\n    this.dropSyncList = new DescendantRoot<DropSortSyncDirective>(this.dropSortSyncDrs);\n  }\n  ngAfterViewInit() {\n    this.dragSyncList.on();\n    this.dropSyncList.on();\n    this.dragDropSyncService.updateDragSyncList(this.dragSyncList);\n    this.dragDropSyncService.updateDropSyncList(this.dropSyncList);\n    this.sub.add(\n      this.dragSyncList.changes.subscribe(\n        list => this.dragDropSyncService.updateDragSyncList(list)\n      )\n    ).add(\n      this.dropSyncList.changes.subscribe(\n        list => this.dragDropSyncService.updateDropSyncList(list)\n      )\n    );\n  }\n  ngOnDestroy() {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n    this.dragSyncList.off();\n    this.dropSyncList.off();\n  }\n\n}\n","export type DropScrollEdgeDistancePercent = number; // 单位 px / px\nexport type DropScrollSpeed = number; // 单位 px/ s\nexport type DropScrollSpeedFunction = (x: DropScrollEdgeDistancePercent) =>  DropScrollSpeed;\nexport type DropScrollDirection = 'h' | 'v'; // 'both' 暂不支持双向滚动\nexport enum DropScrollOrientation {\n  forward,  // 进， 右/下\n  backward  // 退， 左/上\n}\nexport interface DropScrollAreaOffset {\n  left?: number;\n  right?: number;\n  top?: number;\n  bottom?: number;\n  widthOffset?: number;\n  heightOffset?: number;\n}\nexport type DropScrollTriggerEdge = 'left' | 'right' | 'top' | 'bottom';\n\nexport const DropScrollEnhanceTimingFunctionGroup = {\n  default: (x: number) => Math.ceil((1 - x) * 18) * 100\n};\n","import { DOCUMENT } from '@angular/common';\nimport { AfterViewInit, Directive, ElementRef, Inject, Input, NgZone, OnDestroy } from '@angular/core';\nimport { fromEvent, merge as mergeStatic, Subscription } from 'rxjs';\nimport { tap, throttleTime } from 'rxjs/operators';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { Utils } from '../shared/utils';\nimport {\n  DropScrollAreaOffset, DropScrollDirection, DropScrollEnhanceTimingFunctionGroup, DropScrollOrientation,\n  DropScrollSpeed, DropScrollSpeedFunction, DropScrollTriggerEdge\n} from './drop-scroll-enhance.type';\n\n@Directive({\n  selector: '[dDropScrollEnhanced]',\n  exportAs: 'dDropScrollEnhanced'\n})\nexport class DropScrollEnhancedDirective implements AfterViewInit, OnDestroy {\n  @Input() minSpeed: DropScrollSpeed = 50;\n  @Input() maxSpeed: DropScrollSpeed = 1000;\n  @Input() responseEdgeWidth: string | ((total: number) => string)  = '100px';\n  @Input() speedFn: DropScrollSpeedFunction = DropScrollEnhanceTimingFunctionGroup.default;\n  @Input() direction: DropScrollDirection = 'v';\n  @Input() viewOffset: {\n    forward?: DropScrollAreaOffset; // 仅重要边和次要边有效\n    backward?: DropScrollAreaOffset;\n  };\n  @Input() dropScrollScope: string | Array<string>;\n  @Input() backSpaceDroppable = true;\n\n  private forwardScrollArea: HTMLElement;\n  private backwardScrollArea: HTMLElement;\n  private subscription: Subscription = new Subscription();\n  private forwardScrollFn: (event: DragEvent) => void;\n  private backwardScrollFn: (event: DragEvent) => void;\n  private lastScrollTime;\n  private animationFrameId: number;\n  document: Document;\n\n  constructor(private el: ElementRef, private zone: NgZone, private dragDropService: DragDropService,\n              @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n  }\n\n  ngAfterViewInit() {\n    // 设置父元素\n    this.el.nativeElement.parentNode.style.position = 'relative';\n    this.el.nativeElement.parentNode.style.display = 'block';\n    // 创建后退前进区域和对应的滚动函数\n    this.forwardScrollArea = this.createScrollArea(this.direction, DropScrollOrientation.forward);\n    this.backwardScrollArea = this.createScrollArea(this.direction, DropScrollOrientation.backward);\n    this.forwardScrollFn = this.createScrollFn(this.direction, DropScrollOrientation.forward, this.speedFn);\n    this.backwardScrollFn = this.createScrollFn(this.direction, DropScrollOrientation.backward, this.speedFn);\n    this.zone.runOutsideAngular(() => {\n      // 拖拽到其上触发滚动\n      this.subscription.add(fromEvent<DragEvent>(this.forwardScrollArea, 'dragover')\n        .pipe(\n          tap(event => {event.preventDefault(); event.stopPropagation(); }),\n          throttleTime(100, undefined, {leading: true, trailing: false})\n        ).subscribe(event => this.forwardScrollFn(event)));\n      this.subscription.add(fromEvent<DragEvent>(this.backwardScrollArea, 'dragover')\n        .pipe(\n          tap(event => {event.preventDefault(); event.stopPropagation(); }),\n          throttleTime(100, undefined, {leading: true, trailing: false}))\n        .subscribe(event => this.backwardScrollFn(event)));\n      // 拖拽放置委托\n      this.subscription.add(\n        mergeStatic(\n          fromEvent<DragEvent>(this.forwardScrollArea, 'drop'),\n          fromEvent<DragEvent>(this.backwardScrollArea, 'drop')\n        ).subscribe(event => this.delegateDropEvent(event)));\n      // 拖拽离开清除参数\n      this.subscription.add(\n        mergeStatic(\n          fromEvent(this.forwardScrollArea, 'dragleave', {passive: true}),\n          fromEvent(this.backwardScrollArea, 'dragleave', {passive: true})\n        ).subscribe(event => this.cleanLastScrollTime())\n      );\n      // 滚动过程计算区域有效性，滚动条贴到边缘的时候无效，无效的时候设置鼠标事件可用为none\n      this.subscription.add(\n        fromEvent(this.el.nativeElement, 'scroll', {passive: true})\n          .pipe(throttleTime(300, undefined, {leading: true, trailing: true}))\n          .subscribe(event => {\n            this.toggleScrollToOneEnd(this.el.nativeElement, this.forwardScrollArea, this.direction, DropScrollOrientation.forward);\n            this.toggleScrollToOneEnd(this.el.nativeElement, this.backwardScrollArea, this.direction, DropScrollOrientation.backward);\n          })\n      );\n      // 窗口缩放的时候重绘有效性区域\n      this.subscription.add(\n        fromEvent(window, 'resize', {passive: true})\n          .pipe(throttleTime(300, undefined, {leading: true, trailing: true}))\n          .subscribe(event => this.resizeArea())\n      );\n      // dragstart的时候显示拖拽滚动边缘面板\n      this.subscription.add(\n        this.dragDropService.dragStartEvent.subscribe(() => {\n          if (!this.allowScroll()) {return; }\n          this.zone.runOutsideAngular(() => {\n            setTimeout(() => {\n              // 立马出现会打断边缘元素的拖拽\n              this.forwardScrollArea.style.display = 'block';\n              this.backwardScrollArea.style.display = 'block';\n            });\n          });\n        })\n      );\n      // dragEnd或drop的时候结束了拖拽，滚动区域影藏起来\n      this.subscription.add(\n        mergeStatic(this.dragDropService.dragEndEvent, this.dragDropService.dropEvent)\n          .subscribe(() => {\n            this.forwardScrollArea.style.display = 'none';\n            this.backwardScrollArea.style.display = 'none';\n            this.lastScrollTime = undefined;\n          })\n      );\n    });\n    setTimeout(() => {\n      this.resizeArea();\n    }, 0);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  createScrollFn(direction: DropScrollDirection, orientation: DropScrollOrientation,\n                 speedFn: DropScrollSpeedFunction) {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const scrollAttr = (direction === 'v') ? 'scrollTop' : 'scrollLeft';\n    const eventAttr = (direction === 'v') ? 'clientY' : 'clientX';\n    const scrollWidthAttr = (direction === 'v') ? 'scrollHeight' : 'scrollWidth';\n    const offsetWidthAttr = (direction === 'v') ? 'offsetHeight' : 'offsetWidth';\n    const clientWidthAttr = (direction === 'v') ? 'clientHeight' : 'clientWidth';\n    const rectWidthAttr = (direction === 'v') ? 'height' : 'width';\n    const compareTarget = (orientation === DropScrollOrientation.forward) ? this.forwardScrollArea : this.backwardScrollArea;\n    const targetAttr = this.getCriticalEdge(direction, orientation);\n    const scrollElement = this.el.nativeElement;\n\n    return (event: DragEvent) => {\n      const compareTargetRect = compareTarget.getBoundingClientRect();\n      const distance = event[eventAttr] - compareTargetRect[targetAttr];\n      let speed = speedFn(Math.abs(distance / (compareTargetRect[rectWidthAttr] || 1)));\n      if (speed < this.minSpeed) { speed = this.minSpeed; }\n      if (speed > this.maxSpeed) { speed = this.maxSpeed; }\n      if (distance < 0) { speed = - speed; }\n      if (this.animationFrameId) {\n        window.cancelAnimationFrame(this.animationFrameId);\n        this.animationFrameId = undefined;\n      }\n      this.animationFrameId = requestAnimationFrame(() => {\n        const time = new Date().getTime();\n        const moveDistance = Math.ceil(speed * (time - (this.lastScrollTime || time)) / 1000);\n        scrollElement[scrollAttr] -= moveDistance;\n        this.lastScrollTime = time;\n        // 判断是不是到尽头\n        if ((scrollElement[scrollAttr] === 0 && orientation === DropScrollOrientation.backward)\n        || ((scrollElement[scrollAttr]\n          + (scrollElement.getBoundingClientRect())[rectWidthAttr]\n          - scrollElement[offsetWidthAttr]\n          + scrollElement[clientWidthAttr]\n        ) === scrollElement[scrollWidthAttr]\n          && orientation === DropScrollOrientation.forward)\n        ) {\n          compareTarget.style.pointerEvents = 'none';\n          this.toggleActiveClass(compareTarget, false);\n        }\n        this.animationFrameId = undefined;\n      });\n      if (this.backSpaceDroppable) {\n        Utils.dispatchEventToUnderElement(event);\n      }\n    };\n  }\n  delegateDropEvent(event: DragEvent) {\n    if (this.backSpaceDroppable) {\n      const ev = Utils.dispatchEventToUnderElement(event);\n      if (ev.defaultPrevented) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }\n  getCriticalEdge(direction: DropScrollDirection, orientation: DropScrollOrientation): DropScrollTriggerEdge {\n    return (direction === 'v' && orientation === DropScrollOrientation.forward && 'bottom')\n    || (direction === 'v' && orientation === DropScrollOrientation.backward && 'top')\n    || (direction !== 'v' && orientation === DropScrollOrientation.forward && 'right')\n    || (direction !== 'v' && orientation === DropScrollOrientation.backward && 'left') || 'bottom';\n  }\n  getSecondEdge(direction: DropScrollDirection): DropScrollTriggerEdge {\n    return (direction === 'v' && 'left')\n    || (direction !== 'v' &&  'top') || 'left';\n  }\n\n  createScrollArea(direction: DropScrollDirection, orientation: DropScrollOrientation) {\n    const area = this.document.createElement('div');\n    area.className = 'dropover-scroll-area ' + 'dropover-scroll-area-' + this.getCriticalEdge(direction, orientation);\n    // 处理大小\n    area.classList.add('active');\n    this.setAreaSize(area, direction, orientation);\n    // 处理位置\n    area.style.position = 'absolute';\n    this.setAreaStyleLayout(area, direction, orientation);\n\n    // 默认不展示\n    area.style.display = 'none';\n    // 附着元素\n    this.el.nativeElement.parentNode.appendChild(area, this.el.nativeElement);\n    return area;\n  }\n\n  setAreaSize(area: HTMLElement, direction: DropScrollDirection, orientation: DropScrollOrientation) {\n    const rect = this.el.nativeElement.getBoundingClientRect();\n    const containerAttr = direction === 'v' ? 'height' : 'width';\n    const responseEdgeWidth = (typeof this.responseEdgeWidth === 'string')\n      ? this.responseEdgeWidth\n      : this.responseEdgeWidth(rect[containerAttr]);\n    const settingOffset = this.viewOffset\n      && (orientation === DropScrollOrientation.forward ? this.viewOffset.forward : this.viewOffset.backward);\n    let width = direction === 'v' ? (rect.width + 'px') : responseEdgeWidth;\n    let height =  direction === 'v' ? responseEdgeWidth : (rect.height + 'px');\n    if (settingOffset) {\n      if (settingOffset.widthOffset) {\n        width = 'calc(' + width + ' + ' + (settingOffset.widthOffset) + 'px)';\n      }\n      if (settingOffset.heightOffset) {\n        height = 'calc(' + height + ' + ' + (settingOffset.heightOffset) + 'px)';\n      }\n    }\n    area.style.width = width;\n    area.style.height = height;\n  }\n\n  setAreaStyleLayout (area: HTMLElement, direction: DropScrollDirection, orientation: DropScrollOrientation) {\n    const target = this.el.nativeElement;\n    const relatedTarget = this.el.nativeElement.parentNode;\n    const defaultOffset = {left: 0, right: 0, top: 0, bottom: 0};\n    const settingOffset = this.viewOffset\n      && (orientation === DropScrollOrientation.forward ? this.viewOffset.forward : this.viewOffset.backward)\n      || defaultOffset;\n\n    const criticalEdge = this.getCriticalEdge(direction, orientation);\n    const secondEdge = this.getSecondEdge(direction);\n    [criticalEdge, secondEdge].forEach(edge => {\n      area.style[edge] = this.getRelatedPosition(target, relatedTarget, edge, settingOffset[edge]);\n    });\n  }\n\n  getRelatedPosition(target, relatedTarget, edge: DropScrollTriggerEdge, offsetValue?: number) {\n    if (typeof window === 'undefined') {\n      return '0px';\n    }\n    const relatedComputedStyle = window.getComputedStyle(relatedTarget);\n    const relatedRect = relatedTarget.getBoundingClientRect();\n    const selfRect = target.getBoundingClientRect();\n    const helper = {\n      left: ['left', 'Left'],\n      right: ['right', 'Right'],\n      top: ['top', 'Top'],\n      bottom: ['bottom', 'Bottom'],\n    };\n    let factor = 1;\n    if (edge === 'right' || edge === 'bottom') { factor = -1; }\n    return (selfRect[helper[edge][0]] - relatedRect[helper[edge][0]]\n          + parseInt(relatedComputedStyle['border' +  helper[edge][1] + 'Width'], 10)) * factor\n          + (offsetValue || 0)\n          + 'px';\n  }\n\n  resizeArea() {\n    [{area: this.forwardScrollArea, orientation: DropScrollOrientation.forward},\n      {area: this.backwardScrollArea, orientation: DropScrollOrientation.backward}\n    ]\n      .forEach(item => {\n        this.setAreaSize(item.area, this.direction, item.orientation);\n        this.setAreaStyleLayout(item.area, this.direction, item.orientation);\n      });\n  }\n\n  toggleScrollToOneEnd(scrollElement: any, toggleElement: HTMLElement, direction: DropScrollDirection, orientation: DropScrollOrientation) {\n    const scrollAttr = (direction === 'v') ? 'scrollTop' : 'scrollLeft';\n    const scrollWidthAttr = (direction === 'v') ? 'scrollHeight' : 'scrollWidth';\n    const offsetWidthAttr = (direction === 'v') ? 'offsetHeight' : 'offsetWidth';\n    const clientWidthAttr = (direction === 'v') ? 'clientHeight' : 'clientWidth';\n    const rectWidthAttr = (direction === 'v') ? 'height' : 'width';\n    if ((scrollElement[scrollAttr] === 0 && orientation === DropScrollOrientation.backward) || (\n      Math.abs(\n        scrollElement[scrollAttr]\n        + (scrollElement.getBoundingClientRect())[rectWidthAttr]\n        - scrollElement[scrollWidthAttr]\n        - scrollElement[offsetWidthAttr]\n        + scrollElement[clientWidthAttr]\n      ) < 1\n      && orientation === DropScrollOrientation.forward\n    )) {\n      toggleElement.style.pointerEvents = 'none';\n      this.toggleActiveClass(toggleElement, false);\n    } else {\n      toggleElement.style.pointerEvents = 'auto';\n      this.toggleActiveClass(toggleElement, true);\n    }\n  }\n\n  cleanLastScrollTime() {\n    if (this.animationFrameId && typeof window !== 'undefined') {\n      window.cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = undefined;\n    }\n    this.lastScrollTime = undefined;\n  }\n\n  toggleActiveClass(target, active) {\n    if (active) {\n      target.classList.remove('inactive');\n      target.classList.add('active');\n    } else {\n      target.classList.remove('active');\n      target.classList.add('inactive');\n    }\n  }\n\n  allowScroll(): boolean {\n    if (!this.dropScrollScope) { return true; }\n    let allowed = false;\n    if (typeof this.dropScrollScope === 'string') {\n      if (typeof this.dragDropService.scope === 'string') {\n        allowed = this.dragDropService.scope === this.dropScrollScope;\n      }\n      if (this.dragDropService.scope instanceof Array) {\n        allowed = this.dragDropService.scope.indexOf(this.dropScrollScope) > -1;\n      }\n    }\n    if (this.dropScrollScope instanceof Array) {\n      if (typeof this.dragDropService.scope === 'string') {\n        allowed = this.dropScrollScope.indexOf(this.dragDropService.scope) > -1;\n      }\n      if (this.dragDropService.scope instanceof Array) {\n        allowed = this.dropScrollScope.filter((item) => {\n          return this.dragDropService.scope.indexOf(item) !== -1;\n        }).length > 0;\n      }\n    }\n    return allowed;\n  }\n}\n","import { Directive,  Input,  OnInit } from '@angular/core';\nimport { DropScrollEnhancedDirective } from './drop-scroll-enhance.directive';\nimport { DropScrollDirection } from './drop-scroll-enhance.type';\n\n@Directive({\n  selector: '[dDropScrollEnhancedSide]',\n  exportAs: 'dDropScrollEnhancedSide'\n})\nexport class DropScrollEnhancedSideDirective extends DropScrollEnhancedDirective implements OnInit {\n  @Input('direction') sideDirection: DropScrollDirection = 'v';\n\n  direction: DropScrollDirection;\n\n  ngOnInit() {\n    this.direction = this.sideDirection === 'v' ? 'h' : 'v';\n  }\n}\n","import { Subject } from 'rxjs';\nexport class DropEvent {\n  nativeEvent: any;\n  dragData: any;\n  batchDragData: any;\n  dropSubject: Subject<any>;\n  dropIndex?: number;\n  dragFromIndex?: number;\n  dropOnItem?: boolean;\n  dropOnOrigin?: boolean;\n  constructor(event: any, data: any, dropSubject: Subject<any>, dropIndex?: number, dragFromIndex?: number, dropOnItem?: boolean,\n              dropOnOrigin?: boolean, batchDragData?: Array<any>) {\n    this.nativeEvent = event;\n    this.dragData = data;\n    this.dropSubject = dropSubject;\n    this.dropIndex = dropIndex;\n    this.dragFromIndex = dragFromIndex;\n    this.dropOnItem = dropOnItem;\n    this.dropOnOrigin = dropOnOrigin;\n    this.batchDragData = batchDragData;\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Inject,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2\n} from '@angular/core';\nimport { fromEvent, Subject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, filter } from 'rxjs/operators';\nimport { DragDropService } from '../services/drag-drop.service';\nimport { DropEvent } from '../shared/drop-event.model';\nimport { Utils } from '../shared/utils';\nimport { DraggableDirective } from './draggable.directive';\nimport { DragPlaceholderInsertionEvent, DragPlaceholderInsertionIndexEvent } from './placeholder-insertion-event.type';\n\nexport type DropIndexFlag = 'beforeAll' | 'afterAll';\n@Directive({\n  selector: '[dDroppable]'\n})\nexport class DroppableDirective implements OnInit, AfterViewInit, OnDestroy {\n\n  /**\n     *  Event fired when Drag dragged element enters a valid drop target.\n     */\n  @Output() dragEnterEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n     * Event fired when an element is being dragged over a valid drop target\n     */\n  @Output() dragOverEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n     * Event fired when a dragged element leaves a valid drop target.\n     */\n  @Output() dragLeaveEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n     * Event fired when an element is dropped on a valid drop target.\n     */\n  @Output() dropEvent: EventEmitter<DropEvent> = new EventEmitter<DropEvent>(); // 注意使用了虚拟滚动后，DropEvent中的dragFromIndex无效\n\n  /**\n     * CSS class applied on the draggable that is applied when the item is being dragged.\n     */\n  @Input() dragOverClass: string;\n\n  /**\n     * Defines compatible drag drop pairs. Values must match both in draggable and droppable.dropScope.\n     */\n  @Input() dropScope: string | Array<string> = 'default';\n\n  @Input() placeholderTag = 'div';\n\n  @Input() placeholderStyle: any = {backgroundColor: ['#859bff', `var(--devui-brand-foil, #859bff)`], opacity: '.4'};\n\n  /**\n     * 设置placeholder的提示性文字，仅支持文本（安全起见）\n     */\n  @Input() placeholderText = '';\n\n  /**\n     * 用于允许拖动到元素上，方便树形结构的拖动可以成为元素的子节点\n     */\n  @Input() allowDropOnItem = false;\n\n  /**\n     * allowDropOnItem为true时，才有效，用于允许拖动到元素上后，被命中的元素增加样式\n     */\n  @Input() dragOverItemClass: string;\n\n  /**\n     *  用于修正有内嵌列表后，父项高度被撑大，此处height，width为父项自己的高度（用于纵向拖动），宽度（用于横向拖动）\n     * */\n  @Input() nestingTargetRect: {height?: number; width?: number};\n\n  /**\n    *  是否启用越过立即交换位置的算法, 不能与allowDropOnItem一起用，allowDropOnItem为true时，此规则无效\n    * */\n  @Input() switchWhileCrossEdge = false;\n\n  /**\n    *  sortable的情况下，拖动到可以drop但不在sortContainer里的时候默认drop的位置\n    * */\n  @Input() defaultDropPosition: 'closest' | 'before' | 'after' = 'closest';\n\n  /**\n    *  sortable的情况下，列表如果使用了virtual scroll等部分加载技术时候返回正确的dropIndex\n    * */\n  @Input() dropSortCountSelector: string;\n  @Input() dropSortVirtualScrollOption: {\n    totalLength?: number;\n    startIndex?: number;\n    // innerSortContainer?: HTMLElement | string; // 用于虚拟滚动列表结构发生内嵌\n  };\n  private dropFlag: DropIndexFlag;\n\n  private sortContainer: any;\n  private sortDirection: 'v' | 'h';\n  private sortDirectionZMode: boolean;\n  private placeholder: any;\n\n  // 用于修复dragleave多次触发\n  private dragCount = 0;\n\n  private dropIndex = undefined;\n\n  private dragStartSubscription: Subscription;\n  private dragEndSubscription: Subscription;\n  private dropEndSubscription: Subscription;\n\n  // 记录上一次悬停的元素，用于对比悬停的元素等是否发生变化\n  private overElement;\n\n  private dragPartEventSub: Subscription;\n  private allowDropCache: boolean;\n  private dragElIndex;\n  /* 协同拖拽需要 */\n  placeholderInsertionEvent = new Subject<DragPlaceholderInsertionEvent>();\n  placeholderRenderEvent = new Subject<any>();\n  document: Document;\n\n  constructor(protected el: ElementRef, private renderer: Renderer2, private dragDropService: DragDropService, private ngZone: NgZone,\n              @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    this.placeholder = this.document.createElement(this.placeholderTag);\n    this.placeholder.className = 'drag-placeholder';\n    this.placeholder.innerText = this.placeholderText;\n    this.dragStartSubscription = this.dragDropService.dragStartEvent.subscribe(() => this.setPlaceholder());\n    if (this.dragDropService.draggedEl) {\n      this.setPlaceholder(); // 虚拟滚动生成元素过程中\n    }\n    this.dropEndSubscription = this.dragDropService.dropEvent.subscribe(() => {\n      if (this.dragDropService.draggedEl) {\n        if (!this.dragDropService.dragFollow) {\n          this.renderer.setStyle(this.dragDropService.draggedEl, 'display', '');\n          this.dragDropService.dragElShowHideEvent.next(true);\n        }\n      }\n      this.removePlaceholder();\n      this.overElement = undefined;\n      this.allowDropCache = undefined;\n      this.dragElIndex = undefined;\n      this.dropIndex = undefined;\n    });\n    this.dragEndSubscription = this.dragDropService.dragEndEvent.subscribe(() => {\n      if (this.dragDropService.draggedEl) {\n        if (!this.dragDropService.dragFollow) {\n          this.renderer.setStyle(this.dragDropService.draggedEl, 'display', '');\n          this.dragDropService.dragElShowHideEvent.next(true);\n        }\n      }\n      this.removePlaceholder();\n      this.dragCount = 0;\n      this.overElement = undefined;\n      this.allowDropCache = undefined;\n      this.dragElIndex = undefined;\n      this.dropIndex = undefined;\n    });\n    this.ngZone.runOutsideAngular (() => {\n      this.dragPartEventSub = new Subscription();\n      this.dragPartEventSub.add(fromEvent<DragEvent>(this.el.nativeElement, 'dragover')\n        .pipe(\n          filter(event => this.allowDrop(event)),\n          distinctUntilChanged((prev , current) => {\n            const bool = (prev.clientX === current.clientX && prev.clientY === current.clientY && prev.target === current.target);\n            if (bool) { current.preventDefault(); current.stopPropagation(); }\n            return bool;\n          })\n        )\n        .subscribe((event) => this.dragOver(event))\n      );\n      this.dragPartEventSub.add(\n        fromEvent(this.el.nativeElement, 'dragenter').subscribe((event) => this.dragEnter(event))\n      );\n      this.dragPartEventSub.add(\n        fromEvent(this.el.nativeElement, 'dragleave').subscribe((event) => this.dragLeave(event))\n      );\n    });\n  }\n\n  ngAfterViewInit() {\n    if (this.el.nativeElement.hasAttribute('d-sortable')) {\n      this.sortContainer = this.el.nativeElement;\n    } else {\n      this.sortContainer = this.el.nativeElement.querySelector('[d-sortable]');\n    }\n    this.sortDirection = this.sortContainer ? this.sortContainer.getAttribute('dsortable') || 'v' : 'v';\n    this.sortDirectionZMode = this.sortContainer ? (this.sortContainer.getAttribute('d-sortable-zmode') === 'true' || false) : false;\n  }\n\n  ngOnDestroy() {\n    this.dragStartSubscription.unsubscribe();\n    this.dragEndSubscription.unsubscribe();\n    this.dropEndSubscription.unsubscribe();\n    if (this.dragPartEventSub) {this.dragPartEventSub.unsubscribe(); }\n  }\n\n  dragEnter(e) {\n    this.dragCount++;\n    e.preventDefault(); // ie11 dragenter需要preventDefault否则dragover无效\n    this.dragEnterEvent.emit(e);\n  }\n\n  dragOver(e) {\n    if (this.allowDrop(e)) {\n      if (this.dragDropService.dropTargets.indexOf(this.el) === -1) {\n        this.dragDropService.dropTargets.forEach(el => {\n          const placeHolderEl = el.nativeElement.querySelector('.drag-placeholder');\n          if (placeHolderEl) {\n            placeHolderEl.parentElement.removeChild(placeHolderEl);\n          }\n          Utils.removeClass(el, this.dragOverClass);\n          this.removeDragoverItemClass(el.nativeElement);\n        });\n        this.dragDropService.dropTargets = [this.el];\n        this.overElement = undefined; // 否则会遇到上一次position= 这一次的然后不刷新和插入。\n      }\n      Utils.addClass(this.el, this.dragOverClass);\n      const hitPlaceholder\n          = this.dragDropService.dragOriginPlaceholder && this.dragDropService.dragOriginPlaceholder.contains(e.target);\n      if (this.sortContainer && (\n        (hitPlaceholder && this.overElement === undefined)\n          || !(e.target.contains(this.placeholder) || hitPlaceholder)\n          || (this.switchWhileCrossEdge && !this.placeholder.contains(e.target) && !hitPlaceholder) // 越边交换回折的情况需要重新计算\n          || (!this.sortContainer.contains(e.target) && this.defaultDropPosition === 'closest') // 就近模式需要重新计算\n      )) {\n        const overElement = this.findSortableEl(e);\n        if (!(this.overElement && overElement) || this.overElement.index !== overElement.index\n            || (this.allowDropOnItem && this.overElement.position !== overElement.position\n              && (this.overElement.position === 'inside' || overElement.position === 'inside'))\n        ) {\n          // overElement的参数有刷新的时候才进行插入等操作\n          this.overElement = overElement;\n\n          this.insertPlaceholder(overElement);\n\n          this.removeDragoverItemClass(this.sortContainer, overElement);\n          if (overElement.position === 'inside' && this.dragOverItemClass) {\n            Utils.addClass(overElement.el, this.dragOverItemClass);\n          }\n        } else {\n          this.overElement = overElement;\n        }\n      } else {\n        if (this.sortContainer && this.overElement && this.overElement.el) {\n          if (!this.overElement.el.contains(e.target)) {\n            this.overElement.realEl = e.target;\n          } else {\n            this.overElement.realEl = undefined;\n          }\n        }\n      }\n      if (this.dragDropService.draggedEl) {\n        if (!this.dragDropService.dragFollow) {\n          this.renderer.setStyle(this.dragDropService.draggedEl, 'display', 'none');\n          this.dragDropService.dragElShowHideEvent.next(false);\n          if (this.dragDropService.dragOriginPlaceholder) {\n            this.renderer.setStyle(this.dragDropService.dragOriginPlaceholder, 'display', 'block');\n          }\n        }\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      this.dragOverEvent.emit(e);\n    }\n  }\n\n  dragLeave(e) {\n    // 用于修复包含子元素时，多次触发dragleave\n    this.dragCount--;\n\n    if (this.dragCount === 0) {\n      if (this.dragDropService.dropTargets.indexOf(this.el) !== -1) {\n        this.dragDropService.dropTargets = [];\n      }\n      Utils.removeClass(this.el, this.dragOverClass);\n      this.removePlaceholder();\n      this.removeDragoverItemClass(this.el.nativeElement);\n      this.overElement = undefined;\n      this.dragElIndex = undefined;\n      this.dropIndex = undefined;\n    }\n    e.preventDefault();\n    this.dragLeaveEvent.emit(e);\n  }\n\n  @HostListener('drop', ['$event'])\n  drop(e) {\n    if (!this.allowDrop(e)) { return; }\n    this.dragCount = 0;\n    Utils.removeClass(this.el, this.dragOverClass);\n    this.removeDragoverItemClass(this.sortContainer);\n    this.removePlaceholder();\n    e.preventDefault();\n    e.stopPropagation();\n    this.dragDropService.dropOnOrigin = this.isDragPlaceholderPosition(this.dropIndex);\n    const draggedElIdentity = this.dragDropService.draggedElIdentity;\n    this.dragDropService.draggedElIdentity = undefined; // 需要提前清除，避免新生成的节点复用了id 刷新了dragOriginPlaceholder\n    let batchDraggble: Array<DraggableDirective> = [];\n    if (this.dragDropService.batchDragData && this.dragDropService.batchDragData.length > 1) {\n      batchDraggble = this.dragDropService.batchDragData.map(dragData => dragData.draggable)\n        .filter(draggable => draggable && draggable.el.nativeElement !== this.dragDropService.draggedEl);\n    }\n    this.dropEvent.emit(\n      new DropEvent(\n        e,\n        this.dragDropService.dragData,\n        this.dragDropService.dropEvent,\n        this.dropSortVirtualScrollOption ? this.getRealIndex(this.dropIndex, this.dropFlag) : this.dropIndex,\n        this.sortContainer ? this.checkSelfFromIndex(this.dragDropService.draggedEl) : -1,\n        this.dragDropService.dropOnItem,\n        this.dragDropService.dropOnOrigin,\n        (this.dragDropService.batchDragging)\n          ? this.dragDropService.getBatchDragData(draggedElIdentity)\n          : undefined\n      )\n    );\n    // 如果drop之后drag元素被删除，则不会发生dragend事件，需要代替dragend清理\n    if (this.dragDropService.dragFollow) {\n      this.dragDropService.disableDraggedCloneNodeFollowMouse();\n    } else {\n      this.renderer.setStyle(this.dragDropService.draggedEl, 'display', '');\n      this.dragDropService.dragElShowHideEvent.next(false);\n    }\n    if (batchDraggble.length > 0 && this.dragDropService.batchDragging) {\n      batchDraggble.forEach((draggable) => {\n        if (!draggable.originPlaceholder || draggable.originPlaceholder.show === false) {\n          draggable.el.nativeElement.style.display = '';\n        } else if (draggable.originPlaceholder.removeDelay > 0 && !this.dragDropService.dropOnOrigin) {\n          draggable.delayRemoveOriginPlaceholder(false);\n        } else {\n          draggable.el.nativeElement.style.display = '';\n          draggable.removeOriginPlaceholder(false);\n        }\n      });\n    }\n    this.dragDropService.dropEvent.next(e);\n    this.dragDropService.dragData = undefined;\n    this.dragDropService.scope = undefined;\n    this.dragDropService.draggedEl = undefined;\n    this.dragDropService.dragFollow = undefined;\n    this.dragDropService.dragFollowOptions = undefined;\n    this.dragDropService.dragOffset = undefined;\n    this.dragDropService.dropOnOrigin = undefined;\n    this.dragDropService.batchDragging = false;\n    this.dragDropService.batchDragStyle = undefined;\n    this.dragDropService.dragPreviewDirective = undefined;\n  }\n\n  allowDrop(e): boolean {\n    if (!e) { return false; }\n    if (this.allowDropCache !== undefined) {\n      return this.allowDropCache;\n    }\n    let allowed = false;\n    if (typeof this.dropScope === 'string') {\n      if (typeof this.dragDropService.scope === 'string') {\n        allowed = this.dragDropService.scope === this.dropScope;\n      }\n      if (this.dragDropService.scope instanceof Array) {\n        allowed = this.dragDropService.scope.indexOf(this.dropScope) > -1;\n      }\n    }\n    if (this.dropScope instanceof Array) {\n      if (typeof this.dragDropService.scope === 'string') {\n        allowed = this.dropScope.indexOf(this.dragDropService.scope) > -1;\n      }\n      if (this.dragDropService.scope instanceof Array) {\n        allowed = this.dropScope.filter((item) => {\n          return this.dragDropService.scope.indexOf(item) !== -1;\n        }).length > 0;\n      }\n    }\n    this.allowDropCache = allowed;\n    return allowed;\n  }\n\n  private dropSortCountSelectorFilterFn = (value) => {\n    return Utils.matches(value, this.dropSortCountSelector)\n      || value.contains(this.placeholder)\n      || value === this.dragDropService.dragOriginPlaceholder;\n  };\n\n  // 查询需要插入placeholder的位置\n  /* eslint-disable-next-line complexity*/\n  private findSortableEl(event) {\n    const moveElement = event.target;\n    let overElement = null;\n    if (!this.sortContainer) {\n      return overElement;\n    }\n    overElement = {index: 0, el: null, position: 'before'};\n    this.dropIndex = 0;\n    this.dropFlag = undefined;\n    let childEls = Utils.slice(this.sortContainer.children);\n    // 删除虚拟滚动等的额外元素不需要计算的元素\n    if (this.dropSortCountSelector) {\n      childEls = childEls.filter(this.dropSortCountSelectorFilterFn);\n    }\n    // 如果没有主动删除则删除多余的originplaceholder\n    if (childEls.some(el =>\n      el !== this.dragDropService.dragOriginPlaceholder\n      && el.classList.contains('drag-origin-placeholder')\n    )) {\n      childEls = childEls.filter(el =>\n        !(el.classList.contains('drag-origin-placeholder')\n        && el !== this.dragDropService.dragOriginPlaceholder)\n      );\n    }\n    // 要先删除clonenode否则placeholderindex是错的\n    if (this.dragDropService.dragFollow && this.dragDropService.dragCloneNode) {\n      const cloneNodeIndex = childEls.findIndex(value => value === this.dragDropService.dragCloneNode);\n      if (-1 !== cloneNodeIndex) {\n        childEls.splice(cloneNodeIndex, 1);\n      }\n    }\n    // 计算index数组需要删除源占位符\n    if (this.dragDropService.dragOriginPlaceholder) {\n      const dragOriginPlaceholderIndex = childEls.findIndex(value => value === this.dragDropService.dragOriginPlaceholder);\n      if (-1 !== dragOriginPlaceholderIndex) {\n        this.dragElIndex = dragOriginPlaceholderIndex - 1;\n        childEls.splice(dragOriginPlaceholderIndex, 1);\n      } else {\n        this.dragElIndex = -1;\n      }\n    } else {\n      this.dragElIndex = -1;\n    }\n    // 查询是否已经插入了placeholder\n    const placeholderIndex = childEls.findIndex(value => value.contains(this.placeholder));\n    // 删除placeholder\n    if (-1 !== placeholderIndex) {\n      childEls.splice(placeholderIndex, 1);\n    }\n    // 如果还有placeholder在前面 dragElIndex得再减一\n    if (-1 !== placeholderIndex && -1 !==  this.dragElIndex && placeholderIndex < this.dragElIndex) {\n      this.dragElIndex--;\n    }\n    const positionIndex = -1 !== placeholderIndex ? placeholderIndex : this.dragElIndex;\n    const currentIndex = childEls.findIndex(value => (\n      value.contains(moveElement)\n        || value.nextElementSibling === moveElement\n        && value.nextElementSibling.classList.contains('drag-origin-placeholder'))\n    );\n    if (this.switchWhileCrossEdge && !this.allowDropOnItem && childEls.length\n      && -1 !== positionIndex\n      && currentIndex > -1\n    ) { // 越过元素边界立即交换位置算法\n      const lastIndex = positionIndex;\n      // 解决抖动\n      const realEl = this.overElement && (this.overElement.realEl || this.overElement.el);\n      if (-1 !== currentIndex && realEl === childEls[currentIndex]) {\n        this.dropIndex = this.overElement.index;\n        return this.overElement;\n      }\n\n      overElement = {\n        index: lastIndex > currentIndex ?  currentIndex : (currentIndex + 1),\n        el:  childEls[currentIndex],\n        position: lastIndex > currentIndex ? 'before' : 'after'\n      };\n\n      this.dragDropService.dropOnItem = false;\n      this.dropIndex = overElement.index;\n      return overElement;\n    }\n\n    if (moveElement === this.sortContainer\n      || moveElement.classList.contains('drag-origin-placeholder')\n      || moveElement === (this.dragDropService && this.dragDropService.dragOriginPlaceholder)\n      || (!this.sortContainer.contains(moveElement) && this.defaultDropPosition === 'closest')\n    ) {\n      if (!childEls.length) {\n        this.dropIndex = 0;\n        this.dragDropService.dropOnItem = false;\n        return overElement;\n      }\n      // 落入A元素和B元素的间隙里\n      let findInGap = false;\n      for (let i = 0; i < childEls.length; i++) {\n        const targetElement = childEls[i];\n        // 处理非越边的落到side-origin-placeholder\n        if (childEls[i].nextSibling === moveElement\n          && moveElement.classList.contains('drag-origin-placeholder')) {\n          const position = this.calcPosition(event, moveElement);\n          this.dragDropService.dropOnItem = position === 'inside';\n          overElement = {index: position === 'after' ? (i + 1) : i, el: childEls[i], position: position};\n          this.dropIndex = overElement.index;\n          return overElement;\n        }\n        const positionOutside = this.calcPositionOutside(event, targetElement);\n        if (positionOutside === 'before') {\n          this.dragDropService.dropOnItem = false;\n          overElement = {index: i, el: childEls[i], position: positionOutside, realEl: moveElement};\n          this.dropIndex = overElement.index;\n          findInGap = true;\n          break;\n        } else {\n          // for 'notsure'\n        }\n      }\n      if (!findInGap) {\n        this.dragDropService.dropOnItem = false;\n        overElement = {index: childEls.length , el:  childEls[childEls.length - 1], position: 'after', realEl: moveElement};\n        this.dropIndex = childEls.length;\n      }\n      return overElement;\n    }\n    if (!this.sortContainer.contains(moveElement)) {\n      if (this.defaultDropPosition === 'before') {\n        overElement = {index: 0, el: childEls.length ? childEls[0] : null, position: 'before', realEl: moveElement};\n        this.dropFlag = 'beforeAll';\n      } else {\n        overElement = {\n          index: childEls.length,\n          el: childEls.length ? childEls[childEls.length - 1] : null,\n          position: 'after',\n          realEl: moveElement\n        };\n        this.dropFlag = 'afterAll';\n      }\n      this.dropIndex = overElement.index;\n      return overElement;\n    }\n    let find = false;\n    for (let i = 0; i < childEls.length; i++) {\n      if (childEls[i].contains(moveElement)) {\n        const targetElement = childEls[i];\n        const position = this.calcPosition(event, targetElement);\n        this.dragDropService.dropOnItem = position === 'inside';\n        overElement = {index: position === 'after' ? (i + 1) : i, el: childEls[i], position: position};\n        this.dropIndex = overElement.index;\n        find = true;\n        break;\n      }\n    }\n    if (!find) {\n      if (childEls.length) {\n        overElement = {index: childEls.length, el: childEls[childEls.length - 1 ], position: 'after'};\n      }\n      this.dropIndex = childEls.length;\n      this.dragDropService.dropOnItem = false;\n    }\n    return overElement;\n  }\n\n  private calcPosition(event: any, targetElement: any) {\n    const rect = targetElement.getBoundingClientRect();\n    const relY = event.clientY - (rect.y || rect.top);\n    const relX = event.clientX - (rect.x || rect.left);\n\n    // 处理允许drop到元素自己\n    if (this.allowDropOnItem) {\n      const dropOnItemEdge = { // 有内嵌列表的时候需要修正元素的高度活宽度\n        height: (this.nestingTargetRect && this.nestingTargetRect.height || rect.height),\n        width: (this.nestingTargetRect && this.nestingTargetRect.width || rect.width)\n      };\n      const threeQuartersOfHeight = dropOnItemEdge.height * 3 / 4;\n      const threeQuartersOfWidth = dropOnItemEdge.width * 3 / 4;\n      const AQuarterOfHeight = Number(dropOnItemEdge.height) / 4;\n      const AQuarterOfWidth = Number(dropOnItemEdge.width) / 4;\n\n      if (this.sortDirectionZMode) {\n        const slashPosition = (relY / dropOnItemEdge.height + relX / dropOnItemEdge.width);\n        if (slashPosition > 0.3 &&  slashPosition <= 0.7) {\n          return 'inside';\n        } else if (slashPosition > 0.7) {\n          const slashPositionNesting = (\n            (relY - rect.height + dropOnItemEdge.height) / dropOnItemEdge.height\n            + (relX - rect.width +  dropOnItemEdge.width) / dropOnItemEdge.width\n          );\n          if (slashPositionNesting <= 0.7) {\n            return 'inside';\n          }\n        }\n      }\n      if ((this.sortDirection === 'v' && relY > AQuarterOfHeight && relY <= threeQuartersOfHeight) ||\n        (this.sortDirection !== 'v' && relX > AQuarterOfWidth && relX <= threeQuartersOfWidth)) {\n        //  高度的中间1/4 - 3/4 属于drop到元素自己\n        return 'inside';\n      } else if ((this.sortDirection === 'v' && relY > threeQuartersOfHeight\n          && relY <= (rect.height - AQuarterOfHeight)) ||\n          (this.sortDirection !== 'v' && relX > threeQuartersOfWidth\n          &&  relX <= (rect.width - AQuarterOfWidth)))  {\n        // 内嵌列表后中间区域都属于inside\n        return 'inside';\n      }\n    }\n\n    if (this.sortDirectionZMode) {\n      if ((relY / rect.height + relX / rect.width) < 1) {\n        return 'before';\n      }\n      return 'after';\n    }\n    // 其他情况保持原来的属于上半部分或者下半部分\n    if ((this.sortDirection === 'v' && relY > (rect.height / 2)) ||\n      (this.sortDirection !== 'v' && relX > (rect.width / 2)))  {\n      return 'after';\n    }\n    return 'before';\n  }\n\n  private calcPositionOutside(event: any, targetElement: any) {\n    const rect = this.getBoundingRectAndRealPosition(targetElement); // targetElement.getBoundingClientRect();\n    const relY = event.clientY - (rect.y || rect.top);\n    const relX = event.clientX - (rect.x || rect.left);\n\n    if (this.sortDirectionZMode) {\n      if ((this.sortDirection === 'v' && (relY < 0 || (relY < rect.height && relX < 0)))\n        || (this.sortDirection !== 'v' && (relX < 0 || (relX < rect.width && relY < 0)))\n      ) {\n        return 'before';\n      }\n      return 'notsure';\n    }\n\n    if ((this.sortDirection === 'v' && relY < (rect.height / 2)) ||\n      (this.sortDirection !== 'v' && relX < (rect.width / 2)))  {\n      return 'before';\n    }\n    return 'notsure';\n  }\n  setPlaceholder = () => {\n    this.ngZone.runOutsideAngular(() => {\n      this.placeholder.style.width = this.dragDropService.dragOffset.width + 'px';\n      this.placeholder.style.height = this.dragDropService.dragOffset.height + 'px'; // ie下clientHeight为0\n      Utils.addElStyles(this.placeholder, this.placeholderStyle);\n      this.placeholderRenderEvent.next({width: this.dragDropService.dragOffset.width, height: this.dragDropService.dragOffset.height});\n    });\n  };\n\n  // 插入placeholder\n  private insertPlaceholder(overElement) {\n    const tempScrollTop = this.sortContainer.scrollTop;\n    const tempScrollLeft = this.sortContainer.scrollLeft;\n    let hitPlaceholder = false;\n    let cmd: DragPlaceholderInsertionIndexEvent;\n    const getIndex = (arr, el, defaultValue) => {\n      const index = arr.indexOf(el);\n      return index > -1 ? index : defaultValue;\n    };\n    if (null !== overElement) {\n      const sortContainerChildren = Utils.slice(this.sortContainer.children).filter(\n        el => el !== this.dragDropService.dragCloneNode\n      );\n\n      if (overElement.el === null) {\n        cmd = {\n          command: 'append'\n        };\n        this.sortContainer.appendChild(this.placeholder);\n      } else {\n        if (overElement.position === 'inside') {\n          cmd = {\n            command: 'remove'\n          };\n          this.removePlaceholder();\n        } else if (this.dragDropService.dragOriginPlaceholder && this.isDragPlaceholderPosition(overElement.index)) {\n          cmd = {\n            command: 'remove'\n          };\n          this.removePlaceholder();\n          hitPlaceholder = true;\n        } else if (overElement.position === 'after') {\n          if (overElement.el.nextSibling && overElement.el.nextSibling.classList\n            && overElement.el.nextSibling.classList.contains('drag-origin-placeholder')) {\n            // 针对多源占位符场景\n            cmd = {\n              command: 'insertBefore',\n              index: getIndex(sortContainerChildren, overElement.el.nextSibling, sortContainerChildren.length) + 1\n            };\n            this.sortContainer.insertBefore(this.placeholder, overElement.el.nextSibling.nextSibling);\n\n          } else {\n            cmd = {\n              command: 'insertBefore',\n              index: getIndex(sortContainerChildren, overElement.el, sortContainerChildren.length) + 1\n            };\n            this.sortContainer.insertBefore(this.placeholder, overElement.el.nextSibling);\n          }\n        } else {\n          cmd = {\n            command: 'insertBefore',\n            index: getIndex(sortContainerChildren, overElement.el, sortContainerChildren.length)\n          };\n          this.sortContainer.insertBefore(this.placeholder, overElement.el);\n        }\n      }\n    }\n    this.placeholderInsertionEvent.next(cmd);\n    this.sortContainer.scrollTop = tempScrollTop;\n    this.sortContainer.scrollLeft = tempScrollLeft;\n    if (this.dragDropService.dragOriginPlaceholder) {\n      if (hitPlaceholder) {\n        this.hitDragOriginPlaceholder();\n      } else  {\n        this.hitDragOriginPlaceholder(false);\n      }\n    }\n  }\n\n  private isDragPlaceholderPosition(index) {\n    if (this.dragElIndex > -1 && (index === this.dragElIndex || index === this.dragElIndex + 1)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  private hitDragOriginPlaceholder(bool = true) {\n    const placeholder = this.dragDropService.dragOriginPlaceholder;\n    if (bool) {\n      placeholder.classList.add('hit-origin-placeholder');\n    } else {\n      placeholder.classList.remove('hit-origin-placeholder');\n    }\n  }\n\n  private removePlaceholder() {\n    if (this.sortContainer && this.sortContainer.contains(this.placeholder)) {\n      this.sortContainer.removeChild(this.placeholder);\n      this.placeholderInsertionEvent.next({\n        command: 'remove'\n      });\n    }\n  }\n\n  private removeDragoverItemClass(container, overElement?) {\n    if (this.dragOverItemClass) {\n      const dragOverItemClassGroup = container.querySelectorAll('.' + this.dragOverItemClass);\n      if (dragOverItemClassGroup && dragOverItemClassGroup.length > 0) {\n        for (const element of dragOverItemClassGroup) {\n          if (overElement) {\n            if (element !== overElement.el || overElement.position !== 'inside') {\n              Utils.removeClass(element, this.dragOverItemClass);\n            }\n          } else {\n            Utils.removeClass(element, this.dragOverItemClass);\n          }\n        }\n      }\n    }\n  }\n\n  private checkSelfFromIndex(el: any) {\n    let fromIndex = -1;\n    if (!this.sortContainer.contains(el)) {\n      return fromIndex;\n    }\n    let childs = Utils.slice(this.sortContainer.children);\n    if (this.dropSortCountSelector) {\n      childs = childs.filter(this.dropSortCountSelectorFilterFn);\n    }\n    for (let i = 0; i < childs.length; i++) {\n      if (childs[i].contains(this.dragDropService.draggedEl)) {\n        fromIndex = i;\n        break;\n      }\n    }\n    return this.getRealIndex(fromIndex);\n  }\n  private getRealIndex(index, flag?: DropIndexFlag): number {\n    let realIndex;\n    const startIndex = this.dropSortVirtualScrollOption && this.dropSortVirtualScrollOption.startIndex || 0;\n    const totalLength = this.dropSortVirtualScrollOption && this.dropSortVirtualScrollOption.totalLength;\n    if (flag === 'beforeAll') {\n      realIndex = 0;\n    } else if (flag === 'afterAll') {\n      realIndex = totalLength || index;\n    } else {\n      realIndex = startIndex + index;\n    }\n    return realIndex;\n  }\n\n  getBoundingRectAndRealPosition(targetElement) {\n    // 用于修复部分display none的元素获取到的top和left是0， 取它下一个元素的左上角为坐标\n    let rect = targetElement.getBoundingClientRect();\n    const {bottom, right, width, height} = rect;\n    if (rect.width === 0 && rect.height === 0 &&\n      (targetElement.style.display === 'none' || getComputedStyle(targetElement).display === 'none')) {\n      if (targetElement.nextElementSibling) {\n        const {top: realTop, left: realLeft} =  targetElement.nextElementSibling.getBoundingClientRect();\n        rect = {x: realLeft, y: realTop, top: realTop, left: realLeft, bottom, right, width, height};\n      }\n    }\n    return rect;\n  }\n  getSortContainer() {\n    return this.sortContainer;\n  }\n}\n","import { Directive, ElementRef, Input, OnDestroy, OnInit, Optional, Self } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DescendantChildren } from '../services/drag-drop-desc-reg.service';\nimport { DropSortSyncDescendantRegisterService } from '../services/drag-drop-descendant-sync.service';\nimport { DragDropSyncService } from '../services/drag-drop-sync.service';\nimport { Utils } from '../shared/utils';\nimport { DroppableDirective } from './droppable.directive';\nimport { DragPlaceholderInsertionEvent, DragPlaceholderInsertionIndexEvent } from './placeholder-insertion-event.type';\n\n@Directive({\n  selector: '[dDropSortSync]',\n  exportAs: 'dDropSortSync'\n})\n\nexport class DropSortSyncDirective extends DescendantChildren<DropSortSyncDirective> implements OnInit, OnDestroy {\n  @Input('dDropSortSync') dropSyncGroup = '';\n  @Input('dropSyncDirection') direction: 'v'| 'h' = 'v'; // 与sortContainer正交的方向\n  subscription: Subscription = new Subscription();\n  syncGroupDirectives: Array<DropSortSyncDirective>;\n  placeholder: HTMLElement;\n  sortContainer: HTMLElement;\n\n  constructor(\n    public el: ElementRef,\n    @Optional() @Self() private droppable: DroppableDirective,\n    private dragDropSyncService: DragDropSyncService,\n    private dropSortSyncDrs: DropSortSyncDescendantRegisterService,\n  ) {\n    super(dropSortSyncDrs);\n    this.descendantItem = this;\n  }\n\n  ngOnInit() {\n    this.sortContainer = this.el.nativeElement;\n    if (this.droppable) {\n      this.sortContainer = this.droppable.getSortContainer();\n      this.subscription.add(\n        this.droppable.placeholderInsertionEvent.subscribe(this.subInsertionEvent)\n      ).add(\n        this.droppable.placeholderRenderEvent.subscribe(this.subRenderEvent)\n      );\n    }\n    super.ngOnInit();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n    super.ngOnDestroy();\n  }\n  subRenderEvent = (nativeStyle: {width: number; height: number}) => {\n    this.syncGroupDirectives = this.dragDropSyncService.getDropSyncByGroup(this.dropSyncGroup).filter(directive => directive !== this);\n    this.syncGroupDirectives.forEach(dir => {\n      dir.renderPlaceholder(nativeStyle, this.droppable);\n    });\n  };\n\n  subInsertionEvent = (cmd: DragPlaceholderInsertionIndexEvent) => {\n    this.syncGroupDirectives = this.dragDropSyncService.getDropSyncByGroup(this.dropSyncGroup).filter(directive => directive !== this);\n    this.syncGroupDirectives.forEach(dir => {\n      dir.insertPlaceholderCommand({\n        command: cmd.command,\n        container: dir.sortContainer,\n        relatedEl: dir.getChildrenElByIndex(dir.sortContainer, cmd.index)\n      });\n    });\n  };\n  getChildrenElByIndex(target, index?) {\n    if (index === undefined || target && target.children && target.children.length < index || index < 0) {\n      return null;\n    }\n    return this.sortContainer.children.item(index);\n  }\n\n  renderPlaceholder(nativeStyle: {width: number; height: number}, droppable) {\n    if (!this.placeholder) {\n      this.placeholder = document.createElement(droppable.placeholderTag);\n      this.placeholder.className = 'drag-placeholder';\n      this.placeholder.classList.add('drag-sync-placeholder');\n      this.placeholder.innerText = droppable.placeholderText;\n    }\n    const {width, height} = nativeStyle;\n    if (this.direction === 'v') {\n      this.placeholder.style.width = width + 'px';\n      this.placeholder.style.height = this.sortContainer.getBoundingClientRect().height + 'px';\n    } else {\n      this.placeholder.style.height = height + 'px';\n      this.placeholder.style.width = this.sortContainer.getBoundingClientRect().width + 'px';\n    }\n    Utils.addElStyles(this.placeholder, droppable.placeholderStyle);\n\n  }\n\n  insertPlaceholderCommand(cmd: DragPlaceholderInsertionEvent) {\n    if (cmd.command === 'insertBefore' && cmd.container) {\n      cmd.container.insertBefore(this.placeholder, cmd.relatedEl);\n      return;\n    }\n    if (cmd.command === 'append' && cmd.container) {\n      cmd.container.appendChild(this.placeholder);\n      return;\n    }\n    if (cmd.command === 'remove' && cmd.container) {\n      if (cmd.container.contains(this.placeholder)) {\n        cmd.container.removeChild(this.placeholder);\n      }\n      return;\n    }\n  }\n\n}\n","import { Directive, ElementRef, HostBinding, Input } from '@angular/core';\n\n@Directive({\n  selector: '[dSortable]'\n})\n/**\n * Makes an element draggable by adding the draggable html attribute\n */\nexport class SortableDirective {\n  @HostBinding('attr.dsortable')\n  @Input('dSortable')  dSortDirection = 'v';\n  @HostBinding('attr.d-sortable-zmode')\n  @Input() dSortableZMode = false;\n  @HostBinding('attr.d-sortable') dSortable = true;\n  constructor(public el: ElementRef) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BatchDraggableDirective } from './directives/batch-draggable.directive';\nimport { DragPreviewCloneDomRefComponent } from './directives/drag-preivew-clone-from-domRef.component';\nimport { DragPreviewComponent } from './directives/drag-preview.component';\nimport { DragPreviewDirective } from './directives/drag-preview.directive';\nimport { DragSyncDirective } from './directives/drag-sync.directive';\nimport { DragDropSyncBoxDirective } from './directives/dragdrop-sync-box.directive';\nimport { DraggableDirective } from './directives/draggable.directive';\nimport { DropScrollEnhancedSideDirective } from './directives/drop-scroll-enhance-side.directive';\nimport { DropScrollEnhancedDirective } from './directives/drop-scroll-enhance.directive';\nimport { DropSortSyncDirective } from './directives/drop-sort-sync.directive';\nimport { DroppableDirective } from './directives/droppable.directive';\nimport { SortableDirective } from './directives/sortable.directive';\nimport { DragDropService } from './services/drag-drop.service';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [\n    DraggableDirective,\n    DroppableDirective,\n    SortableDirective,\n    DropScrollEnhancedDirective,\n    DropScrollEnhancedSideDirective,\n    BatchDraggableDirective,\n    DragSyncDirective,\n    DropSortSyncDirective,\n    DragDropSyncBoxDirective,\n    DragPreviewDirective,\n    DragPreviewComponent,\n    DragPreviewCloneDomRefComponent,\n  ],\n  exports: [\n    DraggableDirective,\n    DroppableDirective,\n    SortableDirective,\n    DropScrollEnhancedDirective,\n    DropScrollEnhancedSideDirective,\n    BatchDraggableDirective,\n    DragSyncDirective,\n    DropSortSyncDirective,\n    DragDropSyncBoxDirective,\n    DragPreviewDirective,\n    DragPreviewComponent,\n    DragPreviewCloneDomRefComponent,\n  ],\n  providers: [\n    DragDropService\n  ],\n\n})\nexport class DragDropModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["mergeStatic"],"mappings":"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"}