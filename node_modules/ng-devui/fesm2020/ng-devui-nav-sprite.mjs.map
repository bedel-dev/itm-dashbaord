{"version":3,"file":"ng-devui-nav-sprite.mjs","sources":["../../devui/nav-sprite/nav-sprite.component.ts","../../devui/nav-sprite/nav-sprite.component.html","../../devui/nav-sprite/nav-sprite.module.ts","../../devui/nav-sprite/ng-devui-nav-sprite.ts"],"sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  Renderer2,\n  TemplateRef,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { scrollAnimate } from 'ng-devui/utils';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { NavMenu, SpriteMode, SpriteOption } from './nav-sprite.type';\n\nconst DEFAULT_OPTIONS = {\n  top: '30%',\n  left: '80%',\n  zIndex: 1,\n};\n\n@Component({\n  selector: 'd-nav-sprite',\n  templateUrl: './nav-sprite.component.html',\n  styleUrls: ['./nav-sprite.component.scss'],\n})\nexport class NavSpriteComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() target: HTMLElement; // 爬取目录的容器\n\n  @Input() scrollTarget: HTMLElement; // 指定滚动的DOM\n\n  @Input() view: {\n    top?: number;\n    bottom?: number;\n  } = { top: 0, bottom: 0 }; // 矫正参数\n\n  @Input() hashSupport = false; // 支持锚点\n\n  @Input() mode: SpriteMode = 'default'; // 模式\n\n  @Input() maxLevel = 3; // 最大层级\n\n  @Input() title = 'menu'; // 名称\n\n  @Input() indent = 2; // 缩进\n\n  @Input() width = 300; // 高度\n\n  @Input() height = 400; // 高度\n\n  @Input() isOpen = true; // sprite模式下的初始状态\n\n  @Input() spriteOption: SpriteOption; // sprite模式下的初始位置\n\n  @Input() navItemTemplate: TemplateRef<any>; // 导航目录模板\n\n  @ViewChild('spriteTemp', { static: true }) spriteTemp: TemplateRef<any>;\n\n  @ViewChild('defaultTemp', { static: true }) defaultTemp: TemplateRef<any>;\n\n  @ViewChild('defaultNavItemTemplate', { static: true }) defaultNavItemTemplate: TemplateRef<any>; // 单条导航目录的默认模板\n\n  @ViewChildren('items', { read: ElementRef })\n  items!: QueryList<ElementRef>;\n\n  @Output() afterNavInit = new EventEmitter(); // 组件初始化后返回组件实例\n\n  currentTemp: TemplateRef<any>;\n\n  menus: NavMenu[] = [];\n\n  activeIndex = -1;\n\n  isToViewByNav = false; // 区分是页面滚动还是点击目录事件\n\n  itemsInit = false;\n\n  contents;\n\n  targetContainer: HTMLElement;\n\n  scrollSub: Subscription;\n\n  isDragging = false;\n\n  mouseenterSub: Subscription;\n\n  itemsSub: Subscription;\n\n  timeGap = 60;\n\n  document: Document;\n\n  get baseUrl() {\n    if (typeof window === 'undefined') {\n      return '';\n    }\n    return window.location.href.replace(window.location.hash, '');\n  }\n\n  constructor(\n    private render: Renderer2,\n    private element: ElementRef,\n    private router: Router,\n    private activeRout: ActivatedRoute,\n    private render2: Renderer2,\n    private cdr: ChangeDetectorRef,\n    @Inject(DOCUMENT) private doc: any\n  ) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    this.currentTemp = this.mode === 'default' ? this.defaultTemp : this.spriteTemp; // 设置当前的模式\n    this.navItemTemplate = this.navItemTemplate || this.defaultNavItemTemplate; // 设置当前的目录模板\n    this.targetContainer = this.scrollTarget || this.target;\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      const container = this.targetContainer === this.document.documentElement ? window : this.targetContainer;\n      this.scrollSub = fromEvent(container, 'scroll')\n        .pipe(debounceTime(300))\n        .subscribe(() => {\n          this.scrollEventHandler();\n        });\n      this.itemsSub = this.items.changes.subscribe((items) => {\n        if (!this.itemsInit) {\n          this.itemsInit = true;\n          this.setActiveMenu();\n        }\n      });\n      this.initStyles();\n    }, 0);\n  }\n\n  setActiveIndex() {\n    if (this.hashSupport && this.activeRout.snapshot.fragment) {\n      this.activeIndex = this.menus.findIndex((menu) => {\n        return menu.label === this.activeRout.snapshot.fragment;\n      });\n      this.isToViewByNav = true;\n      scrollAnimate(\n        this.targetContainer,\n        this.targetContainer.scrollTop,\n        this.menus[this.activeIndex]?.scrollPosition?.startLine,\n        undefined,\n        undefined,\n        () => {\n          setTimeout(() => {\n            this.isToViewByNav = false;\n          }, 160);\n        }\n      );\n    } else {\n      this.activeIndex = this.menus.findIndex((i) => {\n        const scrollTop = this.targetContainer.scrollTop;\n        return scrollTop < i?.scrollPosition.top;\n      });\n    }\n    this.cdr.detectChanges();\n  }\n\n  getNavData(setActive = true) {\n    const search = [];\n    for (let i = 0; i < this.maxLevel; i++) {\n      search.push(`h${i + 1}`);\n    }\n    this.contents = Array.from(this.target.querySelectorAll(search.join(',')));\n    this.menus = this.contents.map((i: HTMLElement) => {\n      return {\n        originEle: i,\n        level: i.tagName.match(/\\d+/)[0],\n        label: i.innerText,\n        href: this.baseUrl + '#' + i.innerText,\n        scrollPosition: this.getScrollPosition(i),\n      };\n    });\n    if (setActive) {\n      this.setActiveIndex();\n    }\n  }\n\n  // 设定目录范围\n  getScrollPosition(ele) {\n    const containerTop = Math.max(this.targetContainer.getBoundingClientRect().top, 0);\n    const containerScrollTop = this.targetContainer.scrollTop;\n    const top = ele.getBoundingClientRect().bottom - containerTop + containerScrollTop - this.view.top + this.view.bottom;\n    const startLine = ele.getBoundingClientRect().top - containerTop + containerScrollTop - this.view.top + this.view.bottom;\n    return { top, startLine };\n  }\n\n  // 监听页面滚动\n  scrollEventHandler() {\n    if (!this.isToViewByNav) {\n      const scrollTop = this.targetContainer.scrollTop;\n      const index = this.menus.findIndex((ele, i) => {\n        return scrollTop >= ele.scrollPosition.startLine && scrollTop < this.menus[i + 1]?.scrollPosition.startLine;\n      });\n      if (index !== -1 && this.activeIndex !== index) {\n        this.activeIndex = index;\n        this.menuScrollToTarget();\n      }\n    }\n  }\n\n  menuScrollToTarget() {\n    const item = this.items.toArray()[this.activeIndex];\n    const menuContainer = this.element.nativeElement.querySelector('.devui-nav-sprite-menus');\n    const start = menuContainer?.scrollTop;\n    const end = item?.nativeElement?.getBoundingClientRect().top + start - menuContainer?.getBoundingClientRect().top;\n    scrollAnimate(menuContainer, start, end, undefined, undefined, () => {\n      if (this.hashSupport) {\n        this.setUrlHash();\n      }\n    });\n  }\n\n  setActiveMenu() {\n    const item = this.items.toArray()[this.activeIndex];\n    const menuContainer = this.element.nativeElement.querySelector('.devui-nav-sprite-menus');\n    const top = item?.nativeElement.getBoundingClientRect().top - menuContainer.getBoundingClientRect().top;\n    scrollAnimate(menuContainer, menuContainer.scrollTop, top, undefined, undefined);\n  }\n\n  initStyles() {\n    if (this.mode === 'sprite') {\n      const content = this.element.nativeElement.querySelector('.devui-nav-sprite-content');\n      const spriteOptions = { ...DEFAULT_OPTIONS, ...this.spriteOption };\n      this.render.addClass(content, 'devui-is-sprite');\n      this.render.setStyle(content, 'position', 'fixed');\n      this.render.setStyle(content, 'top', spriteOptions.top);\n      this.render.setStyle(content, 'left', spriteOptions.left);\n      this.render.setStyle(content, 'z-index', spriteOptions.zIndex);\n      this.render.setStyle(content, 'height', this.height + 'px');\n      this.render.setStyle(content, 'width', this.width + 'px');\n    }\n    this.render.setStyle(this.element.nativeElement, 'height', this.height + 'px');\n    this.render.setStyle(this.element.nativeElement, 'width', this.width + 'px');\n    this.afterNavInit.emit(this);\n  }\n\n  // 设置hash\n  setUrlHash() {\n    const activeMenu = this.menus[this.activeIndex];\n    this.router.navigate([], { fragment: activeMenu.label, replaceUrl: true });\n  }\n\n  // addClass\n  setTargetActive() {\n    const target = this.menus[this.activeIndex];\n    this.menus.forEach((i) => {\n      if (i.originEle) {\n        this.render2.removeClass(i.originEle, 'nav-active');\n      }\n    });\n    this.render2.addClass(target?.originEle, 'nav-active');\n  }\n\n  navTo(index) {\n    if (this.activeIndex !== index) {\n      this.activeIndex = index;\n      const target = this.menus[index];\n      scrollAnimate(this.targetContainer, this.targetContainer.scrollTop, target?.scrollPosition.startLine, undefined, undefined, () => {\n        this.setUrlHash();\n        this.setTargetActive();\n        setTimeout(() => {\n          this.isToViewByNav = false;\n        }, this.timeGap);\n      });\n      this.isToViewByNav = true;\n    }\n  }\n\n  cdkDragStarted() {\n    this.isDragging = true;\n  }\n\n  cdkDragEnded() {\n    setTimeout(() => {\n      this.isDragging = false;\n    }, 100);\n  }\n\n  hide() {\n    this.isOpen = false;\n  }\n\n  open() {\n    if (this.isDragging) {\n      return;\n    }\n    this.isOpen = true;\n  }\n\n  ngOnDestroy() {\n    if (this.scrollSub) {\n      this.scrollSub.unsubscribe();\n    }\n\n    if (this.mouseenterSub) {\n      this.mouseenterSub.unsubscribe();\n    }\n\n    if (this.itemsSub) {\n      this.itemsSub.unsubscribe();\n    }\n  }\n}\n","<ng-container [ngTemplateOutlet]=\"currentTemp\"></ng-container>\n\n<!-- 精灵模式模板 -->\n<ng-template #spriteTemp>\n  <div\n    class=\"devui-nav-sprite-content\"\n    cdkDrag\n    [ngClass]=\"{ 'is-min': !isOpen }\"\n    (cdkDragStarted)=\"cdkDragStarted()\"\n    (cdkDragEnded)=\"cdkDragEnded()\"\n  >\n    <ng-container *ngIf=\"isOpen; else minTemp\">\n      <div class=\"devui-nav-sprite-header\">\n        <div class=\"devui-nav-sprite-header-title\">{{ title }}</div>\n        <d-button icon=\"icon-close\" bsStyle=\"text\" title=\"close\" (click)=\"hide()\"></d-button>\n      </div>\n      <ng-container [ngTemplateOutlet]=\"defaultItemsTemp\"></ng-container>\n    </ng-container>\n  </div>\n</ng-template>\n\n<!-- 默认模板 -->\n<ng-template #defaultTemp>\n  <div class=\"devui-nav-sprite-content\">\n    <div class=\"devui-nav-sprite-header\">{{ title }}</div>\n    <ng-container [ngTemplateOutlet]=\"defaultItemsTemp\"></ng-container>\n  </div>\n</ng-template>\n\n<!-- 目录内容模板 -->\n<ng-template #defaultItemsTemp let-data>\n  <ul class=\"devui-nav-sprite-menus\" *ngIf=\"menus?.length\">\n    <li\n      #items\n      *ngFor=\"let item of menus; let i = index\"\n      [style]=\"'text-indent:' + indent * (item?.level - 1) + 'em;'\"\n      [ngClass]=\"{ active: i === activeIndex }\"\n      (click)=\"navTo(i)\"\n    >\n      <ng-container [ngTemplateOutlet]=\"navItemTemplate\" [ngTemplateOutletContext]=\"{ item: item }\"></ng-container>\n    </li>\n  </ul>\n</ng-template>\n\n<!-- 精灵模式最小化模板 -->\n<ng-template #minTemp>\n  <div class=\"devui-sprite-min\" dTooltip [content]=\"title\">\n    <i class=\"icon-frame-contract\" (click)=\"open()\"></i>\n  </div>\n</ng-template>\n\n<!-- 单个目录模板 -->\n<ng-template #defaultNavItemTemplate let-item=\"item\">\n  <div class=\"nav-item\" [title]=\"item?.label\">\n    <a [href]=\"item.href\" *ngIf=\"hashSupport\">{{ item?.label }}</a>\n    <span *ngIf=\"!hashSupport\">{{ item?.label }}</span>\n  </div>\n</ng-template>\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ButtonModule } from 'ng-devui/button';\nimport { TooltipModule } from 'ng-devui/tooltip';\nimport { NavSpriteComponent } from './nav-sprite.component';\n\n@NgModule({\n  imports: [CommonModule, DragDropModule, ButtonModule, TooltipModule],\n  declarations: [NavSpriteComponent],\n  exports: [NavSpriteComponent],\n})\nexport class NavSpriteModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}