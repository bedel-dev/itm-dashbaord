{"version":3,"file":"ng-devui-drawer.mjs","sources":["../../devui/drawer/drawer.component.ts","../../devui/drawer/drawer.component.html","../../devui/drawer/drawer.service.ts","../../devui/drawer/drawer.moudule.ts","../../devui/drawer/ng-devui-drawer.ts"],"sourcesContent":["import { AnimationEvent } from '@angular/animations';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  Component, Directive, ElementRef, HostListener, Inject, Input, OnDestroy,\n  OnInit, Renderer2, TemplateRef, ViewChild, ViewContainerRef\n} from '@angular/core';\nimport { backdropFadeInOut, flyInOut } from 'ng-devui/utils';\nimport { isNumber, parseInt, trim } from 'lodash-es';\nimport { fromEvent, Observable, Subject, Subscription } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n@Directive({\n  selector: '[dDrawerContentHost]',\n})\nexport class DrawerContentDirective {\n  constructor(public viewContainerRef: ViewContainerRef) {\n  }\n}\n\n@Component({\n  selector: 'd-drawer',\n  templateUrl: './drawer.component.html',\n  styleUrls: ['./drawer.component.scss'],\n  animations: [\n    backdropFadeInOut,\n    flyInOut\n  ],\n  preserveWhitespaces: false,\n})\nexport class DrawerComponent implements OnInit, OnDestroy {\n  animateState = 'void';\n  @Input() id: string;\n  @Input() width = '300px';\n  @Input() zIndex: number;\n  @Input() isCover = true;\n  /**\n   * @deprecated\n   */\n  @Input() fullScreen = false;\n  @Input() showAnimation = true;\n  @ViewChild(DrawerContentDirective, { static: true }) drawerContentHost: DrawerContentDirective;\n  @Input() backdropCloseable: boolean;\n  @Input() escKeyCloseable: boolean;\n  @Input() beforeHidden: () => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() clickDoms: any = [];\n  // Will overwrite by drawer service\n  @Input() afterOpened: Function;\n  @Input() position: 'right' | 'left' = 'right';\n  @Input() bodyScrollable = true; // drawer打开body是否可滚动\n  @ViewChild('drawerContainer', { static: true }) drawerContainer: ElementRef;\n  _width: string;\n  // 全屏时用来记录之前的宽度，因为没遮罩的情况下width不能是百分比\n  oldWidth: string;\n  _isCover: boolean;\n  subscription: Subscription;\n\n  animationDone = new Subject<AnimationEvent>();\n  animationDoneSub: Subscription;\n  resizeSub: Subscription;\n  documentOverFlow: boolean;\n  scrollTop: number;\n  scrollLeft: number;\n  document: Document;\n\n  contentTemplate: TemplateRef<any>;\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2, @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    this.setWidth(this.width);\n    this._isCover = this.isCover === undefined ? true : this.isCover;\n\n    // some browsers(ie11 & edge) fire the animation done event twice\n    this.animationDoneSub = this.animationDone.pipe(distinctUntilChanged((x, y) => {\n      return x.fromState === y.fromState && x.toState === y.toState;\n    })).subscribe(event => {\n      this.onAnimationEnd(event);\n    });\n  }\n  setWidth(width: string) {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    if (width.indexOf('%') >= 0) {\n      const widthStr = trim(width, '%');\n      const widthNum = parseInt(widthStr, 10);\n      this._width = isNumber(widthNum) ? (widthNum * window.innerWidth / 100 + 'px') : '0px';\n    } else {\n      this._width = width;\n    }\n    this.oldWidth = this._width;\n  }\n\n  ngOnDestroy() {\n    if (this.animationDoneSub) {\n      this.animationDoneSub.unsubscribe();\n    }\n    if (this.resizeSub) {\n      this.resizeSub.unsubscribe();\n    }\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) keydownHandler(event: KeyboardEvent) {\n    event.stopPropagation();\n    if (this.escKeyCloseable && !this.isHaveDialogOrUpload()) {\n      this.hide();\n    }\n  }\n\n  onAnimationEnd(event) {\n    if (this.animateState === 'void') {\n      this.onHidden();\n    }\n    if (this.animateState === 'in' && this.afterOpened) {\n      this.afterOpened();\n    }\n  }\n\n  // Will overwrite by drawer service\n  onHidden() {\n\n  }\n\n  show() {\n    if (this.document.documentElement.scrollHeight > this.document.documentElement.clientHeight) {\n      this.documentOverFlow = true;\n      this.scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop;\n      this.scrollLeft = this.document.documentElement.scrollLeft || this.document.body.scrollLeft;\n      this.renderer.addClass(this.document.body, 'devui-body-scrollblock');\n      this.renderer.setStyle(this.document.body, 'top', `-${this.scrollTop}px`);\n      this.renderer.setStyle(this.document.body, 'left', `-${this.scrollLeft}px`);\n    }\n    if (!this.bodyScrollable && this.documentOverFlow) {\n      this.renderer.addClass(this.document.body, 'devui-body-overflow-hidden');\n    }\n    this.animateState = 'in';\n    const activeElement = this.document.activeElement;\n    if (activeElement && typeof (activeElement['blur']) === 'function') {\n      activeElement['blur']();\n    }\n    this.isCover = this.isCover === undefined ? true : this.isCover;\n    if (!this.backdropCloseable || this.isCover) {\n      return;\n    }\n    const documentClick = fromEvent<KeyboardEvent>(document, 'click');\n    setTimeout(() => {\n      this.subscription = documentClick.subscribe((event: Event) => {\n        if (this.clickDoms && this.clickDoms.length > 0) {\n          this.clickDoms.forEach(dom => {\n            if (dom !== null && dom.contains(event.target)) {\n              this.hide();\n              return;\n            }\n          });\n        } else {\n          const target: any = event.target;\n          // 一定要document.contains(event.target)，因为event.target可能已经不在document里了，这个时候就不能进hide了\n          if (this.animateState === 'in' && (!this.elementRef.nativeElement.contains(target) && this.document.body.contains(target))\n            && !this.isHaveDialogOrUpload()) {\n            this.hide();\n          }\n        }\n      });\n    });\n  }\n\n  hide() {\n    this.canHideModel().then((canHide) => {\n      if (!canHide) {\n        return;\n      }\n      this.hideOperation();\n    });\n  }\n\n  hideDirectly() {\n    this.hideOperation();\n  }\n\n  private hideOperation() {\n    if (this.documentOverFlow) {\n      this.renderer.removeStyle(this.document.body, 'top');\n      this.renderer.removeStyle(this.document.body, 'left');\n      this.renderer.removeClass(this.document.body, 'devui-body-scrollblock');\n      this.renderer.removeClass(this.document.body, 'devui-body-overflow-hidden');\n      this.document.documentElement.scrollTop = this.scrollTop;\n      this.document.body.scrollTop = this.scrollTop;\n      this.document.documentElement.scrollLeft = this.scrollLeft;\n      this.document.body.scrollLeft = this.scrollLeft;\n    }\n    this.animateState = 'void';\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n      this.subscription = undefined;\n    }\n  }\n\n  // Will overwrite by drawer service\n  destroy() { }\n\n  isHaveDialogOrUpload() {\n    const dialog: any = this.document.getElementsByClassName('modal-dialog');\n    const upload: any = this.document.getElementById('d-upload-temp');\n    return (dialog && dialog.length > 0) || upload;\n  }\n\n  canHideModel() {\n    let hiddenResult = Promise.resolve(true);\n\n    if (this.beforeHidden) {\n      const result: any = this.beforeHidden();\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          hiddenResult = result;\n        } else if (result.subscribe) {\n          hiddenResult = (result as Observable<boolean>).toPromise();\n        } else {\n          hiddenResult = Promise.resolve(result);\n        }\n      }\n    }\n\n    return hiddenResult;\n  }\n\n  private _setFullScreen(fullScreen?: boolean) {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const drawerContainerEle = this.drawerContainer.nativeElement;\n    if (this._width === this.oldWidth) {\n      if (fullScreen === true || fullScreen === undefined) {\n        this._width = this._isCover ? '100%' : window.innerWidth + 'px';\n        this.renderer.setStyle(drawerContainerEle, 'transition',\n          this.showAnimation ? `width .3s cubic-bezier(0.5, 0.05, 0.5, 0.95)` : 'none');\n        if (!this._isCover) {\n          const resizeEv = fromEvent(window, 'resize');\n          const result = resizeEv.pipe(debounceTime(100));\n          this.resizeSub = result.subscribe(ev => {\n            this._width = window.innerWidth + 'px';\n          });\n        }\n      }\n    } else {\n      if (!fullScreen) {\n        this._width = this.oldWidth;\n        if (this.resizeSub) {\n          this.resizeSub.unsubscribe();\n        }\n      }\n    }\n  }\n\n  public toggleFullScreen() {\n    this._setFullScreen();\n  }\n\n  public setFullScreen(fullScreen: boolean) {\n    this._setFullScreen(fullScreen);\n  }\n}\n","<div\n  class=\"drawer\"\n  [attr.id]=\"id\"\n  [ngStyle]=\"{ 'z-index': zIndex }\"\n  [ngClass]=\"{ 'display-width': _isCover && animateState === 'in' }\"\n  [style.left]=\"position === 'left' ? 0 : null\"\n  [style.right]=\"position === 'right' ? 0 : null\"\n>\n  <div\n    class=\"overlay-wrapper\"\n    [ngClass]=\"{ 'display-width': _isCover && animateState === 'in' }\"\n    [style.left]=\"position === 'left' ? 0 : null\"\n    [style.right]=\"position === 'right' ? 0 : null\"\n  >\n    <div\n      class=\"overlay-backdrop\"\n      [@backdropAnimation]=\"animateState\"\n      [@.disabled]=\"!showAnimation\"\n      (click)=\"backdropCloseable && hide()\"\n    ></div>\n    <div\n      #drawerContainer\n      class=\"drawer-nav\"\n      [ngStyle]=\"{ width: _width }\"\n      [@flyInOut]=\"position + '-' + animateState\"\n      (@flyInOut.done)=\"animationDone.next($event)\"\n      [@.disabled]=\"!showAnimation\"\n      [style.left]=\"position === 'left' ? 0 : null\"\n      [style.right]=\"position === 'right' ? 0 : null\"\n    >\n      <div class=\"drawer-content\" cdkScrollable>\n        <ng-template dDrawerContentHost></ng-template>\n      </div>\n      <div *ngIf=\"contentTemplate\" class=\"drawer-content\" cdkScrollable>\n        <ng-template [ngTemplateOutlet]=\"contentTemplate\"></ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n","import { ComponentFactoryResolver, Injectable } from '@angular/core';\nimport { OverlayContainerRef } from 'ng-devui/overlay-container';\nimport { assign, isUndefined } from 'lodash-es';\nimport { DrawerComponent } from './drawer.component';\nimport { IDrawerOpenResult, IDrawerOptions } from './drawer.types';\n\n@Injectable()\nexport class DrawerService {\n  constructor(\n    private overlayContainerRef: OverlayContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) { }\n\n  open({\n    drawerContentComponent,\n    injector,\n    componentFactoryResolver,\n    id,\n    zIndex,\n    width,\n    fullScreen, // @deprecated\n    data,\n    isCover,\n    clickDoms,\n    onClose,\n    afterOpened,\n    backdropCloseable,\n    escKeyCloseable,\n    beforeHidden,\n    destroyOnHide = true,\n    position = 'right',\n    bodyScrollable = true,\n    showAnimation = true,\n    contentTemplate\n  }: IDrawerOptions): IDrawerOpenResult {\n    const componentFactoryResolver_ = componentFactoryResolver || this.componentFactoryResolver;\n    const drawerRef = this.overlayContainerRef.createComponent(\n      componentFactoryResolver_.resolveComponentFactory(DrawerComponent),\n      injector\n    );\n    assign(drawerRef.instance, {\n      id,\n      width,\n      zIndex,\n      isCover,\n      clickDoms,\n      fullScreen,\n      beforeHidden,\n      afterOpened,\n      escKeyCloseable,\n      position,\n      backdropCloseable: isUndefined(backdropCloseable) ? true : backdropCloseable,\n      bodyScrollable,\n      showAnimation,\n      contentTemplate\n    });\n\n    let drawerContentRef;\n    if (drawerContentComponent) {\n      drawerContentRef = drawerRef.instance.drawerContentHost.viewContainerRef.createComponent(\n        componentFactoryResolver_.resolveComponentFactory(drawerContentComponent),\n        0,\n        injector\n      );\n      assign(drawerContentRef.instance, data);\n    }\n\n    drawerRef.instance.onHidden = () => {\n      if (onClose) {\n        onClose();\n      }\n      if (destroyOnHide) {\n        setTimeout(() => {\n          drawerRef.hostView.destroy();\n        });\n      }\n    };\n\n    drawerRef.instance.destroy = () => {\n      if (!destroyOnHide && drawerRef.instance.animateState === 'void') {\n        drawerRef.hostView.destroy();\n      }\n    };\n\n    drawerRef.instance.show();\n    return {\n      drawerInstance: drawerRef.instance,\n      drawerContentInstance: drawerContentRef ? drawerContentRef.instance : null\n    };\n  }\n}\n","import { ScrollingModule } from '@angular/cdk/scrolling';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OverlayContainerModule } from 'ng-devui/overlay-container';\nimport { PortalModule } from 'ng-devui/portal';\nimport { DrawerComponent, DrawerContentDirective } from './drawer.component';\nimport { DrawerService } from './drawer.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ScrollingModule,\n    PortalModule,\n    OverlayContainerModule\n  ],\n  exports: [DrawerComponent],\n  declarations: [\n    DrawerComponent,\n    DrawerContentDirective\n  ],\n  providers: [DrawerService],\n\n})\nexport class DrawerModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}