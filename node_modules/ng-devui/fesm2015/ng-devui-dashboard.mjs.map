{"version":3,"file":"ng-devui-dashboard.mjs","sources":["../../devui/dashboard/grid-stack.config.ts","../../devui/dashboard/grid-stack.service.ts","../../devui/dashboard/polyfill.ts","../../devui/dashboard/widget/widget.component.ts","../../devui/dashboard/widget/widget.component.html","../../devui/dashboard/dashboard.component.ts","../../devui/dashboard/dashboard.component.html","../../devui/dashboard/widget-library/library-panel.directive.ts","../../devui/dashboard/widget-library/library-trash.directive.ts","../../devui/dashboard/widget-library/library-widget.directive.ts","../../devui/dashboard/dashboard.module.ts","../../devui/dashboard/ng-devui-dashboard.ts"],"sourcesContent":["import { GridStackNode, GridStackOptions } from 'gridstack';\nconst isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n  window.navigator.userAgent\n);\nconst dragDropOption = {\n  alwaysShowResizeHandle: isMobile,\n  resizable: {\n    autoHide: !isMobile,\n    handles: 'se'\n  },\n  acceptWidgets: '.grid-stack-new-item',\n  dragIn: '.grid-stack-new-item',  // class that can be dragged from outside\n  dragInOptions: { revert: 'invalid', scroll: true, appendTo: 'body', helper: 'clone' },\n  removable: '.grid-stack-library-trash', // drag-out delete class\n  removeTimeout: 10,\n};\nconst displayOption = {\n  column: 12,\n  cellHeight: 160,\n  margin: 8,\n  float: true,\n};\nexport const DashBoardGridStackDefaultOption: GridStackOptions = {\n  ...displayOption,\n  ...dragDropOption,\n  disableDrag: false,\n  disableResize: false,\n  animate: true\n};\nexport interface GridStackNodeCompatibleWithV2 {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n}\n\nexport interface GridStackNodeCompatible extends GridStackNode, GridStackNodeCompatibleWithV2 {}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { GridItemHTMLElement, GridStack, GridStackDDI, GridStackNode, Utils } from 'gridstack';\nimport 'gridstack/dist/h5/gridstack-dd-native';\nimport { GridStackDDNative } from 'gridstack/dist/h5/gridstack-dd-native';\nimport { DashboardComponent } from './dashboard.component';\nimport { DashboardLibraryTrashDirective } from './widget-library/library-trash.directive';\nimport { DashboardLibraryWidgetDirective } from './widget-library/library-widget.directive';\n@Injectable()\nexport class GridStackService {\n  gridStack: GridStack;\n  dragInWidget: DashboardLibraryWidgetDirective;\n  lastColumn: number;\n  lastStyleSheet: CSSStyleSheet;\n\n  getDD() {\n    return (GridStackDDI.get() as GridStackDDNative);\n  }\n\n  static cleanDragIn(el: HTMLElement) {\n    if (el.classList.contains('ui-draggable')) {\n      (GridStackDDI.get() as GridStackDDNative).draggable(el, 'destroy');\n    }\n  }\n  static isDraggable(el: HTMLElement) {\n    return Boolean(el.classList.contains('ui-draggable'));\n  }\n  static isDroppable(el: HTMLElement) {\n    return Boolean(el.classList.contains('ui-droppable'));\n  }\n  static enableDrag(el: HTMLElement) {\n    if (!GridStackService.isDraggable(el)) {\n      return;\n    }\n    (GridStackDDI.get() as GridStackDDNative).draggable(el, 'enable');\n  }\n  static disableDrag(el: HTMLElement) {\n    if (!GridStackService.isDraggable(el)) {\n      return;\n    }\n    (GridStackDDI.get() as GridStackDDNative).draggable(el, 'disable');\n  }\n  static enableDrop(el: HTMLElement) {\n    if (!GridStackService.isDroppable(el)) {\n      return;\n    }\n    (GridStackDDI.get() as GridStackDDNative).droppable(el, 'enable');\n  }\n  static disableDrop(el: HTMLElement) {\n    if (!GridStackService.isDroppable(el)) {\n      return;\n    }\n    (GridStackDDI.get() as GridStackDDNative).droppable(el, 'disable');\n  }\n  _itemRemoving = (el: GridItemHTMLElement, remove: boolean) => {\n    const node = el ? el.gridstackNode : undefined;\n    if (!node || !node.grid) { return; }\n    remove ? node['_isAboutToRemove'] = true : delete node['_isAboutToRemove'];\n    remove ? el.classList.add('grid-stack-item-removing') : el.classList.remove('grid-stack-item-removing');\n  };\n  resetAcceptWidget(dashboard: DashboardComponent) {\n    if (!this.gridStack) {\n      if (isDevMode()) {\n        console.warn('call resetAcceptWidget after gridStack init');\n      }\n      return;\n    }\n    if (this.gridStack.opts.staticGrid || !this.gridStack.opts.acceptWidgets) {\n      return;\n    }\n    if (!this.getDD().isDroppable(this.gridStack.el)) {\n      const that = this.gridStack;\n      this.getDD().droppable(that.el, {\n        accept: (el: GridItemHTMLElement) => {\n          const node: GridStackNode = el.gridstackNode;\n          // set accept drop to true on ourself (which we ignore) so we don't get \"can't drop\" icon in HTML5 mode while moving\n          if (node && node.grid === that) { return true; }\n          if (!that.opts.acceptWidgets) { return false; }\n          // check for accept method or class matching\n          let canAccept = true;\n          if (typeof that.opts.acceptWidgets === 'function') {\n            canAccept = that.opts.acceptWidgets(el);\n          } else {\n            const selector = (that.opts.acceptWidgets === true ? '.grid-stack-item' : that.opts.acceptWidgets as string);\n            canAccept = el.matches(selector);\n          }\n          // finally check to make sure we actually have space left #1571\n          if (canAccept && node && that.opts.maxRow) {\n            const n = { w: node.w, h: node.h, minW: node.minW, minH: node.minH }; // only width/height matters and autoPosition\n            canAccept = that.engine.willItFit(n);\n          }\n          return canAccept;\n        },\n      });\n    }\n    this.getDD()\n      .off(this.gridStack.el, 'dropout')\n      .on(this.gridStack.el, 'dropout', (event, el: GridItemHTMLElement, helper) => {\n        // 覆盖这个方法是因为 float模式下 dropout影响了原来的布局\n        const that = this.gridStack;\n        const node = el.gridstackNode;\n        if (!node.grid || node.grid === that) {\n          that['_leave'](el, helper);\n        }\n        this.fixFloat(that, node); // 增加了float模式下的恢复\n        this.getDD().off(el, 'drag');\n        return false;\n      })\n      .off(this.gridStack.el, 'drop')\n      .on(this.gridStack.el, 'drop', (event, el: GridItemHTMLElement, helper: GridItemHTMLElement) => {\n        // 覆盖这个方法是因为 drop的情况不想让它放进去而是只发射通知\n        const that = this.gridStack;\n\n        const node: GridStackNode = el.gridstackNode;\n        if (node && node.grid === that && !node['_isExternal']) { return false; }\n\n        const wasAdded = !!that['placeholder'].parentElement;\n        that['placeholder'].remove();\n\n        const origNode = el['_gridstackNodeOrig'];\n        delete el['_gridstackNodeOrig'];\n\n        if (!node) { return false; }\n        if (wasAdded) {\n          that.engine.cleanupNode(node); // 好像没用\n          node.grid = that;\n        }\n\n\n        if (helper !== el) {\n          helper.remove();\n          el.gridstackNode = origNode; // original item (left behind) is re-stored to pre dragging as the node now has drop info\n        } else {\n          Utils.removePositioningStyles(el);\n        }\n\n        this.getDD().off(el, 'drag');\n        that.engine.removeNode(node);\n        this.fixFloat(that, node);\n\n        that['_updateContainerHeight']();\n\n        dashboard.handleDragInNode(node, origNode, this.dragInWidget);\n      });\n  }\n  resetRemoveDrop(dashboard: DashboardComponent) {\n    if (!this.gridStack) {\n      if (isDevMode()) {\n        console.warn('call resetDragDrop after gridStack init');\n      }\n      return;\n    }\n    if (!(!this.gridStack.opts.staticGrid && typeof this.gridStack.opts.removable === 'string')) {\n      return;\n    }\n    const trashZone = document.querySelector(this.gridStack.opts.removable) as HTMLElement;\n    if (!trashZone) {\n      return;\n    }\n    if (this.getDD().isDroppable(trashZone)) {\n      // 清理掉了dropover和dropout 直接重新绑定对应的逻辑\n      this.getDD().off(trashZone, 'dropover').off(trashZone, 'dropout');\n    }\n  }\n\n  private fixFloat(gridstack: GridStack, node: GridStackNode) {\n    if (gridstack.getFloat()) {\n      gridstack.engine.batchUpdate();\n      gridstack.engine.nodes\n        .filter((n) => n !== node)\n        .reverse()\n        .forEach((n) => {\n          if (n['_origX'] !== undefined || n['_origY'] !== undefined) {\n            n.x = n['_origX'] !== undefined ? n['_origX'] : n.x;\n            n.y = n['_origY'] !== undefined ? n['_orig&'] : n.y;\n            gridstack.engine.moveNode(n, { x: n.x, y: n.y });\n            gridstack['_writeAttrs'](n.el, n.x, n.y);\n          }\n        });\n      gridstack.engine.commit();\n    }\n  }\n  /* 设置新的可拖入的widget */\n  setupDragIn(\n    el: HTMLElement,\n    widget: DashboardLibraryWidgetDirective,\n    helper?: ((event: any) => HTMLElement) | string,\n    notify?: (eventType: string) => (...args: any) => void\n  ) {\n    this.getDD().dragIn(el, {\n      ...widget.targetDashboard.finalOption.dragInOptions,\n      ...{ helper: helper || widget.targetDashboard.finalOption.dragInOptions.helper ,handle:this.gridStack.opts.handle},\n      ...{\n        start: () => {\n          this.dragInWidget = widget;\n          if (notify) {\n            notify('dragStart')();\n          }\n        },\n        stop: () => {\n          this.dragInWidget = undefined;\n          if (notify) {\n            notify('dragStop')();\n          }\n        },\n      },\n    });\n  }\n  destroyDragIn(el: HTMLElement) {\n    this.getDD().draggable(el, 'destroy');\n  }\n\n  /* 设置自定义的回收站 */\n  setupRemoveDropArea(trashZone: HTMLElement, dashboard: DashboardComponent, trash?: DashboardLibraryTrashDirective) {\n    if (!this.gridStack) {\n      if (isDevMode()) {\n        console.warn('call setupRemoveDropArea after gridStack init');\n      }\n      return;\n    }\n    const trashEl = trashZone;\n    this.getDD().droppable(trashEl, this.gridStack.opts.removableOptions)\n      .on(trashEl, 'dropover', (event, el) => this._itemRemoving(el, true))\n      .on(trashEl, 'dropout', (event, el) => this._itemRemoving(el, false));\n  }\n\n  /* 清理自定义的回收站 */\n  destroyRemoveDropAreas(trashZone: HTMLElement) {\n    if (!this.gridStack) {\n      console.warn('call destroyRemoveDropAreas after gridStack init');\n      return;\n    }\n    const that = this.gridStack;\n    if (!this.getDD().isDroppable(trashZone)) {\n      return;\n    }\n    this.getDD().off(trashZone, 'dropover').off(trashZone, 'dropout').off(trashZone, 'drop');\n  }\n\n  // 设置背景\n  updateBackgroundGridBlock() {\n    if (this.gridStack) {\n      if (!this.lastStyleSheet) {\n        this.lastStyleSheet = Utils.createStylesheet(\n          'd-dashboard-' + this.gridStack.opts['_styleSheetClass'],\n          this.gridStack.el.parentElement\n        );\n      } else {\n        this.lastStyleSheet.removeRule(0);\n      }\n      const column = this.gridStack.opts.column;\n      const margin = this.gridStack.opts.margin as number;\n      const marginUnit = this.gridStack.opts.marginUnit;\n      const cellHeight = this.gridStack.opts.cellHeight as number;\n      const cellHeightUnit = this.gridStack.opts.cellHeightUnit;\n      const prefix = `.${this.gridStack.opts['_styleSheetClass']}`;\n      if (!this.lastStyleSheet) {\n        return;\n      }\n\n      Utils.addCSSRule(\n        this.lastStyleSheet,\n        `${prefix}.d-dashboard-show-grid-block::before`,\n        `\n      background-image:\n        linear-gradient(#fff 0, #fff ${margin * 2}${marginUnit},\n          transparent ${margin * 2}${marginUnit}, transparent 100%),\n        linear-gradient(90deg, #fff 0, #fff ${margin * 2}${marginUnit},\n          transparent ${margin * 2}${marginUnit}, transparent 100%),\n        linear-gradient(#f8f8f8 0 , #f8f8f8 100%);\n      background-image:\n        linear-gradient(var(--devui-base-bg, #fff) 0, var(--devui-base-bg, #fff) ${margin * 2}${marginUnit},\n          transparent ${margin * 2}${marginUnit}, transparent 100%),\n        linear-gradient(90deg, var(--devui-base-bg, #fff) 0, var(--devui-base-bg, #fff) ${margin * 2}${marginUnit},\n          transparent ${margin * 2}${marginUnit}, transparent 100%),\n        linear-gradient(var(--devui-area, #f8f8f8) 0 , var(--devui-area, #f8f8f8) 100%);\n      background-size: ${100 / column}% ${cellHeight}${cellHeightUnit};\n      background-position: -${margin}${marginUnit} -${margin}${marginUnit};\n      `\n      );\n      this.lastColumn = column;\n    }\n  }\n\n  setBackgroundGridBlockIfColumnChange() {\n    if (this.gridStack?.opts?.column !== this.lastColumn) {\n      this.updateBackgroundGridBlock();\n    }\n  }\n\n  removeBackgroundGridBlockStyleSheet() {\n    if (this.lastStyleSheet) {\n      Utils.removeStylesheet('d-dashboard-' + this.gridStack.opts['_class']);\n    }\n  }\n}\n","/* eslint-disable */\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\nexport default (function (arr) {\n  arr.forEach(function (item) {\n    if (Object.prototype.hasOwnProperty.call(item,'append')) {\n      return;\n    }\n    Object.defineProperty(item, 'append', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function append() {\n        const argArr = Array.prototype.slice.call(arguments);\n        const docFrag = document.createDocumentFragment();\n\n        argArr.forEach(function (argItem) {\n          const isNode = argItem instanceof Node;\n          docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n        });\n\n        this.appendChild(docFrag);\n      }\n    });\n  });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n","import {\n  Component,\n  ElementRef,\n  Input,\n  ChangeDetectionStrategy,\n  HostBinding,\n  EventEmitter,\n  Output,\n  OnChanges,\n  SimpleChanges,\n  Optional,\n  AfterViewInit,\n  OnDestroy,\n} from '@angular/core';\nimport { GridStackNode, GridStackWidget } from 'gridstack';\nimport { GridStackNodeCompatible } from '../grid-stack.config';\nimport { GridStackService } from '../grid-stack.service';\n\nexport type DashboardWidget = GridStackWidget & {\n  widgetData?: any;\n  [prop: string]: any;\n};\n\n@Component({\n  selector: 'd-dashboard-widget',\n  templateUrl: './widget.component.html',\n  styleUrls: ['./widget.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  exportAs: 'dDashboardWidget',\n  preserveWhitespaces: false\n})\nexport class DashboardWidgetComponent implements GridStackNode, OnChanges, AfterViewInit, OnDestroy {\n  static autoNumberedId = 0;\n  @HostBinding('attr.gs-x')\n  @Input()\n  x: number;\n  @Output() xChange = new EventEmitter<number>();\n\n  @HostBinding('attr.gs-y')\n  @Input()\n  y: number;\n  @Output() yChange = new EventEmitter<number>();\n\n  @HostBinding('attr.gs-w')\n  @Input()\n  width: number;\n  @Output() widthChange = new EventEmitter<number>();\n\n  @HostBinding('attr.gs-h')\n  @Input()\n  height: number;\n  @Output() heightChange = new EventEmitter<number>();\n\n  @HostBinding('attr.gs-id')\n  @Input()\n  id: string;\n\n  @HostBinding('attr.gs-max-w')\n  @Input()\n  maxWidth: number;\n\n  @HostBinding('attr.gs-max-h')\n  @Input()\n  maxHeight: number;\n\n  @HostBinding('attr.gs-min-w')\n  @Input()\n  minWidth: number;\n\n  @HostBinding('attr.gs-min-h')\n  @Input()\n  minHeight: number;\n\n  @HostBinding('attr.gs-no-resize')\n  @Input()\n  noResize: boolean;\n\n  @HostBinding('attr.gs-no-move')\n  @Input()\n  noMove: boolean;\n\n  @HostBinding('attr.gs-auto-position')\n  @Input()\n  autoPosition: boolean; // 仅初始化有效，默认为false\n\n  @HostBinding('attr.gs-locked')\n  @Input()\n  locked: boolean;\n\n  @Input() widgetData;\n\n  @Output() widgetInit = new EventEmitter(true);\n  @Output() widgetResize = new EventEmitter<{ width: number; height: number } | null>(true);\n  @Output() widgetDestroy = new EventEmitter();\n\n  @HostBinding('class.grid-stack-item')\n  hostBinding = true;\n\n  generatedId: string = (DashboardWidgetComponent.autoNumberedId++).toString();\n\n  constructor(public elem: ElementRef, @Optional() private gridStackService: GridStackService) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.gridStackService && this.gridStackService.gridStack) {\n      if (changes.x || changes.y || changes.width || changes.height) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { x: this.x, y: this.y, w: this.width, h: this.height });\n      }\n      if (changes.noResize) {\n        this.gridStackService.gridStack.resizable(this.elem.nativeElement, !this.noResize);\n      }\n      if (changes.noMove) {\n        this.gridStackService.gridStack.movable(this.elem.nativeElement, !this.noMove);\n      }\n      if (changes.locked) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { locked: !!this.locked });\n      }\n      if (changes.maxWidth) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { maxW: this.maxWidth });\n      }\n      if (changes.maxHeight) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { maxH: this.maxHeight });\n      }\n      if (changes.minWidth) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { minW: this.minWidth });\n      }\n      if (changes.minHeight) {\n        this.gridStackService.gridStack.update(this.elem.nativeElement, { minH: this.minHeight });\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    this.widgetInit.emit();\n  }\n  ngOnDestroy() {\n    this.widgetDestroy.emit();\n  }\n\n  handleChange({ x, y, width, height }: GridStackNodeCompatible) {\n    const change = { x, y, width, height};\n    const beforeChange = { width: this.width, height: this.height };\n    Object.keys(change).forEach((key) => {\n      if (change[key] !== this[key]) {\n        this[key] = change[key];\n        const eventEmitter = this[key + 'Change'] as EventEmitter<number>;\n        if (eventEmitter) {\n          eventEmitter.emit(change[key]);\n        }\n      }\n    });\n    if (change.width !== beforeChange.width || change.height !== beforeChange.height) {\n      this.widgetResize.emit({ width, height});\n    }\n  }\n}\n","<div class=\"grid-stack-item-content d-dashboard-widget\">\n  <ng-content></ng-content>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  isDevMode,\n  OnChanges,\n  OnDestroy,\n  Output,\n  QueryList,\n  Renderer2,\n  SimpleChanges\n} from '@angular/core';\nimport { GridStack, GridStackNode, GridStackOptions } from 'gridstack';\nimport { DashBoardGridStackDefaultOption, GridStackNodeCompatible } from './grid-stack.config';\nimport { GridStackService } from './grid-stack.service';\nimport './polyfill';\nimport { DashboardLibraryTrashDirective } from './widget-library/library-trash.directive';\nimport { DashboardLibraryWidgetDirective } from './widget-library/library-widget.directive';\nimport { DashboardWidgetComponent } from './widget/widget.component';\n\nexport type DashboardWidgetEvent = Array<{\n  widget?: DashboardWidgetComponent; // change, remove\n  node?: GridStackNodeCompatible & {\n    widgetData?: any; // add\n    willItFit?: boolean;\n    trashData?: any; // remove\n  };\n  origNode?: GridStackNodeCompatible; // add(optional)\n}>;\n\n@Component({\n  selector: 'd-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n  providers: [GridStackService],\n  exportAs: 'dDashboard',\n  preserveWhitespaces: false,\n})\nexport class DashboardComponent implements OnChanges, AfterViewInit, OnDestroy {\n  public get gridStack() {\n    return this.gridStackService?.gridStack;\n  }\n  @ContentChildren(DashboardWidgetComponent, { descendants: true }) widgetComponents: QueryList<DashboardWidgetComponent>;\n  @Input() initOptions: GridStackOptions;\n\n  /* move resize setting*/\n  @Input() static: boolean;\n  @Input() float: boolean;\n  @Input() animate: boolean;\n  @Input() widgetMoveable: boolean;\n  @Input() widgetResizable: boolean;\n\n  @HostBinding('class.d-dashboard-show-grid-block')\n  @Input()\n  showGridBlock = false;\n\n  /* layout setting */\n  @Input() column: number;\n  @HostBinding('attr.gs-min-row')\n  @Input()\n  minRow: number;\n  @HostBinding('attr.gs-max-row')\n  @Input()\n  maxRow: number;\n  @Input() cellHeight: number | string;\n  @Input() margin: number | string;\n\n  @Output() widgetAdded = new EventEmitter<DashboardWidgetEvent>();\n  @Output() widgetChanged = new EventEmitter<DashboardWidgetEvent>();\n  @Output() widgetRemoved = new EventEmitter<DashboardWidgetEvent>();\n  @Output() dashboardInit = new EventEmitter();\n\n  finalOption: GridStackOptions;\n  renderedWidgets: Array<DashboardWidgetComponent>;\n\n  @HostBinding('class.grid-stack') addClass = true;\n\n  constructor(\n    public el: ElementRef,\n    private cdr: ChangeDetectorRef,\n    private renderer: Renderer2,\n    public gridStackService: GridStackService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.gridStack) {\n      if (changes.static) {\n        this.gridStack.setStatic(!!this.static);\n        if (!this.static) {\n          this.gridStackService.resetAcceptWidget(this);\n        }\n      }\n      if (changes.float) {\n        this.gridStack.float(!!this.float);\n      }\n      if (changes.animate) {\n        this.gridStack.setAnimation(!!this.animate);\n      }\n      if (changes.widgetMoveable) {\n        this.gridStack.enableMove(!this.static && this.widgetMoveable);\n      }\n      if (changes.widgetResizable) {\n        this.gridStack.enableResize(!this.static && this.widgetResizable);\n      }\n      if (changes.column && this.column !== undefined) {\n        this.gridStack.column(this.column);\n        this.gridStackService.updateBackgroundGridBlock();\n      }\n      if (changes.maxRow) {\n        this.gridStack.engine.maxRow = this.maxRow || 0;\n      }\n      if (changes.cellHeight) {\n        this.gridStack.cellHeight(this.cellHeight, true);\n        this.gridStackService.updateBackgroundGridBlock();\n      }\n      if (changes.margin) {\n        this.gridStack.margin(this.margin);\n        this.gridStackService.updateBackgroundGridBlock();\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    this.finalOption = { ...DashBoardGridStackDefaultOption, ...this.initOptions, ...this.getTransformOption() };\n    this.renderer.addClass(this.el.nativeElement, 'grid-stack-' + this.finalOption.column);\n    this.gridStackService.gridStack = GridStack.init(this.finalOption, this.el.nativeElement);\n    this.gridStackService.resetAcceptWidget(this);\n    this.gridStackService.resetRemoveDrop(this);\n    this.gridStackService.updateBackgroundGridBlock();\n\n    this.renderedWidgets = this.widgetComponents.toArray();\n    setTimeout(() => {\n      this.renderedWidgets.forEach((widget) =>\n        widget.handleChange(this.addGridStackNodeCompatible(widget.elem.nativeElement['gridstackNode']))\n      );\n    });\n    this.widgetComponents.changes.subscribe((changes) => {\n      this.handleItemChanges(this.renderedWidgets, this.widgetComponents.toArray());\n      this.renderedWidgets = this.widgetComponents.toArray();\n    });\n    this.dashboardInit.emit();\n  }\n\n  ngOnDestroy() {\n    if (this.gridStackService && this.gridStackService.gridStack) {\n      this.gridStackService.removeBackgroundGridBlockStyleSheet();\n      this.gridStackService.gridStack.destroy();\n    }\n  }\n\n  private getTransformOption() {\n    const option = {};\n    const getOppositeKeepUndefined = (v) => {\n      if (v === undefined) {\n        return undefined;\n      }\n      return !v;\n    };\n\n    Object.assign(option, {\n      column: this.column,\n      cellHeight: this.cellHeight,\n      margin: this.margin,\n      minRow: this.minRow,\n      maxRow: this.maxRow,\n      staticGrid: this.static,\n      float: this.float,\n      animate: this.animate,\n      disableDrag: getOppositeKeepUndefined(this.widgetMoveable),\n      disableResize: getOppositeKeepUndefined(this.widgetResizable),\n    });\n\n    Object.keys(option).forEach((k) => {\n      if (option[k] === undefined) {\n        delete option[k];\n      }\n    });\n    return option;\n  }\n\n  private handleItemChanges(renderedItems: DashboardWidgetComponent[], items: DashboardWidgetComponent[]): void {\n    const itemsToAdd = items.filter((i) => !renderedItems.some((w) => w === i));\n    const itemsToRemove = renderedItems.filter((w) => !items.some((i) => w === i));\n    this.gridStack.batchUpdate();\n    itemsToAdd.forEach((i) => this.gridStack.addWidget(i.elem.nativeElement));\n    itemsToRemove.forEach((i) => this.gridStack.removeWidget(i.elem.nativeElement));\n    this.gridStack.commit();\n  }\n\n  public batchUpdate() {\n    this.cdr.detach();\n  }\n  public commit() {\n    this.cdr.detectChanges();\n    this.cdr.reattach();\n  }\n\n  @HostListener('added', ['$event', '$event.detail'])\n  public addedHandler = (event, items: GridStackNode[]) => {\n    setTimeout(() => {\n      const all = items.map((item) => ({\n        node: this.addGridStackNodeCompatible(item),\n        widget: this.widgetComponents.toArray().find((widget) => item.el === widget.elem.nativeElement),\n      }));\n\n      // 处理ContentChildren数据推送进来的\n      all\n        .filter((wd) => wd.widget)\n        .forEach(({ node, widget }) => {\n          widget.handleChange(node);\n        });\n    });\n  };\n\n  @HostListener('change', ['$event', '$event.detail'])\n  public changeHandler = (event, items: GridStackNode[]) => {\n    if (!this.gridStack) {\n      return;\n    }\n    if (!this.gridStack['_oneColumnMode']) {\n      setTimeout(() => {\n        const all = items.map((item) => ({\n          node: this.addGridStackNodeCompatible(item),\n          widget: this.renderedWidgets.find((widget) => item.el === widget.elem.nativeElement),\n        }));\n        // 处理UI操作调整大小/调整位置\n        all\n          .filter((w) => w.widget)\n          .forEach(({ node, widget }) => {\n            widget.handleChange(node);\n          });\n        if (isDevMode() && all.some((w) => !w.widget)) {\n          console.warn('remove: something wrong, not handled by dashboard');\n        }\n        this.widgetChanged.emit(all.filter((w) => w.widget));\n      });\n    }\n    if (this.showGridBlock) {\n      this.gridStackService.setBackgroundGridBlockIfColumnChange();\n    }\n  };\n\n  @HostListener('removed', ['$event', '$event.detail'])\n  public removedHandler = (event, items: GridStackNode[]) => {\n    const all = items.map((item) => ({\n      node: this.addGridStackNodeCompatible(item),\n      widget: this.renderedWidgets.find((widget) => item.el === widget.elem.nativeElement),\n    }));\n    // 不做处理仅提醒部分组件的移除不能被dashboard所理解\n    if (isDevMode() && all.some((wd) => !wd.widget)) {\n      console.warn('remove: something wrong, not handled by dashboard');\n    }\n  };\n\n  handleDragInNode(node: GridStackNode, origNode: GridStackNode, widget: DashboardLibraryWidgetDirective) {\n    this.widgetAdded.emit([\n      {\n        node: {\n          ...this.addGridStackNodeCompatible(node),\n          widgetData: widget.widgetData,\n          willItFit: this.willItFit(node.x, node.y, widget.width, widget.height),\n        },\n        // origNode: this.addGridStackNodeCompatible(origNode),\n      },\n    ]);\n  }\n\n  handleDragOutNode(node: GridStackNode, dropArea: DashboardLibraryTrashDirective) {\n    this.widgetRemoved.emit([\n      {\n        widget: this.renderedWidgets.find((widget) => node.el === widget.elem.nativeElement),\n        node: {\n          ...this.addGridStackNodeCompatible(node),\n          trashData: dropArea.trashData,\n        },\n      },\n    ]);\n  }\n\n  private addGridStackNodeCompatible(item: GridStackNode): GridStackNodeCompatible {\n    return {\n      ...item,\n      ...{\n        x: item.x,\n        y: item.y,\n        width: item.w,\n        height: item.h,\n      },\n    };\n  }\n\n  public getCurrentColumn() {\n    if (!this.gridStack) {\n      return null;\n    }\n    return this.gridStack.getColumn();\n  }\n  public getCurrentRow() {\n    if (!this.gridStack) {\n      return null;\n    }\n    return this.gridStack.getRow();\n  }\n  public getCurrentColumnWidth() {\n    if (!this.gridStack) {\n      return null;\n    }\n    return this.gridStack.cellWidth();\n  }\n  public getCurrentCellHeight() {\n    if (!this.gridStack) {\n      return null;\n    }\n    return this.gridStack.getCellHeight();\n  }\n  public getCurrentMargin() {\n    if (!this.gridStack) {\n      return null;\n    }\n    return this.gridStack.getMargin();\n  }\n\n  public compact() {\n    if (!this.gridStack) {\n      return;\n    }\n    this.gridStack.compact();\n  }\n\n  public willItFit(x: number, y: number, width: number, height: number, autoPosition = false): boolean {\n    if (!this.gridStack) {\n      return;\n    }\n    return this.gridStack.willItFit({ x, y, w: width, h: height, autoPosition });\n  }\n}\n","<ng-content></ng-content>\n","import { Directive, EventEmitter, Output } from '@angular/core';\n\n@Directive({\n  selector: '[dDashboardLibraryPanel]',\n})\nexport class DashboardLibraryPanelDirective {\n  @Output() widgetDragStart = new EventEmitter();\n  @Output() widgetDragStop = new EventEmitter();\n  dragStartHandler() {\n    this.widgetDragStart.emit();\n  }\n  dragStopHandler() {\n    this.widgetDragStop.emit();\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, HostBinding, Input, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\nimport { DashboardComponent } from '../dashboard.component';\nimport { GridStackService } from '../grid-stack.service';\n\n@Directive({\n  selector: '[dDashboardLibraryTrash]',\n})\nexport class DashboardLibraryTrashDirective implements OnChanges, OnDestroy, AfterViewInit {\n  @Input() targetDashboard: DashboardComponent;\n  @Input() trashData;\n  @Input() dropDisabled = false;\n\n  @HostBinding('class.grid-stack-library-trash')\n  hostBinding = true;\n\n  isSetup = false;\n\n  get gridStackService() {\n    return this.targetDashboard?.gridStackService;\n  }\n\n  constructor (private el: ElementRef) {}\n  ngAfterViewInit() {\n    this.setup();\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.targetDashBoard) {\n      this.setup();\n    }\n    if (changes.dropDisabled) {\n      if (this.dropDisabled) {\n        GridStackService.disableDrop(this.el.nativeElement);\n      } else {\n        GridStackService.enableDrop(this.el.nativeElement);\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.gridStackService && this.isSetup) {\n      this.gridStackService.destroyRemoveDropAreas(this.el.nativeElement);\n    }\n  }\n\n  setup() {\n    if (this.targetDashboard && !this.isSetup) {\n      setTimeout(() => {\n        if (this.gridStackService) {\n          this.gridStackService.setupRemoveDropArea(this.el.nativeElement, this.targetDashboard, this);\n          if (this.dropDisabled) {\n            GridStackService.disableDrop(this.el.nativeElement);\n          }\n        }\n      });\n      this.isSetup = true;\n    }\n  }\n}\n","import { DomPortalOutlet, TemplatePortal } from '@angular/cdk/portal';\nimport {\n  AfterViewInit, ApplicationRef, ComponentFactoryResolver, Directive, ElementRef, HostBinding, Injector,\n  Input, OnChanges, OnDestroy, Optional, SimpleChanges, TemplateRef, ViewContainerRef\n} from '@angular/core';\nimport { DashboardComponent } from '../dashboard.component';\nimport { GridStackService } from '../grid-stack.service';\nimport { DashboardLibraryPanelDirective } from '../widget-library/library-panel.directive';\n\n@Directive({\n  selector: '[dDashboardLibraryWidget]',\n})\nexport class DashboardLibraryWidgetDirective implements OnChanges, AfterViewInit, OnDestroy {\n  @HostBinding('attr.gs-w')\n  @Input()\n  width: number;\n\n  @HostBinding('attr.gs-h')\n  @Input()\n  height: number;\n\n  @Input() widgetData;\n\n  @Input() dragMode: 'copy' | 'move' = 'copy';\n  @Input() dragTemplate: TemplateRef<any>;\n  @Input() dragDisabled = false;\n  @Input() dragCopyStyle = false;\n\n  @HostBinding('class.grid-stack-new-item')\n  hostBinding = true;\n  @HostBinding('attr.gs-instance')\n  gridStackId;\n\n  @Input() targetDashboard: DashboardComponent;\n  isSetup = false;\n  get gridStackService(): GridStackService {\n    return this.targetDashboard?.gridStackService;\n  }\n  constructor(\n    private el: ElementRef,\n    private cfr: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private injector: Injector,\n    private vcf: ViewContainerRef,\n    @Optional() private libraryPanel: DashboardLibraryPanelDirective\n  ) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.targetDashboard) {\n      this.setup();\n    }\n    if (changes.dragDisabled) {\n      if (this.dragDisabled) {\n        GridStackService.disableDrag(this.el.nativeElement);\n      } else {\n        GridStackService.enableDrag(this.el.nativeElement);\n      }\n    }\n  }\n  ngAfterViewInit() {\n    if (!this.isSetup) {\n      GridStackService.cleanDragIn(this.el.nativeElement);\n      this.setup();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.gridStackService) {\n      this.gridStackService.destroyDragIn(this.el.nativeElement);\n    }\n  }\n\n  setup() {\n    if (this.targetDashboard && !this.isSetup) {\n      setTimeout(() => {\n        if (this.gridStackService && this.gridStackService.gridStack) {\n          GridStackService.cleanDragIn(this.el.nativeElement);\n          this.gridStackService.setupDragIn(this.el.nativeElement, this, this.helper, this.notify);\n          if (this.dragDisabled) {\n            GridStackService.disableDrag(this.el.nativeElement);\n          }\n        }\n      });\n      this.isSetup = true;\n    }\n  }\n  notify = (event: 'dragStart' | 'dragStop' | string) => {\n    if (this.libraryPanel) {\n      if (event === 'dragStart') {\n        return (...args) => {\n          this.libraryPanel.dragStartHandler();\n        };\n      }\n      if (event === 'dragStop') {\n        return (...args) => {\n          this.libraryPanel.dragStopHandler();\n        };\n      }\n    } else {\n      return () => { };\n    }\n  };\n\n  helper = (event) => {\n    if (this.dragMode === 'move') {\n      // grid stack 有高度变化的bug， 暂时就不解决了\n      return this.el.nativeElement;\n    }\n    if (!this.dragTemplate) {\n      const el = this.el.nativeElement.cloneNode(true);\n      el.style.zIndex = '1060';\n      this.copyCanvas(this.el.nativeElement, el);\n      if (this.dragCopyStyle) {\n        this.copyStyle(this.el.nativeElement, el);\n      }\n      return el;\n    } else {\n      const el = document.createElement('div');\n      el.classList.add('grid-stack-item-adding-item-template');\n      el.style.zIndex = '1060';\n      if (this.width !== undefined) {\n        el.setAttribute('gs-w', `${this.width}`);\n      }\n      if (this.height !== undefined) {\n        el.setAttribute('gs-h', `${this.height}`);\n      }\n      this.setDragWidthHeight(el);\n      const domPortalOutlet = new DomPortalOutlet(el, this.cfr, this.appRef, this.injector);\n      domPortalOutlet.attachTemplatePortal(\n        new TemplatePortal(this.dragTemplate, this.vcf, {\n          $implicit: this.widgetData,\n          width: this.width,\n          height: this.height,\n        })\n      );\n      const result = el.cloneNode(true);\n      this.copyCanvas(el, result);\n      if (this.dragCopyStyle) {\n        this.copyStyle(el, result);\n      }\n      domPortalOutlet.detach();\n      domPortalOutlet.dispose();\n      return result;\n    }\n  };\n\n  copyCanvas(origin, target) {\n    // 拷贝canvas的内容\n    const originCanvasArr = origin.querySelectorAll('canvas');\n    const targetCanvasArr = target.querySelectorAll('canvas');\n    [].forEach.call(targetCanvasArr, (canvas, index) => {\n      canvas.getContext('2d').drawImage(originCanvasArr[index], 0, 0);\n    });\n  }\n\n  setDragWidthHeight(el) {\n    const columnWidth = this.targetDashboard.getCurrentColumnWidth();\n    const cellHeight = this.targetDashboard.getCurrentCellHeight();\n    const margin = this.targetDashboard.getCurrentMargin();\n    if (this.width) {\n      el.style.width = columnWidth * (this.width || 1) - margin * ((this.width || 1) - 1) + 'px';\n    }\n    if (this.height) {\n      el.style.height = cellHeight * (this.height || 1) - margin * 2 + 'px';\n    }\n  }\n  copyStyle(source, target) {\n    ['id', 'style', 'draggable'].forEach((att) => {\n      target.removeAttribute(att);\n    });\n\n    // copy style (without transitions)\n    const computedStyle = getComputedStyle(source);\n    for (let i = 0; i < computedStyle.length; i++) {\n      const key = computedStyle[i];\n      if (key.indexOf('transition') < 0) {\n        target.style[key] = computedStyle[key];\n      }\n    }\n    target.style.pointerEvents = 'none';\n    // and repeat for all children\n    for (let i = 0; i < source.children.length; i++) {\n      this.copyStyle(source.children[i], target.children[i]);\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { DashboardComponent } from './dashboard.component';\nimport { DashboardLibraryPanelDirective } from './widget-library/library-panel.directive';\nimport { DashboardLibraryTrashDirective } from './widget-library/library-trash.directive';\nimport { DashboardLibraryWidgetDirective } from './widget-library/library-widget.directive';\nimport { DashboardWidgetComponent } from './widget/widget.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  exports: [\n    DashboardComponent,\n    DashboardWidgetComponent,\n    DashboardLibraryWidgetDirective,\n    DashboardLibraryTrashDirective,\n    DashboardLibraryPanelDirective,\n  ],\n  declarations: [\n    DashboardComponent,\n    DashboardWidgetComponent,\n    DashboardLibraryWidgetDirective,\n    DashboardLibraryTrashDirective,\n    DashboardLibraryPanelDirective,\n  ]\n})\nexport class DashboardModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}