{"version":3,"file":"ng-devui-mention.mjs","sources":["../../devui/mention/mention.component.ts","../../devui/mention/mention.component.html","../../devui/mention/position.ts","../../devui/mention/utils.ts","../../devui/mention/mention.directive.ts","../../devui/mention/mention.module.ts","../../devui/mention/mention.service.ts","../../devui/mention/ng-devui-mention.ts"],"sourcesContent":["import { Component, ElementRef, QueryList, TemplateRef, ViewChildren } from '@angular/core';\nimport { MentionDirective } from './mention.directive';\n\n@Component({\n  selector: 'd-mention',\n  templateUrl: './mention.component.html',\n  styleUrls: ['./mention.component.scss'],\n})\nexport class MentionComponent {\n\n  @ViewChildren('items', { read: ElementRef })\n  items!: QueryList<ElementRef>;\n\n  suggestions = [];\n\n  trigger: MentionDirective;\n\n  value = '';\n\n  activeIndex = -1;\n\n  loading = false;\n\n  mentionItemTemplate: TemplateRef<any>;\n\n  mentionNotFoundContent = '';\n\n  position;\n\n  private get focusItemElement(): HTMLElement | null {\n    const itemArr = this.items?.toArray();\n    if (itemArr && itemArr[this.activeIndex]) {\n      return itemArr[this.activeIndex].nativeElement;\n    }\n    return null;\n  }\n\n  constructor() {}\n\n  selectSuggestion (suggestion) {\n    if (this.trigger) {\n      this.trigger.selectSuggestion(suggestion);\n    }\n  }\n\n  scrollToFocusItem(): void {\n    if (this.focusItemElement) {\n      this.focusItemElement.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });\n    }\n  }\n}\n","<ul class=\"devui-mention-dropdown\" dLoading [showLoading]=\"loading\" [ngClass]=\"{ 'devui-mention-overlay-top': position === 'top' }\">\n  <li\n    #items\n    class=\"devui-mention-dropdown-item\"\n    *ngFor=\"let suggestion of suggestions; let i = index\"\n    [class.focus]=\"i === activeIndex\"\n    (mousedown)=\"$event.preventDefault()\"\n    (click)=\"selectSuggestion(suggestion)\"\n  >\n    <ng-container *ngIf=\"mentionItemTemplate; else defaultSuggestion\">\n      <ng-container [ngTemplateOutlet]=\"mentionItemTemplate\" [ngTemplateOutletContext]=\"{ $implicit: suggestion }\"></ng-container>\n    </ng-container>\n    <ng-template #defaultSuggestion>{{ suggestion }}</ng-template>\n  </li>\n  <li class=\"devui-mention-dropdown-notfound devui-mention-dropdown-item\" *ngIf=\"suggestions.length === 0\">\n    <span *ngIf=\"!loading\">{{ mentionNotFoundContent }}</span>\n  </li>\n</ul>\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { ConnectedOverlayPositionChange, ConnectionPositionPair } from '@angular/cdk/overlay';\n\nexport const POSITION_MAP: { [key: string]: ConnectionPositionPair } = {\n  top: new ConnectionPositionPair({ originX: 'center', originY: 'top' }, { overlayX: 'center', overlayY: 'bottom' }),\n  topCenter: new ConnectionPositionPair({ originX: 'center', originY: 'top' }, { overlayX: 'center', overlayY: 'bottom' }),\n  topLeft: new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'start', overlayY: 'bottom' }),\n  topRight: new ConnectionPositionPair({ originX: 'end', originY: 'top' }, { overlayX: 'end', overlayY: 'bottom' }),\n  right: new ConnectionPositionPair({ originX: 'end', originY: 'center' }, { overlayX: 'start', overlayY: 'center' }),\n  rightTop: new ConnectionPositionPair({ originX: 'end', originY: 'top' }, { overlayX: 'start', overlayY: 'top' }),\n  rightBottom: new ConnectionPositionPair({ originX: 'end', originY: 'bottom' }, { overlayX: 'start', overlayY: 'bottom' }),\n  bottom: new ConnectionPositionPair({ originX: 'center', originY: 'bottom' }, { overlayX: 'center', overlayY: 'top' }),\n  bottomCenter: new ConnectionPositionPair({ originX: 'center', originY: 'bottom' }, { overlayX: 'center', overlayY: 'top' }),\n  bottomLeft: new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'start', overlayY: 'top' }),\n  bottomRight: new ConnectionPositionPair({ originX: 'end', originY: 'bottom' }, { overlayX: 'end', overlayY: 'top' }),\n  left: new ConnectionPositionPair({ originX: 'start', originY: 'center' }, { overlayX: 'end', overlayY: 'center' }),\n  leftTop: new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'end', overlayY: 'top' }),\n  leftBottom: new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'end', overlayY: 'bottom' })\n};\n\nexport const DEFAULT_TOOLTIP_POSITIONS = [POSITION_MAP.top, POSITION_MAP.right, POSITION_MAP.bottom, POSITION_MAP.left];\n\nexport const DEFAULT_CASCADER_POSITIONS = [POSITION_MAP.bottomLeft, POSITION_MAP.bottomRight, POSITION_MAP.topLeft, POSITION_MAP.topRight];\n\nexport const DEFAULT_MENTION_TOP_POSITIONS = [\n  new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'start', overlayY: 'bottom' }),\n  new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'end', overlayY: 'bottom' })\n];\n\nexport const DEFAULT_MENTION_BOTTOM_POSITIONS = [\n  POSITION_MAP.bottomLeft,\n  new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'end', overlayY: 'top' })\n];\n\nexport function getPlacementName(position: ConnectedOverlayPositionChange): string | undefined {\n  for (const placement in POSITION_MAP) {\n    if (\n      position.connectionPair.originX === POSITION_MAP[placement].originX &&\n      position.connectionPair.originY === POSITION_MAP[placement].originY &&\n      position.connectionPair.overlayX === POSITION_MAP[placement].overlayX &&\n      position.connectionPair.overlayY === POSITION_MAP[placement].overlayY\n    ) {\n      return placement;\n    }\n  }\n  return undefined;\n}\n","const properties = [\n  'direction', // RTL support\n  'boxSizing',\n  'width', // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize',\n];\n\nconst isBrowser = typeof window !== 'undefined';\nconst isFirefox = isBrowser && window['mozInnerScreenX'] !== undefined;\nfunction _parseInt(value) {\n  return parseInt(value, 10);\n}\n\nexport function getCaretCoordinates(element, position, options?) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  // isDebugMode 调试模式，用来定位光标位置的\n  const isDebugMode = (options && options.isDebugMode) || false;\n  if (isDebugMode) {\n    const el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if (el) {\n      el.parentNode.removeChild(el);\n    }\n  }\n\n  const div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  const style = div.style;\n  const computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;\n  const isInput = element.nodeName === 'INPUT';\n\n  style.whiteSpace = 'pre-wrap';\n  if (!isInput) {\n    style.wordWrap = 'break-word';\n  }\n\n  style.position = 'absolute';\n  if (!isDebugMode) {\n    style.visibility = 'hidden';\n  }\n\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      if (computed.boxSizing === 'border-box') {\n        const height = _parseInt(computed.height);\n        const outerHeight =\n          _parseInt(computed.paddingTop) +\n          _parseInt(computed.paddingBottom) +\n          _parseInt(computed.borderTopWidth) +\n          _parseInt(computed.borderBottomWidth);\n        const targetHeight = outerHeight + _parseInt(computed.lineHeight);\n        if (height > targetHeight) {\n          style.lineHeight = height - outerHeight + 'px';\n        } else if (height === targetHeight) {\n          style.lineHeight = computed.lineHeight;\n        } else {\n          style.lineHeight = '0';\n        }\n      } else {\n        style.lineHeight = computed.height;\n      }\n    } else {\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    if (element.scrollHeight > _parseInt(computed.height)) {\n      style.overflowY = 'scroll';\n    }\n  } else {\n    style.overflow = 'hidden';\n  }\n\n  div.textContent = element.value.substring(0, position);\n  if (isInput) {\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n  }\n\n  const span = document.createElement('span');\n  span.textContent = element.value.substring(position) || '.';\n  div.appendChild(span);\n\n  const coordinates = {\n    top: span.offsetTop + _parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + _parseInt(computed['borderLeftWidth']),\n    height: _parseInt(computed['lineHeight']),\n  };\n\n  if (isDebugMode) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nexport function getRegExp(prefix: string | string[]): RegExp {\n  const prefixArray = Array.isArray(prefix) ? prefix : [prefix];\n  let prefixToken = prefixArray.join('').replace(/(\\$|\\^)/g, '\\\\$1');\n\n  if (prefixArray.length > 1) {\n    prefixToken = `[${prefixToken}]`;\n  }\n\n  return new RegExp(`(\\\\s|^)(${prefixToken})[^\\\\s]*`, 'g');\n}\n\nexport function getMentions(value: string, prefix: string | string[] = '@'): string[] {\n  if (typeof value !== 'string') {\n    return [];\n  }\n  const regex = getRegExp(prefix);\n  const mentions = value.match(regex);\n  return mentions !== null ? mentions.map((e) => e.trim()) : [];\n}\n","import { DOWN_ARROW, ENTER, ESCAPE, LEFT_ARROW, RIGHT_ARROW, TAB, UP_ARROW } from '@angular/cdk/keycodes';\nimport { ConnectionPositionPair, FlexibleConnectedPositionStrategy, Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\nimport { fromEvent, Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { MentionComponent } from './mention.component';\nimport { Mention, MentionOnSearchTypes, MentionPositionType } from './mention.types';\nimport { DEFAULT_MENTION_BOTTOM_POSITIONS } from './position';\nimport { getCaretCoordinates } from './utils';\n\n@Directive({\n  selector: '[dMention]',\n  exportAs: 'dMention',\n})\nexport class MentionDirective implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n  get nativeElement() {\n    return this.el.nativeElement;\n  }\n\n  constructor(\n    private el: ElementRef,\n    private viewContainerRef: ViewContainerRef,\n    private cdr: ChangeDetectorRef,\n    private overlay: Overlay\n  ) {}\n  @Input() mentionNotFoundContent = 'No suggestion matched';\n\n  @Input() mentionSuggestions = [];\n\n  @Input() mentionLoading = false;\n\n  @Input() mentionTrigger = ['@'];\n\n  @Input() mentionPosition: MentionPositionType = 'bottom';\n\n  @Input() mentionItemTemplate: TemplateRef<any>;\n\n  @Output() mentionSelectItem = new EventEmitter();\n\n  @Output() mentionSearchChange: EventEmitter<MentionOnSearchTypes> = new EventEmitter();\n\n  @Output() mentionAfterMentionInit: EventEmitter<MentionDirective> = new EventEmitter();\n\n  private value = '';\n  private previousValue = '';\n  private cursorMention: any;\n  private cursorMentionStart: number;\n  private cursorMentionEnd: number;\n  private cursorEnd: number;\n  private overlayRef: OverlayRef | null = null;\n  private portal?: ComponentPortal<MentionComponent>;\n  private positionStrategy!: FlexibleConnectedPositionStrategy;\n  private mentionRef: ComponentRef<MentionComponent>;\n  private filterSuggestions = [];\n\n  isOpen = false;\n\n  activeIndex = -1;\n\n  unsubscribe$ = new Subject();\n\n  defaultNotFoundText = '';\n\n  @Input() mentionValueParse: (value: string) => string = (value) => value;\n\n  @HostListener('keydown', ['$event'])\n  onKeyDown(event) {\n    if (this.mentionRef) {\n      const keyCode = event.keyCode;\n      if (this.isOpen && keyCode === ENTER && this.activeIndex !== -1 && this.filterSuggestions.length) {\n        this.selectSuggestion(this.filterSuggestions[this.activeIndex]);\n        event.preventDefault();\n      } else if (keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW) {\n        if (keyCode === LEFT_ARROW) {\n          this.cursorMentionStart = this.cursorMentionStart - 1;\n        } else {\n          this.cursorMentionStart = this.cursorMentionStart + 1;\n        }\n        event.stopPropagation();\n        setTimeout(() => {\n          this.resetMention();\n        });\n      } else {\n        if (this.isOpen && (keyCode === TAB || keyCode === ESCAPE)) {\n          this.hideMention();\n          return;\n        }\n\n        if (this.isOpen && keyCode === UP_ARROW) {\n          event.preventDefault();\n          event.stopPropagation();\n          this.setPreviousItemActive();\n        }\n\n        if (this.isOpen && keyCode === DOWN_ARROW) {\n          event.preventDefault();\n          event.stopPropagation();\n          this.setNextItemActive();\n        }\n      }\n      this.setMentionData();\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  onClick(e) {\n    if (this.overlayRef && this.isOpen) {\n      if (!this.nativeElement.contains(e.target)) {\n        this.hideMention();\n      }\n    } else if (this.nativeElement.contains(e.target)) {\n      this.resetMention();\n    }\n  }\n\n  ngOnInit(): void {\n    this.mentionAfterMentionInit.emit(this);\n  }\n\n  ngAfterViewInit(): void {\n    fromEvent(this.el.nativeElement, 'input')\n      .pipe(debounceTime(300))\n      .subscribe(() => {\n        this.resetMention();\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (Object.prototype.hasOwnProperty.call(changes, 'mentionSuggestions')) {\n      if (this.isOpen) {\n        this.previousValue = null;\n        this.activeIndex = -1;\n        this.resetMention(false);\n      }\n    }\n  }\n\n  resetMention(emit = true) {\n    this.checkMention();\n    if (!this.cursorMention) {\n      this.hideMention();\n      return;\n    }\n    this.suggestionsFilter(this.cursorMention, emit);\n    const activeIndex = this.filterSuggestions.indexOf(this.cursorMention.substring(1));\n    this.activeIndex = activeIndex >= 0 ? activeIndex : 0;\n    this.showMention();\n  }\n\n  checkMention() {\n    const value = this.nativeElement.value.replace(/[\\r\\n]/g, ' ') || '';\n    const selectionStart = this.nativeElement.selectionStart;\n    let i = this.mentionTrigger.length;\n    while (i >= 0) {\n      const startPos = value.lastIndexOf(this.mentionTrigger[i], selectionStart);\n      const endPos = value.indexOf(' ', selectionStart) > -1 ? value.indexOf(' ', selectionStart) : value.length;\n      const mention = value.substring(startPos, selectionStart);\n      if (\n        (startPos > 0 && value[startPos - 1] !== ' ') ||\n        startPos < 0 ||\n        mention.includes(this.mentionTrigger[i], 1) ||\n        mention.includes(' ')\n      ) {\n        this.cursorMention = null;\n        this.cursorMentionStart = -1;\n        this.cursorMentionEnd = -1;\n        this.cursorEnd = -1;\n        this.value = '';\n      } else {\n        this.cursorMention = mention[0];\n        this.cursorMentionStart = startPos;\n        this.cursorMentionEnd = endPos;\n        this.cursorEnd = selectionStart;\n        this.value = mention.slice(1);\n        return;\n      }\n      i--;\n    }\n  }\n\n  hideMention() {\n    if (this.overlayRef && this.overlayRef.hasAttached()) {\n      this.overlayRef.detach();\n      this.cdr.markForCheck();\n      this.isOpen = false;\n    }\n  }\n\n  showMention() {\n    this.attachOverlay();\n    this.isOpen = true;\n    this.cdr.markForCheck();\n  }\n\n  attachOverlay() {\n    if (!this.overlayRef) {\n      this.portal = new ComponentPortal(MentionComponent, this.viewContainerRef);\n      this.overlayRef = this.overlay.create(this.getOverlayConfig());\n    }\n    if (this.overlayRef && !this.overlayRef.hasAttached()) {\n      this.mentionRef = this.overlayRef.attach(this.portal);\n      this.mentionRef.instance.mentionItemTemplate = this.mentionItemTemplate;\n      this.mentionRef.instance.mentionNotFoundContent = this.mentionNotFoundContent;\n    }\n    this.updatePositions();\n  }\n\n  getOverlayConfig() {\n    const target = this.el;\n    return new OverlayConfig({\n      positionStrategy: this.getOverlayPosition(target),\n      scrollStrategy: this.overlay.scrollStrategies.reposition(),\n      disposeOnNavigation: true,\n    });\n  }\n\n  getOverlayPosition(target) {\n    const positions = [\n      new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'start', overlayY: 'top' }),\n      new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'start', overlayY: 'bottom' }),\n    ];\n    this.positionStrategy = this.overlay\n      .position()\n      .flexibleConnectedTo(target)\n      .withPositions(positions)\n      .withFlexibleDimensions(false)\n      .withPush(false);\n    return this.positionStrategy;\n  }\n\n  updatePositions() {\n    const coordinates = getCaretCoordinates(this.nativeElement, this.cursorEnd);\n    const top = coordinates.top - this.nativeElement.getBoundingClientRect().height - this.nativeElement.scrollTop;\n    const left = coordinates.left - this.nativeElement.scrollLeft;\n    this.positionStrategy.withDefaultOffsetX(left).withDefaultOffsetY(top);\n    this.positionStrategy.withPositions([...DEFAULT_MENTION_BOTTOM_POSITIONS]);\n    this.positionStrategy.apply();\n    this.setMentionData();\n  }\n\n  suggestionsFilter(value: string, emit: boolean) {\n    if (this.previousValue === value && value !== this.cursorMention[0]) {\n      return;\n    }\n    this.previousValue = value;\n    if (emit) {\n      this.mentionSearchChange.emit({\n        value: this.value,\n        trigger: this.cursorMention,\n      });\n    }\n    const searchValue = this.value.toLowerCase();\n    this.filterSuggestions = this.mentionSuggestions.filter((suggestion) =>\n      this.mentionValueParse(suggestion).toLowerCase().includes(searchValue)\n    );\n  }\n\n  setMentionData() {\n    Object.assign(this.mentionRef.instance, {\n      suggestions: this.filterSuggestions,\n      activeIndex: this.activeIndex,\n      loading: this.mentionLoading,\n      trigger: this,\n      position: this.mentionPosition,\n    });\n  }\n\n  selectSuggestion(suggestion) {\n    const value = this.mentionValueParse(suggestion);\n    this.insertMention({\n      mention: value,\n      startPos: this.cursorMentionStart,\n      endPos: this.cursorMentionEnd,\n    });\n    this.mentionSelectItem.emit(suggestion);\n    this.hideMention();\n    this.activeIndex = -1;\n  }\n\n  insertMention(mention: Mention) {\n    const value: string = this.el.nativeElement.value;\n    const insertValue = mention.mention.trim() + ' ';\n    const newValue = [value.slice(0, mention.startPos + 1), insertValue, value.slice(mention.endPos, value.length)].join('');\n    this.el.nativeElement.value = newValue;\n    this.value = newValue;\n  }\n\n  setPreviousItemActive() {\n    this.activeIndex = this.activeIndex - 1 < 0 ? this.filterSuggestions.length - 1 : this.activeIndex - 1;\n    this.cdr.markForCheck();\n    setTimeout(() => {\n      if (this.mentionRef) {\n        this.mentionRef.instance.scrollToFocusItem();\n      }\n    });\n  }\n\n  setNextItemActive() {\n    this.activeIndex = this.activeIndex + 1 <= this.filterSuggestions.length - 1 ? this.activeIndex + 1 : 0;\n    this.cdr.markForCheck();\n    setTimeout(() => {\n      if (this.mentionRef) {\n        this.mentionRef.instance.scrollToFocusItem();\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { LoadingModule } from 'ng-devui/loading';\nimport { MentionComponent } from './mention.component';\nimport { MentionDirective } from './mention.directive';\n\n@NgModule({\n  imports: [CommonModule, LoadingModule],\n  declarations: [MentionComponent, MentionDirective],\n  exports: [MentionComponent, MentionDirective]\n})\nexport class MentionModule {}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MentionService {\n\n  subs = new Subject();\n\n  scrollSubs = new Subject();\n\n  constructor() {}\n\n  selectSuggestion (suggestion) {\n    this.subs.next(suggestion);\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}