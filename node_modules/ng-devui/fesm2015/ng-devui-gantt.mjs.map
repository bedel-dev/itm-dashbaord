{"version":3,"file":"ng-devui-gantt.mjs","sources":["../../devui/gantt/gantt.model.ts","../../devui/gantt/gantt.service.ts","../../devui/gantt/gantt-bar-parent/gantt-bar-parent.component.ts","../../devui/gantt/gantt-bar-parent/gantt-bar-parent.component.html","../../devui/gantt/gantt-bar/gantt-bar.component.ts","../../devui/gantt/gantt-bar/gantt-bar.component.html","../../devui/gantt/gantt-marker.directive.ts","../../devui/gantt/gantt-milestone/gantt-milestone.component.ts","../../devui/gantt/gantt-milestone/gantt-milestone.component.html","../../devui/gantt/gantt-scale/gantt-scale.component.ts","../../devui/gantt/gantt-scale/gantt-scale.component.html","../../devui/gantt/gantt-tools/gantt-tools.component.ts","../../devui/gantt/gantt-tools/gantt-tools.component.html","../../devui/gantt/resize-handle.directive.ts","../../devui/gantt/gantt.module.ts","../../devui/gantt/ng-devui-gantt.ts"],"sourcesContent":["export interface GanttScaleDateInfo {\n  dayOfMonthLabel: string;\n  dayOfWeekLabel: string;\n  monthLabel: string;\n  yearLabel: string;\n  date: Date;\n  monthStart?: boolean;\n  weekend?: boolean;\n  today?: boolean;\n  highlight?: boolean;\n  highlightStart?: boolean;\n  milestone?: string;\n  scaleStartVisable?: boolean;\n  index?: number;\n}\n\nexport enum GanttScaleUnit {\n  day = 'day',\n  week = 'week',\n  month = 'month',\n}\nexport interface GanttBarStatus {\n  focused: boolean;\n  startDate: Date;\n  endDate: Date;\n}\n\nexport interface GanttScaleConfig {\n  startDate?: Date;\n  endDate?: Date;\n  unit?: GanttScaleUnit;\n  viewChange?: boolean;\n}\n\nexport enum GanttMarkerType {\n  milestone = 'milestone',\n  month = 'month',\n  week = 'week',\n}\n\nexport interface GanttMilestone {\n  date: Date;\n  lable: string;\n}\n\nexport interface GanttTaskInfo {\n  id: string;\n  startDate: Date;\n  endDate: Date;\n  title?: string;\n  progress: string;\n  duration: string;\n  moveOffset?: number;\n  left?: number;\n  width?: number;\n}\n\nexport enum UnitRole {\n  day = 10,\n  week = 20,\n  month = 30,\n}\n","import { Injectable } from '@angular/core';\nimport { fromEvent, merge, Observable, ReplaySubject, Subject } from 'rxjs';\nimport { pluck } from 'rxjs/operators';\nimport { GanttBarStatus, GanttScaleConfig, GanttScaleUnit } from './gantt.model';\n\n@Injectable()\nexport class GanttService {\n  static DAY_DURATION = 24 * 60 * 60 * 1000;\n  scaleUnit = GanttScaleUnit.day;\n  scaleStartDate: Date;\n  scaleEndDate: Date;\n  ganttBarStatusChange = new Subject<GanttBarStatus>();\n  ganttScaleConfigChange = new ReplaySubject<GanttScaleConfig>(1);\n\n  mouseDownListener: Observable<number>;\n  mouseMoveListener = new Observable();\n  mouseEndListener = new Observable();\n\n  constructor() {}\n  changeGanttBarStatus(status: GanttBarStatus) {\n    this.ganttBarStatusChange.next(status);\n  }\n\n  registContainerEvents(scrollContainer: HTMLElement) {\n    // 背景拖拽\n    this.mouseDownListener = fromEvent(scrollContainer, 'mousedown').pipe(pluck<Event, number>('pageX'));\n\n    this.mouseMoveListener = fromEvent(scrollContainer, 'mousemove').pipe(pluck<Event, number>('pageX'));\n\n    this.mouseEndListener = merge(fromEvent(scrollContainer, 'mouseup'), fromEvent(scrollContainer, 'mouseout')).pipe(\n      pluck<Event, number>('pageX')\n    );\n  }\n\n  changeGanttScaleConfig(status: GanttScaleConfig) {\n    this.ganttScaleConfigChange.next(status);\n  }\n\n  setScaleConfig(config: GanttScaleConfig) {\n    if (config.startDate) {\n      this.scaleStartDate = config.startDate;\n    }\n    if (config.endDate) {\n      this.scaleEndDate = config.endDate;\n    }\n    if (config.unit) {\n      this.scaleUnit = config.unit;\n    }\n    this.changeGanttScaleConfig(config);\n  }\n\n  getScaleUnitPixel() {\n    switch (this.scaleUnit) {\n    case GanttScaleUnit.day:\n      return 40;\n      break;\n    case GanttScaleUnit.week:\n      return 30;\n      break;\n    case GanttScaleUnit.month:\n      return 20;\n      break;\n    default:\n      break;\n    }\n  }\n\n  getDatePostionOffset(date: Date): number {\n    if (date && this.scaleStartDate) {\n      const timeOffset = date.getTime() - this.scaleStartDate.getTime();\n      const units = timeOffset / GanttService.DAY_DURATION;\n      return units * this.getScaleUnitPixel();\n    }\n  }\n\n  getDuration(startDate: Date, endDate: Date): number {\n    if (startDate && endDate) {\n      const timeOffset = endDate.getTime() - startDate.getTime();\n      const duration = timeOffset / GanttService.DAY_DURATION + 1;\n      return Math.round(duration);\n    }\n  }\n\n  getDurationWidth(startDate: Date, endDate: Date): number {\n    if (startDate && endDate) {\n      const duration = this.getDuration(startDate, endDate);\n      return duration * this.getScaleUnitPixel();\n    }\n  }\n\n  isSomeDate(date: Date, compareDate: Date) {\n    if (date.getFullYear() !== compareDate.getFullYear()) {\n      return false;\n    }\n\n    if (date.getMonth() !== compareDate.getMonth()) {\n      return false;\n    }\n\n    if (date.getDate() !== compareDate.getDate()) {\n      return false;\n    }\n    return true;\n  }\n\n  roundDate(date: Date) {\n    if (date.getHours() >= 12) {\n      date.setDate(date.getDate() + 1);\n      date.setHours(0, 0, 0);\n    } else if (date.getHours() < 12) {\n      date.setHours(0, 0, 0);\n    }\n  }\n\n  unRegistContainerEvents() {}\n}\n","import {\n  AfterViewInit, ChangeDetectorRef, Component, ElementRef, Input, OnChanges, OnDestroy, OnInit,\n  SimpleChanges, ViewChild\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { GanttService } from '../gantt.service';\n\n@Component({\n  selector: 'd-gantt-bar-parent',\n  templateUrl: './gantt-bar-parent.component.html',\n  styleUrls: ['./gantt-bar-parent.component.scss']\n})\nexport class GanttBarParentComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\n  @ViewChild('ganttBarProgress') ganttBarProgress: ElementRef;\n  @ViewChild('ganttBarTrack') ganttBarTrack: ElementRef;\n  @ViewChild('ganttBarRail') ganttBarRail: ElementRef;\n  @Input() startDate: Date;\n  @Input() endDate: Date;\n  @Input() progressRate = 0;\n  @Input() data: any;\n  @Input() id: string;\n  @Input() tip: string;\n\n  private ganttScaleStatusHandler: Subscription;\n  public tipHovered = false;\n  percentage: number;\n  left = 0;\n  width = 0;\n  private max = 100;\n  private min = 0;\n  public duration: string;\n\n  constructor(private cdr: ChangeDetectorRef, private ganttService: GanttService) { }\n\n  ngOnInit() {\n    if (this.progressRate === null) {\n      this.setValue(this.ensureValueInRange(null));\n    }\n    this.duration = this.ganttService.getDuration(this.startDate, this.endDate) + 'd';\n\n    this.ganttScaleStatusHandler = this.ganttService.ganttScaleConfigChange.subscribe((config) => {\n      if (config.startDate) {\n        this.left = this.ganttService.getDatePostionOffset(this.startDate);\n      }\n      if (config.unit) {\n        this.left = this.ganttService.getDatePostionOffset(this.startDate);\n        this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['progressRate'] && this.progressRate > 0) {\n      this.updateTrackAndHandle();\n    }\n\n    if (changes['startDate']) {\n      this.left = this.ganttService.getDatePostionOffset(this.startDate);\n      this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n    }\n\n    if (changes['endDate']) {\n      this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.progressRate && this.progressRate > 0) {\n      this.updateTrackAndHandle();\n    }\n  }\n\n  private setValue(value: number | null): void {\n    if (this.progressRate !== value) {\n      this.progressRate = value;\n      this.updateTrackAndHandle();\n    }\n  }\n\n  private ensureValueInRange(value: number | null): number {\n    let safeValue;\n    if (!this.valueMustBeValid(value)) {\n      safeValue = this.min;\n    } else {\n      safeValue = this.clamp(this.min, value as number, this.max);\n    }\n    return safeValue;\n  }\n\n  private valueMustBeValid(value: number): boolean {\n    return !isNaN(typeof value !== 'number' ? parseFloat(value) : value);\n  }\n\n  private clamp(min: number, n: number, max: number) {\n    return Math.max(min, Math.min(n, max));\n  }\n\n  private updateTrackAndHandle(): void {\n    const value = this.progressRate;\n    const offset = this.valueToOffset(value);\n    this.updateStyle(offset / 100);\n    this.cdr.markForCheck();\n  }\n\n  private valueToOffset(value: number): number {\n    return ((value - this.min) / (this.max - this.min)) * 100;\n  }\n\n  private updateStyle(percentage) {\n    this.percentage = Math.min(1, Math.max(0, percentage));\n    if (this.ganttBarTrack && this.ganttBarTrack.nativeElement) {\n      this.ganttBarTrack.nativeElement.style.width = `${this.percentage * 100}%`;\n    }\n\n    if (this.ganttBarProgress && this.ganttBarProgress.nativeElement) {\n      this.ganttBarProgress.nativeElement.style.left = `${this.percentage * 100}%`;\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.ganttScaleStatusHandler) {\n      this.ganttScaleStatusHandler.unsubscribe();\n      this.ganttScaleStatusHandler = null;\n    }\n  }\n}\n","<div\n  *ngIf=\"startDate && endDate\"\n  #ganttBar\n  class=\"devui-gantt-bar-parent\"\n  [style.left]=\"left + 'px'\"\n  [style.width]=\"width + 'px'\"\n  dTooltip\n  [content]=\"tip\"\n>\n  <div class=\"devui-gantt-bar-rail\" #ganttBarRail></div>\n  <div class=\"devui-gantt-bar-track\" [ngClass]=\"{ head: percentage > 0, tail: percentage === 1 }\" #ganttBarTrack></div>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, pluck, takeUntil, tap } from 'rxjs/operators';\nimport { GanttTaskInfo } from '../gantt.model';\nimport { GanttService } from '../gantt.service';\n\n@Component({\n  selector: 'd-gantt-bar',\n  templateUrl: './gantt-bar.component.html',\n  styleUrls: ['./gantt-bar.component.scss'],\n})\nexport class GanttBarComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n  private moveBarStartListener: Observable<number>;\n  private resizeBarLeftStartListener: Observable<number>;\n  private resizeBarRightStartListener: Observable<number>;\n  private dragProgressStartListener: Observable<number>;\n  private mouseMoveListener: Observable<number>;\n  private mouseEndListener: Observable<Event>;\n\n  private moveBarStartHandler: Subscription | null;\n  private resizeBarLeftStartHandler: Subscription | null;\n  private resizeBarRightStartHandler: Subscription | null;\n  private dragProgressStartHandler: Subscription | null;\n  private mouseMoveHandler: Subscription | null;\n  private mouseEndHandler: Subscription | null;\n  private mouseOverProgressHandler: Subscription | null;\n  private mouseLeaveProgressHandler: Subscription | null;\n  mouseMoveTimer: any = null;\n  mouseLeaveTimer: any = null;\n\n  dragProgressStart: boolean;\n  moveBarStart: boolean;\n  private resizeBarLeftStart: boolean;\n  private resizeBarRightStart: boolean;\n\n  private barMoveStartPageX: number;\n  private barResizeStartPageX: number;\n  private barOriginLeft: number;\n  private barOriginWidth: string;\n  private originStartDate: Date;\n  private originEndDate: Date;\n\n  private barHovering = false;\n  private progressHovering = false;\n\n  private ganttScaleStatusHandler: Subscription;\n  public focused = false;\n  private MIN_WIDTH = 10;\n  left = 0;\n  width = 0;\n  private EARLYOFFSET = 3;\n\n  cdkOverlayOffsetX = 0;\n\n  @ViewChild('ganttBar') ganttBar: ElementRef;\n  @ViewChild('ganttBarMain') ganttBarMain: ElementRef;\n  @ViewChild('ganttBarProgress') ganttBarProgress: ElementRef;\n  @ViewChild('ganttBarTrack') ganttBarTrack: ElementRef;\n  @ViewChild('ganttBarRail') ganttBarRail: ElementRef;\n  @ViewChild('ganttBarDarggerLeft') ganttBarDarggerLeft: ElementRef;\n  @ViewChild('ganttBarDarggerRight') ganttBarDarggerRight: ElementRef;\n  private max = 100;\n  private min = 0;\n  private step = 1;\n  private mouseEventDalay = 100;\n\n  public duration: string;\n  public tipHovered = false;\n  public mouseMoveOnBar = false;\n  percentage: number;\n  private movedOut = false;\n  private mouseenterHandler: Subscription;\n  private mouseleaveHandler: Subscription;\n  private scrollTimer = null;\n  private SCROLL_STEP = 10;\n  private outDirection = 'right';\n  private scrollViewRange = [0, 0];\n\n  @Input() barMoveDisabled = false;\n  @Input() barResizeDisabled = false;\n  @Input() progressDisabled = false;\n\n  @Input() startDate: Date;\n  @Input() endDate: Date;\n  @Input() progressRate = 0;\n  @Input() tipTemplateRef: TemplateRef<any>;\n  @Input() data: any;\n\n  @Input() originOffsetX = 0;\n\n  @Input() id: string;\n\n  @Input() title: string;\n\n  @Input() showTitle = false;\n\n  @Input() customBarClass = '';\n\n  @Input() customBgClass = '';\n\n  @Input() customTitleClass = '';\n\n  @Input() scrollElement: HTMLElement;\n\n  @Output() barMoveStartEvent = new EventEmitter<GanttTaskInfo>();\n  @Output() barMovingEvent = new EventEmitter<GanttTaskInfo>();\n  @Output() barMoveEndEvent = new EventEmitter<GanttTaskInfo>();\n\n  @Output() barResizeStartEvent = new EventEmitter<GanttTaskInfo>();\n  @Output() barResizingEvent = new EventEmitter<GanttTaskInfo>();\n  @Output() barResizeEndEvent = new EventEmitter<GanttTaskInfo>();\n\n  @Output() barProgressEvent = new EventEmitter<number>();\n\n  constructor(private cdr: ChangeDetectorRef, private ganttService: GanttService, private ele: ElementRef) {}\n\n  ngOnInit() {\n    this.checkRangeValues(this.min, this.max);\n    this.checkStepValue();\n    if (this.progressRate === null) {\n      this.setValue(this.ensureValueInRange(null));\n    }\n    this.originStartDate = this.startDate;\n    this.originEndDate = this.endDate;\n    this.duration = this.ganttService.getDuration(this.startDate, this.endDate) + 'd';\n\n    this.ganttScaleStatusHandler = this.ganttService.ganttScaleConfigChange.subscribe((config) => {\n      if (config.startDate) {\n        this.left = this.ganttService.getDatePostionOffset(this.startDate);\n      }\n      if (config.unit) {\n        this.left = this.ganttService.getDatePostionOffset(this.startDate);\n        this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (Object.prototype.hasOwnProperty.call(changes, 'min')\n      || Object.prototype.hasOwnProperty.call(changes, 'max')\n      || Object.prototype.hasOwnProperty.call(changes, 'step')) {\n      this.checkRangeValues(this.min, this.max);\n      this.checkStepValue();\n    }\n\n    if (changes['progressRate'] && this.progressRate >= 0) {\n      this.updateTrackAndHandle();\n    }\n\n    if (changes['startDate']) {\n      this.left = this.ganttService.getDatePostionOffset(this.startDate);\n      this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n    }\n\n    if (changes['endDate']) {\n      this.width = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n    }\n\n    if (changes['barMoveDisabled']) {\n      if (this.barMoveDisabled) {\n        this.unsubscribeMouseActions(['start'], ['barMove']);\n      } else {\n        this.subscribeMouseActions(['start'], ['barMove']);\n      }\n    }\n\n    if (changes['barResizeDisabled']) {\n      if (this.barResizeDisabled) {\n        this.unsubscribeMouseActions(['start'], ['barResize']);\n      } else {\n        this.subscribeMouseActions(['start'], ['barResize']);\n      }\n    }\n\n    if (changes['progressDisabled']) {\n      if (this.progressDisabled) {\n        this.unsubscribeMouseActions(['start'], ['progress']);\n      } else {\n        this.subscribeMouseActions(['start'], ['progress']);\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.startDate && this.endDate) {\n      this.registerMouseEventsListeners();\n      this.registerHandleHoverPopoverListener();\n      if (!this.barMoveDisabled) {\n        this.subscribeMouseActions(['start'], ['barMove']);\n      }\n\n      if (!this.barResizeDisabled) {\n        this.subscribeMouseActions(['start'], ['barResize']);\n      }\n\n      if (!this.progressDisabled) {\n        this.subscribeMouseActions(['start'], ['progress']);\n      }\n    }\n\n    if (this.progressRate && this.progressRate > 0) {\n      this.updateTrackAndHandle();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  writeValue(newValue: number): void {\n    this.setValue(this.ensureValueInRange(newValue));\n  }\n\n  private onTouchedCallback = (v: any) => {};\n\n  private onChangeCallback = (v: any) => {};\n\n  private checkRangeValues(minValue, maxValue) {\n    if (maxValue <= minValue) {\n      throw new Error(`max value must be greater than min value`);\n    }\n  }\n\n  private checkStepValue() {\n    if (this.step < 0 || !this.step) {\n      throw new Error('step value must be greater than 0.');\n    } else if ((this.max - this.min) % this.step) {\n      throw new Error('(max - min) must be divisible by step.');\n    }\n  }\n\n  private ratioToValue(ratio: number, min: number, max: number, step: number): number {\n    let value = (max - min) * ratio + min;\n    if (step > 0) {\n      value = Math.round(value / step) * step;\n    }\n    return this.clamp(min, value, max);\n  }\n\n  private convertHandlePositionToRatio(handleX: number, startX: number, totalLength: number): number {\n    return this.clamp(0, (handleX - startX) / totalLength, 1);\n  }\n\n  private clamp(min: number, n: number, max: number) {\n    return Math.max(min, Math.min(n, max));\n  }\n\n  private updateStyle(percentage) {\n    this.percentage = Math.min(1, Math.max(0, percentage));\n    if (this.ganttBarTrack && this.ganttBarTrack.nativeElement) {\n      this.ganttBarTrack.nativeElement.style.width = `${this.percentage * 100}%`;\n    }\n\n    if (this.ganttBarProgress && this.ganttBarProgress.nativeElement) {\n      this.ganttBarProgress.nativeElement.style.left = `${this.percentage * 100}%`;\n    }\n  }\n\n  private registerMouseEventsListeners(): void {\n    this.moveBarStartListener = fromEvent(this.ganttBarMain.nativeElement, 'mousedown').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }),\n      pluck<Event, number>('pageX')\n    );\n\n    this.dragProgressStartListener = fromEvent(this.ganttBarProgress.nativeElement, 'mousedown').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }),\n      pluck<Event, number>('pageX'),\n      map((position: number) => this.mousePositionToAdaptiveValue(position))\n    );\n\n    this.resizeBarLeftStartListener = fromEvent(this.ganttBarDarggerLeft.nativeElement, 'mousedown').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }),\n      pluck<Event, number>('pageX')\n    );\n\n    this.resizeBarRightStartListener = fromEvent(this.ganttBarDarggerRight.nativeElement, 'mousedown').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }),\n      pluck<Event, number>('pageX')\n    );\n\n    this.mouseEndListener = fromEvent(document, 'mouseup');\n    this.mouseMoveListener = fromEvent(document, 'mousemove').pipe(\n      tap((e: Event) => {\n        e.stopPropagation();\n        e.preventDefault();\n      }),\n      pluck<Event, number>('pageX'),\n      distinctUntilChanged(),\n      takeUntil(this.mouseEndListener)\n    );\n  }\n\n  private getSliderPagePosition(): number {\n    const rect = this.ganttBar.nativeElement.getBoundingClientRect();\n    const window = this.ganttBar.nativeElement.ownerDocument.defaultView;\n    return rect.left + window.pageXOffset;\n  }\n\n  private getRailLength(): number {\n    return this.ganttBarRail.nativeElement.clientWidth;\n  }\n\n  private mousePositionToAdaptiveValue(handleX: number): number {\n    const sliderStartX = this.getSliderPagePosition();\n    const sliderLength = this.getRailLength();\n    const ratio = this.convertHandlePositionToRatio(handleX, sliderStartX, sliderLength);\n    const value = this.ratioToValue(ratio, this.min, this.max, this.step);\n    return parseFloat(value.toFixed(this.getDecimals(this.step)));\n  }\n\n  private getDecimals(value: number): number {\n    const valueString = value.toString();\n    const integerLength = valueString.indexOf('.') + 1;\n    return integerLength >= 0 ? valueString.length - integerLength : 0;\n  }\n\n  private progressStartDrag(value: number): void {\n    this.dragProgressStart = true;\n    this.handleController(true);\n    this.setValue(value);\n  }\n\n  private barStartMoving(value: number): void {\n    this.scrollViewRange = [\n      this.scrollElement.getBoundingClientRect().left + this.originOffsetX,\n      this.scrollElement.getBoundingClientRect().right,\n    ];\n    this.moveBarStart = true;\n    this.barMoveStartPageX = value;\n    this.barOriginLeft = parseInt(this.ganttBar.nativeElement.style.left, 10);\n    this.handleController(true);\n    this.barMoveStartEvent.emit(this.getGanttTaskInfo());\n  }\n\n  private barLeftStartResizing(value: number): void {\n    this.resizeBarLeftStart = true;\n    this.barResizeStartPageX = value;\n    this.barOriginLeft = parseInt(this.ganttBar.nativeElement.style.left, 10);\n    this.barOriginWidth = this.ganttBar.nativeElement.style.width;\n    this.handleController(true);\n    this.barResizeStartEvent.emit(this.getGanttTaskInfo());\n  }\n\n  private barRightStartResizing(value: number): void {\n    this.resizeBarRightStart = true;\n    this.barResizeStartPageX = value;\n    this.barOriginLeft = parseInt(this.ganttBar.nativeElement.style.left, 10);\n    this.barOriginWidth = this.ganttBar.nativeElement.style.width;\n    this.handleController(true);\n    this.barResizeStartEvent.emit(this.getGanttTaskInfo());\n  }\n\n  private mouseMoving(value: number): void {\n    if (this.dragProgressStart) {\n      this.setValue(this.mousePositionToAdaptiveValue(value));\n      this.cdr.markForCheck();\n    }\n\n    if (this.resizeBarLeftStart) {\n      this.mouseMoveOnBar = true;\n      const offset = value - this.barResizeStartPageX;\n      const finalWidth = parseInt(this.barOriginWidth, 10) - Math.round(offset);\n\n      if (finalWidth < this.MIN_WIDTH) {\n        return;\n      }\n\n      const timeOffset = Math.round((offset / this.ganttService.getScaleUnitPixel()) * GanttService.DAY_DURATION);\n      this.startDate = new Date(this.originStartDate.getTime() + timeOffset);\n      this.ganttService.roundDate(this.startDate);\n      if (this.endDate < this.startDate) {\n        this.startDate = this.endDate;\n      }\n\n      const earlyDateTime = this.startDate.getTime() - this.EARLYOFFSET * GanttService.DAY_DURATION;\n      if (offset < 0 && earlyDateTime < this.ganttService.scaleStartDate.getTime()) {\n        this.ganttService.setScaleConfig({ startDate: new Date(earlyDateTime) });\n        this.barOriginLeft = this.EARLYOFFSET * this.ganttService.getScaleUnitPixel() - Math.round(offset);\n      }\n      const finalLeft = this.barOriginLeft + Math.round(offset);\n      this.left = finalLeft;\n\n      this.width = finalWidth;\n      this.dispatchGanttBarStatus();\n      const info = this.getGanttTaskInfo();\n      info.moveOffset = offset;\n      this.barResizingEvent.emit(info);\n    }\n\n    if (this.resizeBarRightStart) {\n      this.mouseMoveOnBar = true;\n      const offset = value - this.barResizeStartPageX;\n      const finalWidth = parseInt(this.barOriginWidth, 10) + Math.round(offset);\n\n      if (finalWidth < this.MIN_WIDTH) {\n        return;\n      }\n\n      const timeOffset = Math.round((offset / this.ganttService.getScaleUnitPixel()) * GanttService.DAY_DURATION);\n      this.endDate = new Date(this.originEndDate.getTime() + timeOffset);\n      this.ganttService.roundDate(this.endDate);\n      if (this.endDate < this.startDate) {\n        this.endDate = this.startDate;\n      }\n\n      const lateDateTime = this.endDate.getTime() + this.EARLYOFFSET * GanttService.DAY_DURATION;\n      if (offset > 0 && lateDateTime > this.ganttService.scaleEndDate.getTime()) {\n        this.ganttService.setScaleConfig({ endDate: new Date(lateDateTime) });\n      }\n\n      this.width = finalWidth;\n      this.dispatchGanttBarStatus();\n      const info = this.getGanttTaskInfo();\n      info.moveOffset = offset;\n      this.barResizingEvent.emit(info);\n    }\n\n    if (this.moveBarStart) {\n      this.checkIsOut(value);\n      if (this.movedOut) {\n        return;\n      }\n      this.mouseMoveOnBar = true;\n      const offset = value - this.barMoveStartPageX;\n\n      const timeOffset = Math.round((Math.round(offset) / this.ganttService.getScaleUnitPixel()) * GanttService.DAY_DURATION);\n\n      const newStartDate = new Date(this.originStartDate.getTime() + timeOffset);\n      this.ganttService.roundDate(newStartDate);\n      this.startDate = newStartDate;\n\n      const newEndDate = new Date(this.originEndDate.getTime() + timeOffset);\n      this.ganttService.roundDate(newEndDate);\n      this.endDate = newEndDate;\n\n      const earlyDateTime = this.startDate.getTime() - this.EARLYOFFSET * GanttService.DAY_DURATION;\n      const lateDateTime = this.endDate.getTime() + this.EARLYOFFSET * GanttService.DAY_DURATION;\n      if (earlyDateTime < this.ganttService.scaleStartDate.getTime()) {\n        this.ganttService.setScaleConfig({ startDate: new Date(earlyDateTime) });\n      } else if (lateDateTime > this.ganttService.scaleEndDate.getTime()) {\n        this.ganttService.setScaleConfig({ endDate: new Date(lateDateTime) });\n      }\n      const finalLeft = this.barOriginLeft + Math.round(offset);\n      this.left = finalLeft;\n\n      this.dispatchGanttBarStatus();\n      const info = this.getGanttTaskInfo();\n      info.moveOffset = offset;\n      this.barMovingEvent.emit(info);\n    }\n  }\n\n  private checkIsOut(value) {\n    this.outDirection = value - this.barMoveStartPageX > 0 ? 'right' : 'left';\n    if (this.outDirection === 'left') {\n      this.movedOut = value < this.scrollViewRange[0];\n    } else {\n      this.movedOut = value > this.scrollViewRange[1];\n    }\n    if (this.movedOut) {\n      this.autoScroll();\n    } else if (this.scrollTimer) {\n      const left =\n        this.outDirection === 'left'\n          ? this.scrollElement.scrollLeft + (value - this.scrollElement.getBoundingClientRect().left) - this.originOffsetX\n          : this.scrollElement.scrollLeft + this.scrollElement.clientWidth - this.originOffsetX;\n      this.setLeft(Math.round(left));\n      this.stopAutoScroll();\n      this.barMoveStartPageX = value;\n    }\n  }\n\n  private autoScroll() {\n    if (!this.scrollTimer) {\n      this.scrollTimer = setInterval(() => {\n        this.outDirection === 'left'\n          ? (this.scrollElement.scrollLeft -= this.SCROLL_STEP)\n          : (this.scrollElement.scrollLeft += this.SCROLL_STEP);\n      }, 10);\n    }\n  }\n\n  private stopAutoScroll() {\n    clearInterval(this.scrollTimer);\n    this.scrollTimer = null;\n  }\n\n  private setLeft(left) {\n    const offset = left - this.left;\n    const timeOffset = (Math.round(offset) / this.ganttService.getScaleUnitPixel()) * GanttService.DAY_DURATION;\n\n    const newStartDate = new Date(this.startDate.getTime() + timeOffset);\n    this.ganttService.roundDate(newStartDate);\n    this.startDate = newStartDate;\n\n    const newEndDate = new Date(this.endDate.getTime() + timeOffset);\n    this.ganttService.roundDate(newEndDate);\n    this.endDate = newEndDate;\n\n    this.originStartDate = this.startDate;\n    this.originEndDate = this.endDate;\n    this.barOriginLeft = left;\n    this.left = left;\n  }\n\n  private getGanttTaskInfo(): GanttTaskInfo {\n    this.duration = this.ganttService.getDuration(this.startDate, this.endDate) + 'd';\n    const progress = this.progressRate + '%';\n    const taskInfo = {\n      id: this.id,\n      startDate: this.startDate,\n      endDate: this.endDate,\n      duration: this.duration,\n      progress: progress,\n      left: this.left,\n      width: this.width,\n    };\n    return taskInfo;\n  }\n  private mouseStopMoving(): void {\n    this.mouseMoveOnBar = false;\n    this.ganttService.roundDate(this.startDate);\n    this.ganttService.roundDate(this.endDate);\n    this.originStartDate = this.startDate;\n    this.originEndDate = this.endDate;\n    const taskInfo = this.getGanttTaskInfo();\n    if (this.moveBarStart) {\n      const finalLeft = this.ganttService.getDatePostionOffset(this.startDate);\n      this.left = finalLeft > 0 ? finalLeft : 0;\n      this.barMoveEndEvent.emit(taskInfo);\n    }\n    if (this.resizeBarLeftStart) {\n      const finalLeft = this.ganttService.getDatePostionOffset(this.startDate);\n      const finalWidth = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n      this.left = finalLeft > 0 ? finalLeft : 0;\n      this.width = finalWidth;\n      this.barResizeEndEvent.emit(taskInfo);\n    }\n    if (this.resizeBarRightStart) {\n      const finalWidth = this.ganttService.getDurationWidth(this.startDate, this.endDate);\n      this.width = finalWidth;\n      this.barResizeEndEvent.emit(taskInfo);\n    }\n    if (this.dragProgressStart) {\n      this.barProgressEvent.emit(this.progressRate);\n    }\n    this.handleController(false);\n    this.stopAutoScroll();\n    this.cdr.markForCheck();\n  }\n\n  private subscribeMouseActions(\n    mouseActions: string[] = ['start', 'move', 'end'],\n    events: string[] = ['barMove', 'barResize', 'progress']\n  ): void {\n    if (\n      mouseActions.indexOf('start') !== -1 &&\n      this.dragProgressStartListener &&\n      !this.dragProgressStartHandler &&\n      events.indexOf('progress') !== -1\n    ) {\n      this.dragProgressStartHandler = this.dragProgressStartListener.subscribe(this.progressStartDrag.bind(this));\n    }\n\n    if (\n      mouseActions.indexOf('start') !== -1 &&\n      this.moveBarStartListener &&\n      !this.moveBarStartHandler &&\n      events.indexOf('barMove') !== -1\n    ) {\n      this.moveBarStartHandler = this.moveBarStartListener.subscribe(this.barStartMoving.bind(this));\n    }\n\n    if (\n      mouseActions.indexOf('start') !== -1 &&\n      this.resizeBarLeftStartListener &&\n      !this.resizeBarLeftStartHandler &&\n      events.indexOf('barResize') !== -1\n    ) {\n      this.resizeBarLeftStartHandler = this.resizeBarLeftStartListener.subscribe(this.barLeftStartResizing.bind(this));\n    }\n\n    if (\n      mouseActions.indexOf('start') !== -1 &&\n      this.resizeBarRightStartListener &&\n      !this.resizeBarRightStartHandler &&\n      events.indexOf('barResize') !== -1\n    ) {\n      this.resizeBarRightStartHandler = this.resizeBarRightStartListener.subscribe(this.barRightStartResizing.bind(this));\n    }\n\n    if (mouseActions.indexOf('move') !== -1 && this.mouseMoveListener && !this.mouseMoveHandler) {\n      this.mouseMoveHandler = this.mouseMoveListener.subscribe(this.mouseMoving.bind(this));\n    }\n\n    if (mouseActions.indexOf('end') !== -1 && this.mouseEndListener && !this.mouseEndHandler) {\n      this.mouseEndHandler = this.mouseEndListener.subscribe(this.mouseStopMoving.bind(this));\n    }\n  }\n\n  private unsubscribeMouseActions(\n    dragStages: string[] = ['start', 'move', 'end'],\n    events: string[] = ['barMove', 'barResize', 'progress']\n  ): void {\n    if (dragStages.indexOf('start') !== -1 && events.indexOf('progress') !== -1 && this.dragProgressStartHandler) {\n      this.dragProgressStartHandler.unsubscribe();\n      this.dragProgressStartHandler = null;\n    }\n\n    if (dragStages.indexOf('start') !== -1 && events.indexOf('barMove') !== -1 && this.moveBarStartHandler) {\n      this.moveBarStartHandler.unsubscribe();\n      this.moveBarStartHandler = null;\n    }\n\n    if (dragStages.indexOf('start') !== -1 && events.indexOf('barResize') !== -1 && this.resizeBarLeftStartHandler) {\n      this.resizeBarLeftStartHandler.unsubscribe();\n      this.resizeBarLeftStartHandler = null;\n    }\n\n    if (dragStages.indexOf('start') !== -1 && events.indexOf('barResize') !== -1 && this.resizeBarRightStartHandler) {\n      this.resizeBarRightStartHandler.unsubscribe();\n      this.resizeBarRightStartHandler = null;\n    }\n\n    if (dragStages.indexOf('move') !== -1 && this.mouseMoveHandler) {\n      this.mouseMoveHandler.unsubscribe();\n      this.mouseMoveHandler = null;\n    }\n\n    if (dragStages.indexOf('end') !== -1 && this.mouseEndHandler) {\n      this.mouseEndHandler.unsubscribe();\n      this.mouseEndHandler = null;\n    }\n  }\n\n  private handleController(movable: boolean): void {\n    if (movable) {\n      this.focused = this.focusController();\n      this.subscribeMouseActions(['move', 'end']);\n    } else {\n      this.dragProgressStart = false;\n      this.moveBarStart = false;\n      this.resizeBarLeftStart = false;\n      this.resizeBarRightStart = false;\n      this.focused = this.focusController();\n      this.unsubscribeMouseActions(['move', 'end']);\n    }\n  }\n\n  private setValue(value: number | null): void {\n    if (this.progressRate !== value) {\n      this.progressRate = value;\n      this.updateTrackAndHandle();\n    }\n    this.onChangeCallback(this.progressRate);\n  }\n\n  private ensureValueInRange(value: number | null): number {\n    let safeValue;\n    if (!this.valueMustBeValid(value)) {\n      safeValue = this.min;\n    } else {\n      safeValue = this.clamp(this.min, value as number, this.max);\n    }\n    return safeValue;\n  }\n\n  private updateTrackAndHandle(): void {\n    const value = this.progressRate;\n    const offset = this.valueToOffset(value);\n    this.updateStyle(offset / 100);\n    this.cdr.markForCheck();\n  }\n\n  private valueMustBeValid(value: number): boolean {\n    return !isNaN(typeof value !== 'number' ? parseFloat(value) : value);\n  }\n\n  private valueToOffset(value: number): number {\n    return ((value - this.min) / (this.max - this.min)) * 100;\n  }\n\n  private registerHandleHoverPopoverListener() {\n    const mouseOverProgressListener = fromEvent(this.ganttBarProgress.nativeElement, 'mouseover');\n    const mouseLeaveProgressListener = fromEvent(this.ganttBarProgress.nativeElement, 'mouseout');\n    this.mouseOverProgressHandler = mouseOverProgressListener.subscribe(this.ganttProgressPopoverOnMouseHover.bind(this));\n    this.mouseLeaveProgressHandler = mouseLeaveProgressListener.subscribe(this.ganttProgressPopoverOnMouseLeave.bind(this));\n  }\n\n  ganttBarPopoverOnMouseHover($event) {\n    if (this.mouseLeaveTimer) {\n      clearTimeout(this.mouseLeaveTimer);\n    }\n    this.mouseMoveTimer = setTimeout(() => {\n      const barLeft = this.ganttBar.nativeElement.getClientRects()[0].left;\n      const eventLeft = $event.clientX;\n      this.cdkOverlayOffsetX = eventLeft - barLeft;\n\n      this.barHovering = true;\n      this.focused = this.focusController();\n      this.dispatchGanttBarStatus();\n      this.cdr.markForCheck();\n    }, this.mouseEventDalay);\n  }\n\n  ganttBarPopoverOnMouseLeave() {\n    if (this.mouseMoveTimer) {\n      clearTimeout(this.mouseMoveTimer);\n    }\n    this.mouseLeaveTimer = setTimeout(() => {\n      this.barHovering = false;\n      this.focused = this.focusController();\n      this.dispatchGanttBarStatus();\n      this.cdr.markForCheck();\n    }, this.mouseEventDalay);\n  }\n\n  mouseLeaveTip() {\n    setTimeout(() => {\n      this.tipHovered = false;\n    }, this.mouseEventDalay);\n  }\n\n  private ganttProgressPopoverOnMouseHover() {\n    this.progressHovering = true;\n  }\n\n  private ganttProgressPopoverOnMouseLeave() {\n    this.progressHovering = false;\n  }\n\n  private unregisterHandleHoverTooltip() {\n    if (this.mouseOverProgressHandler) {\n      this.mouseOverProgressHandler.unsubscribe();\n      this.mouseOverProgressHandler = null;\n    }\n\n    if (this.mouseLeaveProgressHandler) {\n      this.mouseLeaveProgressHandler.unsubscribe();\n      this.mouseLeaveProgressHandler = null;\n    }\n  }\n\n  private clearTimer() {\n    if (this.mouseLeaveTimer) {\n      clearTimeout(this.mouseLeaveTimer);\n    }\n    if (this.mouseMoveTimer) {\n      clearTimeout(this.mouseMoveTimer);\n    }\n  }\n\n  private focusController() {\n    return this.dragProgressStart || this.moveBarStart || this.resizeBarLeftStart || this.resizeBarRightStart || this.barHovering;\n  }\n\n  dispatchGanttBarStatus() {\n    const status = {\n      focused: this.focused,\n      startDate: this.startDate,\n      endDate: this.endDate,\n    };\n    this.ganttService.changeGanttBarStatus(status);\n  }\n\n  ngOnDestroy(): void {\n    this.clearTimer();\n    this.unsubscribeMouseActions();\n    this.unregisterHandleHoverTooltip();\n    if (this.ganttScaleStatusHandler) {\n      this.ganttScaleStatusHandler.unsubscribe();\n      this.ganttScaleStatusHandler = null;\n    }\n  }\n}\n","<div\n  *ngIf=\"startDate && endDate\"\n  class=\"devui-gantt-bar {{ customBarClass }}\"\n  #ganttBar\n  cdk-overlay-origin\n  #progress=\"cdkOverlayOrigin\"\n  [style.left]=\"left + 'px'\"\n  [style.width]=\"width + 'px'\"\n  (mouseover)=\"ganttBarPopoverOnMouseHover($event)\"\n  (mouseleave)=\"ganttBarPopoverOnMouseLeave()\"\n>\n  <div class=\"devui-gantt-hover-layer\" [style.width]=\"width + 24 + 'px'\" [style.display]=\"focused ? 'block' : 'none'\">\n    <div #ganttBarDarggerLeft class=\"devui-gantt-dragger left\">\n      <div class=\"handle\" [ngClass]=\"{ disabled: barResizeDisabled }\"></div>\n    </div>\n    <div #ganttBarDarggerRight class=\"devui-gantt-dragger right\">\n      <div class=\"handle\" [ngClass]=\"{ disabled: barResizeDisabled }\"></div>\n    </div>\n  </div>\n  <div #ganttBarMain class=\"devui-gantt-main\" [ngClass]=\"{ disabled: barMoveDisabled }\">\n    <div class=\"devui-gantt-bar-rail\" #ganttBarRail></div>\n    <div class=\"devui-gantt-bar-track\" #ganttBarTrack></div>\n  </div>\n  <div\n    class=\"devui-gantt-bar-progress\"\n    #ganttBarProgress\n    [ngClass]=\"{ disabled: progressDisabled, visible: focused }\"\n    [attr.title]=\"progressRate ? progressRate : 0 + '%'\"\n  >\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      width=\"12px\"\n      height=\"16px\"\n      viewBox=\"0 0 12 16\"\n      version=\"1.1\"\n    >\n      <g id=\"gantt-bar-handle\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M7.06066017,1.35355339 C6.76776695,1.06066017 6.38388348,0.914213562 6,0.914213562 C5.61611652,0.914213562 5.23223305,1.06066017 4.93933983,1.35355339 L0.5,5.79289322 L0.5,13 C0.5,13.6903559 0.779822031,14.3153559 1.23223305,14.767767 C1.68464406,15.220178 2.30964406,15.5 3,15.5 L9,15.5 C9.69035594,15.5 10.3153559,15.220178 10.767767,14.767767 C11.220178,14.3153559 11.5,13.6903559 11.5,13 L11.5,5.79289322 L7.06066017,1.35355339 Z\"\n          stroke=\"none\"\n          fill=\"none\"\n        />\n      </g>\n    </svg>\n  </div>\n  <div class=\"devui-gantt-bar-title {{ customTitleClass }}\" *ngIf=\"showTitle\">{{ title }}</div>\n  <ng-template\n    *ngIf=\"tipTemplateRef\"\n    cdk-connected-overlay\n    [cdkConnectedOverlayOffsetX]=\"cdkOverlayOffsetX\"\n    [cdkConnectedOverlayOrigin]=\"progress\"\n    [cdkConnectedOverlayOpen]=\"(focused || tipHovered) && !mouseMoveOnBar\"\n  >\n    <div class=\"devui-gantt-tips\" (mouseover)=\"tipHovered = true\" (mouseleave)=\"mouseLeaveTip()\">\n      <ng-template [ngTemplateOutlet]=\"tipTemplateRef\" [ngTemplateOutletContext]=\"{ ganttInstance: this, data: data }\"></ng-template>\n    </div>\n  </ng-template>\n</div>\n\n<div\n  *ngIf=\"moveBarStart\"\n  class=\"moving-bg {{ customBgClass }}\"\n  [style.left]=\"originOffsetX + left + 'px'\"\n  [style.width]=\"width + 'px'\"\n></div>\n","import { Directive, ElementRef, Input, OnChanges, OnDestroy, Renderer2, SimpleChanges } from '@angular/core';\nimport { GanttScaleUnit } from './gantt.model';\n\n@Directive({\n  selector: '[dGanttMarker]'\n})\nexport class GanttMarkerDirective implements OnChanges, OnDestroy {\n  @Input() ganttBarContainerElement: HTMLElement;\n  @Input() ganttScaleContainerOffsetLeft: number;\n  @Input() monthMark = false;\n  @Input() weekend = false;\n  @Input() today = false;\n  @Input() milestone = '';\n  @Input() unit: GanttScaleUnit;\n  @Input() date: Date;\n  @Input() last: boolean;\n  hostElement: HTMLElement;\n  monthMarkElement: HTMLElement;\n  weekendElement: HTMLElement;\n  todayElement: HTMLElement;\n  milestoneElement: HTMLElement;\n\n  constructor(element: ElementRef, private renderer: Renderer2) {\n    this.hostElement = element.nativeElement;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['ganttBarContainerElement'] && this.ganttBarContainerElement) {\n      this.initMarkElement();\n    }\n\n    if (changes['ganttScaleContainerOffsetLeft'] && this.ganttScaleContainerOffsetLeft) {\n      this.setElementsStyle();\n    }\n\n    if (changes['monthMark']) {\n      if (this.monthMark) {\n        this.initMarkElement();\n      } else {\n        this.destroyMarkElement('monthMark');\n      }\n    }\n\n    if (changes['weekend'] || changes['last']) {\n      if (this.weekend && !this.last) {\n        this.initMarkElement();\n      } else {\n        this.destroyMarkElement('weekend');\n      }\n    }\n\n    if (changes['today']) {\n      if (this.today) {\n        this.initMarkElement();\n      } else {\n        this.destroyMarkElement('today');\n      }\n    }\n\n    if (changes['milestone']) {\n      if (this.milestone) {\n        this.initMarkElement();\n      } else {\n        this.destroyMarkElement('milestone');\n      }\n    }\n\n    if (changes['unit'] && this.unit) {\n      this.setElementsStyle();\n    }\n  }\n\n  initMarkElement() {\n    if (this.ganttBarContainerElement) {\n      if (this.monthMark && !this.monthMarkElement) {\n        const node = this.renderer.createElement('div');\n        this.renderer.addClass(node, 'devui-mark-line');\n        this.renderer.appendChild(this.ganttBarContainerElement, node);\n        this.monthMarkElement = node;\n        this.setElementsStyle();\n      }\n      if (this.weekend && !this.last && !this.weekendElement) {\n        const node = this.renderer.createElement('div');\n        this.renderer.addClass(node, 'devui-mark-stripe');\n        this.renderer.addClass(node, this.unit);\n        this.renderer.appendChild(this.ganttBarContainerElement, node);\n        this.weekendElement = node;\n        this.setElementsStyle();\n      }\n      if (this.today && !this.todayElement) {\n        const node = this.renderer.createElement('div');\n        this.renderer.addClass(node, 'devui-mark-line');\n        this.renderer.addClass(node, 'today');\n        this.renderer.addClass(node, this.unit);\n        this.renderer.appendChild(this.ganttBarContainerElement, node);\n        this.todayElement = node;\n        this.setElementsStyle();\n      }\n      if (this.milestone && !this.milestoneElement) {\n        const node = this.renderer.createElement('div');\n        this.renderer.addClass(node, 'devui-mark-line');\n        this.renderer.addClass(node, 'milestone');\n        this.renderer.addClass(node, this.unit);\n        this.renderer.appendChild(this.ganttBarContainerElement, node);\n        this.milestoneElement = node;\n        this.setElementsStyle();\n      }\n    }\n  }\n\n  removeMonthMark() {\n    if (this.monthMarkElement) {\n      this.renderer.removeChild(this.ganttBarContainerElement, this.monthMarkElement);\n      this.monthMarkElement = null;\n    }\n  }\n\n  removeWeekendMark() {\n    if (this.weekendElement) {\n      this.renderer.removeChild(this.ganttBarContainerElement, this.weekendElement);\n      this.weekendElement = null;\n    }\n  }\n\n  removeTodayMark() {\n    if (this.todayElement) {\n      this.renderer.removeChild(this.ganttBarContainerElement, this.todayElement);\n      this.todayElement = null;\n    }\n  }\n\n  removeMileStoneMark() {\n    if (this.milestoneElement) {\n      this.renderer.removeChild(this.ganttBarContainerElement, this.milestoneElement);\n      this.milestoneElement = null;\n    }\n  }\n\n  destroyMarkElement(type = 'all') {\n    switch (type) {\n    case 'monthMark':\n      this.removeMonthMark();\n      break;\n    case 'weekend':\n      this.removeWeekendMark();\n      break;\n    case 'today':\n      this.removeTodayMark();\n      break;\n    case 'milestone':\n      this.removeMileStoneMark();\n      break;\n    case 'all':\n      this.removeMonthMark();\n      this.removeWeekendMark();\n      this.removeTodayMark();\n      this.removeMileStoneMark();\n      break;\n    default:\n      break;\n    }\n  }\n\n  private setElementsStyle() {\n    this.ganttScaleContainerOffsetLeft = this.ganttScaleContainerOffsetLeft ? this.ganttScaleContainerOffsetLeft : 0;\n    const leftOffset = this.hostElement.offsetLeft + this.ganttScaleContainerOffsetLeft + 'px';\n    if (this.monthMark && this.monthMarkElement) {\n      this.renderer.setStyle(this.monthMarkElement, 'left', leftOffset);\n    }\n\n    if (this.weekend && this.weekendElement) {\n      this.weekendElement.className = 'devui-mark-stripe ' + this.unit;\n      this.renderer.setStyle(this.weekendElement, 'left', leftOffset);\n    }\n\n    if (this.today && this.todayElement) {\n      this.todayElement.className = 'devui-mark-line today ' + this.unit;\n      this.renderer.setStyle(this.todayElement, 'left', leftOffset);\n    }\n\n    if (this.milestone && this.milestoneElement) {\n      this.milestoneElement.className = 'devui-mark-line milestone ' + this.unit;\n      this.renderer.setStyle(this.milestoneElement, 'left', leftOffset);\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroyMarkElement();\n  }\n}\n","import { Component, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { GanttService } from '../gantt.service';\n\n@Component({\n  selector: 'd-gantt-milestone',\n  templateUrl: './gantt-milestone.component.html',\n  styleUrls: ['./gantt-milestone.component.scss']\n})\nexport class GanttMilestoneComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() startDate: Date;\n\n  @Input() title: string;\n  @Input() id: string;\n\n  private ganttScaleStatusHandler: Subscription;\n  left = 0;\n\n  constructor(private ganttService: GanttService) { }\n\n  ngOnInit() {\n    this.ganttScaleStatusHandler = this.ganttService.ganttScaleConfigChange.subscribe((config) => {\n      if (config.startDate || config.unit) {\n        this.left = this.ganttService.getDatePostionOffset(this.startDate);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['startDate']) {\n      this.left = this.ganttService.getDatePostionOffset(this.startDate);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.ganttScaleStatusHandler) {\n      this.ganttScaleStatusHandler.unsubscribe();\n      this.ganttScaleStatusHandler = null;\n    }\n  }\n}\n","<div class=\"devui-gantt-milestone\" [style.left]=\"left + 'px'\">\n  <span class=\"icon\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      width=\"22px\"\n      height=\"24px\"\n      viewBox=\"0 0 22 24\"\n      version=\"1.1\"\n    >\n      <defs>\n        <linearGradient x1=\"50%\" y1=\"6.72700158%\" x2=\"50%\" y2=\"91.2568893%\" id=\"gantt-linearGradient-1\">\n          <stop stop-color=\"#3DCCA6\" offset=\"0%\" />\n          <stop stop-color=\"#2AA7AF\" offset=\"100%\" />\n        </linearGradient>\n        <path\n          d=\"M14,1.15470054 L20.3923048,4.84529946 C21.6299092,5.55983064 22.3923048,6.88033872 22.3923048,8.30940108 L22.3923048,15.6905989 C22.3923048,17.1196613 21.6299092,18.4401694 20.3923048,19.1547005 L14,22.8452995 C12.7623957,23.5598306 11.2376043,23.5598306 10,22.8452995 L3.60769515,19.1547005 C2.37009085,18.4401694 1.60769515,17.1196613 1.60769515,15.6905989 L1.60769515,8.30940108 C1.60769515,6.88033872 2.37009085,5.55983064 3.60769515,4.84529946 L10,1.15470054 C11.2376043,0.440169359 12.7623957,0.440169359 14,1.15470054 Z\"\n          id=\"gantt-path-2\"\n        />\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"50%\" id=\"gantt-linearGradient-4\">\n          <stop stop-color=\"#FFFFFF\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"51.6276154%\" y2=\"68.3310347%\" id=\"gantt-linearGradient-5\">\n          <stop stop-color=\"#FFFFFF\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"70.5804357%\" id=\"gantt-linearGradient-6\">\n          <stop stop-color=\"#FFFFFF\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"71.0876747%\" id=\"gantt-linearGradient-7\">\n          <stop stop-color=\"#FFFFFF\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"60.3844779%\" id=\"gantt-linearGradient-8\">\n          <stop stop-color=\"#FFFFFF\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"gantt-linearGradient-9\">\n          <stop stop-color=\"#FFFFFF\" stop-opacity=\"0\" offset=\"0%\" />\n          <stop stop-color=\"#FFFFFF\" offset=\"100%\" />\n        </linearGradient>\n        <filter x=\"-25.0%\" y=\"-75.0%\" width=\"150.0%\" height=\"250.0%\" filterUnits=\"objectBoundingBox\" id=\"gantt-filter-10\">\n          <feGaussianBlur stdDeviation=\"1\" in=\"SourceGraphic\" />\n        </filter>\n        <linearGradient x1=\"-33.9878453%\" y1=\"3.1788779%\" x2=\"67.7654261%\" y2=\"81.2841156%\" id=\"gantt-linearGradient-11\">\n          <stop stop-color=\"#FF790E\" offset=\"0%\" />\n          <stop stop-color=\"#FECC55\" offset=\"100%\" />\n        </linearGradient>\n        <linearGradient x1=\"71.1217155%\" y1=\"42.8128234%\" x2=\"17.9433277%\" y2=\"-14.3609467%\" id=\"gantt-linearGradient-12\">\n          <stop stop-color=\"#FFE88E\" offset=\"0%\" />\n          <stop stop-color=\"#FF790E\" offset=\"100%\" />\n        </linearGradient>\n      </defs>\n      <g id=\"gantt-page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <g id=\"gantt-04fix\" transform=\"translate(-189.000000, -423.000000)\">\n          <g id=\"gantt-Group-2\" transform=\"translate(40.000000, 417.000000)\">\n            <g id=\"gant-group-4\" transform=\"translate(148.000000, 6.000000)\">\n              <mask id=\"gantt-mask-3\" fill=\"white\">\n                <use xlink:href=\"#gantt-path-2\" />\n              </mask>\n              <use id=\"gantt-men\" fill=\"url(#gantt-linearGradient-1)\" xlink:href=\"#gantt-path-2\" />\n              <polygon fill=\"url(#gantt-linearGradient-4)\" opacity=\"0.200000003\" mask=\"url(#gantt-mask-3)\" points=\"10 0 14 0 13 13 11 13\" />\n              <polygon\n                fill=\"url(#gantt-linearGradient-5)\"\n                opacity=\"0.200000003\"\n                mask=\"url(#gantt-mask-3)\"\n                transform=\"translate(17.500000, 11.000000) rotate(-270.000000) translate(-17.500000, -11.000000) \"\n                points=\"14.5 4.5 18.5 4.5 20.5 17.5 19.5 17.5\"\n              />\n              <polygon\n                fill=\"url(#gantt-linearGradient-6)\"\n                opacity=\"0.200000003\"\n                mask=\"url(#gantt-mask-3)\"\n                transform=\"translate(7.000000, 11.000000) scale(-1, 1) rotate(-270.000000) translate(-7.000000, -11.000000) \"\n                points=\"4 4.5 8 4.5 10 17.5 9 17.5\"\n              />\n              <polygon\n                fill=\"url(#gantt-linearGradient-7)\"\n                opacity=\"0.200000003\"\n                mask=\"url(#gantt-mask-3)\"\n                transform=\"translate(8.110913, 8.110913) rotate(-45.000000) translate(-8.110913, -8.110913) \"\n                points=\"6.1109127 1.6109127 10.1109127 1.6109127 9.1109127 14.6109127 7.1109127 14.6109127\"\n              />\n              <polygon\n                fill=\"url(#gantt-linearGradient-8)\"\n                opacity=\"0.200000003\"\n                mask=\"url(#gantt-mask-3)\"\n                transform=\"translate(15.889087, 8.110913) rotate(-315.000000) translate(-15.889087, -8.110913) \"\n                points=\"13.8890873 1.6109127 17.8890873 1.6109127 16.8890873 14.6109127 14.8890873 14.6109127\"\n              />\n              <ellipse\n                fill=\"url(#gantt-linearGradient-9)\"\n                opacity=\"0.5\"\n                filter=\"url(#filter-10)\"\n                mask=\"url(#gantt-mask-3)\"\n                cx=\"12\"\n                cy=\"17\"\n                rx=\"6\"\n                ry=\"2\"\n              />\n              <polygon fill=\"url(#gantt-linearGradient-11)\" mask=\"url(#gantt-mask-3)\" points=\"12 8 18 9 15 11 18 13 11 14\" />\n              <polygon fill=\"url(#gantt-linearGradient-12)\" mask=\"url(#gantt-mask-3)\" points=\"10 6 14 7 13 13 9 13\" />\n              <polygon fill=\"#FFE3A0\" mask=\"url(#gantt-mask-3)\" points=\"10 6 11 6 9 17 8 17\" />\n              <polygon fill=\"#B4832C\" mask=\"url(#gantt-mask-3)\" points=\"13 13 11 14 11.1707479 13\" />\n              <rect fill=\"#000000\" opacity=\"0.100000001\" mask=\"url(#gantt-mask-3)\" x=\"7\" y=\"17\" width=\"10\" height=\"1\" />\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  </span>\n  <span>{{ title }}</span>\n</div>\n","import {\n  Component, EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { GanttBarStatus, GanttMilestone, GanttScaleDateInfo, GanttScaleUnit } from '../gantt.model';\nimport { GanttService } from '../gantt.service';\n@Component({\n  selector: 'd-gantt-scale',\n  templateUrl: './gantt-scale.component.html',\n  styleUrls: ['./gantt-scale.component.scss'],\n})\nexport class GanttScaleComponent implements OnInit, OnChanges, OnDestroy {\n  scaleData: GanttScaleDateInfo[];\n  viewScaleRange = [0, 0];\n  viewSCaleData: GanttScaleDateInfo[] = [];\n  ganttBarStatusHandler: Subscription;\n  ganttSacleConfigHandler: Subscription;\n  highlight: boolean;\n  highlightStartText: string;\n  highlightEndText: string;\n  highlightMinWidth: number;\n\n  SCALE_START_LABLE_OFFSET = 7;\n\n  scaleWidth = {\n    day: 40,\n    week: 30,\n    month: 20,\n  };\n  @Input() unit = GanttScaleUnit.day;\n  @Input() height: number;\n  @Input() startDate: Date;\n  @Input() endDate: Date;\n  @Input() ganttBarContainerElement: HTMLElement;\n  @Input() ganttScaleContainerOffsetLeft: number;\n  @Input() milestoneList: GanttMilestone[];\n  @Input() scrollElement: HTMLElement;\n  @Output() addMilestoneEvent = new EventEmitter<GanttScaleDateInfo>();\n\n  private scrollHandler: Subscription;\n\n  i18nText: I18nInterface['gantt'];\n  i18nLocale: I18nInterface['locale'];\n  i18nCommonText: I18nInterface['common'];\n  i18nSubscription: Subscription;\n  constructor(private ganttService: GanttService, private i18n: I18nService) { }\n\n  ngOnInit() {\n    this.i18nText = this.i18n.getI18nText().gantt;\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.i18nLocale = this.i18n.getI18nText().locale;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.gantt;\n      this.i18nCommonText = data.common;\n      this.i18nLocale = data.locale;\n    });\n    this.ganttBarStatusHandler = this.ganttService.ganttBarStatusChange.subscribe((status) => {\n      this.ganttBarStatusChange(status);\n    });\n\n    this.ganttSacleConfigHandler = this.ganttService.ganttScaleConfigChange.subscribe((config) => {\n      if (config.startDate) {\n        this.startDate = config.startDate;\n      }\n      if (config.endDate) {\n        this.endDate = config.endDate;\n      }\n      if (config.startDate || config.endDate) {\n        this.scaleData = this.generateScaleData(this.startDate, this.endDate);\n        this.getViewScaleData();\n      }\n      if (config.unit) {\n        this.unit = config.unit;\n        this.getViewScaleData();\n      }\n      if (config.viewChange){\n        this.getViewScaleData();\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (Object.prototype.hasOwnProperty.call(changes, 'scrollElement')) {\n      this.registerScrollEvent();\n    }\n  }\n\n  registerScrollEvent () {\n    if (!this.scrollHandler && this.scrollElement) {\n      this.scrollHandler = fromEvent(this.scrollElement, 'scroll').subscribe(e => {\n        this.getViewScaleData();\n      });\n    }\n  }\n\n  getViewScaleData() {\n    if (this.scrollElement) {\n      const containerWidth = this.scrollElement.clientWidth;\n      const scrollLeft = this.scrollElement.scrollLeft;\n      const start = Math.floor(scrollLeft / this.scaleWidth[this.unit]);\n      const offset = Math.ceil(containerWidth / this.scaleWidth[this.unit]);\n      this.viewScaleRange = [start - 2, start + offset + 2];\n      this.viewSCaleData = this.scaleData.filter((i: GanttScaleDateInfo) => {\n        return i.index >= this.viewScaleRange[0] && i.index <= this.viewScaleRange[1];\n      });\n    }\n  }\n\n  private generateScaleData(startDate: Date, endDate: Date): GanttScaleDateInfo[] {\n    if (startDate && endDate) {\n      const scaleData = [];\n      let handleDate = startDate;\n      let index = 0;\n      while (!this.ganttService.isSomeDate(handleDate, endDate)) {\n        const dateInfo = this.generateDateInfo(handleDate, index);\n        scaleData.push(dateInfo);\n        handleDate = this.getNextDay(new Date(handleDate));\n        index++;\n      }\n      return scaleData;\n    }\n  }\n\n  private getNextDay(date: Date) {\n    const nextDayDate = date.setDate(date.getDate() + 1);\n    return new Date(nextDayDate);\n  }\n\n  private generateDateInfo(date: Date, index): GanttScaleDateInfo {\n    const dateInfo: GanttScaleDateInfo = {\n      dayOfMonthLabel: '',\n      dayOfWeekLabel: '',\n      monthLabel: '',\n      yearLabel: '',\n      date: date,\n      monthStart: false,\n      weekend: false,\n      today: false,\n      milestone: '',\n      highlightStart: false,\n      scaleStartVisable: true,\n      index\n    };\n\n    const dayOfMonth = date.getDate();\n    dateInfo.dayOfMonthLabel = String(dayOfMonth);\n    if (dayOfMonth === 1) {\n      dateInfo.monthStart = true;\n    }\n\n    const dayOfWeek = date.getDay();\n    dateInfo.dayOfWeekLabel = String(dayOfWeek);\n    if (dayOfWeek === 6) {\n      dateInfo.weekend = true;\n    }\n    const month = date.getMonth() + 1;\n    dateInfo.monthLabel = String(month);\n    const year = date.getFullYear();\n    dateInfo.yearLabel = String(year);\n    if (this.ganttService.isSomeDate(date, new Date())) {\n      dateInfo.today = true;\n    }\n\n    if (new Date(year, month - 1, dayOfMonth + this.SCALE_START_LABLE_OFFSET).getMonth() > month - 1) {\n      dateInfo.scaleStartVisable = false;\n    }\n    if (this.milestoneList) {\n      this.milestoneList.forEach((milestone) => {\n        if (milestone.date) {\n          if (this.ganttService.isSomeDate(milestone.date, dateInfo.date)) {\n            dateInfo.milestone = milestone.lable;\n          }\n        }\n      });\n    }\n\n    return dateInfo;\n  }\n\n  trackByFn(index, item) {\n    return index;\n  }\n\n  private ganttBarStatusChange(status: GanttBarStatus) {\n    this.highlight = status.focused;\n    if (this.highlight) {\n      this.scaleData.forEach((dateInfo, index) => {\n        if (dateInfo.date >= status.startDate && dateInfo.date <= status.endDate) {\n          dateInfo.highlight = true;\n        } else {\n          dateInfo.highlight = false;\n        }\n        dateInfo.highlightStart = false;\n      });\n      const highlightBarStartIndex =  this.scaleData.findIndex((data) => {\n        return data.highlight;\n      });\n      if (highlightBarStartIndex > -1) {\n        this.scaleData[highlightBarStartIndex].highlightStart = true;\n      }\n\n      const highlightData = this.scaleData.filter((data) => {\n        return data.highlight;\n      });\n\n      if (highlightData.length === 0) {\n        return;\n      }\n\n      if (highlightData.length === 1) {\n        const startData = highlightData[0];\n        this.highlightStartText =\n          this.prefixZero(parseInt(startData.monthLabel, 10)) + '-' + this.prefixZero(parseInt(startData.dayOfMonthLabel, 10));\n        const highlightWidth = this.ganttService.getScaleUnitPixel();\n        if (highlightWidth < 40) {\n          this.highlightMinWidth = 40;\n        } else {\n          this.highlightMinWidth = highlightWidth;\n        }\n      } else {\n        const startData = highlightData[0];\n        const endData = highlightData[highlightData.length - 1];\n        this.highlightStartText =\n          this.prefixZero(parseInt(startData.monthLabel, 10)) + '-' + this.prefixZero(parseInt(startData.dayOfMonthLabel, 10));\n        this.highlightEndText =\n          this.prefixZero(parseInt(endData.monthLabel, 10)) + '-' + this.prefixZero(parseInt(endData.dayOfMonthLabel, 10));\n        const highlightWidth = highlightData.length * this.ganttService.getScaleUnitPixel();\n        if (highlightWidth < 80) {\n          this.highlightMinWidth = 80;\n        } else {\n          this.highlightMinWidth = highlightWidth;\n        }\n      }\n    }\n  }\n\n  prefixZero(num: number) {\n    return (Array(2).join('0') + num).slice(-2);\n  }\n\n  addMilestone(info: GanttScaleDateInfo) {\n    this.addMilestoneEvent.emit(info);\n  }\n\n  ngOnDestroy() {\n    if (this.ganttBarStatusHandler) {\n      this.ganttBarStatusHandler.unsubscribe();\n      this.ganttBarStatusHandler = null;\n    }\n    if (this.ganttSacleConfigHandler) {\n      this.ganttSacleConfigHandler.unsubscribe();\n      this.ganttSacleConfigHandler = null;\n    }\n    if (this.scrollHandler) {\n      this.scrollHandler.unsubscribe();\n    }\n  }\n}\n","<div\n  class=\"devui-gantt-scale {{ unit }}\"\n  *ngFor=\"let data of viewSCaleData; trackBy: trackByFn; let first = first; let last = last\"\n  [ngClass]=\"{ today: data.today, milestone: data.milestone }\"\n  [style.left]=\"scaleWidth[unit] * data.index + 'px'\"\n  [style.width]=\"scaleWidth[unit] + 'px'\"\n  dGanttMarker\n  [monthMark]=\"data.monthStart\"\n  [weekend]=\"data.weekend\"\n  [milestone]=\"data.milestone\"\n  [today]=\"data.today\"\n  [date]=\"data.date\"\n  [unit]=\"unit\"\n  [last]=\"last\"\n  [ganttScaleContainerOffsetLeft]=\"ganttScaleContainerOffsetLeft\"\n  [ganttBarContainerElement]=\"ganttBarContainerElement\"\n>\n  <div class=\"devui-scale-start\" [ngClass]=\"{ milestone: data.milestone }\">\n    <ng-container *ngIf=\"data.milestone && unit === 'day'\">\n      {{ data.milestone }}\n    </ng-container>\n    <ng-container *ngIf=\"!data.milestone || unit !== 'day'\">\n      {{\n        data.scaleStartVisable && (first || data.monthStart)\n          ? unit === 'month'\n            ? i18nText?.yearDisplay(data.yearLabel)\n            : i18nText?.yearAndMonthDisplay(data.yearLabel, data.monthLabel)\n          : ''\n      }}\n    </ng-container>\n  </div>\n  <div class=\"devui-scale-unit\">\n    <div *ngIf=\"highlight && data.highlightStart\" class=\"scale-highlight\" [style.minWidth]=\"highlightMinWidth + 'px'\">\n      <div style=\"float: left\">{{ highlightStartText }}</div>\n      <div style=\"float: right\">{{ highlightEndText }}</div>\n      <div style=\"clear: both\"></div>\n    </div>\n    <ng-container *ngIf=\"!highlight || !data.highlight\">\n      <div *ngIf=\"unit === 'day'\" class=\"border-left\" [ngClass]=\"{ today: data.today }\">\n        {{ data.today ? i18nText?.today : data.dayOfMonthLabel }}\n      </div>\n      <div *ngIf=\"unit === 'week'\" [ngClass]=\"{ 'border-left': first || data.weekend }\">\n        {{ first || data.weekend ? data.dayOfMonthLabel : '' }}\n      </div>\n      <div *ngIf=\"unit === 'month'\" [ngClass]=\"{ 'border-left': first || data.monthStart }\">\n        {{ first || data.monthStart ? i18nText?.monthDisplay(data.monthLabel) : '' }}\n      </div>\n    </ng-container>\n  </div>\n  <div class=\"milestone-new {{ unit }}\" [title]=\"i18nText?.milestone\" (click)=\"addMilestone(data)\">\n    <div class=\"icon-add\"></div>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { Subscription } from 'rxjs';\nimport { UnitRole } from '../gantt.model';\n\n@Component({\n  selector: 'd-gantt-tools',\n  templateUrl: './gantt-tools.component.html',\n  styleUrls: ['./gantt-tools.component.scss'],\n})\nexport class GanttToolsComponent implements OnInit{\n\n  @Input('currentUnit') set currentUnit(val) {\n    this._currentUnit = val;\n    const data = this.views.filter(i => i.value === val);\n  }\n\n  get currentUnit () {\n    return this._currentUnit;\n  }\n\n  @Input() isFullScreen = false;\n\n  @Output() goToday = new EventEmitter();\n\n  @Output() reduceUnit = new EventEmitter();\n\n  @Output() increaseUnit = new EventEmitter();\n\n  @Output() switchView = new EventEmitter();\n\n  unitRole = UnitRole;\n\n  get currentUnitLabel() {\n    return this._currentLabel || (this.views.length > 0 ? this.views[0].label : '');\n  };\n\n  _currentLabel: string;\n\n  _currentUnit = '';\n\n  views = [\n    {\n      label: 'Day',\n      value: 'day'\n    },\n    {\n      label: 'Week',\n      value: 'week'\n    },\n    {\n      label: 'Month',\n      value: 'month'\n    }\n  ];\n\n  i18nText: I18nInterface['gantt'];\n  i18nLocale: I18nInterface['locale'];\n  i18nSubscription: Subscription;\n\n  constructor(\n    private i18n: I18nService\n  ) {}\n\n  ngOnInit() {\n    this.i18nText = this.i18n.getI18nText().gantt;\n    this.i18nLocale = this.i18n.getI18nText().locale;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.gantt;\n      this.i18nLocale = data.locale;\n      this.views = [\n        {\n          label: this.i18nText?.day,\n          value: 'day'\n        },\n        {\n          label: this.i18nText?.week,\n          value: 'week'\n        },\n        {\n          label: this.i18nText?.month,\n          value: 'month'\n        }\n      ];\n    });\n  }\n\n  avtionHandle (type) {\n    switch (type) {\n    case 'today':\n      this.goToday.emit();\n      break;\n    case 'reduce':\n      this.reduceUnit.emit();\n      break;\n    case 'increase':\n      this.increaseUnit.emit();\n      break;\n    }\n  }\n\n  selectView (menu) {\n    this._currentLabel = menu.label;\n    this.switchView.emit(menu.value);\n  }\n}\n","<div class=\"tools-container\" [style.position]=\"isFullScreen ? 'fixed' : 'absolute'\">\n  <d-button bsStyle=\"text\" (click)=\"avtionHandle('today')\" class=\"tool\">{{ i18nText.today }}</d-button>\n  <div class=\"tool\">\n    <span dDropDown [trigger]=\"'click'\" appendToBody class=\"switch-view\">\n      <span dDropDownToggle class=\"devui-dropdown-origin\">{{ currentUnitLabel }} <span class=\"icon-chevron-down\"></span></span>\n      <ul dDropDownMenu class=\"devui-dropdown-menu devui-scrollbar\" role=\"menu\">\n        <li role=\"menuItem\" *ngFor=\"let menu of views\" (click)=\"selectView(menu)\">\n          <a class=\"devui-dropdown-item\">{{ menu.label }}</a>\n        </li>\n      </ul>\n    </span>\n  </div>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('reduce')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.day }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.day\"\n  >\n    <i class=\"icon icon-minus\"></i>\n  </d-button>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('increase')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.month }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.month\"\n  >\n    <i class=\"icon icon-add\"></i>\n  </d-button>\n  <ng-content></ng-content>\n</div>\n","import { DOCUMENT } from '@angular/common';\nimport { Directive, ElementRef, EventEmitter, HostListener, Inject, Input, NgZone, Output, Renderer2 } from '@angular/core';\nimport { fromEvent, Subscription } from 'rxjs';\n\n@Directive({\n  selector: '[dResizeHandle]',\n})\nexport class ResizeHandleDirective {\n  @Input() containerElement: Element;\n  @Input() minWidth: string;\n  @Input() maxWidth: string;\n  @Output() resizeStartEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() resizingEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() resizeEndEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  @Output() collapseEvent: EventEmitter<any> = new EventEmitter<any>();\n\n  element: HTMLElement;\n  moveCount: number;\n  initialWidth: number;\n  totalWidth: number;\n  mouseDownScreenX: number;\n  resizeHandle: HTMLElement;\n  resizeOverlay: HTMLElement;\n  resizeBarRefElement: HTMLElement;\n  mouseUpSubscription: Subscription;\n  resizeHandleEnter: any;\n  resizeHandleLeave: any;\n  resizeHandleClick: any;\n  preventRemoveHandle = false;\n  document: Document;\n\n  constructor(element: ElementRef, private renderer2: Renderer2, private zone: NgZone, @Inject(DOCUMENT) private doc: any) {\n    this.element = element.nativeElement;\n    this.document = this.doc;\n  }\n\n  @HostListener('mouseenter', ['$event'])\n  onMouseEnter(event: MouseEvent) {\n    if (!this.resizeHandle) {\n      this.resizeHandle = this.renderer2.createElement('div');\n      this.renderer2.appendChild(this.containerElement, this.resizeHandle);\n      this.renderer2.addClass(this.resizeHandle, 'resize-handle');\n      const left = this.element.getBoundingClientRect().right - this.containerElement.getBoundingClientRect().left;\n      this.renderer2.setStyle(this.resizeHandle, 'left', left + 'px');\n      this.resizeHandleEnter = this.renderer2.listen(this.resizeHandle, 'mouseenter', this.onHandleMouseEnter.bind(this));\n      this.resizeHandleLeave = this.renderer2.listen(this.resizeHandle, 'mouseleave', this.onHandleMouseLeave.bind(this));\n      this.resizeHandleClick = this.renderer2.listen(this.resizeHandle, 'mousedown', this.onMousedown.bind(this));\n    }\n  }\n\n  @HostListener('mouseleave', ['$event'])\n  onMouseLeave(event: any) {\n    setTimeout(() => {\n      if (!this.preventRemoveHandle) {\n        if (this.resizeHandle) {\n          this.renderer2.removeChild(this.containerElement, this.resizeHandle);\n          this.resizeHandle = null;\n        }\n        if (this.resizeHandleClick) {\n          this.resizeHandleClick();\n        }\n      }\n    }, 100);\n  }\n\n  private onHandleMouseEnter() {\n    this.preventRemoveHandle = true;\n  }\n\n  private onHandleMouseLeave() {\n    this.preventRemoveHandle = false;\n    if (this.resizeHandle) {\n      this.renderer2.removeChild(this.containerElement, this.resizeHandle);\n      this.resizeHandle = null;\n    }\n    if (this.resizeHandleClick) {\n      this.resizeHandleClick();\n    }\n  }\n\n  onMousedown(event: MouseEvent): void {\n    this.moveCount = 0;\n\n    this.resizeStartEvent.emit(event); // emit begin resize event\n\n    this.initialWidth = this.element.clientWidth;\n    const initialOffset = this.element.getBoundingClientRect().left - this.containerElement.getBoundingClientRect().left;\n    this.mouseDownScreenX = event.clientX;\n    event.stopPropagation();\n\n    // create resizeOverlay\n    this.resizeOverlay = this.renderer2.createElement('div');\n    this.renderer2.appendChild(this.containerElement, this.resizeOverlay);\n    this.renderer2.addClass(this.resizeOverlay, 'resize-overlay');\n    this.renderer2.listen(this.resizeOverlay, 'click', (clickEvent: Event) => clickEvent.stopPropagation());\n\n    const resizeBar = this.renderer2.createElement('div');\n    this.renderer2.addClass(resizeBar, 'resize-bar');\n    this.resizeBarRefElement = resizeBar;\n    this.renderer2.appendChild(this.containerElement, resizeBar);\n    this.renderer2.setStyle(this.resizeBarRefElement, 'display', 'block');\n    this.renderer2.setStyle(this.resizeBarRefElement, 'left', initialOffset + this.initialWidth + 'px');\n\n    const mouseup = fromEvent(document, 'mouseup');\n    this.mouseUpSubscription = mouseup.subscribe((ev: MouseEvent) => this.onMouseup(ev));\n\n    this.zone.runOutsideAngular(() => {\n      this.document.addEventListener('mousemove', this.bindMousemove);\n    });\n  }\n\n  onMouseup(event: MouseEvent): void {\n    const movementX = event.clientX - this.mouseDownScreenX;\n    const newWidth = this.initialWidth + movementX;\n\n    const finalWidth = this.getFinalWidth(newWidth);\n\n    // destroy overlay\n    this.renderer2.removeChild(this.element, this.resizeOverlay);\n\n    this.renderer2.removeChild(this.containerElement, this.resizeBarRefElement);\n\n    this.resizeEndEvent.emit({ width: finalWidth });\n\n    if (this.mouseUpSubscription && !this.mouseUpSubscription.closed) {\n      this._destroySubscription();\n    }\n\n    this.document.removeEventListener('mousemove', this.bindMousemove);\n  }\n\n  bindMousemove = (e) => {\n    this.move(e);\n  };\n\n  move(event: MouseEvent): void {\n    this.moveCount++;\n    if (this.moveCount % 2 === 0) {\n      return;\n    }\n\n    const movementX = event.clientX - this.mouseDownScreenX;\n    const newWidth = this.initialWidth + movementX;\n\n    const finalWidth = this.getFinalWidth(newWidth);\n    this.renderer2.setStyle(\n      this.resizeBarRefElement,\n      'left',\n      `${finalWidth + this.element.getBoundingClientRect().left - this.containerElement.getBoundingClientRect().left}px`\n    );\n    this.resizingEvent.emit({ width: finalWidth });\n  }\n\n  private getFinalWidth(newWidth: number): number {\n    const minWidth = this.handleWidth(this.minWidth);\n    const maxWidth = this.handleWidth(this.maxWidth);\n\n    const overMinWidth = !this.minWidth || newWidth >= minWidth;\n    const underMaxWidth = !this.maxWidth || newWidth <= maxWidth;\n\n    const finalWidth = !overMinWidth ? minWidth : !underMaxWidth ? maxWidth : newWidth;\n    return finalWidth;\n  }\n\n  private handleWidth(width: string | number) {\n    if (!width) {\n      return;\n    }\n    if (typeof width === 'number') {\n      return width;\n    }\n    if (width.includes('%')) {\n      const tableWidth = this.containerElement.clientWidth;\n      return (tableWidth * parseInt(width, 10)) / 100;\n    }\n    return parseInt(width.replace(/[^\\d]+/, ''), 10);\n  }\n\n  private _destroySubscription() {\n    if (this.mouseUpSubscription) {\n      this.mouseUpSubscription.unsubscribe();\n      this.mouseUpSubscription = undefined;\n    }\n  }\n}\n","import { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ButtonModule } from 'ng-devui/button';\nimport { DropDownModule } from 'ng-devui/dropdown';\nimport { PopoverModule } from 'ng-devui/popover';\nimport { TooltipModule } from 'ng-devui/tooltip';\nimport { GanttBarParentComponent } from './gantt-bar-parent/gantt-bar-parent.component';\nimport { GanttBarComponent } from './gantt-bar/gantt-bar.component';\nimport { GanttMarkerDirective } from './gantt-marker.directive';\nimport { GanttMilestoneComponent } from './gantt-milestone/gantt-milestone.component';\nimport { GanttScaleComponent } from './gantt-scale/gantt-scale.component';\nimport { GanttToolsComponent } from './gantt-tools/gantt-tools.component';\nimport { GanttService } from './gantt.service';\nimport { ResizeHandleDirective } from './resize-handle.directive';\n\n@NgModule({\n  declarations: [\n    GanttScaleComponent,\n    GanttBarComponent,\n    GanttMarkerDirective,\n    GanttMilestoneComponent,\n    GanttBarParentComponent,\n    ResizeHandleDirective,\n    GanttToolsComponent\n  ],\n  imports: [\n    CommonModule,\n    OverlayModule,\n    PopoverModule,\n    TooltipModule,\n    ButtonModule,\n    DropDownModule\n  ],\n  providers: [GanttService],\n  exports: [\n    GanttScaleComponent,\n    GanttBarComponent,\n    GanttMilestoneComponent,\n    GanttBarParentComponent,\n    ResizeHandleDirective,\n    GanttToolsComponent\n  ]\n})\nexport class GanttModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}