{"version":3,"file":"ng-devui-category-search.mjs","sources":["../../devui/category-search/category-search.type.ts","../../devui/category-search/content-template.directive.ts","../../devui/category-search/default-template.directive.ts","../../devui/category-search/category-search.component.ts","../../devui/category-search/category-search.component.html","../../devui/category-search/category-search.module.ts","../../devui/category-search/ng-devui-category-search.ts"],"sourcesContent":["import { TemplateRef } from '@angular/core';\n\nexport type CategorySearchTagType = 'radio' | 'checkbox' | 'dateRange' | 'label' | 'textInput' | 'numberRange' | 'treeSelect' | 'keyword';\n\nexport interface ITagOption {\n  /**\n   * 选项，label和color默认都会取对应的 filterKey 和 colorKey，如未设置取默认值\n   */\n  label?: string; // 通用默认属性，用于设置分类名称\n  color?: string; // label 专用，用于设置标签颜色\n  [propName: string]: any;\n}\n\n/**\n * 候选tag数据配置项\n */\nexport interface ICategorySearchTagItem {\n  /**\n   * 搜索字段，tag的键，用于区分不同的分类，需要唯一\n   */\n  field: string;\n  /**\n   * tag 键的显示值\n   */\n  label: string;\n  /**\n   * 配置项可生产的tag类型\n   */\n  type?: CategorySearchTagType;\n  /**\n   * 配置项所属的分组\n   */\n  group?: string;\n  /**\n   * tag 值的选择项数据\n   */\n  options?: Array<ITagOption>;\n  /**\n   * 用于显示的 tag 值的键值，如未设置默认取label\n   */\n  filterKey?: string | 'label';\n  /**\n   * 用于显示的label类型中色值的键值，如未设置默认取color\n   */\n  colorKey?: 'color';\n  /**\n   * 自定义下拉模板的展示内容\n   */\n  customTemplate?: TemplateRef<any>;\n  /**\n   * 已选中值\n   */\n  value?: {\n    label?: string;\n    value?: string | Array<ITagOption | number | string>;\n    cache?: string | Array<ITagOption | number | string>;\n    [propName: string]: any;\n  };\n  [propName: string]: any;\n}\n\nexport interface SelectedTagsEvent {\n  selectedTags: Array<ICategorySearchTagItem>;\n  currentChangeTag: ICategorySearchTagItem;\n  operation: 'add' | 'delete' | 'clear';\n}\n\nexport interface CreateFilterEvent {\n  name: string;\n  selectedTags: Array<ICategorySearchTagItem>;\n  keyword: string;\n}\n\nexport interface SearchEvent {\n  selectedTags: Array<ICategorySearchTagItem>;\n  searchKey: string;\n}\n\nexport interface SearchConfig {\n  keyword?: boolean;\n  keywordDescription?: (searchKey: string) => string;\n  field?: boolean;\n  fieldDescription?: (label: string) => string;\n  category?: boolean;\n  categoryDescription?: string;\n}\n\nexport const ALLOWED_SEARCH_FIELD_TYPES = ['radio', 'checkbox', 'label'];\n\nexport const COLORS = [\n  '#f2f5fc',\n  '#e9edfa',\n  '#beccfa',\n  '#96adfa',\n  '#7693f5',\n  '#5e7ce0',\n  '#526ecc',\n  '#465eb8',\n  '#3c51a6',\n  '#344899',\n  '#2a3c85',\n  '#ebf6ff',\n  '#d1ebff',\n  '#b8e0ff',\n  '#9ed5ff',\n  '#85caff',\n  '#6cbfff',\n  '#4ea6e6',\n  '#3590cc',\n  '#207ab3',\n  '#0f6999',\n  '#035880',\n  '#edfff9',\n  '#cffcee',\n  '#acf2dc',\n  '#8be8cb',\n  '#6ddebb',\n  '#50d4ab',\n  '#3ac295',\n  '#27b080',\n  '#169e6c',\n  '#088c58',\n  '#007a45',\n  '#f0ffe6',\n  '#e5ffd4',\n  '#d8fcc0',\n  '#c5f2a7',\n  '#b3e890',\n  '#a6dd82',\n  '#92cc68',\n  '#7eba50',\n  '#6ca83b',\n  '#5e9629',\n  '#518519',\n  '#fffbf0',\n  '#fff1c2',\n  '#ffe794',\n  '#ffdc66',\n  '#ffd138',\n  '#fac20a',\n  '#e3aa00',\n  '#cc9600',\n  '#b58200',\n  '#9e6f00',\n  '#875c00',\n  '#fff3e8',\n  '#ffe1c7',\n  '#ffd0a6',\n  '#ffbf85',\n  '#ffad63',\n  '#fa9841',\n  '#e37d29',\n  '#cc6414',\n  '#b54e04',\n  '#9e3f00',\n  '#873400',\n  '#ffeeed',\n  '#ffd5d4',\n  '#ffbcba',\n  '#ffa4a1',\n  '#ff8b87',\n  '#f66f6a',\n  '#de504e',\n  '#c73636',\n  '#b02121',\n  '#991111',\n  '#820404',\n  '#ffedf3',\n  '#ffd4e3',\n  '#ffbad2',\n  '#ffa1c2',\n  '#fc86b0',\n  '#f3689a',\n  '#db4d83',\n  '#c4356e',\n  '#ad215b',\n  '#96114d',\n  '#800440',\n  '#f5f0ff',\n  '#e7d9ff',\n  '#d8c2ff',\n  '#caabff',\n  '#bc94ff',\n  '#a97af8',\n  '#8a5ce0',\n  '#6f42c9',\n  '#572db3',\n  '#3f1a9c',\n  '#2a0c85',\n];\n","import { Directive, Input, TemplateRef } from '@angular/core';\n\n@Directive({\n  /* eslint-disable */\n  selector: 'ng-template[field]',\n})\nexport class ContentTemplateDirective {\n  @Input() field: string;\n\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, Input, TemplateRef } from '@angular/core';\n\n@Directive({\n  /* eslint-disable */\n  selector: 'ng-template[type]',\n})\nexport class DefaultTemplateDirective {\n  @Input() type: string;\n\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterContentInit,\n  AfterViewInit,\n  Component,\n  ContentChildren,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  QueryList,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { DatepickerProCalendarComponent } from 'ng-devui/datepicker-pro';\nimport { DropDownDirective } from 'ng-devui/dropdown';\nimport { DValidateRules } from 'ng-devui/form';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { ITreeItem } from 'ng-devui/tree';\nimport { DefaultIcons } from 'ng-devui/tree-select';\nimport { DateConverter, DefaultDateConverter } from 'ng-devui/utils';\nimport { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { fromEvent, Observable, Subject } from 'rxjs';\nimport { debounceTime, takeUntil, tap } from 'rxjs/operators';\nimport {\n  ALLOWED_SEARCH_FIELD_TYPES,\n  COLORS,\n  CreateFilterEvent,\n  ICategorySearchTagItem,\n  SearchConfig,\n  SearchEvent,\n  SelectedTagsEvent\n} from './category-search.type';\nimport { ContentTemplateDirective } from './content-template.directive';\nimport { DefaultTemplateDirective } from './default-template.directive';\n\n@Component({\n  selector: 'd-category-search',\n  templateUrl: './category-search.component.html',\n  styleUrls: ['./category-search.component.scss'],\n})\nexport class CategorySearchComponent implements OnChanges, OnDestroy, AfterViewInit, AfterContentInit {\n  static ID_SEED = 0;\n  @Input() category: Array<ICategorySearchTagItem>;\n  @Input() defaultSearchField = [];\n  @Input() selectedTags: Array<ICategorySearchTagItem> = [];\n  @Input() allowClear = true;\n  @Input() allowSave = true;\n  @Input() allowShowMore = false;\n  @Input() toggleScrollToTail = false;\n  @Input() searchKey = '';\n  @Input() placeholderText: string;\n  @Input() inputReadOnly = false;\n  @Input() showSearchCategory: SearchConfig | boolean = true; // 配置是否显示搜索相关下拉选项\n  @Input() categoryInGroup = false; // 是否按组别显示分类下拉列表\n  @Input() groupOrderConfig: Array<string>; // 用户配置组顺序\n  @Input() customGroupNameTemplate: TemplateRef<any>; // 用户自定义组名称显示模板\n  @Input() tagMaxWidth: number;\n  @Input() filterNameRules: DValidateRules = [];\n  @Input() beforeTagChange: (tag, searchKey, operation) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() toggleEvent: (dropdown, tag?, currentSelectTag?) => void;\n  @Output() searchEvent = new EventEmitter<SearchEvent>();\n  @Output() selectedTagsChange = new EventEmitter<SelectedTagsEvent>();\n  @Output() createFilterEvent = new EventEmitter<CreateFilterEvent>();\n  @Output() clearAllEvent = new EventEmitter<MouseEvent>();\n  @Output() searchKeyChange = new EventEmitter<String>();\n  @ViewChild('InputEle') inputEle: ElementRef;\n  @ViewChild('ScrollBarContainer') scrollBarContainer: ElementRef;\n  @ViewChild('PrimeContainer') primeContainer: ElementRef;\n  @ViewChildren('selectedDropdown') selectedDropdownList: QueryList<DropDownDirective>;\n  @ViewChildren(DatepickerProCalendarComponent, { read: ElementRef }) datePickerElements: QueryList<ElementRef>;\n  @ViewChildren(DefaultTemplateDirective) defaultTemplates: QueryList<DefaultTemplateDirective>;\n  @ContentChildren(ContentTemplateDirective) contentTemplates: QueryList<ContentTemplateDirective>;\n  public currentSelectTag = undefined;\n  public currentTag: ICategorySearchTagItem;\n  public searchField;\n  public id: number;\n  dateConverter: DateConverter;\n  filterName = '';\n  treeSearchKey = '';\n  searchKeyCache = '';\n  enterSearch = false;\n  isShowSavePanel = false;\n  isSearchCategory = false;\n  isHover = false;\n  isFocus = false;\n  noRecord = false;\n  showNoDataTips = false;\n  icons = DefaultIcons;\n  destroy$ = new Subject();\n  i18nCommonText: I18nInterface['common'];\n  i18nCategorySearchText: I18nInterface['categorySearch'];\n  currentSearchCategory: Array<ICategorySearchTagItem>;\n  categoryDisplay: Array<ICategorySearchTagItem>;\n  currentOpenDropdown: DropDownDirective;\n  currentScrollTagIndex: number; // 当前要滚动至的标签索引\n  scrollTimeout: any; // 如果标签在可视范围内则延时展开下拉的定时器\n  scrollToTailFlag = true; // 是否在更新标签内容后滚动至输入框的开关\n  DROPDOWN_ANIMATION_TIMEOUT = 200; // 下拉动画延迟\n  DELAY = 300; // 防抖延迟\n  templates = {}; // 所有类型默认模板\n  customTemplates = {}; // 按field标记的自定义模板集合\n  joinLabelTypes = ['checkbox', 'label'];\n  valueIsArrayTypes = ['numberRange', 'treeSelect'];\n  showSearchConfig: SearchConfig;\n  document: Document;\n\n  get showFilterNameClear() {\n    return typeof this.filterName === 'string' && this.filterName.length > 0;\n  }\n\n  constructor(private i18n: I18nService, @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n    this.dateConverter = new DefaultDateConverter();\n    this.id = CategorySearchComponent.ID_SEED++;\n    this.setI18nText();\n    this.showSearchConfig = {\n      keyword: true,\n      keywordDescription: this.i18nCategorySearchText.getSearchMessage,\n      field: true,\n      fieldDescription: this.i18nCategorySearchText.getFindingMessage,\n      category: true,\n      categoryDescription: this.i18nCategorySearchText.selectFilterCondition,\n    };\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['defaultSearchField'] || changes['category'] || changes['selectedTags']) {\n      this.init();\n    }\n    if (changes['searchKey']) {\n      this.setSearchKeyTag();\n    }\n    if (changes['showSearchCategory']) {\n      this.setSearchShow();\n    }\n    if (changes['tagMaxWidth']) {\n      this.setTagsMaxWidth();\n    }\n  }\n\n  ngAfterViewInit() {\n    // 获取所有默认模板，规避脏检查添加延时\n    setTimeout(() =>\n      this.defaultTemplates.forEach((item) => {\n        this.templates[item.type] = item.template;\n      })\n    );\n\n    if (this.scrollBarContainer && this.inputEle) {\n      // 初始化如果有滚动条直接位移至输入框\n      this.scrollToTail(true);\n      // 监听滚动事件，在跳转至指定标签后触发其下拉列表\n      fromEvent(this.scrollBarContainer.nativeElement, 'scroll')\n        .pipe(\n          takeUntil(this.destroy$),\n          tap(() => {\n            // 指定标签在可视范围则展开下拉，不在可视范围，即触发滚动后清除定时的展开下拉动作\n            if (this.scrollTimeout) {\n              clearTimeout(this.scrollTimeout);\n              this.scrollTimeout = undefined;\n            }\n            // TODO: 无法区分手动和自动滚动，待处理滚动时关闭已打开的下拉\n          }),\n          // 300毫秒内不再触发滚动事件则展开下拉列表\n          debounceTime(this.DELAY)\n        )\n        .subscribe((event) => this.openCurrentScrollTagMenu(event));\n    }\n  }\n\n  ngAfterContentInit() {\n    this.setCustomTemplate(this.contentTemplates);\n    this.contentTemplates.changes.subscribe((data) => this.setCustomTemplate(data));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  setCustomTemplate(data) {\n    if (data?.length && this.category) {\n      this.customTemplates = {};\n      data.forEach((item) => {\n        this.customTemplates[item.field] = item.template;\n      });\n      this.category.forEach((tag) => {\n        tag.customTemplate = this.customTemplates[tag.field];\n      });\n      this.selectedTags.forEach((tag) => {\n        tag.customTemplate = this.customTemplates[tag.field];\n      });\n    }\n  }\n\n  setI18nText() {\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.i18nCategorySearchText = this.i18n.getI18nText().categorySearch;\n    this.i18n\n      .langChange()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((data) => {\n        this.i18nCommonText = data.common;\n        this.i18nCategorySearchText = data.categorySearch;\n        // 关键字分类内文本不能随语言对象变化，需重新赋值\n        const [keyword] = this.selectedTags.filter((item) => item.field === 'devuiCategorySearchKeyword');\n        if (keyword) {\n          keyword.label = this.i18nCategorySearchText['keyword'];\n          keyword.title = `${keyword.label}:${keyword.value?.label}`;\n        }\n      });\n  }\n\n  // 插入tag max-width 样式控制是否显示省略号\n  setTagsMaxWidth() {\n    if (this.tagMaxWidth) {\n      const rule = `.devui-category-search-id-${this.id} .devui-tag-container d-tag>.devui-tag-item>span{max-width:${this.tagMaxWidth}px}`;\n      const style = this.document.createElement('style');\n      style.innerText = rule;\n      this.document.head.appendChild(style);\n    }\n  }\n\n  setSearchShow() {\n    const customConfig =\n      typeof this.showSearchCategory === 'boolean'\n        ? {\n          keyword: this.showSearchCategory,\n          field: this.showSearchCategory,\n          category: this.showSearchCategory,\n        }\n        : this.showSearchCategory;\n    this.showSearchConfig = { ...this.showSearchConfig, ...customConfig };\n  }\n\n  setSearchKeyTag() {\n    const result = this.selectedTags.filter((item) => item.field !== 'devuiCategorySearchKeyword');\n    if (this.searchKey && !this.currentSelectTag) {\n      const label = this.i18nCategorySearchText['keyword'];\n      const searchKeyTag = {\n        options: [],\n        field: 'devuiCategorySearchKeyword',\n        label: label,\n        type: 'keyword',\n        title: `${label}:${this.searchKey}`,\n        value: {\n          label: this.searchKey,\n          value: this.searchKey,\n          cache: this.searchKey,\n        },\n      };\n      this.updateSelectedTags(searchKeyTag, true, result);\n      this.searchKeyCache = this.searchKey;\n    }\n    this.searchKey = '';\n    setTimeout(() => {\n      this.enterSearch = false;\n    }, this.DELAY);\n    return result;\n  }\n\n  init() {\n    this.setValue(this.category);\n    this.setValue(this.selectedTags, true);\n    this.initCategoryDisplay();\n    if (this.defaultSearchField && this.defaultSearchField.length) {\n      this.searchField = this.category.filter(\n        (item) => this.defaultSearchField.includes(item.field) && ALLOWED_SEARCH_FIELD_TYPES.includes(item.type)\n      );\n    }\n    // 初始化时判断已选中分类中最后一项是否赋值，未赋值则识别为正在处理的分类，优先显示赋值下拉列表\n    if (this.selectedTags.length) {\n      const [lastItem] = this.selectedTags.slice(-1);\n      const isNull = lastItem.value[lastItem.filterKey || 'label'] === undefined;\n      this.currentSelectTag = isNull && (lastItem.value.value === undefined || lastItem.value.value === []) ? lastItem : undefined;\n    }\n  }\n\n  // 初始化tag的value属性：{filterKey | label, value, data}\n  initCategoryItem(item) {\n    const preValue = this.valueIsArrayTypes.includes(item.type) ? { value: [] } : { value: undefined };\n    preValue[item.filterKey || 'label'] = undefined;\n    if (item.value) {\n      for (const prop in preValue) {\n        if (item.value[prop] === undefined) {\n          item.value[prop] = preValue[prop];\n        }\n      }\n    } else {\n      item.value = preValue;\n    }\n    item.value.cache = (item.value.value && typeof item.value.value === 'object' && cloneDeep(item.value.value)) || item.value.value;\n    if (item.type === 'treeSelect' && item.options && item.options.length) {\n      item.value.options = cloneDeep(item.options);\n    }\n    item.customTemplate = this.customTemplates[item.field] || item.customTemplate;\n    return item;\n  }\n\n  setValue(data, isSelectedTags = false) {\n    if (Array.isArray(data) && data.length) {\n      data.forEach((item) => {\n        if (isSelectedTags) {\n          let result = '';\n          const originItem = this.category.find((categoryItem) => categoryItem.field === item.field);\n          merge(item, originItem);\n          if (item.value.value) {\n            item.value.cache = cloneDeep(item.value.value);\n            result = this.joinLabelTypes.includes(item.type) ? this.getItemValue(item.value.value, item.filterKey || 'label') : '';\n          }\n          item.title = this.setTitle(item, item.type, result);\n        } else {\n          item = this.initCategoryItem(item);\n        }\n      });\n    }\n  }\n\n  setTitle(tag: ICategorySearchTagItem, type: string, result?: string) {\n    return this.joinLabelTypes.includes(type)\n      ? `${tag.label}: ${result || ''}`\n      : `${tag.label}: ${result || (tag.value && tag.value[tag.filterKey || 'label']) || ''}`;\n  }\n\n  initCategoryDisplay() {\n    const selectedTagsField = this.selectedTags.map((item) => item.field);\n    if (this.categoryInGroup) {\n      const groupObj = {};\n      this.category.forEach((item) => this.insertCategoryToGroup(item.group, groupObj, item, selectedTagsField.indexOf(item.field) === -1));\n      const keys = this.groupOrderConfig || Object.keys(groupObj);\n      this.categoryDisplay = [];\n      keys.forEach((key) => {\n        if (groupObj[key]) {\n          const groupItem = <ICategorySearchTagItem>{};\n          groupItem.groupName = key;\n          groupItem.groupLength = groupObj[key].length;\n          this.categoryDisplay.push(groupItem, ...groupObj[key]);\n        }\n      });\n    } else {\n      this.categoryDisplay =\n        selectedTagsField && selectedTagsField.length\n          ? this.category.filter((item) => selectedTagsField.indexOf(item.field) === -1)\n          : this.category;\n    }\n  }\n\n  insertCategoryToGroup(groupName, groupObj, item, isInsert) {\n    if (!groupName) {\n      return;\n    }\n    groupObj[groupName] = groupObj[groupName] || [];\n    if (isInsert) {\n      groupObj[groupName].push(item);\n    }\n  }\n\n  search() {\n    const result = this.setSearchKeyTag();\n    this.searchEvent.emit({ selectedTags: result, searchKey: this.searchKeyCache });\n    this.isFocus = true;\n  }\n\n  searchCategory(item) {\n    const validField = item;\n    this.updateFieldValue(validField, this.searchKey);\n    this.updateSelectedTags(validField);\n    this.searchKey = '';\n    this.enterSearch = false;\n    this.finishChoose();\n  }\n\n  searchInputValue(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const result = this.setSearchKeyTag();\n    this.searchEvent.emit({ selectedTags: result, searchKey: this.searchKeyCache });\n  }\n\n  chooseCategory(item, inputDropdown: DropDownDirective) {\n    // 点选分组名称不处理\n    if (item.groupLength !== undefined) {\n      return;\n    }\n    setTimeout(() => {\n      this.currentSelectTag = item;\n      if (this.currentSelectTag.type === 'label') {\n        this.currentSelectTag = this.mergeToLabel(this.currentSelectTag);\n      }\n      inputDropdown.isOpen = true;\n    }, this.DROPDOWN_ANIMATION_TIMEOUT);\n    this.updateSelectedTags(item, false);\n  }\n\n  updateSelectedTags(tag, valueChanged = true, result?: any) {\n    this.canChange(tag, 'add').then((val) => {\n      if (!val) {\n        return;\n      }\n      const index = this.selectedTags.map((item) => item.field).indexOf(tag.field);\n      if (index > -1) {\n        if (!tag.value.value) {\n          // 通过输入选择分类时避免空值覆盖已选值\n          merge(tag, this.selectedTags[index]);\n        }\n        this.selectedTags[index] = tag;\n      } else {\n        this.selectedTags.push(tag);\n      }\n      this.resolveCategoryDisplay(tag, 'delete');\n      if (valueChanged) {\n        // 只在新增标签时位移滚动条\n        if (this.scrollToTailFlag) {\n          setTimeout(() => this.scrollToTail());\n        }\n        this.selectedTagsChange.emit({ selectedTags: result || this.selectedTags, currentChangeTag: tag, operation: 'add' });\n        this.isSearchCategory = false;\n      }\n    });\n  }\n\n  // 判断滚动条是否存在，如果存在自动滚动到末尾的输入框\n  scrollToTail(isInit?: boolean) {\n    const dom = this.scrollBarContainer.nativeElement;\n    if (this.toggleScrollToTail && dom.scrollWidth > dom.clientWidth) {\n      if (isInit) {\n        dom.scrollLeft = dom.scrollWidth - dom.clientWidth;\n      } else {\n        this.inputEle.nativeElement.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });\n      }\n    } else if (!isInit) {\n      // 初始化不聚焦，避免展开下拉\n      this.inputEle.nativeElement.focus();\n    }\n  }\n\n  // 滚动至指定的tag\n  scrollToTag(index: number, event: Event) {\n    const tags = this.scrollBarContainer?.nativeElement.querySelectorAll('ul.devui-category-search-line>li');\n    if (tags[index]) {\n      this.currentScrollTagIndex = index;\n      tags[index].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });\n      this.scrollTimeout = setTimeout(() => this.openCurrentScrollTagMenu(event), this.DELAY);\n    }\n  }\n\n  openCurrentScrollTagMenu(event) {\n    if (this.currentScrollTagIndex !== undefined) {\n      const dropdownArr = this.selectedDropdownList.toArray();\n      this.openMenu(dropdownArr[this.currentScrollTagIndex], event);\n      this.currentScrollTagIndex = undefined;\n    }\n  }\n\n  updateFieldValue(field, value) {\n    const result = {};\n    const filterKey = field.filterKey || 'label';\n    const colorKey = field.colorKey || 'color';\n    result[filterKey] = value;\n    if (field.type === 'radio') {\n      field.value.value = value;\n      field.title = this.setTitle(field, 'radio', value);\n    }\n    if (field.type === 'label') {\n      if (!field.options[0]?.$label) {\n        this.mergeToLabel(field);\n      }\n      result[colorKey] = COLORS[Math.floor(COLORS.length * Math.random())];\n      result['$label'] = `${value}_${result[colorKey]}`;\n    }\n    if (['label', 'checkbox'].includes(field.type)) {\n      field.value.value = [result];\n      // setTitle中checkbox与label同样处理，不需要针对label修改类型参数\n      field.title = this.setTitle(field, 'checkbox', value);\n    }\n    field.value[filterKey] = value;\n    field.value.cache = cloneDeep(field.value.value);\n  }\n\n  removeTag(tag: ICategorySearchTagItem, event?: Event) {\n    this.canChange(tag, 'delete').then((val) => {\n      if (!val) {\n        if (this.beforeTagChange && event) {\n          event.stopPropagation();\n        }\n        return;\n      }\n      tag = this.resetValue(tag);\n      this.selectedTags = this.selectedTags.filter((item) => item.field !== tag.field);\n      if (tag.type !== 'keyword') {\n        this.selectedTagsChange.emit({ selectedTags: this.selectedTags, currentChangeTag: tag, operation: 'delete' });\n        this.resolveCategoryDisplay(tag, 'add');\n      } else {\n        this.searchKey = this.searchKey === this.searchKeyCache ? '' : this.searchKey;\n        this.searchKeyCache = '';\n        this.searchEvent.emit({ selectedTags: this.selectedTags, searchKey: '' });\n      }\n      this.currentSelectTag = undefined;\n    });\n  }\n\n  checkInputSearching() {\n    this.isFocus = true;\n    if (this.searchKey === '') {\n      this.enterSearch = false;\n    } else {\n      this.enterSearch = true;\n    }\n  }\n\n  // 解决dropdownMenu展开时焦点会自动到toggle上的问题\n  focusInput() {\n    setTimeout(() => {\n      this.inputEle.nativeElement.focus();\n    });\n  }\n\n  // 失焦时关闭当前下拉列表，延时用以防止关闭掉点击分类展开的内容列表\n  blurInput() {\n    setTimeout(() => {\n      if (!this.currentSelectTag && this.currentOpenDropdown) {\n        this.currentOpenDropdown.isOpen = false;\n      }\n    }, this.DELAY);\n  }\n\n  openMenu(inputDropdown: DropDownDirective, event) {\n    if (inputDropdown.isOpen || (event.type === 'keyup' && (event.code === 'Enter' || event.code === 'Backspace'))) {\n      return;\n    }\n    setTimeout(() => {\n      if (!inputDropdown.isOpen) {\n        inputDropdown.toggle();\n      }\n    });\n  }\n\n  closeMenu(inputDropdown: DropDownDirective) {\n    if (inputDropdown.isOpen) {\n      inputDropdown.toggle();\n    }\n  }\n\n  backspaceEvent(inputDropdown) {\n    if (this.searchKey) {\n      return;\n    }\n    if (this.currentSelectTag) {\n      this.currentSelectTag = undefined;\n      this.closeMenu(inputDropdown);\n      return;\n    }\n    this.canChange(this.selectedTags[this.selectedTags.length - 1], 'delete').then((val) => {\n      if (!val) {\n        return;\n      }\n      const changeTag = this.selectedTags.pop();\n      this.resolveCategoryDisplay(changeTag, 'add');\n      if (changeTag) {\n        this.selectedTagsChange.emit({ selectedTags: this.selectedTags, currentChangeTag: changeTag, operation: 'delete' });\n      }\n    });\n    this.closeMenu(inputDropdown);\n  }\n\n  canChange(tag, operation: 'delete' | 'add') {\n    let changeResult = Promise.resolve(true);\n    if (this.beforeTagChange) {\n      const result: any = this.beforeTagChange(tag, this.searchKey, operation);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          changeResult = result;\n        } else if (result.subscribe) {\n          changeResult = (result as Observable<boolean>).toPromise();\n        } else {\n          changeResult = Promise.resolve(result);\n        }\n      }\n    }\n    return changeResult;\n  }\n\n  finishChoose() {\n    this.currentSelectTag = undefined;\n    this.inputEle.nativeElement.focus();\n  }\n\n  clearFilter(event) {\n    if (this.selectedTags.length) {\n      this.selectedTags.forEach((item) => this.resetValue(item));\n      this.selectedTags = [];\n    }\n    if (this.searchKey || this.searchKeyCache) {\n      this.searchKey = '';\n      this.searchKeyCache = '';\n    }\n    if (this.currentSelectTag) {\n      this.currentSelectTag = undefined;\n    }\n    this.selectedTagsChange.emit({ selectedTags: [], currentChangeTag: undefined, operation: 'clear' });\n    this.clearAllEvent.emit(event);\n    this.initCategoryDisplay();\n  }\n\n  resolveCategoryDisplay(tag, type) {\n    if (tag && type === 'add') {\n      if (this.categoryInGroup) {\n        const groupIndex = this.categoryDisplay.findIndex((item) => item.groupName === tag.group);\n        this.categoryDisplay[groupIndex].groupLength++;\n        this.categoryDisplay.splice(groupIndex + 1, 0, tag);\n      } else {\n        this.categoryDisplay.push(tag);\n      }\n    }\n    if (type === 'delete') {\n      if (this.categoryInGroup) {\n        const tagIndex = this.categoryDisplay.findIndex((item) => item.field === tag.field);\n        if (tagIndex >= 0) {\n          const groupIndex = this.categoryDisplay.findIndex((item) => item.groupName === tag.group);\n          this.categoryDisplay[groupIndex].groupLength--;\n          this.categoryDisplay.splice(tagIndex, 1);\n        }\n      } else {\n        this.categoryDisplay = this.categoryDisplay.filter((item) => item.field !== tag.field);\n      }\n    }\n  }\n\n  createFilterFn() {\n    this.createFilterEvent.emit({ name: this.filterName, selectedTags: this.selectedTags, keyword: this.searchKey });\n    this.filterName = '';\n  }\n\n  createFilterInputAutoFocus(dropdown: DropDownDirective, inputElm: HTMLElement, filterNameForm: NgForm) {\n    if (dropdown.isOpen) {\n      filterNameForm.form.reset();\n      setTimeout(() => inputElm.focus());\n    }\n  }\n\n  searchKeyChangeEvent(event: string) {\n    this.enterSearch = !!event;\n    this.currentSearchCategory = this.category.filter((item) => item['label'].toLowerCase().includes(event.toLowerCase()));\n    this.searchKeyChange.emit(event);\n  }\n\n  checkType(value) {\n    return value && value.type === 'radio' ? 'all' : 'blank';\n  }\n\n  resetValue(tag) {\n    tag.value = this.valueIsArrayTypes.includes(tag.type) ? { value: [] } : { value: undefined };\n    tag.value[tag.filterKey || 'label'] = undefined;\n    return tag;\n  }\n\n  afterDropdownClosed() {\n    setTimeout(() => {\n      this.currentSelectTag = undefined;\n    }, this.DROPDOWN_ANIMATION_TIMEOUT + 100);\n  }\n\n  /* 各类型模板调用方法 */\n\n  // radio 单选 处理选中项方法\n  chooseItem(tag, chooseItem) {\n    this.afterDropdownClosed();\n    tag.value = cloneDeep(chooseItem);\n    tag.value.cache = tag.value.value;\n    tag.title = this.setTitle(tag, 'radio');\n    this.updateSelectedTags(tag);\n  }\n\n  confirmDate(tag) {\n    this.afterDropdownClosed();\n    tag.value.cache = cloneDeep(tag.value.value);\n    tag.value[tag.filterKey || 'label'] = tag.showTime\n      ? this.dateConverter.formatDateTime(tag.value.value[0]) + ' - ' + this.dateConverter.formatDateTime(tag.value.value[1])\n      : this.dateConverter.format(tag.value.value[0]) + ' - ' + this.dateConverter.format(tag.value.value[1]);\n    tag.title = this.setTitle(tag, 'dateRange');\n    this.updateSelectedTags(tag);\n  }\n\n  dateValueChange(tag, datepickerpro: DatepickerProCalendarComponent) {\n    if (datepickerpro.dateValue.length) {\n      const index = datepickerpro.currentActiveInput === 'start' ? 0 : 1;\n      if (tag.value.value && !datepickerpro.dateValue.includes('')) {\n        tag.value.value[index] = datepickerpro.curActiveDate;\n        tag.value.value = [...tag.value.value];\n      } else {\n        tag.value.value = [datepickerpro.curActiveDate];\n      }\n    } else {\n      tag.value.value = [];\n    }\n  }\n\n  // checkbox | label 多选 处理选中项方法\n  chooseItems(tag) {\n    this.afterDropdownClosed();\n    const result = this.getItemValue(tag.value.value, tag.filterKey || 'label');\n    if (result) {\n      tag.title = this.setTitle(tag, 'checkbox', result);\n      tag.value[tag.filterKey || 'label'] = result;\n      tag.value.cache = cloneDeep(tag.value.value);\n      this.updateSelectedTags(tag);\n    } else {\n      this.removeTag(tag);\n    }\n  }\n\n  // checkbox | label 将选中项对应filterKey的值合并的方法，当前多选已通过data展示，可考虑移除\n  getItemValue(value, key) {\n    if (value && Array.isArray(value)) {\n      const result = value.map((item) => item[key]);\n      return result.join(',');\n    }\n  }\n\n  // checkbox | label 当下拉菜单展开重置多选的选中状态\n  resetContent(dropdown: DropDownDirective, tag?: any) {\n    if (this.toggleEvent) {\n      this.toggleEvent(dropdown, tag, this.currentSelectTag);\n    }\n    if (dropdown.isOpen) {\n      this.currentOpenDropdown = dropdown;\n      if (tag?.type === 'keyword') {\n        this.searchKey = this.searchKeyCache;\n        this.inputEle.nativeElement.focus();\n        dropdown.isOpen = false;\n      }\n    } else {\n      this.clearCurrentSelectTagFromSearch();\n      this.currentOpenDropdown = undefined;\n      this.showNoDataTips = false;\n      return;\n    }\n    if (tag) {\n      this.scrollToTailFlag = false;\n      if (!isEqual(tag.value.value, tag.value.cache)) {\n        tag.value.value = cloneDeep(tag.value.cache);\n        this.handleAccordingType(tag.type, tag.value.options);\n      }\n    } else if (this.currentSelectTag) {\n      this.currentSelectTag.value.value = this.valueIsArrayTypes.includes(this.currentSelectTag.type) ? [] : undefined;\n      this.handleAccordingType(this.currentSelectTag.type, this.currentSelectTag.options);\n      this.scrollToTailFlag = true;\n    }\n    this.showNoDataTips = this.categoryDisplay.length === 0 || !this.categoryDisplay.some((item) => item && item.groupLength === undefined);\n  }\n\n  showCurrentSearchCategory(item, inputDropdown: DropDownDirective) {\n    this.isSearchCategory = true;\n    this.clearSearchKey();\n    this.closeMenu(inputDropdown);\n    this.chooseCategory(item, inputDropdown);\n    setTimeout(() => this.checkInputSearching(), this.DELAY);\n  }\n\n  clearCurrentSelectTagFromSearch() {\n    if (this.currentSelectTag) {\n      if (this.isSearchCategory) {\n        this.isSearchCategory = false;\n        setTimeout(() => this.finishChoose(), this.DELAY);\n      }\n    }\n  }\n\n  handleAccordingType(type: string, options: Array<any>) {\n    switch (type) {\n    case 'treeSelect':\n      options = cloneDeep(options);\n      break;\n    case 'textInput':\n      setTimeout(() => {\n        const inputDom: HTMLElement = this.document.querySelector('.devui-category-search-type-text-input');\n        if (inputDom) {\n          inputDom.focus();\n        }\n      }, this.DROPDOWN_ANIMATION_TIMEOUT);\n      break;\n    default:\n    }\n  }\n\n  // label 合并名称和颜色字段赋给tag，待[tag]支持传入对象后可移除\n  mergeToLabel(obj) {\n    if (obj && obj.options && Array.isArray(obj.options)) {\n      obj.options.map((item) => {\n        item.$label = `${item[obj.filterKey || 'label']}_${item[obj.colorKey || 'color']}`;\n      });\n    }\n    return obj;\n  }\n\n  // label 拆分名称和颜色用于下拉选项显示\n  splitLabel(key, value) {\n    // 初始化选中类别生成标签时，value为label的对象，不需要对值进行操作\n    if (typeof value !== 'string') {\n      return;\n    }\n    const res = value && value.split('_');\n    const obj = res && { label: res[0], color: res[1] };\n    return obj && obj[key];\n  }\n\n  // textInput 文本输入框 处理选中项方法\n  getTextInputValue(tag) {\n    this.afterDropdownClosed();\n    tag.value[tag.filterKey || 'label'] = tag.value.cache = tag.value.value;\n    tag.title = this.setTitle(tag, 'textInput');\n    this.updateSelectedTags(tag);\n  }\n\n  // numberRange 数字范围 处理选中项方法\n  getNumberRangeValue(tag) {\n    this.afterDropdownClosed();\n    const startNum = tag.value.value[0] || 0;\n    const endNum = tag.value.value[1] || 0;\n    tag.value.value = [startNum, endNum];\n    tag.value.cache = [startNum, endNum];\n    tag.value[tag.filterKey || 'label'] = `${startNum} - ${endNum}`;\n    tag.title = this.setTitle(tag, 'numberRange');\n    this.updateSelectedTags(tag);\n  }\n\n  // treeSelect 树 处理选中项方法\n  getTreeValue(tag, tree) {\n    this.afterDropdownClosed();\n    const result = [];\n    const selectedIds = [];\n    tag.value.value.forEach((item) => {\n      result.push(item[tag.filterKey || tag.treeNodeTitleKey || 'title']);\n      selectedIds.push(item[tag.treeNodeIdKey || 'id']);\n    });\n    if (result.length) {\n      tag.value.options = cloneDeep(tag.options);\n      tag.value.cache = cloneDeep(tag.value.value);\n      tag.value[tag.filterKey || 'label'] = result.join(',');\n      tag.title = this.setTitle(tag, 'treeSelect');\n      if (tag.multiple) {\n        const halfCheckedIds = [];\n        tree.nodes.forEach((item) => item.data.halfChecked && halfCheckedIds.push(item.id));\n        this.updateTreeData(tag, tag.value.options, selectedIds, halfCheckedIds);\n      }\n      this.updateSelectedTags(tag);\n    } else {\n      this.removeTag(tag);\n    }\n  }\n\n  updateTreeData(tag, data, selectedIds, halfCheckedIds) {\n    data.forEach((item) => {\n      const itemId = item[tag.treeNodeIdKey || 'id'];\n      const childData = item[tag.treeNodeChildrenKey || 'children'];\n      item.isChecked = selectedIds.includes(itemId);\n      item.halfChecked = halfCheckedIds.includes(itemId);\n      if (childData && childData.length) {\n        this.updateTreeData(tag, childData, selectedIds, halfCheckedIds);\n      }\n    });\n  }\n\n  onOperableNodeChecked(selectedNodes: ITreeItem[], tag: ICategorySearchTagItem) {\n    const selectedValueExtractor = (nodes) => {\n      return tag.leafOnly\n        ? nodes.filter((node) => !node.data.isParent).map((node) => node.data.originItem)\n        : nodes.map((node) => node.data.originItem);\n    };\n    if (tag.multiple) {\n      tag.value.value = selectedValueExtractor(selectedNodes);\n    }\n  }\n\n  onOperableNodeSelected(selectedNode: ITreeItem, tag: ICategorySearchTagItem, tree) {\n    if (tag.multiple || (tag.leafOnly && selectedNode.data.isParent)) {\n      return;\n    }\n    if (selectedNode.data.isActive) {\n      tag.value.value = [selectedNode.data.originItem];\n      this.getTreeValue(tag, tree);\n    } else {\n      selectedNode.data.isActive = true;\n    }\n  }\n\n  treeSearch(tree, value) {\n    tree.operableTree.treeFactory.searchTree(value, true);\n  }\n\n  clearSearchKey() {\n    this.searchKey = '';\n  }\n}\n","<div\n  #PrimeContainer\n  class=\"devui-category-search-container devui-category-search-id-{{ id }}\"\n  [ngClass]=\"{ 'container-hover': isHover && !isFocus }\"\n  (mouseenter)=\"isHover = true\"\n  (mouseleave)=\"isHover = false\"\n>\n  <div class=\"devui-category-search-icon\" (click)=\"search()\">\n    <svg\n      width=\"16px\"\n      height=\"16px\"\n      viewBox=\"0 0 16 16\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      class=\"svg-icon-search\"\n    >\n      <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M7,0 C10.8659932,0 14,3.13400675 14,7 C14,8.57190212 13.4818819,10.0227913 12.6071076,11.1912056 L15.7071068,14.2928932 C16.0976311,14.6834175 16.0976311,15.3165825 15.7071068,15.7071068 C15.3466228,16.0675907 14.7793918,16.0953203 14.3871006,15.7902954 L14.2928932,15.7071068 L11.1912056,12.6071076 C10.0227913,13.4818819 8.57190212,14 7,14 C3.13400675,14 5.5067062e-14,10.8659932 5.5067062e-14,7 C5.5067062e-14,3.13400675 3.13400675,0 7,0 Z M7,2 C4.23857625,2 2,4.23857625 2,7 C2,9.76142375 4.23857625,12 7,12 C9.76142375,12 12,9.76142375 12,7 C12,4.23857625 9.76142375,2 7,2 Z\"\n          id=\"��Բ��\"\n          fill=\"#71757F\"\n        ></path>\n      </g>\n    </svg>\n  </div>\n  <div #ScrollBarContainer class=\"devui-category-search-line-container\">\n    <ul class=\"devui-category-search-line\">\n      <li\n        class=\"devui-tag-item\"\n        *ngFor=\"let item of selectedTags\"\n        #selectedDropdown=\"d-dropdown\"\n        [ngStyle]=\"{ width: tagMaxWidth || '' }\"\n        dDropDown\n        appendToBody\n        dDropDownToggle\n        [appendToBodyDirections]=\"['rightDown', 'rightUp', 'leftDown', 'leftUp']\"\n        [closeScope]=\"checkType(item)\"\n        (toggleEvent)=\"resetContent(selectedDropdown, item)\"\n      >\n        <ng-template [ngTemplateOutlet]=\"joinLabelTypesTemplate\" [ngTemplateOutletContext]=\"{ item: item }\"></ng-template>\n        <div dDropDownMenu class=\"devui-dropdown-menu devui-dropdown-menu-fix\" [ngClass]=\"{ 'max-height': item.type !== 'treeSelect' }\">\n          <ng-template\n            [ngTemplateOutlet]=\"item.customTemplate || templates[item.type]\"\n            [ngTemplateOutletContext]=\"{ tagOption: item, dropdown: selectedDropdown, isSelected: true }\"\n          ></ng-template>\n        </div>\n      </li>\n      <div class=\"devui-category-search-input\">\n        <div\n          class=\"devui-input-container\"\n          #inputDropdown=\"d-dropdown\"\n          dDropDown\n          appendToBody\n          [trigger]=\"'manually'\"\n          [appendToBodyDirections]=\"['rightDown', 'rightUp', 'leftDown', 'leftUp']\"\n          [closeScope]=\"checkType(currentSelectTag)\"\n          (toggleEvent)=\"resetContent(inputDropdown)\"\n        >\n          <div style=\"width: 100%\">\n            <input\n              class=\"devui-category-search-toggle\"\n              autocomplete=\"off\"\n              #InputEle\n              dDropDownToggle\n              dTextInput\n              [readOnly]=\"inputReadOnly\"\n              [placeholder]=\"placeholderText || i18nCategorySearchText?.searchPlaceholder || ''\"\n              [(ngModel)]=\"searchKey\"\n              (ngModelChange)=\"searchKeyChangeEvent($event)\"\n              (click)=\"openMenu(inputDropdown, $event)\"\n              (keyup)=\"checkInputSearching(); openMenu(inputDropdown, $event)\"\n              (keydown.backspace)=\"backspaceEvent(inputDropdown)\"\n              (keydown.enter)=\"searchInputValue($event); closeMenu(inputDropdown)\"\n              (focus)=\"isHover = false; isFocus = true\"\n              (blur)=\"isFocus = false; blurInput()\"\n            />\n          </div>\n          <div\n            *ngIf=\"!enterSearch || (enterSearch && showSearchCategory)\"\n            dDropDownMenu\n            class=\"devui-dropdown-menu devui-dropdown-menu-fix\"\n            [ngClass]=\"{ 'max-height': currentSelectTag?.type !== 'treeSelect' }\"\n          >\n            <ul *ngIf=\"!currentSelectTag\" class=\"devui-dropdown-menu-template devui-scrollbar\">\n              <ng-container *ngIf=\"!enterSearch && !currentSelectTag\">\n                <ng-container *ngFor=\"let item of categoryDisplay\">\n                  <li *ngIf=\"item.groupLength\" class=\"devui-dropdown-item devui-category-search-group\">\n                    <ng-template\n                      [ngTemplateOutlet]=\"customGroupNameTemplate || defaultGroupNameTemplate\"\n                      [ngTemplateOutletContext]=\"{ tag: item }\"\n                    ></ng-template>\n                  </li>\n                  <li\n                    *ngIf=\"item.groupLength === undefined\"\n                    class=\"devui-dropdown-item\"\n                    (click)=\"chooseCategory(item, inputDropdown); closeMenu(inputDropdown)\"\n                  >\n                    <span title=\"{{ item?.label }}\">{{ item?.label }}</span>\n                  </li>\n                </ng-container>\n                <div class=\"devui-no-data-text\" *ngIf=\"showNoDataTips\">{{ i18nCategorySearchText?.noFilterConditions }}</div>\n              </ng-container>\n              <ng-container *ngIf=\"enterSearch\">\n                <li\n                  *ngIf=\"showSearchConfig.keyword\"\n                  class=\"devui-dropdown-item devui-search-description\"\n                  (click)=\"searchInputValue($event); closeMenu(inputDropdown)\"\n                >\n                  <span class=\"icon-search\"></span>{{ showSearchConfig.keywordDescription(searchKey) }}\n                </li>\n                <ng-container *ngIf=\"showSearchConfig.field\">\n                  <li *ngFor=\"let item of searchField\" (click)=\"searchCategory(item); closeMenu(inputDropdown)\" class=\"devui-dropdown-item\">\n                    <span class=\"icon-search\"></span>{{ showSearchConfig.fieldDescription(item?.label) }}\n                  </li>\n                </ng-container>\n                <div\n                  *ngIf=\"(showSearchConfig.keyword || showSearchConfig.field) && showSearchConfig.category && currentSearchCategory?.length\"\n                  class=\"devui-dividing-line\"\n                ></div>\n                <ng-container *ngIf=\"showSearchConfig.category && currentSearchCategory?.length\">\n                  <div class=\"devui-dropdown-menu-tip\" [style.paddingBottom]=\"currentSearchCategory.length ? '0' : '12px'\">\n                    {{ showSearchConfig.categoryDescription }}\n                  </div>\n                  <ul class=\"devui-dropdown-menu-template devui-scrollbar\">\n                    <li\n                      *ngFor=\"let item of currentSearchCategory\"\n                      (click)=\"showCurrentSearchCategory(item, inputDropdown)\"\n                      class=\"devui-dropdown-item\"\n                    >\n                      <span>{{ item?.label }}</span>\n                    </li>\n                  </ul>\n                </ng-container>\n              </ng-container>\n            </ul>\n            <ng-container *ngIf=\"!enterSearch && currentSelectTag\">\n              <ng-template\n                [ngTemplateOutlet]=\"currentSelectTag.customTemplate || templates[currentSelectTag.type]\"\n                [ngTemplateOutletContext]=\"{ tagOption: currentSelectTag, dropdown: inputDropdown }\"\n              ></ng-template>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </ul>\n  </div>\n  <div class=\"devui-category-search-ctrl-container\" *ngIf=\"selectedTags.length || searchKey\">\n    <div class=\"devui-category-search-separate-line\"></div>\n    <div *ngIf=\"allowClear\" class=\"devui-category-search-icon\" (click)=\"clearFilter($event)\">\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <title>{{ i18nCategorySearchText?.clearFilterCondition }}</title>\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M4.61289944,3.20970461 L4.70710678,3.29289322 L8,6.585 L11.2928932,3.29289322 C11.6834175,2.90236893 12.3165825,2.90236893 12.7071068,3.29289322 C13.0675907,3.65337718 13.0953203,4.22060824 12.7902954,4.61289944 L12.7071068,4.70710678 L9.415,8 L12.7071068,11.2928932 C13.0976311,11.6834175 13.0976311,12.3165825 12.7071068,12.7071068 C12.3466228,13.0675907 11.7793918,13.0953203 11.3871006,12.7902954 L11.2928932,12.7071068 L8,9.415 L4.70710678,12.7071068 C4.31658249,13.0976311 3.68341751,13.0976311 3.29289322,12.7071068 C2.93240926,12.3466228 2.90467972,11.7793918 3.20970461,11.3871006 L3.29289322,11.2928932 L6.585,8 L3.29289322,4.70710678 C2.90236893,4.31658249 2.90236893,3.68341751 3.29289322,3.29289322 C3.65337718,2.93240926 4.22060824,2.90467972 4.61289944,3.20970461 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </div>\n    <div\n      *ngIf=\"allowSave\"\n      class=\"devui-category-search-icon\"\n      #saveDropdown=\"d-dropdown\"\n      dDropDown\n      appendToBody\n      [appendToBodyDirections]=\"['rightDown', 'rightUp', 'leftDown', 'leftUp']\"\n      [closeScope]=\"'blank'\"\n      (toggleEvent)=\"createFilterInputAutoFocus(saveDropdown, createFilterInput, filterNameForm)\"\n    >\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        dDropDownToggle\n      >\n        <title>{{ i18nCategorySearchText?.saveFilter }}</title>\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M12,1 L15,4 L15,13 C15,14.1045695 14.1045695,15 13,15 L3,15 C1.8954305,15 1,14.1045695 1,13 L1,3 C1,1.8954305 1.8954305,1 3,1 L12,1 Z M11.171,3 L3,3 L3,13 L4,13 L4,10 C4,9.48716416 4.38604019,9.06449284 4.88337887,9.00672773 L5,9 L11,9 C11.5128358,9 11.9355072,9.38604019 11.9932723,9.88337887 L12,10 L12,13 L13,13 L13,4.829 L11.171,3 Z M9.999,10.999 L5.999,10.999 L6,13 L10,13 L9.999,10.999 Z M7,5 C7.55228475,5 8,5.44771525 8,6 C8,6.55228475 7.55228475,7 7,7 L5,7 C4.44771525,7 4,6.55228475 4,6 C4,5.44771525 4.44771525,5 5,5 L7,5 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n      <div dDropDownMenu class=\"devui-save-panel\">\n        <div class=\"devui-save-panel-title\">\n          <span>{{ i18nCategorySearchText?.saveFilter }}</span>\n        </div>\n        <div class=\"devui-save-filter-name\">\n          <span>{{ i18nCategorySearchText?.filterTitle }}</span>\n          <form #filterNameForm=\"ngForm\">\n            <input\n              name=\"filter-name\"\n              class=\"devui-category-search-toggle\"\n              autocomplete=\"off\"\n              #createFilterInput\n              dTextInput\n              [(ngModel)]=\"filterName\"\n              [placeholder]=\"i18nCategorySearchText?.placeholder || ''\"\n              [dValidateRules]=\"filterNameRules\"\n            />\n            <svg\n              *ngIf=\"showFilterNameClear\"\n              (click)=\"$event.preventDefault(); $event.stopPropagation(); filterName = ''\"\n              width=\"16px\"\n              height=\"16px\"\n              viewBox=\"0 0 16 16\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <title>{{ i18nCategorySearchText?.clearFilterCondition }}</title>\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <path\n                  d=\"M4.61289944,3.20970461 L4.70710678,3.29289322 L8,6.585 L11.2928932,3.29289322 C11.6834175,2.90236893 12.3165825,2.90236893 12.7071068,3.29289322 C13.0675907,3.65337718 13.0953203,4.22060824 12.7902954,4.61289944 L12.7071068,4.70710678 L9.415,8 L12.7071068,11.2928932 C13.0976311,11.6834175 13.0976311,12.3165825 12.7071068,12.7071068 C12.3466228,13.0675907 11.7793918,13.0953203 11.3871006,12.7902954 L11.2928932,12.7071068 L8,9.415 L4.70710678,12.7071068 C4.31658249,13.0976311 3.68341751,13.0976311 3.29289322,12.7071068 C2.93240926,12.3466228 2.90467972,11.7793918 3.20970461,11.3871006 L3.29289322,11.2928932 L6.585,8 L3.29289322,4.70710678 C2.90236893,4.31658249 2.90236893,3.68341751 3.29289322,3.29289322 C3.65337718,2.93240926 4.22060824,2.90467972 4.61289944,3.20970461 Z\"\n                  fill-rule=\"nonzero\"\n                ></path>\n              </g>\n            </svg>\n          </form>\n        </div>\n        <div class=\"devui-save-panel-operation-area\">\n          <d-button [disabled]=\"filterNameForm.invalid\" (btnClick)=\"createFilterFn(); saveDropdown.toggle()\">{{\n            i18nCategorySearchText?.confirm\n          }}</d-button>\n          <d-button bsStyle=\"common\" (btnClick)=\"saveDropdown.toggle()\">{{ i18nCategorySearchText?.cancel }}</d-button>\n        </div>\n      </div>\n    </div>\n    <div\n      *ngIf=\"allowShowMore\"\n      class=\"devui-category-search-icon\"\n      #seeMoreDropdown=\"d-dropdown\"\n      dDropDown\n      appendToBody\n      [alignOrigin]=\"primeContainer\"\n      [appendToBodyDirections]=\"['rightDown', 'rightUp', 'leftDown', 'leftUp']\"\n    >\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        dDropDownToggle\n      >\n        <title>{{ i18nCategorySearchText?.seeMore }}</title>\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M1,2 L3,2 L3,4 L1,4 L1,2 Z M1,7 L3,7 L3,9 L1,9 L1,7 Z M1,12 L3,12 L3,14 L1,14 L1,12 Z M5,2 L15,2 L15,4 L5,4 L5,2 Z M5,7 L15,7 L15,9 L5,9 L5,7 Z M5,12 L15,12 L15,14 L5,14 L5,12 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n      <div dDropDownMenu class=\"devui-selected-tags-list\">\n        <ul [ngStyle]=\"{ width: PrimeContainer?.clientWidth + 'px' }\">\n          <li class=\"devui-tag-item\" *ngFor=\"let item of selectedTags; let i = index\" (click)=\"scrollToTag(i, $event)\">\n            <ng-template [ngTemplateOutlet]=\"joinLabelTypesTemplate\" [ngTemplateOutletContext]=\"{ item: item }\"></ng-template>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #joinLabelTypesTemplate let-item=\"item\">\n  <div class=\"devui-tag-container\">\n    <d-tag\n      *ngIf=\"!joinLabelTypes.includes(item.type)\"\n      [deletable]=\"true\"\n      [tag]=\"item.label + ': ' + (item.value[item.filterKey || 'label'] || '')\"\n      [titleContent]=\"item.title\"\n      (tagDelete)=\"removeTag(item, $event.event)\"\n    ></d-tag>\n    <d-tags\n      *ngIf=\"joinLabelTypes.includes(item.type)\"\n      [deletable]=\"true\"\n      [tags]=\"[item]\"\n      [titleProperty]=\"'title'\"\n      (tagDelete)=\"removeTag(item, $event.event)\"\n    >\n      <ng-template let-tag=\"tag\" let-colorKey=\"tag.colorKey || 'color'\">\n        <span>{{ tag.label }}: </span>\n        <ng-container *ngFor=\"let val of tag.value.cache; let i = index\">\n          <span *ngIf=\"i > 0\" class=\"devui-color-block-split-line\"> | </span>\n          <span *ngIf=\"item.type === 'label'\" class=\"devui-color-block-sm\" [style.background]=\"val[colorKey]\"></span>\n          <span [style.color]=\"val[colorKey]\">{{ val[tag.filterKey || 'label'] || '' }}</span>\n        </ng-container>\n      </ng-template>\n    </d-tags>\n  </div>\n</ng-template>\n\n<ng-template #defaultGroupNameTemplate let-item=\"tag\">\n  <strong>{{ item?.groupName }}</strong>\n</ng-template>\n\n<ng-template #noData>\n  <div class=\"devui-no-data-tip\">{{ i18nCommonText?.noData }}</div>\n</ng-template>\n\n<ng-template [type]=\"'radio'\" let-tagOption=\"tagOption\" let-key=\"tagOption.filterKey || 'label'\">\n  <div *ngIf=\"!tagOption.options?.length\">\n    <ng-container *ngTemplateOutlet=\"noData\"></ng-container>\n  </div>\n  <ul *ngIf=\"tagOption.options?.length\" class=\"devui-dropdown-menu-template devui-scrollbar\">\n    <li\n      *ngFor=\"let item of tagOption.options\"\n      title=\"{{ item[key] }}\"\n      class=\"devui-dropdown-item\"\n      [class.active]=\"tagOption?.value[key] === item[key]\"\n      (click)=\"chooseItem(tagOption, item)\"\n    >\n      <span>{{ item[key] }}</span>\n    </li>\n  </ul>\n</ng-template>\n\n<ng-template [type]=\"'dateRange'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\">\n  <d-datepicker-calendar\n    *ngIf=\"dropdown.isOpen\"\n    id=\"{{ tagOption.field }}\"\n    style=\"overflow-x: hidden\"\n    #dDatepickerPro\n    [isRangeType]=\"true\"\n    [showTime]=\"tagOption.showTime\"\n    [ngModel]=\"tagOption.value.value\"\n    (ngModelChange)=\"dateValueChange(tagOption, dDatepickerPro)\"\n  >\n    <ng-template #footerTemplate>\n      <div class=\"devui-datepicker-footer\">\n        <d-button\n          style=\"margin-right: 8px\"\n          bsStyle=\"primary\"\n          (btnClick)=\"confirmDate(tagOption); closeMenu(dropdown)\"\n          [disabled]=\"!tagOption.value.value || tagOption.value.value.length < 2\"\n        >\n          {{ i18nCategorySearchText?.confirm }}\n        </d-button>\n      </div>\n    </ng-template>\n  </d-datepicker-calendar>\n</ng-template>\n\n<ng-template [type]=\"'checkbox'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\">\n  <div *ngIf=\"!tagOption.options?.length\">\n    <ng-container *ngTemplateOutlet=\"noData\"></ng-container>\n  </div>\n  <div *ngIf=\"tagOption.options?.length\" class=\"devui-dropdown-menu-template\">\n    <d-checkbox-group\n      [(ngModel)]=\"tagOption.value.value\"\n      [options]=\"tagOption.options\"\n      [filterKey]=\"tagOption.filterKey || 'label'\"\n      [isShowTitle]=\"true\"\n    >\n    </d-checkbox-group>\n  </div>\n  <div class=\"devui-dropdown-operation-area\">\n    <d-button (btnClick)=\"chooseItems(tagOption); closeMenu(dropdown)\">{{ i18nCategorySearchText?.confirm }}</d-button>\n    <d-button bsStyle=\"common\" (btnClick)=\"closeMenu(dropdown)\">{{ i18nCategorySearchText?.cancel }}</d-button>\n  </div>\n</ng-template>\n\n<ng-template [type]=\"'label'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\">\n  <div *ngIf=\"!tagOption.options?.length\">\n    <ng-container *ngTemplateOutlet=\"noData\"></ng-container>\n  </div>\n  <div *ngIf=\"tagOption.options?.length\" class=\"devui-dropdown-menu-template\">\n    <d-checkbox-group\n      [(ngModel)]=\"tagOption.value.value\"\n      [options]=\"tagOption.options\"\n      [filterKey]=\"'$label'\"\n      [labelTemplate]=\"labelContent\"\n      [isShowTitle]=\"true\"\n    >\n      <ng-template #labelContent let-label=\"label\">\n        <span class=\"devui-color-block\" [style.background]=\"splitLabel('color', label)\" title=\"{{ splitLabel('label', label) }}\"></span>\n        <span title=\"{{ splitLabel('label', label) }}\">{{ splitLabel('label', label) }}</span>\n      </ng-template>\n    </d-checkbox-group>\n  </div>\n  <div class=\"devui-dropdown-operation-area\">\n    <d-button (btnClick)=\"chooseItems(tagOption); closeMenu(dropdown)\">{{ i18nCategorySearchText?.confirm }}</d-button>\n    <d-button bsStyle=\"common\" (btnClick)=\"closeMenu(dropdown)\">{{ i18nCategorySearchText?.cancel }}</d-button>\n  </div>\n</ng-template>\n\n<ng-template [type]=\"'textInput'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\">\n  <form #textInputForm=\"ngForm\">\n    <input\n      name=\"text-input\"\n      class=\"devui-category-search-type-text-input\"\n      autocomplete=\"off\"\n      dTextInput\n      [(ngModel)]=\"tagOption.value.value\"\n      [maxlength]=\"tagOption.maxLength\"\n      [placeholder]=\"tagOption.placeholder || ''\"\n      [dValidateRules]=\"tagOption.validateRules\"\n    />\n  </form>\n  <div class=\"devui-dropdown-operation-area\">\n    <d-button [disabled]=\"textInputForm.invalid\" (btnClick)=\"getTextInputValue(tagOption); closeMenu(dropdown)\">{{\n      i18nCategorySearchText?.confirm\n    }}</d-button>\n    <d-button bsStyle=\"common\" (btnClick)=\"closeMenu(dropdown)\">{{ i18nCategorySearchText?.cancel }}</d-button>\n  </div>\n</ng-template>\n\n<ng-template [type]=\"'numberRange'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\">\n  <div class=\"devui-input-number-operation-area\">\n    <d-input-number\n      size=\"sm\"\n      [min]=\"tagOption.min?.left\"\n      [max]=\"tagOption.max?.left\"\n      [maxLength]=\"tagOption.maxLength?.left\"\n      [step]=\"tagOption.step?.left || 1\"\n      [reg]=\"tagOption.reg?.left\"\n      [placeholder]=\"tagOption.placeholder?.left || ''\"\n      [(ngModel)]=\"tagOption.value.value[0]\"\n    >\n    </d-input-number>\n    <span> - </span>\n    <d-input-number\n      size=\"sm\"\n      [min]=\"tagOption.min?.right\"\n      [max]=\"tagOption.max?.right\"\n      [maxLength]=\"tagOption.maxLength?.right\"\n      [step]=\"tagOption.step?.right || 1\"\n      [reg]=\"tagOption.reg?.right\"\n      [placeholder]=\"tagOption.placeholder?.right || ''\"\n      [(ngModel)]=\"tagOption.value.value[1]\"\n    >\n    </d-input-number>\n  </div>\n  <div class=\"devui-dropdown-operation-area\">\n    <d-button (btnClick)=\"getNumberRangeValue(tagOption); closeMenu(dropdown)\">{{ i18nCategorySearchText?.confirm }}</d-button>\n    <d-button bsStyle=\"common\" (btnClick)=\"closeMenu(dropdown)\">{{ i18nCategorySearchText?.cancel }}</d-button>\n  </div>\n</ng-template>\n\n<ng-template [type]=\"'treeSelect'\" let-tagOption=\"tagOption\" let-dropdown=\"dropdown\" let-isSelected=\"isSelected\">\n  <div *ngIf=\"tagOption.multiple && tagOption.options?.length\">\n    <ul class=\"devui-select-list\">\n      <span>{{ i18nCategorySearchText?.selected }}</span>\n      <li class=\"devui-select-item devui-no-label-item\" *ngFor=\"let item of tagOption.value.value; last as isLast\">\n        {{ item[tagOption.filterKey || tagOption.treeNodeTitleKey || 'title'] }}\n        <span *ngIf=\"!isLast\">, </span>\n      </li>\n    </ul>\n  </div>\n  <div *ngIf=\"tagOption.searchable\">\n    <input\n      class=\"devui-input\"\n      autocomplete=\"off\"\n      #searchInputModel=\"ngModel\"\n      [(ngModel)]=\"treeSearchKey\"\n      (ngModelChange)=\"treeSearch(tree, $event)\"\n    />\n    <span class=\"devui-form-control-feedback\">\n      <svg\n        width=\"14px\"\n        height=\"14px\"\n        viewBox=\"0 0 14 14\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        class=\"svg-icon-search\"\n        style=\"vertical-align: middle\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g transform=\"translate(-1.000000, -1.000000)\">\n            <path\n              d=\"M7.30811922,1 C10.7919973,1 13.6162384,3.82424117 13.6162384,7.30811922 C13.6162384,8.72507634 13.149053,10.0329164 12.3603151,11.0860065 L14.7360564,13.4616238 C15.0879812,13.8135487 15.0879812,14.3841316 14.7360564,14.7360564 C14.3841316,15.0879812 13.8135487,15.0879812 13.4616238,14.7360564 L11.0860065,12.3603151 C10.0329164,13.149053 8.72507634,13.6162384 7.30811922,13.6162384 C3.82424117,13.6162384 1,10.7919973 1,7.30811922 C1,3.82424117 3.82424117,1 7.30811922,1 Z M7.31,2.51 C4.6590332,2.51 2.51,4.6590332 2.51,7.31 C2.51,9.9609668 4.6590332,12.11 7.31,12.11 C9.9609668,12.11 12.11,9.9609668 12.11,7.31 C12.11,4.6590332 9.9609668,2.51 7.31,2.51 Z\"\n              fill-rule=\"nonzero\"\n            ></path>\n          </g>\n        </g>\n      </svg>\n    </span>\n  </div>\n  <div class=\"devui-category-search-tree-container\" [style.display]=\"tagOption.options?.length && !noRecord ? 'block' : 'none'\">\n    <d-operable-tree\n      #tree\n      [tree]=\"tagOption.multiple && isSelected ? tagOption.value.options : tagOption.options\"\n      [treeNodeIdKey]=\"tagOption.treeNodeIdKey || 'id'\"\n      [treeNodeChildrenKey]=\"tagOption.treeNodeChildrenKey || 'children'\"\n      [treeNodeTitleKey]=\"tagOption.filterKey || tagOption.treeNodeTitleKey || 'title'\"\n      [checkboxDisabledKey]=\"tagOption.disabledKey || 'disabled'\"\n      [checkable]=\"tagOption.multiple\"\n      [canActivateNode]=\"!tagOption.multiple\"\n      [canActivateParentNode]=\"!tagOption.leafOnly\"\n      [iconParentOpen]=\"tagOption.iconParentOpen || icons.iconParentOpen\"\n      [iconParentClose]=\"tagOption.iconParentClose || icons.iconParentClose\"\n      [iconLeaf]=\"tagOption.iconLeaf || icons.iconLeaf\"\n      (nodeChecked)=\"onOperableNodeChecked($event, tagOption)\"\n      (nodeSelected)=\"onOperableNodeSelected($event, tagOption, tree); closeMenu(dropdown)\"\n      class=\"devui-tree\"\n    >\n    </d-operable-tree>\n  </div>\n  <div *ngIf=\"!tagOption.options?.length\">\n    <ng-container *ngTemplateOutlet=\"noData\"></ng-container>\n  </div>\n  <div *ngIf=\"noRecord\" class=\"devui-no-data-tip\">{{ i18nCommonText?.noRecordsFound }}</div>\n  <div *ngIf=\"tagOption.multiple\" class=\"devui-dropdown-operation-area\">\n    <d-button (btnClick)=\"getTreeValue(tagOption, tree); closeMenu(dropdown)\">{{ i18nCategorySearchText?.confirm }}</d-button>\n    <d-button bsStyle=\"common\" (btnClick)=\"closeMenu(dropdown)\">{{ i18nCategorySearchText?.cancel }}</d-button>\n  </div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { ButtonModule } from 'ng-devui/button';\nimport { CheckBoxModule } from 'ng-devui/checkbox';\nimport { DatepickerProModule } from 'ng-devui/datepicker-pro';\nimport { DropDownModule } from 'ng-devui/dropdown';\nimport { FormModule } from 'ng-devui/form';\nimport { InputNumberModule } from 'ng-devui/input-number';\nimport { LoadingModule } from 'ng-devui/loading';\nimport { SearchModule } from 'ng-devui/search';\nimport { TagsModule } from 'ng-devui/tags';\nimport { TextInputModule } from 'ng-devui/text-input';\nimport { TreeModule } from 'ng-devui/tree';\nimport { PopperModule } from 'ng-devui/utils';\nimport { CategorySearchComponent } from './category-search.component';\nimport { ContentTemplateDirective } from './content-template.directive';\nimport { DefaultTemplateDirective } from './default-template.directive';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormModule,\n    FormsModule,\n    DropDownModule,\n    TextInputModule,\n    SearchModule,\n    TagsModule,\n    ButtonModule,\n    CheckBoxModule,\n    InputNumberModule,\n    LoadingModule,\n    TreeModule,\n    PopperModule,\n    DatepickerProModule,\n  ],\n  declarations: [CategorySearchComponent, ContentTemplateDirective, DefaultTemplateDirective],\n  exports: [CategorySearchComponent, ContentTemplateDirective, DefaultTemplateDirective],\n})\nexport class CategorySearchModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}