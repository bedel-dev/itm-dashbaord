{"version":3,"file":"ng-devui-toggle.mjs","sources":["../../devui/toggle/toggle.component.ts","../../devui/toggle/toggle.component.html","../../devui/toggle/toggle.module.ts","../../devui/toggle/ng-devui-toggle.ts"],"sourcesContent":["import {\n  Component, EventEmitter, forwardRef, HostListener, Input,\n  Output, TemplateRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'd-toggle',\n  templateUrl: './toggle.component.html',\n  styleUrls: [`./toggle.component.scss`],\n  exportAs: 'toggle',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ToggleComponent),\n    multi: true\n  }],\n  preserveWhitespaces: false,\n})\nexport class ToggleComponent implements ControlValueAccessor {\n  private _checked: boolean;\n  private _disabled: boolean;\n  content = '';\n\n  @Input() size: 'sm' | '' | 'lg' = '';\n  @Input() color: string;\n  @Input() beforeChange: (value) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() checkedContent: string | TemplateRef<any>;\n  @Input() uncheckedContent: string | TemplateRef<any>;\n\n  get customTemplate() {\n    const result = this.checked ? this.checkedContent : this.uncheckedContent;\n    if (result instanceof TemplateRef) {\n      this.content = '';\n      return result;\n    } else {\n      this.content = result || '';\n      return null;\n    }\n  }\n\n  @Input() set checked(v: boolean) {\n    this._checked = v === true;\n  }\n\n  get checked() {\n    return this._checked;\n  }\n\n  @Input() set disabled(v: boolean) {\n    this._disabled = v === true;\n  }\n\n  get disabled() {\n    return this._disabled;\n  }\n\n  @Output() change = new EventEmitter<boolean>();\n\n  private onTouchedCallback = () => {};\n  private onChangeCallback = (v: any) => {};\n\n  @HostListener('click')\n  onToggle() {\n    if (this.disabled) {\n      return;\n    }\n    this.canChange().then((change) => {\n      if (!change) {\n        return;\n      }\n      this.checked = !this.checked;\n      this.change.emit(this.checked);\n      this.onChangeCallback(this.checked);\n      this.onTouchedCallback();\n    });\n  }\n\n  canChange() {\n    let changeResult = Promise.resolve(true);\n\n    if (this.beforeChange) {\n      const result: any = this.beforeChange(this.checked);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          changeResult = result;\n        } else if (result.subscribe) {\n          changeResult = (result as Observable<boolean>).toPromise();\n        } else {\n          changeResult = Promise.resolve(result);\n        }\n      }\n    }\n\n    return changeResult;\n  }\n\n  writeValue(obj: any): void {\n    if (obj !== this.checked) {\n      this.checked = !!obj;\n    }\n  }\n\n  registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n}\n","<span\n  class=\"devui-toggle {{ size ? 'devui-toggle-' + size : '' }}\"\n  [ngClass]=\"{ 'devui-checked': checked, 'devui-disabled': disabled }\"\n  [style.background]=\"checked && !disabled ? color : ''\"\n  [style.border-color]=\"checked && !disabled ? color : ''\"\n>\n  <span class=\"devui-toggle-inner-wrapper\">\n    <ng-template [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"></ng-template>\n  </span>\n  <small></small>\n</span>\n\n<ng-template #defaultTemplate>\n  <div class=\"devui-toggle-inner\" [innerHTML]=\"content | safe: 'html'\"></div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { SafePipeModule } from 'ng-devui/utils';\nimport { ToggleComponent } from './toggle.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, SafePipeModule],\n  exports: [ToggleComponent],\n  declarations: [ToggleComponent],\n})\nexport class ToggleModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;MAmBa,eAAe;IAZ5B;QAeE,YAAO,GAAG,EAAE,CAAC;QAEJ,SAAI,GAAqB,EAAE,CAAC;QAiC3B,WAAM,GAAG,IAAI,YAAY,EAAW,CAAC;QAEvC,sBAAiB,GAAG,SAAQ,CAAC;QAC7B,qBAAgB,GAAG,CAAC,CAAM,QAAO,CAAC;KAkD3C;IAhFC,IAAI,cAAc;QAChB,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC1E,IAAI,MAAM,YAAY,WAAW,EAAE;YACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,OAAO,MAAM,CAAC;SACf;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,MAAM,IAAI,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC;SACb;KACF;IAED,IAAa,OAAO,CAAC,CAAU;QAC7B,IAAI,CAAC,QAAQ,GAAG,CAAC,KAAK,IAAI,CAAC;KAC5B;IAED,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC;KACtB;IAED,IAAa,QAAQ,CAAC,CAAU;QAC9B,IAAI,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,CAAC;KAC7B;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,SAAS,CAAC;KACvB;IAQD,QAAQ;QACN,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO;SACR;QACD,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,CAAC,MAAM;YAC3B,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YACD,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC/B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpC,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B,CAAC,CAAC;KACJ;IAED,SAAS;QACP,IAAI,YAAY,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAEzC,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,MAAM,MAAM,GAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;gBACjC,IAAI,MAAM,CAAC,IAAI,EAAE;oBACf,YAAY,GAAG,MAAM,CAAC;iBACvB;qBAAM,IAAI,MAAM,CAAC,SAAS,EAAE;oBAC3B,YAAY,GAAI,MAA8B,CAAC,SAAS,EAAE,CAAC;iBAC5D;qBAAM;oBACL,YAAY,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;iBACxC;aACF;SACF;QAED,OAAO,YAAY,CAAC;KACrB;IAED,UAAU,CAAC,GAAQ;QACjB,IAAI,GAAG,KAAK,IAAI,CAAC,OAAO,EAAE;YACxB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC;SACtB;KACF;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;KAC5B;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;KAC7B;;4GA1FU,eAAe;gGAAf,eAAe,4SAPf,CAAC;YACV,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,MAAM,eAAe,CAAC;YAC9C,KAAK,EAAE,IAAI;SACZ,CAAC,gDChBJ,wkBAeA;2FDIa,eAAe;kBAZ3B,SAAS;+BACE,UAAU,YAGV,QAAQ,aACP,CAAC;4BACV,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,qBAAqB,CAAC;4BAC9C,KAAK,EAAE,IAAI;yBACZ,CAAC,uBACmB,KAAK;8BAOjB,IAAI;sBAAZ,KAAK;gBACG,KAAK;sBAAb,KAAK;gBACG,YAAY;sBAApB,KAAK;gBACG,cAAc;sBAAtB,KAAK;gBACG,gBAAgB;sBAAxB,KAAK;gBAaO,OAAO;sBAAnB,KAAK;gBAQO,QAAQ;sBAApB,KAAK;gBAQI,MAAM;sBAAf,MAAM;gBAMP,QAAQ;sBADP,YAAY;uBAAC,OAAO;;;MEnDV,YAAY;;yGAAZ,YAAY;0GAAZ,YAAY,iBAFR,eAAe,aAFpB,YAAY,EAAE,WAAW,EAAE,cAAc,aACzC,eAAe;0GAGd,YAAY,YAJd,CAAC,YAAY,EAAE,WAAW,EAAE,cAAc,CAAC;2FAIzC,YAAY;kBALxB,QAAQ;mBAAC;oBACR,OAAO,EAAE,CAAC,YAAY,EAAE,WAAW,EAAE,cAAc,CAAC;oBACpD,OAAO,EAAE,CAAC,eAAe,CAAC;oBAC1B,YAAY,EAAE,CAAC,eAAe,CAAC;iBAChC;;;ACVD;;;;;;"}