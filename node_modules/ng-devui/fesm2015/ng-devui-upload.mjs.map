{"version":3,"file":"ng-devui-upload.mjs","sources":["../../devui/upload/file-drop.directive.ts","../../devui/upload/file-uploader.types.ts","../../devui/upload/file-uploader.class.ts","../../devui/upload/upload.class.ts","../../devui/upload/uploaded-files.component.ts","../../devui/upload/uploaded-files.component.html","../../devui/upload/multiple-upload-view.component.ts","../../devui/upload/multiple-upload-view.component.html","../../devui/upload/select-files.utils.ts","../../devui/upload/multiple-upload.component.ts","../../devui/upload/multiple-upload.component.html","../../devui/upload/single-upload-view.component.ts","../../devui/upload/single-upload-view.component.html","../../devui/upload/single-upload.component.ts","../../devui/upload/single-upload.component.html","../../devui/upload/upload.directive.ts","../../devui/upload/upload.module.ts","../../devui/upload/ng-devui-upload.ts"],"sourcesContent":["import { Directive, ElementRef, EventEmitter, HostListener, Input, Output } from '@angular/core';\n\n@Directive({\n  /* eslint-disable-next-line @angular-eslint/directive-selector*/\n  selector: '[d-file-drop]'\n})\nexport class FileDropDirective {\n  @Input() enableDrop = false;\n  @Input() isSingle = false;\n  @Output() public fileOver: EventEmitter<boolean> = new EventEmitter<boolean>();\n  @Output() public fileDrop: EventEmitter<any> = new EventEmitter<any>();\n\n  protected element: ElementRef;\n\n  public constructor(element: ElementRef) {\n    this.element = element;\n  }\n\n  @HostListener('drop', [ '$event' ])\n  public onDrop(event: any): void {\n    if (!this.enableDrop) {\n      return;\n    }\n    const transfer = this._getTransfer(event);\n    if (!transfer) {\n      return;\n    }\n    this._preventAndStop(event);\n    if (this.isSingle) {\n      this.fileDrop.emit([transfer.files[0]]);\n    } else {\n      this.fileDrop.emit(transfer.files);\n    }\n  }\n\n  @HostListener('dragover', [ '$event' ])\n  public onDragOver(event: any): void {\n    if (!this.enableDrop) {\n      return;\n    }\n    const transfer = this._getTransfer(event);\n    if (!this._haveFiles(transfer.types)) {\n      return;\n    }\n\n    this._preventAndStop(event);\n    this.fileOver.emit(true);\n  }\n\n  @HostListener('dragleave', [ '$event' ])\n  public onDragLeave(event: any): any {\n    if (!this.enableDrop) {\n      return;\n    }\n    if ((this as any).element) {\n      if (event.currentTarget === (this as any).element[ 0 ]) {\n        return;\n      }\n    }\n\n    this._preventAndStop(event);\n    this.fileOver.emit(false);\n  }\n\n  protected _getTransfer(event: any): any {\n    return event.dataTransfer ? event.dataTransfer : event.originalEvent.dataTransfer;\n  }\n\n  protected _preventAndStop(event: any): any {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  protected _haveFiles(types: any): any {\n    if (!types) {\n      return false;\n    }\n\n    if (types.indexOf) {\n      return types.indexOf('Files') !== -1;\n    } else if (types.contains) {\n      return types.contains('Files');\n    } else {\n      return false;\n    }\n  }\n}\n","export class IUploadOptions {\n  // 是否开启分片上传\n  isChunked?: boolean;\n  // 分片大小\n  chunkSize?: number;\n  // 上传接口地址\n  uri: string;\n  // http 请求方法\n  method?: string;\n  // 上传文件大小限制\n  maximumSize?: number;\n  // 自定义请求headers\n  headers?: { [key: string]: any };\n  // 认证token\n  authToken?: string;\n  // 认证token header标示\n  authTokenHeader?: string;\n  // 上传额外自定义参数\n  additionalParameter?: { [key: string]: any };\n  // 上传文件字段名称，默认file\n  fileFieldName?: string;\n  // 多文件上传,是否检查文件重名，设置为true，重名文件不会覆盖，否则会覆盖上传\n  checkSameName?: boolean;\n  // 指示了是否该使用类似cookies,authorization headers(头部授权)或者TLS客户端证书这一类资格证书来创建一个跨站点访问控制（cross-site Access-Control）请求\n  withCredentials?: boolean;\n  //  手动设置返回数据类型\n  responseType?: 'arraybuffer' | 'blob' | 'json' | 'text';\n}\n\nexport class IFileOptions {\n  accept?: string;\n  multiple?: boolean;\n  webkitdirectory?: boolean;\n}\n\nexport enum UploadStatus {\n  preLoad = 0,\n  uploading,\n  uploaded,\n  failed\n}\n","import {\n  IUploadOptions,\n  UploadStatus\n} from './file-uploader.types';\n\nexport class FileUploader {\n  private xhr: XMLHttpRequest;\n  public status: UploadStatus;\n  public response: any;\n  public percentage = 0;\n\n  constructor(public file: File,\n              public uploadOptions: IUploadOptions) {\n    this.file = file;\n    this.uploadOptions = uploadOptions;\n    this.status = UploadStatus.preLoad;\n  }\n\n  private sendCommonHandle(uploadFiles?) {\n    const {\n      uri,\n      method,\n      headers,\n      authToken,\n      authTokenHeader,\n      additionalParameter,\n      fileFieldName,\n      withCredentials,\n      responseType\n    } = this.uploadOptions;\n    const authTokenHeader_ = authTokenHeader || 'Authorization';\n    const fileFieldName_ = fileFieldName || 'file';\n\n    this.xhr = new XMLHttpRequest();\n    this.xhr.open(method || 'POST', uri);\n\n    if (withCredentials) {\n      this.xhr.withCredentials = withCredentials;\n    }\n\n    if (responseType) {\n      this.xhr.responseType = responseType;\n    }\n\n    if (authToken) {\n      this.xhr.setRequestHeader(authTokenHeader_, authToken);\n    }\n\n    if (headers) {\n      Object.keys(headers).forEach((key) => {\n        this.xhr.setRequestHeader(key, headers[key]);\n      });\n    }\n\n    this.xhr.upload.onprogress = e => {\n      this.percentage = Math.round(e.loaded * 100 / e.total);\n    };\n\n    const formData = uploadFiles && uploadFiles.length ?\n      this.oneTimeUploadFiles(fileFieldName_, additionalParameter, uploadFiles) :\n      this.parallelUploadFiles(fileFieldName_, additionalParameter);\n\n    this.xhr.send(formData);\n    this.status = UploadStatus.uploading;\n\n    this.xhr.onabort = () => {\n      this.status = UploadStatus.preLoad;\n      this.xhr = null;\n    };\n  }\n\n  private sendErrorAndLoadHandle(resolve, reject, isMultiple=false) {\n    this.xhr.onerror = () => {\n      this.response = this.xhr.response;\n      this.status = UploadStatus.failed;\n      if (isMultiple) {\n        reject({ file: this.file, response: this.xhr.response, status: UploadStatus.failed });\n      } else {\n        reject({ file: this.file, response: this.xhr.response });\n      }\n    };\n\n    this.xhr.onload = () => {\n      if (this.xhr.readyState === 4 && this.xhr.status >= 200 && this.xhr.status < 300) {\n        this.response = this.xhr.response;\n        this.status = UploadStatus.uploaded;\n        if (isMultiple) {\n          resolve({ file: this.file, response: this.xhr.response, status: UploadStatus.uploaded });\n        } else {\n          resolve({ file: this.file, response: this.xhr.response });\n        }\n      } else {\n        this.response = this.xhr.response;\n        this.status = UploadStatus.failed;\n        if(isMultiple) {\n          reject({ file: this.file, response: this.xhr.response, status: UploadStatus.failed });\n        } else {\n          reject({ file: this.file, response: this.xhr.response });\n        }\n      }\n    };\n  }\n\n  public send(uploadFiles?): Promise<{ file: File; response: any }> {\n    return new Promise((resolve, reject) => {\n      this.sendCommonHandle(uploadFiles);\n\n      this.sendErrorAndLoadHandle(resolve, reject);\n    });\n  }\n\n  public sendMultiple(uploadFiles?): Promise<{ file: File; response: any; status: UploadStatus }> {\n    return new Promise((resolve, reject) => {\n      this.sendCommonHandle(uploadFiles);\n\n      this.sendErrorAndLoadHandle(resolve, reject, true);\n    });\n  }\n\n  public parallelUploadFiles(fileFieldName_, additionalParameter) {\n    const formData = new FormData();\n    formData.append(fileFieldName_, this.file, this.file.name);\n    if (additionalParameter) {\n      Object.keys(additionalParameter).forEach((key: string) => {\n        formData.append(key, additionalParameter[key]);\n      });\n    }\n    return formData;\n  }\n\n  public oneTimeUploadFiles(fileFieldName_, additionalParameter, uploadFiles) {\n    const formData = new FormData();\n    uploadFiles.forEach(element => {\n      formData.append(fileFieldName_, element.file, element.file.name);\n      if (additionalParameter) {\n        Object.keys(additionalParameter).forEach((key: string) => {\n          formData.append(key, additionalParameter[key]);\n        });\n      }\n    });\n    return formData;\n  }\n\n  public cancel() {\n    if (this.xhr) {\n      this.xhr.abort();\n    }\n  }\n}\n","import { from, merge, of } from 'rxjs';\nimport { catchError, toArray } from 'rxjs/operators';\nimport {\n  FileUploader\n} from './file-uploader.class';\nimport { UploadStatus } from './file-uploader.types';\n\nexport class UploadComponent {\n  fileUploaders: Array<FileUploader> = [];\n  filesWithSameName = [];\n  addFile(file, options) {\n    if (options && options.checkSameName) {\n      if (this.checkFileSame(file.name)) {\n        this.fileUploaders.push(new FileUploader(file, options));\n      }\n    } else {\n      this.fileUploaders.push(new FileUploader(file, options));\n    }\n  }\n  checkFileSame(fileName) {\n    let checkRel = true;\n\n    for (let i = 0; i < this.fileUploaders.length; i++) {\n      if (fileName === this.fileUploaders[i].file.name) {\n        checkRel = false;\n        if (this.filesWithSameName.indexOf(fileName) === -1) {\n          this.filesWithSameName.push(fileName);\n        }\n        break;\n      }\n    }\n    return checkRel;\n  }\n\n  getFiles() {\n    return this.fileUploaders.map(fileUploader => {\n      return fileUploader.file;\n    });\n  }\n\n  getFullFiles() {\n    return this.fileUploaders.map(fileUploader => {\n      return fileUploader;\n    });\n  }\n\n  upload(oneFile?, isMultipleUpload=false) {\n    let uploads: any[] = [];\n    if (oneFile) {\n      oneFile.percentage = 0;\n      uploads.push(from(oneFile.send()));\n    } else {\n      const preFiles = this.fileUploaders.filter((fileUploader) => (fileUploader.status === UploadStatus.preLoad));\n      const failedFiles = this.fileUploaders.filter((fileUploader) => (fileUploader.status === UploadStatus.failed));\n      const uploadFiles = preFiles.length > 0 ? preFiles : failedFiles;\n      uploads = uploadFiles.map((fileUploader) => {\n        fileUploader.percentage = 0;\n        if(isMultipleUpload) {\n          return from(fileUploader.sendMultiple()).pipe(catchError(error => of(error)));\n        } else {\n          return from(fileUploader.send());\n        }\n      });\n    }\n    if (uploads.length > 0) {\n      return merge(...uploads).pipe(toArray());\n    }\n\n    return from(Promise.reject('no files'));\n  }\n\n  oneTimeUpload() {\n    const uploads = this.fileUploaders\n      .filter((fileUploader) => fileUploader.status !== UploadStatus.uploaded);\n    return from(this.dealOneTimeUploadFiles(uploads));\n  }\n\n  async dealOneTimeUploadFiles(uploads) {\n    if (!uploads || !uploads.length) {\n      return Promise.reject('no files');\n    }\n    // 触发文件上传\n    let finalUploads = [];\n    await uploads[0].send(uploads).finally(() =>\n    // 根据uploads[0]的上传状态为其他file设置状态\n    {\n      finalUploads = uploads.map((file) => {\n        file.status = uploads[0].status;\n        file.percentage = uploads[0].percentage;\n        return { file: file.file, response: uploads[0].response };\n      });\n    }\n    );\n\n    return finalUploads;\n  }\n\n  deleteFile(file) {\n    this.fileUploaders = this.fileUploaders.filter((fileUploader) => {\n      return file !== fileUploader.file;\n    });\n  }\n\n  removeFiles() {\n    this.fileUploaders = [];\n    this.filesWithSameName = [];\n  }\n  getSameNameFiles() {\n    return this.filesWithSameName.join();\n  }\n  resetSameNameFiles() {\n    this.filesWithSameName = [];\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  TemplateRef,\n} from '@angular/core';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'd-uploaded-files',\n  exportAs: 'dUploadFiles',\n  templateUrl: './uploaded-files.component.html',\n  preserveWhitespaces: false,\n})\nexport class UploadedFilesComponent implements OnDestroy, OnInit {\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() uploadedFilesRef: TemplateRef<any>;\n  @Input() filePath: string;\n  @Output() deleteUploadedFileEvent: EventEmitter<any> = new EventEmitter<any>();\n  i18nText: I18nInterface['upload'];\n  i18nSubscription: Subscription;\n  constructor(private i18n: I18nService) {\n\n  }\n  ngOnInit(): void {\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n    });\n  }\n\n  cleanUploadedFiles() {\n    this.uploadedFiles = [];\n  }\n\n  addAndOverwriteFile(file: Object) {\n    this.cleanUploadedFiles();\n    this.uploadedFiles.push(file);\n  }\n\n  addFile(file: Object) {\n    this.uploadedFiles.push(file);\n  }\n\n  deleteFile(filePath: string) {\n    this.uploadedFiles = this.uploadedFiles.filter((file) => {\n      return filePath !== (file as any)[this.filePath];\n    });\n    this.deleteUploadedFileEvent.emit(filePath);\n  }\n\n  // 解决templateContext 传递method.bind(this)引发模板中内嵌组件initialize问题\n  deleteFileProxy = filePath => {\n    this.deleteFile(filePath);\n  };\n  ngOnDestroy() {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n\n    }\n  }\n}\n","<ng-template\n  [ngTemplateOutlet]=\"uploadedFilesRef\"\n  [ngTemplateOutletContext]=\"{ $implicit: this, uploadedFiles: uploadedFiles, filePath: filePath, deleteFile: deleteFileProxy }\"\n>\n</ng-template>\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n} from '@angular/core';\n\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { Subscription } from 'rxjs';\nimport { FileUploader } from './file-uploader.class';\nimport {\n  IUploadOptions,\n  UploadStatus\n} from './file-uploader.types';\nimport { UploadComponent } from './upload.class';\nimport { UploadedFilesComponent } from './uploaded-files.component';\n@Component({\n  selector: 'd-multiple-upload-view',\n  templateUrl: './multiple-upload-view.component.html',\n  preserveWhitespaces: false,\n})\nexport class MultipleUploadViewComponent extends UploadComponent implements OnDestroy , OnInit {\n  @ViewChild('dUploadedFiles', { static: true }) uploadedFilesComponent: UploadedFilesComponent;\n  @Input() uploadOptions: IUploadOptions;\n  @Input() preloadFilesRef: TemplateRef<any>;\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() uploadedFilesRef: TemplateRef<any>;\n  @Input() filePath: string;\n  @Output() deleteUploadedFileEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Input() setCustomUploadOptions: (files, uploadOptions) => IUploadOptions;\n  UploadStatus = UploadStatus;\n  fileUploaders: Array<FileUploader> = [];\n  i18nText: I18nInterface['upload'];\n  i18nSubscription: Subscription;\n  constructor(private i18n: I18nService) {\n    super();\n  }\n  ngOnInit(): void {\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n    });\n  }\n\n  addFile(file) {\n    let uploadOptions = this.uploadOptions;\n    if (this.setCustomUploadOptions) {\n      uploadOptions = this.setCustomUploadOptions(file, this.uploadOptions);\n    }\n    super.addFile(file, uploadOptions);\n  }\n\n  deleteFile(file) {\n    super.deleteFile(file);\n    this.deleteUploadedFileEvent.emit(file);\n  }\n\n  deletePreUploadFile(file) {\n    super.deleteFile(file);\n  }\n\n  removeFiles() {\n    super.removeFiles();\n  }\n\n  // 解决templateContext 传递method.bind(this)引发模板中内嵌组件initialize问题\n  deleteFileProxy = file => {\n    this.deleteFile(file);\n  };\n\n  _onDeleteUploadedFile(filePath: string) {\n    this.deleteUploadedFileEvent.emit(filePath);\n  }\n\n  ngOnDestroy(): void {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n\n    }\n  }\n}\n","<d-uploaded-files\n  #dUploadedFiles\n  [uploadedFiles]=\"uploadedFiles\"\n  [filePath]=\"filePath\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-uploaded-files>\n<ng-template\n  [ngTemplateOutlet]=\"preloadFilesRef\"\n  [ngTemplateOutletContext]=\"{ $implicit: this, fileUploaders: fileUploaders, UploadStatus: UploadStatus, deleteFile: deleteFileProxy }\"\n>\n</ng-template>\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { from, Observable, Subscription } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport { IFileOptions, IUploadOptions } from './file-uploader.types';\n\n@Injectable()\nexport class SelectFiles {\n  NOT_ALLOWED_FILE_TYPE_MSG: string;\n  BEYOND_MAXIMAL_FILE_SIZE_MSG: string;\n  i18nText: I18nInterface['upload'];\n  i18nSubscription: Subscription;\n  document: Document;\n\n  constructor(private i18n: I18nService, @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n    });\n  }\n\n  selectFiles = ({ multiple, accept, webkitdirectory }: IFileOptions): Promise<File[]> => {\n    return new Promise((resolve) => {\n      const tempNode = this.document.getElementById('d-upload-temp');\n      if (tempNode) {\n        this.document.body.removeChild(tempNode);\n      }\n      const input = this.document.createElement('input');\n\n      input.style.position = 'fixed';\n      input.style.left = '-2000px';\n      input.style.top = '-2000px';\n\n      input.setAttribute('id', 'd-upload-temp');\n      input.setAttribute('type', 'file');\n      if (multiple) {\n        input.setAttribute('multiple', '');\n      }\n      if (accept) {\n        input.setAttribute('accept', accept);\n      }\n\n      if (webkitdirectory) {\n        input.setAttribute('webkitdirectory', '');\n      }\n\n      input.addEventListener('change', event => {\n        resolve(Array.prototype.slice.call((event.target as HTMLInputElement).files));\n      });\n      this.document.body.appendChild(input); // Fix compatibility issue with Internet Explorer 11\n      this.simulateClickEvent(input);\n    });\n  };\n\n  isAllowedFileType = (accept: string, file: File) => {\n    if (accept) {\n      const acceptArr = accept.split(',');\n      const baseMimeType = file.type.replace(/\\/.*$/, '');\n      return acceptArr.some((type: string) => {\n        const validType = type.trim();\n        //  suffix name (e.g. '.png,.xlsx')\n        if (validType.startsWith('.')) {\n          return (\n            file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.toLowerCase().length - validType.toLowerCase().length) > -1\n          );\n          // mime type like 'image/*'\n        } else if (/\\/\\*$/.test(validType)) {\n          return baseMimeType === validType.replace(/\\/.*$/, '');\n        }\n        //  mime type like 'text/plain,application/json'\n        return file.type === validType;\n      });\n    }\n    return true;\n  };\n\n  beyondMaximalSize = (fileSize, maximumSize) => {\n    if (maximumSize) {\n      return fileSize > 1024 * 1024 * maximumSize;\n    }\n    return false;\n  };\n\n  beyondAllFilesMaximalSize = (fileSize, maximumSize) => {\n    if (maximumSize) {\n      return fileSize > 1024 * 1024 * maximumSize;\n    }\n    return false;\n  };\n\n  triggerSelectFiles = (fileOptions: IFileOptions, uploadOptions: IUploadOptions) => {\n    const { multiple, accept, webkitdirectory} = fileOptions;\n    return from(this.selectFiles({ multiple, accept , webkitdirectory})).pipe(mergeMap(file => <any>file));\n  };\n\n  triggerDropFiles = (fileOptions: IFileOptions, uploadOptions: IUploadOptions, files: any) => {\n    return new Observable(observer => observer.next(files)).pipe(mergeMap(file => <any>file));\n\n  };\n\n  checkAllFilesSize(fileSize, maximumSize) {\n    if (this.beyondMaximalSize(fileSize, maximumSize)) {\n      this.BEYOND_MAXIMAL_FILE_SIZE_MSG = this.i18nText.getAllFilesBeyondMaximalFileSizeMsg(maximumSize);\n      return { checkError: true, errorMsg: this.BEYOND_MAXIMAL_FILE_SIZE_MSG };\n    }\n  }\n\n  _validateFiles(file, accept, uploadOptions) {\n    if (!this.isAllowedFileType(accept, <File>file)) {\n      this.NOT_ALLOWED_FILE_TYPE_MSG = this.i18nText.getNotAllowedFileTypeMsg((<File>file).name, accept);\n      return { checkError: true, errorMsg: this.NOT_ALLOWED_FILE_TYPE_MSG };\n    }\n    if (this.beyondMaximalSize((<File>file).size, uploadOptions.maximumSize)) {\n      this.BEYOND_MAXIMAL_FILE_SIZE_MSG = this.i18nText.getBeyondMaximalFileSizeMsg((<File>file).name, uploadOptions.maximumSize);\n      return { checkError: true, errorMsg: this.BEYOND_MAXIMAL_FILE_SIZE_MSG };\n    }\n    return { checkError: false, errorMsg: undefined };\n  }\n\n  simulateClickEvent(input) {\n    const evt = this.document.createEvent('MouseEvents');\n    evt.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);\n    input.dispatchEvent(evt);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  Component, EventEmitter,\n\n  forwardRef, Inject, Input, OnDestroy,\n\n  OnInit, Output, TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { ToastService } from 'ng-devui/toast';\nimport { from, Observable, Subscription } from 'rxjs';\nimport { debounceTime, last, map, mergeMap } from 'rxjs/operators';\nimport {\n  IFileOptions,\n  IUploadOptions,\n  UploadStatus\n} from './file-uploader.types';\nimport { MultipleUploadViewComponent } from './multiple-upload-view.component';\nimport {\n  SelectFiles\n} from './select-files.utils';\n\n@Component({\n  selector: 'd-multiple-upload',\n  templateUrl: './multiple-upload.component.html',\n  exportAs: 'dMultipleUpload',\n  styleUrls: ['./upload-view.component.scss'],\n  preserveWhitespaces: false,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => MultipleUploadComponent),\n      multi: true\n    }\n  ]\n})\nexport class MultipleUploadComponent implements OnDestroy, OnInit {\n  @Input() uploadOptions: IUploadOptions;\n  @Input() fileOptions: IFileOptions;\n  @Input() autoUpload = false;\n  @Input() withoutBtn = false;\n  @Input() showTip = false;\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() uploadedFilesRef: TemplateRef<any>;\n  @Input() preloadFilesRef?: TemplateRef<any>;\n  @Input() filePath: string;\n  @Input() placeholderText: string;\n  @Input() uploadText: string;\n  /**\n   * @deprecated\n   */\n  @Input() confirmText: string;\n  @Input() oneTimeUpload = false;\n  @Input() disabled = false;\n  @Input() beforeUpload: (files) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() setCustomUploadOptions: (files, uploadOptions) => IUploadOptions;\n  @Input() enableDrop = false;\n  @Output() successEvent: EventEmitter<Array<{ file: File; response: any }>> = new EventEmitter<Array<{ file: File; response: any }>>();\n  @Output() errorEvent: EventEmitter<Array<{ file: File; response: any }>> = new EventEmitter<Array<{ file: File; response: any }>>();\n  @Output() deleteUploadedFileEvent: EventEmitter<string> = new EventEmitter<string>();\n  @Output() fileDrop: EventEmitter<any> = new EventEmitter<any>();\n  @Output() fileOver: EventEmitter<boolean> = new EventEmitter<boolean>();\n  @Output() fileSelect: EventEmitter<File[]> = new EventEmitter<File[]>();\n  @ViewChild('dMultipleUploadView', { static: true }) multipleUploadViewComponent: MultipleUploadViewComponent;\n  i18nCommonText: I18nInterface['common'];\n  i18nText: I18nInterface['upload'];\n  isDropOVer = false;\n  i18nSubscription: Subscription;\n  errorMsg = [];\n  UploadStatus = UploadStatus;\n  uploadTips: string;\n  document: Document;\n  private onChange = (_: any) => null;\n  private onTouched = () => null;\n\n  constructor(\n    private selectFiles: SelectFiles,\n    private i18n: I18nService,\n    @Inject(DOCUMENT) private doc: any,\n    private toastService: ToastService) {\n    this.document = this.doc;\n  }\n  ngOnInit(): void {\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n      this.i18nCommonText = data.common;\n    });\n  }\n\n  writeValue(files: any): void {\n    if (files) {\n      const simulateFiles = from(this.simulateSelectFiles(files)).pipe(mergeMap(file => <any>file));\n      this._dealFiles(simulateFiles);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  simulateSelectFiles(files) {\n    return new Promise((resolve) => {\n      resolve(Array.prototype.slice.call(files));\n    });\n  }\n\n  _dealFiles(observale) {\n    this.multipleUploadViewComponent.resetSameNameFiles();\n    observale.pipe(\n      map(file => this.multipleUploadViewComponent.addFile(file)),\n      debounceTime(100)\n    )\n      .subscribe(\n        () => {\n          this.checkValid();\n          const sameNameFiles = this.multipleUploadViewComponent.getSameNameFiles();\n          if (this.uploadOptions.checkSameName && sameNameFiles.length) {\n            this.alertMsg(this.i18nText.getExistSameNameFilesMsg(sameNameFiles));\n          }\n          this.onChange(this.multipleUploadViewComponent.fileUploaders.map(fileUploader => fileUploader.file));\n          const selectedFiles = this.multipleUploadViewComponent.fileUploaders\n            .filter(fileUploader => fileUploader.status === UploadStatus.preLoad)\n            .map(fileUploader => fileUploader.file);\n          this.onFileSelect(selectedFiles);\n          if (this.autoUpload) {\n            this.upload();\n          }\n        },\n        (error: Error) => {\n          this.alertMsg(error.message);\n        }\n      );\n  }\n\n  checkValid() {\n    let totalFileSize = 0;\n    this.multipleUploadViewComponent.fileUploaders.forEach(fileUploader => {\n      totalFileSize += fileUploader.file.size;\n      const checkResult = this.selectFiles._validateFiles(fileUploader.file, this.fileOptions.accept, fileUploader.uploadOptions);\n      if (checkResult && checkResult.checkError) {\n        this.multipleUploadViewComponent.deletePreUploadFile(fileUploader.file);\n        this.alertMsg(checkResult.errorMsg);\n        return;\n      }\n    });\n\n    if (this.oneTimeUpload) {\n      const checkResult = this.selectFiles.checkAllFilesSize(totalFileSize, this.uploadOptions.maximumSize);\n      if (checkResult && checkResult.checkError) {\n        this.multipleUploadViewComponent.removeFiles();\n        this.alertMsg(checkResult.errorMsg);\n      }\n    }\n  }\n\n  onClick(event) {\n    if (this.disabled) {\n      return;\n    }\n    this._dealFiles(this.selectFiles.triggerSelectFiles(this.fileOptions, this.uploadOptions));\n  }\n\n  onFileDrop(files) {\n    this.isDropOVer = false;\n    this._dealFiles(this.selectFiles.triggerDropFiles(this.fileOptions, this.uploadOptions, files));\n    this.fileDrop.emit(files);\n  }\n\n  onFileOver(event) {\n    this.isDropOVer = event;\n    this.fileOver.emit(event);\n  }\n\n  onFileSelect(files) {\n    this.fileSelect.emit(files);\n  }\n\n  handleOneTimeUpload(uploadObservable) {\n    uploadObservable\n      .pipe(\n        last()\n      )\n      .subscribe(\n        (results: Array<{ file: File; response: any }>) => {\n          this.successEvent.emit(results);\n          results.forEach((result) => {\n            this.multipleUploadViewComponent.uploadedFilesComponent.addFile(result.file);\n          });\n        },\n        (error) => {\n          this.errorEvent.emit(error);\n        }\n      );\n  }\n\n  handleUpload(uploadObservable) {\n    uploadObservable\n      .pipe(\n        last()\n      )\n      .subscribe(\n        (results: Array<{ file: File; response: any; status: UploadStatus }>) => {\n          const successResult = results.filter(item => item.status === UploadStatus.uploaded).map(item => {\n            return {file: item.file, response: item.response};\n          });\n          const failResult = results.filter(item => item.status === UploadStatus.failed).map(item => {\n            return {file: item.file, response: item.response};\n          });\n          if(failResult.length) {\n            this.errorEvent.emit(failResult);\n          }\n\n          if(successResult.length) {\n            this.successEvent.emit(successResult);\n            successResult.forEach((result) => {\n              this.multipleUploadViewComponent.uploadedFilesComponent.addFile(result.file);\n            });\n          }\n        }\n      );\n  }\n\n  upload(event?, fileUploader?) {\n    if (event) {\n      event.stopPropagation();\n    }\n    this.canUpload().then((canUpload) => {\n      if (!canUpload) {\n        this.multipleUploadViewComponent.removeFiles();\n        return;\n      }\n      const tempNode = this.document.getElementById('d-upload-temp');\n      if (tempNode) {\n        this.document.body.removeChild(tempNode);\n      }\n      const uploadObservable = this.oneTimeUpload ?\n        this.multipleUploadViewComponent.oneTimeUpload() :\n        this.multipleUploadViewComponent.upload(fileUploader, true);\n      if (this.oneTimeUpload) {\n        this.handleOneTimeUpload(uploadObservable);\n      } else {\n        this.handleUpload(uploadObservable);\n      }\n    });\n  }\n\n  canUpload() {\n    let uploadResult = Promise.resolve(true);\n    if (this.beforeUpload) {\n      const result: any = this.beforeUpload(this.multipleUploadViewComponent.getFullFiles());\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          uploadResult = result;\n        } else if (result.subscribe) {\n          uploadResult = (result as Observable<boolean>).toPromise();\n        } else {\n          uploadResult = Promise.resolve(result);\n        }\n      }\n    }\n    return uploadResult;\n  }\n\n  _onDeleteUploadedFile(filePath: string) {\n    this.deleteUploadedFileEvent.emit(filePath);\n    this.onChange(this.multipleUploadViewComponent.fileUploaders.map(fileUploader => fileUploader.file));\n  }\n\n  deleteFile($event, file) {\n    $event.stopPropagation();\n    this.multipleUploadViewComponent.deleteFile(file);\n  }\n\n  alertMsg(errorMsg) {\n    this.toastService.open({\n      value: [{ severity: 'warn', content: errorMsg }],\n    });\n  }\n\n  getStatus() {\n    let uploadingCount = 0;\n    let uploadedCount = 0;\n    let failedCount = 0;\n    const filesCount = this.multipleUploadViewComponent.fileUploaders.length;\n    this.multipleUploadViewComponent.fileUploaders.forEach((fileUploader) => {\n      if (fileUploader.status === UploadStatus.uploading) {\n        uploadingCount++;\n      } else if (fileUploader.status === UploadStatus.uploaded) {\n        uploadedCount++;\n      } else if (fileUploader.status === UploadStatus.failed) {\n        failedCount++;\n      }\n    });\n    if (failedCount > 0) {\n      this.uploadTips = this.i18nText.getFailedFilesCount(failedCount);\n      return 'failed';\n    }\n    if (uploadingCount > 0) {\n      this.uploadTips = this.i18nText.getUploadingFilesCount(uploadingCount, filesCount);\n      return 'uploading';\n    }\n    if (uploadedCount === filesCount && uploadedCount !== 0) {\n      return 'uploaded';\n    }\n    if (filesCount !== 0) {\n      this.uploadTips = this.i18nText.getSelectedFilesCount(filesCount);\n      return 'selected';\n    }\n  }\n\n  cancelUpload() {\n    this.multipleUploadViewComponent.fileUploaders.filter((fileUploader) => fileUploader.status === UploadStatus.uploading)\n      .forEach((fileUploader) => {\n        fileUploader.status = UploadStatus.failed;\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n\n    }\n  }\n}\n","<div\n  d-file-drop\n  [enableDrop]=\"enableDrop\"\n  (fileDrop)=\"onFileDrop($event)\"\n  (fileOver)=\"onFileOver($event)\"\n  (fileSelect)=\"onFileSelect($event)\"\n  [ngStyle]=\"{ border: isDropOVer ? '1px solid #15bf15' : '0' }\"\n  style=\"display: flex\"\n>\n  <div class=\"devui-input-group\" [class.disabled]=\"disabled\" (click)=\"onClick($event)\">\n    <div *ngIf=\"dMultipleUploadView.fileUploaders.length === 0\" class=\"devui-form-control devui-upload-placeholder\">\n      {{ placeholderText ? placeholderText : i18nText?.chooseFile }}\n    </div>\n    <ul *ngIf=\"dMultipleUploadView.fileUploaders.length > 0\" class=\"devui-form-control devui-files-list\">\n      <li\n        *ngFor=\"let fileUploader of dMultipleUploadView.fileUploaders; let index = index\"\n        class=\"devui-file-item devui-file-tag\"\n        style=\"display: inline-block; margin: 0 2px 2px 0\"\n        title=\"{{ fileUploader.file.name }}\"\n      >\n        <span class=\"devui-filename {{ fileUploader.status === UploadStatus.failed ? 'devui-failed-color' : '' }}\">\n          {{ fileUploader.file.name }}\n        </span>\n        <span\n          class=\"icon icon-close {{ fileUploader.status === UploadStatus.failed ? 'devui-upload-delete-file-button' : '' }}\n          {{\n            fileUploader.status === UploadStatus.uploading || fileUploader.status === UploadStatus.uploaded ? 'devui-uploading-delete' : ''\n          }}\"\n          (click)=\"deleteFile($event, fileUploader.file)\"\n        >\n        </span>\n        <div *ngIf=\"fileUploader.status === UploadStatus.uploading\" class=\"icon devui-upload-progress\">\n          <d-progress\n            [type]=\"'circle'\"\n            [percentage]=\"fileUploader.percentage\"\n            [strokeColor]=\"'#50D4AB'\"\n            [strokeWidth]=\"8\"\n            [showContent]=\"false\"\n          >\n          </d-progress>\n        </div>\n        <span *ngIf=\"fileUploader.status === UploadStatus.failed\" class=\"icon icon-running\" (click)=\"upload($event, fileUploader)\"> </span>\n        <span *ngIf=\"fileUploader.status === UploadStatus.uploaded\" class=\"icon icon-right\"></span>\n      </li>\n    </ul>\n    <span class=\"devui-input-group-addon\">\n      <svg class=\"svg-icon-dot\" height=\"1em\" width=\"1em\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n          d=\"m400.31892 176.970574c0-61.574381 50.113351-111.680569 111.679545-111.680569 61.576427 0 111.680569 50.106188 111.680569 111.680569 0 61.568241-50.104141 111.679545-111.680569 111.679545-61.566194 0-111.679545-50.111304-111.679545-111.679545zm0 335.028403c0-61.568241 50.113351-111.678522 111.679545-111.678522 61.576427 0 111.680569 50.110281 111.680569 111.678522 0 61.574381-50.105165 111.682615-111.680569 111.682615-61.566194 0-111.679545-50.108235-111.679545-111.682615zm0 335.037612c0-61.572334 50.113351-111.679545 111.679545-111.679545 61.575404 0 111.680569 50.107211 111.680569 111.679545 0 61.567217-50.105165 111.672382-111.680569 111.672382-61.566194 0-111.679545-50.105164-111.679545-111.672382zm0 0\"\n        />\n      </svg>\n    </span>\n  </div>\n  <d-button\n    *ngIf=\"!autoUpload && !withoutBtn\"\n    [disabled]=\"disabled\"\n    (btnClick)=\"upload($event)\"\n    [style.margin-left.px]=\"8\"\n    bsStyle=\"common\"\n  >\n    {{ uploadText || i18nText?.upload }}\n  </d-button>\n</div>\n<ng-container *ngIf=\"showTip\">\n  <div class=\"devui-upload-tip\">\n    <span *ngIf=\"getStatus() === 'selected'\" class=\"devui-loading\">{{ uploadTips }}</span>\n    <span *ngIf=\"getStatus() === 'uploading'\" class=\"devui-loading\">\n      <span style=\"margin-right: 8px\">{{ uploadTips }}</span>\n      <a (click)=\"cancelUpload()\">{{ i18nText?.cancelUpload }}</a>\n    </span>\n    <div *ngIf=\"getStatus() === 'uploaded'\" class=\"devui-loaded\">\n      <i class=\"icon icon-right-o\"></i>\n      <span style=\"vertical-align: middle\">{{ i18nText?.uploadSuccess }}</span>\n    </div>\n    <div *ngIf=\"getStatus() === 'failed'\" class=\"devui-upload-failed\">\n      <i class=\"icon icon-info-o\"></i>\n      <span style=\"vertical-align: middle\">\n        <span style=\"margin-right: 8px\">{{ uploadTips }}</span>\n        <a (click)=\"upload($event)\">{{ i18nText?.reUpload }}</a>\n      </span>\n    </div>\n  </div>\n</ng-container>\n<d-multiple-upload-view\n  #dMultipleUploadView\n  [uploadedFiles]=\"uploadedFiles\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  [preloadFilesRef]=\"preloadFilesRef\"\n  [uploadOptions]=\"uploadOptions\"\n  [filePath]=\"filePath\"\n  [setCustomUploadOptions]=\"setCustomUploadOptions\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-multiple-upload-view>\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { FileUploader } from './file-uploader.class';\nimport {\n  IUploadOptions,\n  UploadStatus\n} from './file-uploader.types';\nimport { UploadComponent } from './upload.class';\nimport { UploadedFilesComponent } from './uploaded-files.component';\n\n@Component({\n  selector: 'd-single-upload-view',\n  exportAs: 'dSingleUploadView',\n  templateUrl: './single-upload-view.component.html',\n  preserveWhitespaces: false,\n})\nexport class SingleUploadViewComponent extends UploadComponent {\n  @Input() uploadOptions: IUploadOptions;\n  @Input() preloadFilesRef: TemplateRef<any>;\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() uploadedFilesRef: TemplateRef<any>;\n  @Input() filePath: string;\n  @Input() dynamicUploadOptionsFn: (files, uploadOptions) => IUploadOptions;\n  @Output() deleteUploadedFileEvent: EventEmitter<any> = new EventEmitter<any>();\n  @ViewChild('dUploadedFiles', { static: true }) uploadedFilesComponent: UploadedFilesComponent;\n\n  UploadStatus = UploadStatus;\n  fileUploaders: Array<FileUploader> = [];\n\n  addFile(file: File) {\n    this.fileUploaders = [];\n    let uploadOptions = this.uploadOptions;\n    if (this.dynamicUploadOptionsFn) {\n      uploadOptions = this.dynamicUploadOptionsFn(file, this.uploadOptions);\n    }\n    super.addFile(file, uploadOptions);\n  }\n\n  deleteFile(file: File) {\n    super.deleteFile(file);\n    this.deleteUploadedFileEvent.emit(file);\n  }\n\n  deletePreUploadFile(file) {\n    super.deleteFile(file);\n  }\n\n  // 解决templateContext 传递method.bind(this)引发模板中内嵌组件initialize问题\n  deleteFileProxy = file => {\n    this.deleteFile(file);\n  };\n\n  _onDeleteUploadedFile(filePath: string) {\n    this.deleteUploadedFileEvent.emit(filePath);\n  }\n}\n","<d-uploaded-files\n  #dUploadedFiles\n  [uploadedFiles]=\"uploadedFiles\"\n  [filePath]=\"filePath\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-uploaded-files>\n<ng-template\n  [ngTemplateOutlet]=\"preloadFilesRef\"\n  [ngTemplateOutletContext]=\"{ $implicit: this, fileUploaders: fileUploaders, UploadStatus: UploadStatus, deleteFile: deleteFileProxy }\"\n>\n</ng-template>\n","import { DOCUMENT } from '@angular/common';\nimport { Component, EventEmitter, forwardRef, Inject, Input, OnDestroy, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { ToastService } from 'ng-devui/toast';\nimport { from, merge, Observable, Subscription } from 'rxjs';\nimport { last, map, mergeMap, toArray } from 'rxjs/operators';\nimport { FileUploader } from './file-uploader.class';\nimport { IFileOptions, IUploadOptions, UploadStatus } from './file-uploader.types';\nimport { SelectFiles } from './select-files.utils';\nimport { SingleUploadViewComponent } from './single-upload-view.component';\n@Component({\n  selector: 'd-single-upload',\n  templateUrl: './single-upload.component.html',\n  exportAs: 'dSingleUpload',\n  styleUrls: ['./upload-view.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => SingleUploadComponent),\n      multi: true\n    }\n  ],\n  preserveWhitespaces: false,\n})\nexport class SingleUploadComponent implements OnDestroy, OnInit, ControlValueAccessor {\n  dSingleUploadView;\n  @Input() uploadOptions: IUploadOptions;\n  @Input() fileOptions: IFileOptions;\n  @Input() autoUpload = false;\n  @Input() withoutBtn = false;\n  @Input() showTip = false;\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() uploadedFilesRef: TemplateRef<any>;\n  @Input() preloadFilesRef?: TemplateRef<any>;\n  @Input() filePath: string;\n  @Input() placeholderText: string;\n  @Input() uploadText: string;\n  /**\n   * @deprecated\n   */\n  @Input() confirmText: string;\n  @Input() beforeUpload: (file) => boolean | Promise<boolean> | Observable<boolean>;\n  @Input() dynamicUploadOptionsFn: (files, uploadOptions) => IUploadOptions;\n  @Input() enableDrop = false;\n  @Input() disabled = false;\n  @Output() successEvent: EventEmitter<Array<{ file: File; response: any }>> = new EventEmitter<Array<{ file: File; response: any }>>();\n  @Output() errorEvent: EventEmitter<{ file: File; response: any }> = new EventEmitter<{ file: File; response: any }>();\n  @Output() errorChunkEvent: EventEmitter<{ file: File; response: any }> = new EventEmitter<{ file: File; response: any }>();\n  @Output() deleteUploadedFileEvent: EventEmitter<string> = new EventEmitter<string>();\n  @Output() fileDrop: EventEmitter<any> = new EventEmitter<any>();\n  @Output() fileOver: EventEmitter<boolean> = new EventEmitter<boolean>();\n  @Output() fileSelect: EventEmitter<File> = new EventEmitter<File>();\n  @ViewChild('dSingleUploadView', { static: true }) singleUploadViewComponent: SingleUploadViewComponent;\n  UploadStatus = UploadStatus;\n  isDropOVer = false;\n  defaultChunkSize = 1024 * 1024 * 20; // 单位是byte 默认分片大小 20兆。\n  i18nText: I18nInterface['upload'];\n  i18nCommonText: I18nInterface['common'];\n  i18nSubscription: Subscription;\n  errorMsg = [];\n  document: Document;\n  private onChange = (_: any) => null;\n  private onTouched = () => null;\n  constructor(\n    private i18n: I18nService,\n    private selectFiles: SelectFiles,\n    @Inject(DOCUMENT) private doc: any,\n    private toastService: ToastService\n  ) {\n    this.document = this.doc;\n  }\n\n  writeValue(files: any): void {\n    if (files) {\n      const simulateFiles = from(this.simulateSelectFiles(files)).pipe(mergeMap((file) => <any>file));\n      this._dealFiles(simulateFiles);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  simulateSelectFiles(files) {\n    return new Promise((resolve) => {\n      resolve(Array.prototype.slice.call(files));\n    });\n  }\n\n  ngOnInit(): void {\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nCommonText = this.i18n.getI18nText().common;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n      this.i18nCommonText = data.common;\n    });\n  }\n\n  _dealFiles(observale) {\n    observale\n      .pipe(\n        map((file) => {\n          this.singleUploadViewComponent.addFile(<File>file);\n          return file;\n        })\n      )\n      .subscribe(\n        () => {\n          this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();\n          this.checkValid();\n          const file = this.singleUploadViewComponent.fileUploaders[0]?.file;\n          this.onChange(file);\n          if (file) {\n            this.onFileSelect(file);\n          }\n          if (this.autoUpload) {\n            this.upload();\n          }\n        },\n        (error: Error) => {\n          this.alertMsg(error.message);\n        }\n      );\n  }\n\n  checkValid() {\n    this.singleUploadViewComponent.fileUploaders.forEach((fileUploader) => {\n      const checkResult = this.selectFiles._validateFiles(fileUploader.file, this.fileOptions.accept, fileUploader.uploadOptions);\n      if (checkResult.checkError) {\n        this.singleUploadViewComponent.deletePreUploadFile(fileUploader.file);\n        this.alertMsg(checkResult.errorMsg);\n      }\n    });\n  }\n\n  onClick($event) {\n    if (\n      this.disabled ||\n      (this.singleUploadViewComponent.fileUploaders[0] && this.singleUploadViewComponent.fileUploaders[0].status === UploadStatus.uploading)\n    ) {\n      return;\n    }\n    this._dealFiles(this.selectFiles.triggerSelectFiles(this.fileOptions, this.uploadOptions));\n  }\n\n  get filename() {\n    return (this.singleUploadViewComponent.getFiles()[0] || ({} as File)).name || '';\n  }\n\n  onFileDrop(files) {\n    this.isDropOVer = false;\n    this._dealFiles(this.selectFiles.triggerDropFiles(this.fileOptions, this.uploadOptions, files));\n    this.fileDrop.emit(files[0]);\n  }\n\n  onFileOver(event) {\n    this.isDropOVer = event;\n    this.fileOver.emit(event);\n  }\n\n  onFileSelect(file) {\n    this.fileSelect.emit(file);\n  }\n\n  upload() {\n    this.canUpload().then((canUpload) => {\n      if (!canUpload) {\n        return;\n      }\n      const tempNode = this.document.getElementById('d-upload-temp');\n      if (tempNode) {\n        this.document.body.removeChild(tempNode);\n      }\n      if (this.uploadOptions.isChunked && this.isNeedChunk()) {\n        this.sliceUpload();\n      } else {\n        this.singleUploadViewComponent\n          .upload()\n          .pipe(last())\n          .subscribe(\n            (results: Array<{ file: File; response: any }>) => {\n              this.successEvent.emit(results);\n              results.forEach((result) => {\n                this.singleUploadViewComponent.uploadedFilesComponent.addAndOverwriteFile(result.file);\n              });\n            },\n            (error) => {\n              if (this.singleUploadViewComponent.fileUploaders[0]) {\n                this.singleUploadViewComponent.fileUploaders[0].percentage = 0;\n              }\n              this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();\n              this.errorEvent.emit(error);\n            }\n          );\n      }\n    });\n  }\n  isNeedChunk() {\n    if(this.singleUploadViewComponent.fileUploaders[0]?.file){\n      return this.singleUploadViewComponent.fileUploaders[0].file.size > this.uploadOptions.chunkSize || this.defaultChunkSize;\n    }\n  }\n\n  async sliceUpload() {\n    const fileUploaders = this.singleUploadViewComponent.fileUploaders;\n\n    for (let i = 0; i < fileUploaders.length; i++) {\n      const fileChunkList = this.createFileChunk(fileUploaders[i].file);\n\n      const currentFile = fileUploaders[i];\n      // 并发上传\n      const uploadObservable = this.uploadChunkList(fileChunkList, currentFile);\n      (await uploadObservable).subscribe(\n        (results: Array<{ file: File; response: any }>) => {\n          currentFile.percentage = 100;\n          currentFile.status = UploadStatus.uploaded;\n          const successRes = [{\n            file :currentFile.file,\n            response :results[0].response,\n            chunkList:results\n          }];\n          this.successEvent.emit(successRes);\n          results.forEach((result) => {\n            this.singleUploadViewComponent.uploadedFilesComponent.addAndOverwriteFile(result.file);\n          });\n        },\n        (error) => {\n          error.file = currentFile.file;\n          currentFile.status = UploadStatus.failed;\n          this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();\n          this.errorEvent.emit(error);\n        }\n      );\n    }\n  }\n\n\n  async uploadChunkList(fileChunkList, currentFile) {\n    currentFile.status = UploadStatus.uploading;\n    currentFile.percentage = 0;\n    let uploads: any[] = [];\n    const chunkPercentage = (1 / fileChunkList.length) * 100;\n\n    uploads = fileChunkList.map((fileUploader) => {\n      fileUploader.percentage = 0;\n      return from(fileUploader.send());\n    });\n    if (uploads.length > 0) {\n      const uploadObservable = merge(...uploads);\n      (await uploadObservable).subscribe(\n        (results) => {\n          currentFile.percentage = currentFile.percentage + chunkPercentage;\n        },\n        (error) => {\n          currentFile.status = UploadStatus.failed;\n          this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();\n          this.errorChunkEvent.emit(error);\n        }\n      );\n      return merge(...uploads).pipe(toArray());\n    }\n    return from(Promise.reject(new Error('no files')));\n  }\n  // 生成分片上传的数组\n  createFileChunk(file: File) {\n    const chunkSize = this.uploadOptions.chunkSize || this.defaultChunkSize;\n    const { name, type ,lastModified,size} = file;\n    const fileId = new Date().getTime();\n    const fileChunkList: Array<FileUploader> = [];\n    let fileSliceStart = 0;\n    let chunkedFileIndex = 0;\n    const chunks = Math.ceil(size / chunkSize);\n    while (fileSliceStart < file.size) {\n      chunkedFileIndex = chunkedFileIndex + 1;\n      const slicedFile = file.slice(fileSliceStart, fileSliceStart + chunkSize);\n      const newChunkFile = new File([slicedFile], `${fileId}-${chunkedFileIndex}-${chunks}-${size}-${lastModified}-${name}`, { type });\n      fileChunkList.push(new FileUploader(newChunkFile, this.uploadOptions));\n      fileSliceStart += chunkSize;\n    }\n    return fileChunkList;\n  }\n\n  canUpload() {\n    let uploadResult = Promise.resolve(true);\n    if (this.beforeUpload) {\n      const result: any = this.beforeUpload(this.singleUploadViewComponent.getFullFiles()[0] || ({} as File));\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          uploadResult = result;\n        } else if (result.subscribe) {\n          uploadResult = (result as Observable<boolean>).toPromise();\n        } else {\n          uploadResult = Promise.resolve(result);\n        }\n      }\n    }\n    return uploadResult;\n  }\n\n  _onDeleteUploadedFile(filePath: string) {\n    this.deleteUploadedFileEvent.emit(filePath);\n    this.onChange(null);\n  }\n\n  deleteFile($event) {\n    $event.stopPropagation();\n    const files = this.singleUploadViewComponent.getFiles();\n    this.singleUploadViewComponent.deleteFile(files[0]);\n  }\n\n  alertMsg(errorMsg) {\n    this.toastService.open({\n      value: [{ severity: 'warn', content: errorMsg }],\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n    }\n  }\n}\n","<div\n  d-file-drop\n  [enableDrop]=\"enableDrop\"\n  [isSingle]=\"true\"\n  (fileDrop)=\"onFileDrop($event)\"\n  (fileOver)=\"onFileOver($event)\"\n  (fileSelect)=\"onFileSelect($event)\"\n  [ngStyle]=\"{ border: isDropOVer ? '1px solid #15bf15' : '0' }\"\n  style=\"display: flex\"\n>\n  <div\n    [class.disabled]=\"this.disabled || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\"\n    (click)=\"onClick($event)\"\n    class=\"devui-input-group\"\n  >\n    <div class=\"devui-form-control devui-files-list\">\n      <div *ngIf=\"!filename\" class=\"devui-file-item devui-upload-placeholder\">\n        {{ placeholderText ? placeholderText : i18nText?.chooseFile }}\n      </div>\n      <div *ngIf=\"!!filename\" class=\"devui-file-tag devui-file-item\" title=\"{{ filename }}\">\n        <span class=\"devui-filename {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-failed-color' : '' }}\">\n          {{ filename }}\n        </span>\n        <span\n          class=\"icon icon-close\n            {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-upload-delete-file-button' : '' }}\n            {{\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading ||\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\n              ? 'devui-uploading-delete'\n              : ''\n          }}\"\n          (click)=\"deleteFile($event)\"\n        >\n        </span>\n        <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"icon devui-upload-progress\">\n          <d-progress\n            [type]=\"'circle'\"\n            [percentage]=\"dSingleUploadView.fileUploaders[0].percentage\"\n            [strokeColor]=\"'#50D4AB'\"\n            [strokeWidth]=\"8\"\n            [showContent]=\"false\"\n          >\n          </d-progress>\n        </div>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"icon icon-running\" (click)=\"upload()\">\n        </span>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"icon icon-right\"></span>\n      </div>\n    </div>\n    <span class=\"devui-input-group-addon\">\n      <svg class=\"svg-icon-dot\" height=\"1em\" width=\"1em\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n          d=\"m400.31892 176.970574c0-61.574381 50.113351-111.680569 111.679545-111.680569 61.576427 0 111.680569 50.106188 111.680569 111.680569 0 61.568241-50.104141 111.679545-111.680569 111.679545-61.566194 0-111.679545-50.111304-111.679545-111.679545zm0 335.028403c0-61.568241 50.113351-111.678522 111.679545-111.678522 61.576427 0 111.680569 50.110281 111.680569 111.678522 0 61.574381-50.105165 111.682615-111.680569 111.682615-61.566194 0-111.679545-50.108235-111.679545-111.682615zm0 335.037612c0-61.572334 50.113351-111.679545 111.679545-111.679545 61.575404 0 111.680569 50.107211 111.680569 111.679545 0 61.567217-50.105165 111.672382-111.680569 111.672382-61.566194 0-111.679545-50.105164-111.679545-111.672382zm0 0\"\n        />\n      </svg>\n    </span>\n  </div>\n  <d-button\n    *ngIf=\"!autoUpload && !withoutBtn\"\n    (btnClick)=\"upload()\"\n    bsStyle=\"common\"\n    [style.margin-left.px]=\"8\"\n    [disabled]=\"\n      disabled ||\n      dSingleUploadView.uploadedFilesComponent.uploadedFiles.length > 0 ||\n      dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\n    \"\n  >\n    <span *ngIf=\"!dSingleUploadView.fileUploaders[0] || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.preLoad\">{{\n      uploadText || i18nText?.upload\n    }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\">{{ i18nText?.uploading }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\">{{ i18nText?.uploaded }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\">{{ i18nText?.uploadFailed }}</span>\n  </d-button>\n</div>\n<ng-container *ngIf=\"showTip\">\n  <div class=\"devui-upload-tip\">\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"devui-loading\">\n      {{ i18nText?.uploading }}\n    </span>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"devui-loaded\">\n      <i class=\"icon icon-right-o\"></i>\n      <span style=\"vertical-align: middle\">{{ i18nText?.uploadSuccess }}</span>\n    </div>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"devui-upload-failed\">\n      <i class=\"icon icon-info-o\"></i>\n      <span style=\"vertical-align: middle\">\n        <span style=\"margin-right: 8px\">{{ i18nText?.uploadFailed }}</span>\n        <a (click)=\"upload()\">{{ i18nText?.reUpload }}</a>\n      </span>\n    </div>\n  </div>\n</ng-container>\n<d-single-upload-view\n  #dSingleUploadView=\"dSingleUploadView\"\n  [uploadOptions]=\"uploadOptions\"\n  [filePath]=\"filePath\"\n  [uploadedFiles]=\"uploadedFiles\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  [preloadFilesRef]=\"preloadFilesRef\"\n  [dynamicUploadOptionsFn]=\"dynamicUploadOptionsFn\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-single-upload-view>\n","import { Directive, ElementRef, EventEmitter, forwardRef, HostListener, Input, OnDestroy, Output } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { I18nInterface, I18nService } from 'ng-devui/i18n';\nimport { Message } from 'ng-devui/toast';\nimport { from, Observable, Subscription } from 'rxjs';\nimport { debounceTime, last, map, mergeMap } from 'rxjs/operators';\nimport { FileUploader } from './file-uploader.class';\nimport { IFileOptions, IUploadOptions, UploadStatus } from './file-uploader.types';\nimport { SelectFiles } from './select-files.utils';\nimport { UploadComponent } from './upload.class';\n@Directive({\n  selector: '[dUpload]',\n  exportAs: 'dUpload',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => UploadDirective),\n      multi: true\n    }\n  ],\n})\nexport class UploadDirective extends UploadComponent implements OnDestroy {\n  @Input() uploadOptions: IUploadOptions;\n  @Input() fileOptions: IFileOptions;\n  @Input() uploadedFiles: Array<Object> = [];\n  @Input() fileUploaders: Array<FileUploader> = [];\n  @Input() enableDrop = false;\n  @Input() dynamicUploadOptionsFn: (files, uploadOptions) => IUploadOptions;\n  @Input() beforeUpload: (file) => boolean | Promise<boolean> | Observable<boolean>;\n  @Output() public fileOver: EventEmitter<boolean> = new EventEmitter<boolean>();\n  @Output() public fileDrop: EventEmitter<any> = new EventEmitter<any>();\n  @Output() successEvent: EventEmitter<Array<{ file: File; response: any }>> = new EventEmitter<Array<{ file: File; response: any }>>();\n  @Output() errorEvent: EventEmitter<{ file: File; response: any }> = new EventEmitter<{ file: File; response: any }>();\n  @Output() alertMsgEvent: EventEmitter<Message[]> = new EventEmitter<Message[]>();\n  @Output() fileSelect: EventEmitter<File[]> = new EventEmitter<File[]>();\n\n  errorMsg = [];\n  protected element: ElementRef;\n  i18nText: I18nInterface['upload'];\n  i18nSubscription: Subscription;\n  private onChange = (_: any) => null;\n  private onTouched = () => null;\n  constructor(private selectFiles: SelectFiles, private i18n: I18nService, element: ElementRef) {\n    super();\n    this.element = element;\n    this.i18nText = this.i18n.getI18nText().upload;\n    this.i18nSubscription = this.i18n.langChange().subscribe((data) => {\n      this.i18nText = data.upload;\n    });\n  }\n  writeValue(files: any): void {\n    if (files) {\n      const simulateFiles = from(this.simulateSelectFiles(files)).pipe(mergeMap(file => <any>file));\n      this._dealFiles(simulateFiles);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  simulateSelectFiles(files) {\n    return new Promise((resolve) => {\n      resolve(Array.prototype.slice.call(files));\n    });\n  }\n\n  @HostListener('click')\n  onClick() {\n    this._dealFiles(this.selectFiles.triggerSelectFiles(this.fileOptions, this.uploadOptions));\n  }\n\n  _dealFiles(observale) {\n    super.resetSameNameFiles();\n    observale.pipe(\n      map(file => {\n        let uploadOptions = this.uploadOptions;\n        if (this.dynamicUploadOptionsFn) {\n          uploadOptions = this.dynamicUploadOptionsFn(file, this.uploadOptions);\n        }\n        super.addFile(file, uploadOptions);\n      }),\n      debounceTime(100)\n    )\n      .subscribe(\n        () => {\n          this.checkValid();\n          this.checkSameName();\n          const selectedFiles = this.fileUploaders\n            .filter(fileUploader => fileUploader.status === UploadStatus.preLoad)\n            .map(fileUploader => fileUploader.file);\n          this.onFileSelect(selectedFiles);\n          this.uploadFiles();\n        },\n        (error: Error) => {\n          this.errorMsg = [{ severity: 'warn', detail: error.message }];\n          this.alertMsgEvent.emit(this.errorMsg);\n        }\n      );\n  }\n\n  checkSameName() {\n    const sameNameFiles = super.getSameNameFiles();\n    if (this.uploadOptions.checkSameName && sameNameFiles.length) {\n      this.errorMsg = [{\n        severity: 'warn',\n        detail: this.i18nText.getExistSameNameFilesMsg(sameNameFiles)\n      }];\n      this.alertMsgEvent.emit(this.errorMsg);\n    }\n  }\n\n  // 文件大小、类型是否符合上传条件\n  checkValid() {\n    let totalFileSize = 0;\n    this.fileUploaders.forEach(fileUploader => {\n      totalFileSize += fileUploader.file.size;\n      const checkResult = this.selectFiles._validateFiles(fileUploader.file, this.fileOptions.accept, fileUploader.uploadOptions);\n      if (checkResult && checkResult.checkError) {\n        super.deleteFile(fileUploader.file);\n        this.errorMsg = [{ severity: 'warn', detail: checkResult.errorMsg }];\n        this.alertMsgEvent.emit(this.errorMsg);\n        return;\n      }\n    });\n  }\n  uploadFiles() {\n    this.canUpload().then((canUpload) => {\n      if (!canUpload) {\n        return;\n      }\n      const uploadObservable = super.upload();\n      uploadObservable\n        .pipe(\n          last()\n        )\n        .subscribe(\n          (results: Array<{ file: File; response: any }>) => {\n            this.successEvent.emit(results);\n            results.forEach((result) => {\n              this.uploadedFiles.push(result.file);\n            });\n          },\n          (error) => {\n            this.errorEvent.emit(error);\n          }\n        );\n    });\n  }\n\n  onFileSelect(files) {\n    this.fileSelect.emit(files);\n  }\n\n  @HostListener('drop', ['$event'])\n  public onDrop(event: any): void {\n    if (!this.enableDrop) {\n      return;\n    }\n    const transfer = this._getTransfer(event);\n    if (!transfer) {\n      return;\n    }\n    this._preventAndStop(event);\n    this._dealFiles(this.selectFiles.triggerDropFiles(this.fileOptions, this.uploadOptions, transfer.files));\n    this.fileDrop.emit(transfer.files);\n  }\n\n  @HostListener('dragover', ['$event'])\n  public onDragOver(event: any): void {\n    if (!this.enableDrop) {\n      return;\n    }\n    const transfer = this._getTransfer(event);\n    if (!this._haveFiles(transfer.types)) {\n      return;\n    }\n\n    this._preventAndStop(event);\n    this.fileOver.emit(true);\n  }\n\n  @HostListener('dragleave', ['$event'])\n  public onDragLeave(event: any): any {\n    if (!this.enableDrop) {\n      return;\n    }\n    if ((this as any).element) {\n      if (event.currentTarget === (this as any).element[0]) {\n        return;\n      }\n    }\n\n    this._preventAndStop(event);\n    this.fileOver.emit(false);\n  }\n\n  protected _getTransfer(event: any): any {\n    return event.dataTransfer ? event.dataTransfer : event.originalEvent.dataTransfer;\n  }\n\n  protected _preventAndStop(event: any): any {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  protected _haveFiles(types: any): any {\n    if (!types) {\n      return false;\n    }\n\n    if (types.indexOf) {\n      return types.indexOf('Files') !== -1;\n    } else if (types.contains) {\n      return types.contains('Files');\n    } else {\n      return false;\n    }\n  }\n\n  canUpload() {\n    let uploadResult = Promise.resolve(true);\n    if (this.beforeUpload) {\n      const result: any = this.beforeUpload(this.fileUploaders);\n      if (typeof result !== 'undefined') {\n        if (result.then) {\n          uploadResult = result;\n        } else if (result.subscribe) {\n          uploadResult = (result as Observable<boolean>).toPromise();\n        } else {\n          uploadResult = Promise.resolve(result);\n        }\n      }\n    }\n    return uploadResult;\n  }\n\n  ngOnDestroy() {\n    if (this.i18nSubscription) {\n      this.i18nSubscription.unsubscribe();\n    }\n  }\n}\n","import {NgModule} from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\nimport { ButtonModule } from 'ng-devui/button';\nimport { ProgressModule } from 'ng-devui/progress';\nimport { ToastModule } from 'ng-devui/toast';\nimport { FileDropDirective } from './file-drop.directive';\nimport { MultipleUploadViewComponent } from './multiple-upload-view.component';\nimport { MultipleUploadComponent } from './multiple-upload.component';\nimport { SelectFiles } from './select-files.utils';\nimport { SingleUploadViewComponent } from './single-upload-view.component';\nimport { SingleUploadComponent } from './single-upload.component';\nimport { UploadDirective } from './upload.directive';\nimport { UploadedFilesComponent } from './uploaded-files.component';\n@NgModule({\n  imports: [\n    CommonModule,\n    ButtonModule,\n    ToastModule,\n    ProgressModule\n  ],\n  exports: [\n    MultipleUploadViewComponent,\n    SingleUploadViewComponent,\n    SingleUploadComponent,\n    MultipleUploadComponent,\n    UploadedFilesComponent,\n    FileDropDirective,\n    UploadDirective\n  ],\n  declarations: [\n    MultipleUploadViewComponent,\n    SingleUploadViewComponent,\n    SingleUploadComponent,\n    MultipleUploadComponent,\n    UploadedFilesComponent,\n    FileDropDirective,\n    UploadDirective\n  ],\n\n  providers: [SelectFiles],\n})\nexport class UploadModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}