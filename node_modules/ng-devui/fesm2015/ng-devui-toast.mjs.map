{"version":3,"file":"ng-devui-toast.mjs","sources":["../../devui/toast/toast.component.ts","../../devui/toast/toast.component.html","../../devui/toast/toast.service.ts","../../devui/toast/toast.module.ts","../../devui/toast/ng-devui-toast.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { isEqual } from 'lodash-es';\nimport { Subject, Subscription } from 'rxjs';\nimport { throttleTime } from 'rxjs/operators';\n\nexport interface Message {\n  severity?: string;\n  summary?: string;\n  detail?: string;\n  content?: string | TemplateRef<any>;\n  life?: number;\n  id?: any;\n}\n\n@Component({\n  selector: 'd-toast',\n  templateUrl: './toast.component.html',\n  styleUrls: ['./toast.component.scss'],\n  preserveWhitespaces: false,\n})\nexport class ToastComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() sticky: boolean;\n  @Input() life: number;\n  @Input() style: object;\n  @Input() styleClass: string;\n  @Input() lifeMode: 'single' | 'global' = 'global';\n  @Output() closeEvent: EventEmitter<any> = new EventEmitter<any>();\n  @Output() valueChange: EventEmitter<Message[]> = new EventEmitter<Message[]>();\n  @ViewChild('container', { static: true }) containerViewChild: ElementRef;\n\n  _value: Array<Message>;\n  rest: Array<Message>; // 单个toast消失后需要保持上下位置不能从_value中移除，从rest中移除并发送valueChange\n  zIndex = 1060;\n  container: HTMLDivElement;\n  timeout: any;\n  timeoutArr = [];\n  timestamp: number;\n  clickSub = new Subject();\n  subItem: Subscription;\n\n  get _life() {\n    if (this.life) {\n      return this.life;\n    } else {\n      if (this.value && this.value.length > 0) {\n        return this.severityDelay(this.value[0]);\n      } else {\n        return 5000;\n      }\n    }\n  }\n\n  ngOnInit() {\n    this.subItem = this.clickSub\n      .pipe(throttleTime(250, undefined, { leading: true, trailing: false }))\n      .subscribe((obj: any) => this.remove(obj.index, obj.dom));\n  }\n\n  ngAfterViewInit() {\n    this.container = <HTMLDivElement>this.containerViewChild.nativeElement;\n  }\n\n  @Input() get value(): Array<Message> {\n    return this._value;\n  }\n\n  set value(val: Array<Message>) {\n    this._value = val;\n    this.rest = val;\n    if (this.container) {\n      this.handleValueChange();\n    }\n    if (val?.length === 0) {\n      this.onHidden();\n    }\n  }\n\n  isTemplate(content) {\n    return content instanceof TemplateRef ? content : null;\n  }\n\n  severityDelay(item: Message) {\n    switch (item.severity) {\n    case 'warn':\n    case 'error':\n      return 10000;\n    default:\n      // common | success | info | default\n      return 5000;\n    }\n  }\n\n  show() {\n    if (!this.container) {\n      this.container = <HTMLDivElement>this.containerViewChild.nativeElement;\n    }\n    this.handleValueChange();\n  }\n\n  // Will overwrite this method in toast service\n  close() {}\n\n  // Will overwrite this method in toast service\n  onHidden() {}\n\n  handleValueChange() {\n    this.zIndex++;\n    const doms = this.container.children;\n    setTimeout(() => this._value.forEach((v, i) => v && doms[i]?.classList.add('slide-in')));\n\n    if (!this.sticky) {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n      if (this.timeoutArr.length > 0) {\n        this.timeoutArr.forEach((item) => item && clearTimeout(item));\n        this.timeoutArr = [];\n      }\n      this.timestamp = new Date().getTime();\n      if (this.lifeMode === 'single') {\n        setTimeout(() => {\n          this._value.forEach((v, i) => {\n            this.timeoutArr[i] = setTimeout(() => this.singleModeRemove(v, doms[i]), v.life || this.severityDelay(v));\n          });\n        });\n      } else {\n        this.timeout = setTimeout(() => {\n          this.removeAll();\n        }, this._life);\n      }\n    }\n  }\n\n  singleModeRemove(msg: Message, msgItem: any) {\n    let dom = msgItem;\n    // 当点击关闭某个后，重新渲染导致原来赋予的dom失效，需要重新获取\n    if (!msgItem) {\n      const index = this._value.findIndex((item) => item === msg);\n      const doms = this.container.children;\n      dom = doms[index];\n    }\n    if (dom) {\n      dom.classList.remove('slide-in');\n    }\n    setTimeout(() => {\n      this.closeEvent.emit({ message: msg });\n      if (this.container.querySelectorAll('.slide-in').length === 0) {\n        this.value = [];\n        this.valueChange.emit(this.value);\n        this.onHidden();\n      } else {\n        this.rest = this.rest.filter((item) => item !== msg);\n        this.valueChange.emit(this.rest);\n      }\n    }, 300);\n  }\n\n  interrupt(index: number, msgItem: any) {\n    // 避免正在动画中的toast触发方法\n    if (msgItem.className.indexOf('slide-in') === -1) {\n      return;\n    }\n    if (this.lifeMode === 'single') {\n      if (this.timeoutArr[index]) {\n        clearTimeout(this.timeoutArr[index]);\n      }\n    } else {\n      this.resetDelay(() => {\n        const otherToasts = this._value.slice(0);\n        otherToasts.splice(index, 1, undefined);\n        const doms = this.container.children;\n        otherToasts.forEach((v, i) => v && doms[i]?.classList.remove('slide-in'));\n      });\n    }\n  }\n\n  resetDelay(fn: Function) {\n    if (!this.sticky && this.timeout) {\n      clearTimeout(this.timeout);\n      const remainTime = this._life - (new Date().getTime() - this.timestamp);\n      this.timeout = setTimeout(() => fn(), remainTime);\n    }\n  }\n\n  remove(index: number, msgItem: any) {\n    if (this.lifeMode === 'single' && this.timeoutArr[index]) {\n      clearTimeout(this.timeoutArr[index]);\n      this.timeoutArr.splice(index, 1);\n    }\n    msgItem.classList.remove('slide-in');\n    setTimeout(() => {\n      this.closeEvent.emit({ message: this.value[index] });\n      this._value = this.value.filter((val, i) => i !== index);\n      this.valueChange.emit(this._value);\n      if (this.container.querySelectorAll('.slide-in').length === 0) {\n        this.onHidden();\n      }\n      if (this.lifeMode === 'global') {\n        this.removeReset();\n      }\n    }, 300);\n  }\n\n  removeAll() {\n    if (this.value && this.value.length) {\n      const doms = this.container.children;\n      this._value.forEach((v, i) => v && doms[i]?.classList.remove('slide-in'));\n      setTimeout(() => {\n        this.value.forEach((msg, index) => this.closeEvent.emit({ message: this.value[index] }));\n        this.value = [];\n        this.valueChange.emit(this.value);\n      }, 300);\n    }\n  }\n\n  removeThrottle(index: number, msgItem: any) {\n    this.clickSub.next({ index: index, dom: msgItem });\n  }\n\n  removeIndexThrottle(index: number) {\n    const doms = this.container.children;\n    if (index < doms.length) {\n      this.clickSub.next({ index: index, dom: doms[index] });\n    }\n  }\n\n  removeMsgThrottle(msg: any) {\n    const doms = this.container.children;\n    const index = this._value.findIndex((item) => {\n      return isEqual(item, msg);\n    });\n    if (index < doms.length && index > -1) {\n      this.clickSub.next({ index: index, dom: doms[index] });\n    }\n  }\n\n  removeReset(index?: number, msgItem?: any, msg?: any) {\n    // 避免点击关闭但正在动画中或自动消失正在动画中的toast触发重置方法\n    const removed = this._value.findIndex((item) => item === msg) === -1;\n    if (removed || msgItem.className.indexOf('slide-in') === -1) {\n      return;\n    }\n    if (this.lifeMode === 'single') {\n      const msgLife = msg.life || this.severityDelay(msg);\n      const remainTime = msgLife - (new Date().getTime() - this.timestamp);\n      this.timeoutArr[index] = setTimeout(() => this.singleModeRemove(msg, msgItem), remainTime);\n    } else {\n      this.resetDelay(() => this.removeAll());\n    }\n  }\n\n  ngOnDestroy() {\n    if (!this.sticky) {\n      if (this.lifeMode === 'single') {\n        this.timeoutArr.forEach((item) => item && clearTimeout(item));\n      } else {\n        clearTimeout(this.timeout);\n      }\n    }\n    if (this.subItem) {\n      this.subItem.unsubscribe();\n    }\n  }\n}\n","<div #container [ngClass]=\"'devui-toast'\" [style.zIndex]=\"zIndex\" [ngStyle]=\"style\" [class]=\"styleClass\">\n  <div\n    #msgItem\n    *ngFor=\"let msg of value; let i = index\"\n    class=\"devui-toast-item-container\"\n    aria-live=\"polite\"\n    [ngClass]=\"{\n      'devui-toast-message-info': msg.severity == 'info',\n      'devui-toast-message-warn': msg.severity == 'warn',\n      'devui-toast-message-error': msg.severity == 'error',\n      'devui-toast-message-success': msg.severity == 'success',\n      'devui-toast-message-common': msg.severity == 'common'\n    }\"\n    (mouseenter)=\"interrupt(i, msgItem)\"\n    (mouseleave)=\"removeReset(i, msgItem, msg)\"\n  >\n    <div class=\"devui-toast-item\" [ngSwitch]=\"msg.severity\">\n      <div *ngIf=\"!(!msg.summary && life)\" class=\"devui-toast-icon-close\" (click)=\"removeThrottle(i, msgItem)\">\n        <svg\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 14 14\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <defs>\n            <polygon\n              id=\"path-1\"\n              points=\"8.07106781 6.65685425 10.8994949 3.82842712 12.3137085 5.24264069 9.48528137 8.07106781 12.3137085 10.8994949 10.8994949 12.3137085 8.07106781 9.48528137 5.24264069 12.3137085 3.82842712 10.8994949 6.65685425 8.07106781 3.82842712 5.24264069 5.24264069 3.82842712\"\n            ></polygon>\n          </defs>\n          <g id=\"error\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <mask id=\"mask-2\" fill=\"white\">\n              <use xlink:href=\"#path-1\"></use>\n            </mask>\n            <use id=\"Mask\" class=\"devui-toast-close-icon\" xlink:href=\"#path-1\"></use>\n          </g>\n        </svg>\n      </div>\n      <span\n        class=\"devui-toast-image\"\n        [ngClass]=\"{\n          'devui-toast-image-info': msg.severity === 'info',\n          'devui-toast-image-warning': msg.severity === 'warn',\n          'devui-toast-image-error': msg.severity === 'error',\n          'devui-toast-image-success': msg.severity === 'success'\n        }\"\n        *ngIf=\"msg.severity !== 'common'\"\n      >\n        <ng-container *ngSwitchCase=\"'info'\">\n          <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          >\n            <g id=\"info\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <path class=\"devui-toast-image-info-path\" d=\"M7,13 L7,6 L9,6 L9,13 L7,13 Z M7,5 L7,3 L9,3 L9,5 L7,5 Z\" id=\"info\"></path>\n            </g>\n          </svg>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'warn'\">\n          <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          >\n            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <path\n                class=\"devui-icon-warning-outer\"\n                d=\"M8.96244623,0.57254229 L15.8714442,13.4101975 C16.1549662,13.9370117 15.9538562,14.5918482 15.4222523,14.8728158 C15.2642579,14.9563203 15.0879506,15 14.9088903,15 L1.09089441,15 C0.488410063,15 0,14.5159904 0,13.9189343 C0,13.7414873 0.0440768395,13.5667684 0.128340519,13.4101975 L7.03733844,0.57254229 C7.32086049,0.0457280838 7.98165058,-0.153569987 8.51325441,0.127397589 C8.70423071,0.228333932 8.8605922,0.383286648 8.96244623,0.57254229 Z\"\n              ></path>\n              <path\n                class=\"devui-icon-warning-inner\"\n                stroke-width=\"0.3\"\n                fill-rule=\"nonzero\"\n                d=\"M8.87894737,13 L7.08947368,13 L7.08947368,11.2105263 L8.87894737,11.2105263 L8.87894737,13 Z M8.62102372,9.86842105 L7.32800539,9.86842105 L7,4.5 L8.96842105,4.5 L8.62102372,9.86842105 Z\"\n              ></path>\n            </g>\n          </svg>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'error'\">\n          <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          >\n            <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <circle cx=\"8\" cy=\"8\" r=\"8\"></circle>\n              <path\n                class=\"devui-toast-image-error-path\"\n                d=\"M11.5355339,4.46446609 C11.9260582,4.85499039 11.9260582,5.48815536 11.5355339,5.87867966 L9.41421356,8 L11.5355339,10.1213203 C11.9260582,10.5118446 11.9260582,11.1450096 11.5355339,11.5355339 C11.1450096,11.9260582 10.5118446,11.9260582 10.1213203,11.5355339 L8,9.41421356 L5.87867966,11.5355339 C5.48815536,11.9260582 4.85499039,11.9260582 4.46446609,11.5355339 C4.0739418,11.1450096 4.0739418,10.5118446 4.46446609,10.1213203 L6.58578644,8 L4.46446609,5.87867966 C4.0739418,5.48815536 4.0739418,4.85499039 4.46446609,4.46446609 C4.85499039,4.0739418 5.48815536,4.0739418 5.87867966,4.46446609 L8,6.58578644 L10.1213203,4.46446609 C10.5118446,4.0739418 11.1450096,4.0739418 11.5355339,4.46446609 Z\"\n              ></path>\n            </g>\n          </svg>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'success'\">\n          <svg\n            width=\"16px\"\n            height=\"16px\"\n            viewBox=\"0 0 16 16\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          >\n            <defs>\n              <polygon\n                id=\"path-s\"\n                points=\"6.53553391 9.77817459 12.1923882 4.12132034 13.6066017 5.53553391 6.53553391 12.6066017 3 9.07106781 4.41421356 7.65685425 6.53553391 9.77817459\"\n              ></polygon>\n            </defs>\n            <g id=\"correct\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n              <mask id=\"mask-2\" fill=\"white\">\n                <use xlink:href=\"#path-s\"></use>\n              </mask>\n              <use id=\"Mask\" class=\"devui-toast-image-success-path\" xlink:href=\"#path-s\"></use>\n            </g>\n          </svg>\n        </ng-container>\n      </span>\n      <div class=\"devui-toast-message\">\n        <span *ngIf=\"!!msg.summary\" class=\"devui-toast-title\">{{ msg.summary }}</span>\n        <ng-template\n          *ngIf=\"msg.content; else detailTemplate\"\n          [ngTemplateOutlet]=\"isTemplate(msg.content) || plainText\"\n          [ngTemplateOutletContext]=\"{ msg: msg }\"\n        ></ng-template>\n        <ng-template #plainText>\n          <p>{{ msg.content }}</p>\n        </ng-template>\n        <ng-template #detailTemplate>\n          <p *ngIf=\"msg.detail\" [innerHTML]=\"msg.detail | safe: 'html'\"></p>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n</div>\n","import { ComponentFactoryResolver, Injectable, Injector, Type } from '@angular/core';\nimport { OverlayContainerRef } from 'ng-devui/overlay-container';\nimport { assign } from 'lodash-es';\nimport { Message, ToastComponent } from './toast.component';\n\nexport interface IToastOptions {\n  value?: Array<Message>;\n  life?: number;\n  lifeMode?: string;\n  style?: object;\n  styleClass?: string;\n  sticky?: boolean;\n  injector?: Injector;\n  component?: Type<any>;\n  componentFactoryResolver?: ComponentFactoryResolver;\n}\n\n@Injectable()\nexport class ToastService {\n  constructor(private overlayContainerRef: OverlayContainerRef, private componentFactoryResolver: ComponentFactoryResolver) {}\n\n  open({\n    value,\n    life = 5000,\n    lifeMode = 'global',\n    sticky = false,\n    style,\n    styleClass,\n    injector,\n    /**\n     * @deprecated\n     */\n    component,\n    componentFactoryResolver,\n  }: IToastOptions = {}) {\n    const finalComponentFactoryResolver = componentFactoryResolver || this.componentFactoryResolver;\n    const toastRef = this.overlayContainerRef.createComponent(\n      finalComponentFactoryResolver.resolveComponentFactory(ToastComponent),\n      injector\n    );\n    assign(toastRef.instance, {\n      lifeMode: lifeMode,\n      sticky: sticky,\n      style: style,\n      styleClass: styleClass,\n      value: value,\n      life: life,\n    });\n\n    toastRef.instance.close = (index?: number | Message) => {\n      if (index !== undefined && index > -1) {\n        toastRef.instance.removeIndexThrottle(index as number);\n      } else if (index !== undefined) {\n        toastRef.instance.removeMsgThrottle(index);\n      } else {\n        setTimeout(() => {\n          toastRef.instance.removeAll();\n          setTimeout(() => {\n            if (toastRef) {\n              toastRef.destroy();\n            }\n          }, 300);\n        });\n      }\n    };\n\n    toastRef.instance.onHidden = () => {\n      if (toastRef?.hostView) {\n        toastRef.hostView.destroy();\n      }\n    };\n\n    toastRef.instance.show();\n    return {\n      toastInstance: toastRef.instance,\n    };\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OverlayContainerModule } from 'ng-devui/overlay-container';\nimport { SafePipeModule } from 'ng-devui/utils';\nimport { ToastComponent } from './toast.component';\nimport { ToastService } from './toast.service';\n@NgModule({\n  imports: [\n    CommonModule,\n    SafePipeModule,\n    OverlayContainerModule\n  ],\n  exports: [ToastComponent],\n  declarations: [ToastComponent],\n  providers: [ToastService]\n})\nexport class ToastModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}