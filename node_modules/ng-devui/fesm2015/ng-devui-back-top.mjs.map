{"version":3,"file":"ng-devui-back-top.mjs","sources":["../../devui/back-top/back-top.component.ts","../../devui/back-top/back-top.component.html","../../devui/back-top/back-top.module.ts","../../devui/back-top/ng-devui-back-top.ts"],"sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectionStrategy, ChangeDetectorRef, Component,\n  ElementRef, EventEmitter, Inject, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, TemplateRef\n} from '@angular/core';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'd-back-top',\n  templateUrl: './back-top.component.html',\n  styleUrls: ['./back-top.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  preserveWhitespaces: false,\n})\nexport class BackTopComponent implements OnInit, OnChanges, OnDestroy {\n  @Input() customTemplate: TemplateRef<any>;\n  @Input() visibleHeight = 300;\n  @Input() bottom = '50px';\n  @Input() right = '30px';\n  @Input() scrollTarget: HTMLElement;\n  @Output() backTopEvent =  new EventEmitter<boolean>();\n\n  currScrollTop = 0;\n  isVisible = false;\n  SCROLL_REFRESH_INTERVAL = 100;\n  target: HTMLElement | Window;\n  subs: Subscription = new Subscription();\n  document: Document;\n  constructor(private cdr: ChangeDetectorRef, private el: ElementRef, @Inject(DOCUMENT) private doc: any) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {\n    this.addScrollEvent();\n    this.showButton();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['scrollTarget']) {\n      if (this.subs) {\n        this.subs.unsubscribe();\n      }\n      this.subs = new Subscription();\n      this.addScrollEvent();\n    }\n  }\n\n  addScrollEvent() {\n    this.subs.add(\n      fromEvent(this.getScrollTarget(), 'scroll')\n        .pipe(debounceTime(this.SCROLL_REFRESH_INTERVAL))\n        .subscribe(() => {\n          this.showButton();\n          this.cdr.detectChanges();\n        })\n    );\n  }\n\n  getScrollTarget() {\n    if (this.scrollTarget) {\n      this.el.nativeElement.querySelector('.devui-backtop').style.position = 'absolute';\n      this.scrollTarget.parentElement.style.position = 'relative';\n    }\n    this.target = this.scrollTarget || window;\n    return this.target;\n  }\n\n  showButton() {\n    this.currScrollTop = this.target === window ?\n      (window.pageYOffset || this.document.documentElement.scrollTop || this.document.body.scrollTop) : this.scrollTarget.scrollTop;\n    if (this.isVisible !== (this.currScrollTop >= this.visibleHeight)) {\n      this.isVisible = !this.isVisible;\n    }\n  }\n\n  goTop() {\n    if (this.target === window) {\n      this.document.documentElement.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' });\n      this.document.body.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' });\n    } else {\n      this.scrollTarget.style.scrollBehavior = 'smooth';\n      this.scrollTarget.scrollTop = 0;\n    }\n    this.backTopEvent.emit(true);\n  }\n\n  ngOnDestroy() {\n    if (this.subs) {\n      this.subs.unsubscribe();\n    }\n  }\n}\n","<div (click)=\"goTop()\" class=\"devui-backtop\" [ngStyle]=\"{ display: isVisible ? 'block' : 'none', bottom: bottom, right: right }\">\n  <ng-template [ngTemplateOutlet]=\"customTemplate ? customTemplate : default\"></ng-template>\n  <ng-template #default>\n    <div class=\"devui-backtop-content\">\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M8.71335931,15.2865297 C8.61179683,16.2090609 7.32293758,16.1267953 7.27304695,15.2865297 C7.27175008,14.6475142 7.27175008,5.26479636 7.27175008,5.26479636 L2.83675052,9.54548344 C2.14185995,10.1440615 1.3143288,9.18731159 1.83135998,8.55773353 C3.79557855,6.65310872 7.3202657,3.24515592 7.40179694,3.16632781 C7.72696878,2.81306222 8.23887498,2.79476534 8.58495308,3.16632781 C9.23193739,3.7919215 14.0334057,8.42146792 14.1791557,8.58804603 C14.66614,9.19338972 13.8787807,10.0892021 13.2066089,9.58451469 C13.0329683,9.43717095 8.71468744,5.26462448 8.71468744,5.26462448 L8.71335931,15.2865297 Z M1.81868811,-8.54871729e-14 L14.1075619,-8.54871729e-14 L14.1075619,1.39509361 L1.81868811,1.39509361 L1.81868811,-8.54871729e-14 Z\"\n            fill=\"#FFFFFF\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </div>\n  </ng-template>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BackTopComponent } from './back-top.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [BackTopComponent],\n  declarations: [BackTopComponent]\n})\nexport class BackTopModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}