{"version":3,"file":"ng-devui-read-tip.mjs","sources":["../../devui/read-tip/read-tip.component.ts","../../devui/read-tip/read-tip.component.html","../../devui/read-tip/read-tip.directive.ts","../../devui/read-tip/read-tip.module.ts","../../devui/read-tip/ng-devui-read-tip.ts"],"sourcesContent":["import { animate, state, style, transition, trigger } from '@angular/animations';\nimport {\n  AfterContentChecked,\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  TemplateRef\n} from '@angular/core';\nimport { PositionService } from 'ng-devui/position';\nimport { PositionType } from 'ng-devui/tooltip';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'd-read-tip',\n  templateUrl: './read-tip.component.html',\n  styleUrls: ['./read-tip.component.scss'],\n  animations: [\n    trigger('state', [\n      state('void', style({ opacity: 0 })),\n      state('visible', style({ opacity: 1 })),\n      transition('* => visible', animate('150ms cubic-bezier(0.0, 0.0, 0.2, 1)')),\n      transition('visible => *', animate('150ms cubic-bezier(0.4, 0.0, 1, 1)')),\n    ]),\n  ],\n})\nexport class ReadTipComponent implements OnInit, AfterViewInit, AfterContentChecked, OnDestroy {\n  @Input() triggerElementRef: ElementRef;\n  @Input() position: PositionType | PositionType[] = 'top';\n  @Input() content: string | HTMLElement | TemplateRef<any>;\n  @Input() customData: any;\n  @Input() title: string | HTMLElement;\n  @Input() showAnimate = false;\n  @Input() scrollElement: Element;\n  @Input() appendToBody: boolean;\n  @Input() zIndex = 1060;\n  @Input() popMaxWidth: number;\n  @Input() overlayClassName: string;\n\n  subs: Subscription = new Subscription();\n  SCROLL_REFRESH_INTERVAL = 100;\n  currentPosition: PositionType;\n  connectionBias: string;\n  animateState: string = this.showAnimate ? 'void' : '';\n\n  @HostBinding('style.display') get display() {\n    return this.content ? 'block' : 'none';\n  }\n  @HostBinding('class') get class() {\n    return 'devui-popover ' + this.currentPosition + ' ' + this.connectionBias;\n  }\n\n  @HostBinding('@state') get state() {\n    return this.animateState;\n  }\n\n  get template() {\n    return this.content instanceof TemplateRef ? this.content : null;\n  }\n\n  constructor(\n    private renderer: Renderer2,\n    private positionService: PositionService,\n    public elementRef: ElementRef,\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.elementRef.nativeElement.style.zIndex = this.zIndex;\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => {\n      this.updatePosition();\n    });\n\n    if (this.appendToBody) {\n      if (!this.scrollElement) {\n        this.scrollElement = this.positionService.getScrollParent(this.triggerElementRef.nativeElement);\n      }\n      this.subs.add(\n        fromEvent(this.scrollElement || window, 'scroll')\n          .pipe(debounceTime(this.SCROLL_REFRESH_INTERVAL))\n          .subscribe(() => {\n            this.updatePosition();\n          })\n      );\n      this.subs.add(\n        fromEvent(window, 'resize')\n          .pipe(debounceTime(this.SCROLL_REFRESH_INTERVAL))\n          .subscribe(() => {\n            this.updatePosition();\n          })\n      );\n    }\n  }\n\n  ngAfterContentChecked() {\n    this.updatePosition();\n  }\n\n  show() {\n    this.animateState = 'visible';\n  }\n\n  hide() {\n    this.animateState = 'void';\n  }\n\n  onHidden() {}\n\n  @HostListener('@state.done', ['$event'])\n  onAnimationEnd(event) {\n    if (event.toState === 'void') {\n      this.onHidden();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subs) {\n      this.subs.unsubscribe();\n    }\n  }\n\n  updatePosition() {\n    const rect = this.positionService.positionElements(\n      this.triggerElementRef.nativeElement,\n      this.elementRef.nativeElement,\n      this.position,\n      this.appendToBody\n    );\n    this.currentPosition = rect.placementPrimary;\n    this.connectionBias = `bias-${rect.placementSecondary}`;\n    if (rect.placementSecondary === 'center') {\n      if (rect.placementPrimary === 'left' || rect.placementPrimary === 'right') {\n        this.connectionBias = 'bias-vertical-center';\n      } else {\n        this.connectionBias = 'bias-horizontal-center';\n      }\n    }\n    this.renderer.setStyle(this.elementRef.nativeElement, 'left', `${rect.left}px`);\n    this.renderer.setStyle(this.elementRef.nativeElement, 'top', `${rect.top}px`);\n  }\n}\n","<div class=\"arrow\"></div>\n<div class=\"devui-popover-content {{ overlayClassName }}\" [style.maxWidth.px]=\"popMaxWidth\">\n  <ng-template [ngTemplateOutlet]=\"template || defaultTemplate\" [ngTemplateOutletContext]=\"{ $implicit: customData }\"> </ng-template>\n  <ng-template #defaultTemplate>\n    <div class=\"read-tip-container\">\n      <div class=\"title\">\n        {{ title }}\n      </div>\n      <div class=\"content\">\n        {{ content }}\n      </div>\n    </div>\n  </ng-template>\n</div>\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  HostListener,\n  Inject,\n  Injector,\n  Input,\n  OnDestroy,\n  OnInit,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\nimport { OverlayContainerRef } from 'ng-devui/overlay-container';\nimport { of } from 'rxjs';\nimport { ReadTipComponent } from './read-tip.component';\nimport { ReadTipOptions, ReadTipRule } from './read-tip.types';\n\n@Directive({\n  selector: '[dReadTip]',\n  exportAs: 'dReadTip',\n})\nexport class ReadTipDirective implements OnInit, OnDestroy {\n  readTipComponentRef: ComponentRef<ReadTipComponent>;\n\n  _prevTarget;\n  document: Document;\n\n  defaultOptions: ReadTipOptions = {\n    trigger: 'hover',\n    showAnimate: false,\n    mouseenterTime: 100,\n    mouseleaveTime: 100,\n    position: 'top',\n    overlayClassName: '',\n    appendToBody: true,\n    rules: { selector: null },\n  };\n\n  set prevTarget(target) {\n    if (target !== this._prevTarget) {\n      this._prevTarget = target;\n      this.hide();\n    }\n  }\n\n  @Input() readTipOptions: ReadTipOptions;\n\n  @Input() contentTemplate: TemplateRef<any>;\n\n  @HostListener('mouseover', ['$event'])\n  onMouseOver(event: MouseEvent) {\n    this.findElementIndex(event.target, this.readTipOptions?.rules, 'hover').subscribe((elementInfo) => {\n      if (elementInfo?.shouldTrigger) {\n        this.hide();\n        if (!this.readTipComponentRef) {\n          const target = new ElementRef(event.target);\n          setTimeout(() => {\n            this.show(target, elementInfo.rule);\n          }, elementInfo.rule?.mouseenterTime);\n        }\n        if (this.readTipComponentRef) {\n          setTimeout(() => {\n            if (this.readTipComponentRef) {\n              this.readTipComponentRef.instance.updatePosition();\n            }\n          }, elementInfo.rule?.mouseenterTime);\n        }\n      }\n    });\n  }\n\n  @HostListener('mouseout', ['$event'])\n  onMouseOut(event: MouseEvent) {\n    this.findElementIndex(event.target, this.readTipOptions?.rules, 'hover').subscribe((elementInfo) => {\n      if (elementInfo?.shouldTrigger) {\n        setTimeout(() => {\n          this.hide();\n        }, elementInfo.rule?.mouseleaveTime);\n      }\n    });\n  }\n\n  @HostListener('click', ['$event'])\n  onClick(event: MouseEvent) {\n    this.findElementIndex(event.target, this.readTipOptions?.rules, 'click').subscribe((elementInfo) => {\n      this.prevTarget = event.target;\n      if (elementInfo?.shouldTrigger) {\n        if (!this.readTipComponentRef) {\n          const target = new ElementRef(event.target);\n          this.show(target, elementInfo.rule);\n        }\n        if (this.readTipComponentRef) {\n          setTimeout(() => {\n            if (this.readTipComponentRef) {\n              this.readTipComponentRef.instance.updatePosition();\n            }\n          });\n        }\n      }\n    });\n  }\n\n  constructor(\n    private el: ElementRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private overlayContainerRef: OverlayContainerRef,\n    private inject: Injector,\n    private viewContainerRef: ViewContainerRef,\n    @Inject(DOCUMENT) private doc: any\n  ) {\n    this.document = this.doc;\n  }\n\n  ngOnInit() {}\n\n  ngOnDestroy() {\n    this.destroy();\n  }\n\n  show(target, rule?: ReadTipRule) {\n    this.hide();\n    if (!this.readTipComponentRef) {\n      this.createReadTip(target, rule);\n    }\n\n    if (rule.showAnimate) {\n      this.readTipComponentRef.instance.show();\n    }\n    if (rule.trigger === 'click') {\n      this.document.addEventListener('click', this.onDocumentClick);\n    }\n  }\n\n  createReadTip(target, rule?: ReadTipRule) {\n    if (rule.appendToBody) {\n      this.readTipComponentRef = this.overlayContainerRef.createComponent(\n        this.componentFactoryResolver.resolveComponentFactory(ReadTipComponent)\n      );\n    } else {\n      this.readTipComponentRef = this.viewContainerRef.createComponent(\n        this.componentFactoryResolver.resolveComponentFactory(ReadTipComponent),\n        this.viewContainerRef.length,\n        this.inject\n      );\n    }\n\n    if (this.contentTemplate) {\n      Object.assign(this.readTipComponentRef.instance, {\n        content: this.contentTemplate,\n        triggerElementRef: target,\n        appendToBody: rule.appendToBody,\n        position: rule.position,\n        overlayClassName: rule.overlayClassName,\n      });\n    } else {\n      if (rule.dataFn) {\n        rule.dataFn({ element: target.nativeElement, rule }).subscribe((data) => {\n          if (data.template) {\n            Object.assign(this.readTipComponentRef.instance, {\n              content: data.template,\n              customData: data.customData,\n              triggerElementRef: target,\n              appendToBody: rule.appendToBody,\n              position: rule.position,\n              overlayClassName: rule.overlayClassName,\n            });\n          } else {\n            Object.assign(this.readTipComponentRef.instance, {\n              content: data.content,\n              title: data.title,\n              triggerElementRef: target,\n              appendToBody: rule.appendToBody,\n              position: rule.position,\n              overlayClassName: rule.overlayClassName,\n            });\n          }\n        });\n      } else {\n        Object.assign(this.readTipComponentRef.instance, {\n          content: rule.content,\n          title: rule.title,\n          triggerElementRef: target,\n          appendToBody: rule.appendToBody,\n          position: rule.position,\n          overlayClassName: rule.overlayClassName,\n        });\n      }\n    }\n  }\n\n  hide() {\n    if (this.readTipComponentRef) {\n      if (!this.readTipOptions.showAnimate) {\n        this.destroy();\n        return;\n      }\n\n      this.readTipComponentRef.instance.hide();\n      this.readTipComponentRef.instance.onHidden = () => {\n        this.destroy();\n      };\n    }\n  }\n\n  destroy() {\n    if (this.readTipComponentRef) {\n      this.readTipComponentRef.destroy();\n      this.readTipComponentRef = null;\n    }\n    if (this.readTipOptions.trigger === 'click') {\n      this.document.removeEventListener('click', this.onDocumentClick);\n    }\n  }\n\n  onDocumentClick = (event) => {\n    event.stopPropagation();\n    if (\n      !this.el.nativeElement.contains(event.target) &&\n      !(this.readTipComponentRef && this.readTipComponentRef.instance.elementRef.nativeElement.contains(event.target))\n    ) {\n      this.hide();\n    }\n  };\n\n  findElementIndex(element, rules, trigger) {\n    const keysCanInherit = ['trigger', 'showAnimate', 'mouseenterTime', 'mouseleaveTime', 'position', 'overlayClassName', 'appendToBody'];\n    if (rules instanceof Array) {\n      let elementIndex = -1;\n\n      for (let i = 0; i < rules.length; i++) {\n        if (this.isCorrectElement(rules[i].selector, element)) {\n          elementIndex = i;\n          break;\n        }\n      }\n\n      keysCanInherit.forEach((key) => {\n        if (rules[elementIndex]) {\n          rules[elementIndex][key] = rules[elementIndex][key] || this.readTipOptions[key] || this.defaultOptions[key];\n        }\n      });\n      return of({\n        shouldTrigger: rules[elementIndex]?.trigger === trigger && this.isCorrectElement(rules[elementIndex]?.selector, element),\n        rule: rules[elementIndex],\n      });\n    } else {\n      keysCanInherit.forEach((key) => {\n        if (rules) {\n          rules[key] = rules[key] || this.readTipOptions[key] || this.defaultOptions[key];\n        }\n      });\n      return of({\n        shouldTrigger: rules?.trigger === trigger && this.isCorrectElement(rules?.selector, element),\n        rule: rules,\n      });\n    }\n  }\n\n  isCorrectElement(selector: string, element) {\n    const elementsArray = this.el.nativeElement.querySelectorAll(selector);\n    for (let i = 0; i < elementsArray.length; i++) {\n      if (elementsArray[i] === element) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OverlayContainerModule } from 'ng-devui/overlay-container';\nimport { PositioningModule } from 'ng-devui/position';\nimport { ReadTipComponent } from './read-tip.component';\nimport { ReadTipDirective } from './read-tip.directive';\n\n@NgModule({\n  imports: [CommonModule, PositioningModule, OverlayContainerModule],\n  exports: [ReadTipComponent, ReadTipDirective],\n  declarations: [ReadTipComponent, ReadTipDirective],\n})\nexport class ReadTipModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}