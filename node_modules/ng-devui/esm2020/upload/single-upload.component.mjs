import { DOCUMENT } from '@angular/common';
import { Component, EventEmitter, forwardRef, Inject, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { I18nService } from 'ng-devui/i18n';
import { ToastService } from 'ng-devui/toast';
import { from, merge } from 'rxjs';
import { last, map, mergeMap, toArray } from 'rxjs/operators';
import { FileUploader } from './file-uploader.class';
import { IFileOptions, IUploadOptions, UploadStatus } from './file-uploader.types';
import { SelectFiles } from './select-files.utils';
import { SingleUploadViewComponent } from './single-upload-view.component';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "./select-files.utils";
import * as i3 from "ng-devui/toast";
import * as i4 from "ng-devui/progress";
import * as i5 from "ng-devui/button";
import * as i6 from "./single-upload-view.component";
import * as i7 from "./file-drop.directive";
import * as i8 from "@angular/common";
export class SingleUploadComponent {
    constructor(i18n, selectFiles, doc, toastService) {
        this.i18n = i18n;
        this.selectFiles = selectFiles;
        this.doc = doc;
        this.toastService = toastService;
        this.autoUpload = false;
        this.withoutBtn = false;
        this.showTip = false;
        this.uploadedFiles = [];
        this.enableDrop = false;
        this.disabled = false;
        this.successEvent = new EventEmitter();
        this.errorEvent = new EventEmitter();
        this.errorChunkEvent = new EventEmitter();
        this.deleteUploadedFileEvent = new EventEmitter();
        this.fileDrop = new EventEmitter();
        this.fileOver = new EventEmitter();
        this.fileSelect = new EventEmitter();
        this.UploadStatus = UploadStatus;
        this.isDropOVer = false;
        this.defaultChunkSize = 1024 * 1024 * 20; // 单位是byte 默认分片大小 20兆。
        this.errorMsg = [];
        this.onChange = (_) => null;
        this.onTouched = () => null;
        this.document = this.doc;
    }
    writeValue(files) {
        if (files) {
            const simulateFiles = from(this.simulateSelectFiles(files)).pipe(mergeMap((file) => file));
            this._dealFiles(simulateFiles);
        }
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    simulateSelectFiles(files) {
        return new Promise((resolve) => {
            resolve(Array.prototype.slice.call(files));
        });
    }
    ngOnInit() {
        this.i18nText = this.i18n.getI18nText().upload;
        this.i18nCommonText = this.i18n.getI18nText().common;
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nText = data.upload;
            this.i18nCommonText = data.common;
        });
    }
    _dealFiles(observale) {
        observale
            .pipe(map((file) => {
            this.singleUploadViewComponent.addFile(file);
            return file;
        }))
            .subscribe(() => {
            this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();
            this.checkValid();
            const file = this.singleUploadViewComponent.fileUploaders[0]?.file;
            this.onChange(file);
            if (file) {
                this.onFileSelect(file);
            }
            if (this.autoUpload) {
                this.upload();
            }
        }, (error) => {
            this.alertMsg(error.message);
        });
    }
    checkValid() {
        this.singleUploadViewComponent.fileUploaders.forEach((fileUploader) => {
            const checkResult = this.selectFiles._validateFiles(fileUploader.file, this.fileOptions.accept, fileUploader.uploadOptions);
            if (checkResult.checkError) {
                this.singleUploadViewComponent.deletePreUploadFile(fileUploader.file);
                this.alertMsg(checkResult.errorMsg);
            }
        });
    }
    onClick($event) {
        if (this.disabled ||
            (this.singleUploadViewComponent.fileUploaders[0] && this.singleUploadViewComponent.fileUploaders[0].status === UploadStatus.uploading)) {
            return;
        }
        this._dealFiles(this.selectFiles.triggerSelectFiles(this.fileOptions, this.uploadOptions));
    }
    get filename() {
        return (this.singleUploadViewComponent.getFiles()[0] || {}).name || '';
    }
    onFileDrop(files) {
        this.isDropOVer = false;
        this._dealFiles(this.selectFiles.triggerDropFiles(this.fileOptions, this.uploadOptions, files));
        this.fileDrop.emit(files[0]);
    }
    onFileOver(event) {
        this.isDropOVer = event;
        this.fileOver.emit(event);
    }
    onFileSelect(file) {
        this.fileSelect.emit(file);
    }
    upload() {
        this.canUpload().then((canUpload) => {
            if (!canUpload) {
                return;
            }
            const tempNode = this.document.getElementById('d-upload-temp');
            if (tempNode) {
                this.document.body.removeChild(tempNode);
            }
            if (this.uploadOptions.isChunked && this.isNeedChunk()) {
                this.sliceUpload();
            }
            else {
                this.singleUploadViewComponent
                    .upload()
                    .pipe(last())
                    .subscribe((results) => {
                    this.successEvent.emit(results);
                    results.forEach((result) => {
                        this.singleUploadViewComponent.uploadedFilesComponent.addAndOverwriteFile(result.file);
                    });
                }, (error) => {
                    if (this.singleUploadViewComponent.fileUploaders[0]) {
                        this.singleUploadViewComponent.fileUploaders[0].percentage = 0;
                    }
                    this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();
                    this.errorEvent.emit(error);
                });
            }
        });
    }
    isNeedChunk() {
        if (this.singleUploadViewComponent.fileUploaders[0]?.file) {
            return this.singleUploadViewComponent.fileUploaders[0].file.size > this.uploadOptions.chunkSize || this.defaultChunkSize;
        }
    }
    async sliceUpload() {
        const fileUploaders = this.singleUploadViewComponent.fileUploaders;
        for (let i = 0; i < fileUploaders.length; i++) {
            const fileChunkList = this.createFileChunk(fileUploaders[i].file);
            const currentFile = fileUploaders[i];
            // 并发上传
            const uploadObservable = this.uploadChunkList(fileChunkList, currentFile);
            (await uploadObservable).subscribe((results) => {
                currentFile.percentage = 100;
                currentFile.status = UploadStatus.uploaded;
                const successRes = [{
                        file: currentFile.file,
                        response: results[0].response,
                        chunkList: results
                    }];
                this.successEvent.emit(successRes);
                results.forEach((result) => {
                    this.singleUploadViewComponent.uploadedFilesComponent.addAndOverwriteFile(result.file);
                });
            }, (error) => {
                error.file = currentFile.file;
                currentFile.status = UploadStatus.failed;
                this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();
                this.errorEvent.emit(error);
            });
        }
    }
    async uploadChunkList(fileChunkList, currentFile) {
        currentFile.status = UploadStatus.uploading;
        currentFile.percentage = 0;
        let uploads = [];
        const chunkPercentage = (1 / fileChunkList.length) * 100;
        uploads = fileChunkList.map((fileUploader) => {
            fileUploader.percentage = 0;
            return from(fileUploader.send());
        });
        if (uploads.length > 0) {
            const uploadObservable = merge(...uploads);
            (await uploadObservable).subscribe((results) => {
                currentFile.percentage = currentFile.percentage + chunkPercentage;
            }, (error) => {
                currentFile.status = UploadStatus.failed;
                this.singleUploadViewComponent.uploadedFilesComponent.cleanUploadedFiles();
                this.errorChunkEvent.emit(error);
            });
            return merge(...uploads).pipe(toArray());
        }
        return from(Promise.reject(new Error('no files')));
    }
    // 生成分片上传的数组
    createFileChunk(file) {
        const chunkSize = this.uploadOptions.chunkSize || this.defaultChunkSize;
        const { name, type, lastModified, size } = file;
        const fileId = new Date().getTime();
        const fileChunkList = [];
        let fileSliceStart = 0;
        let chunkedFileIndex = 0;
        const chunks = Math.ceil(size / chunkSize);
        while (fileSliceStart < file.size) {
            chunkedFileIndex = chunkedFileIndex + 1;
            const slicedFile = file.slice(fileSliceStart, fileSliceStart + chunkSize);
            const newChunkFile = new File([slicedFile], `${fileId}-${chunkedFileIndex}-${chunks}-${size}-${lastModified}-${name}`, { type });
            fileChunkList.push(new FileUploader(newChunkFile, this.uploadOptions));
            fileSliceStart += chunkSize;
        }
        return fileChunkList;
    }
    canUpload() {
        let uploadResult = Promise.resolve(true);
        if (this.beforeUpload) {
            const result = this.beforeUpload(this.singleUploadViewComponent.getFullFiles()[0] || {});
            if (typeof result !== 'undefined') {
                if (result.then) {
                    uploadResult = result;
                }
                else if (result.subscribe) {
                    uploadResult = result.toPromise();
                }
                else {
                    uploadResult = Promise.resolve(result);
                }
            }
        }
        return uploadResult;
    }
    _onDeleteUploadedFile(filePath) {
        this.deleteUploadedFileEvent.emit(filePath);
        this.onChange(null);
    }
    deleteFile($event) {
        $event.stopPropagation();
        const files = this.singleUploadViewComponent.getFiles();
        this.singleUploadViewComponent.deleteFile(files[0]);
    }
    alertMsg(errorMsg) {
        this.toastService.open({
            value: [{ severity: 'warn', content: errorMsg }],
        });
    }
    ngOnDestroy() {
        if (this.i18nSubscription) {
            this.i18nSubscription.unsubscribe();
        }
    }
}
SingleUploadComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: SingleUploadComponent, deps: [{ token: i1.I18nService }, { token: i2.SelectFiles }, { token: DOCUMENT }, { token: i3.ToastService }], target: i0.ɵɵFactoryTarget.Component });
SingleUploadComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: SingleUploadComponent, selector: "d-single-upload", inputs: { uploadOptions: "uploadOptions", fileOptions: "fileOptions", autoUpload: "autoUpload", withoutBtn: "withoutBtn", showTip: "showTip", uploadedFiles: "uploadedFiles", uploadedFilesRef: "uploadedFilesRef", preloadFilesRef: "preloadFilesRef", filePath: "filePath", placeholderText: "placeholderText", uploadText: "uploadText", confirmText: "confirmText", beforeUpload: "beforeUpload", dynamicUploadOptionsFn: "dynamicUploadOptionsFn", enableDrop: "enableDrop", disabled: "disabled" }, outputs: { successEvent: "successEvent", errorEvent: "errorEvent", errorChunkEvent: "errorChunkEvent", deleteUploadedFileEvent: "deleteUploadedFileEvent", fileDrop: "fileDrop", fileOver: "fileOver", fileSelect: "fileSelect" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => SingleUploadComponent),
            multi: true
        }
    ], viewQueries: [{ propertyName: "singleUploadViewComponent", first: true, predicate: ["dSingleUploadView"], descendants: true, static: true }], exportAs: ["dSingleUpload"], ngImport: i0, template: "<div\n  d-file-drop\n  [enableDrop]=\"enableDrop\"\n  [isSingle]=\"true\"\n  (fileDrop)=\"onFileDrop($event)\"\n  (fileOver)=\"onFileOver($event)\"\n  (fileSelect)=\"onFileSelect($event)\"\n  [ngStyle]=\"{ border: isDropOVer ? '1px solid #15bf15' : '0' }\"\n  style=\"display: flex\"\n>\n  <div\n    [class.disabled]=\"this.disabled || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\"\n    (click)=\"onClick($event)\"\n    class=\"devui-input-group\"\n  >\n    <div class=\"devui-form-control devui-files-list\">\n      <div *ngIf=\"!filename\" class=\"devui-file-item devui-upload-placeholder\">\n        {{ placeholderText ? placeholderText : i18nText?.chooseFile }}\n      </div>\n      <div *ngIf=\"!!filename\" class=\"devui-file-tag devui-file-item\" title=\"{{ filename }}\">\n        <span class=\"devui-filename {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-failed-color' : '' }}\">\n          {{ filename }}\n        </span>\n        <span\n          class=\"icon icon-close\n            {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-upload-delete-file-button' : '' }}\n            {{\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading ||\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\n              ? 'devui-uploading-delete'\n              : ''\n          }}\"\n          (click)=\"deleteFile($event)\"\n        >\n        </span>\n        <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"icon devui-upload-progress\">\n          <d-progress\n            [type]=\"'circle'\"\n            [percentage]=\"dSingleUploadView.fileUploaders[0].percentage\"\n            [strokeColor]=\"'#50D4AB'\"\n            [strokeWidth]=\"8\"\n            [showContent]=\"false\"\n          >\n          </d-progress>\n        </div>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"icon icon-running\" (click)=\"upload()\">\n        </span>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"icon icon-right\"></span>\n      </div>\n    </div>\n    <span class=\"devui-input-group-addon\">\n      <svg class=\"svg-icon-dot\" height=\"1em\" width=\"1em\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n          d=\"m400.31892 176.970574c0-61.574381 50.113351-111.680569 111.679545-111.680569 61.576427 0 111.680569 50.106188 111.680569 111.680569 0 61.568241-50.104141 111.679545-111.680569 111.679545-61.566194 0-111.679545-50.111304-111.679545-111.679545zm0 335.028403c0-61.568241 50.113351-111.678522 111.679545-111.678522 61.576427 0 111.680569 50.110281 111.680569 111.678522 0 61.574381-50.105165 111.682615-111.680569 111.682615-61.566194 0-111.679545-50.108235-111.679545-111.682615zm0 335.037612c0-61.572334 50.113351-111.679545 111.679545-111.679545 61.575404 0 111.680569 50.107211 111.680569 111.679545 0 61.567217-50.105165 111.672382-111.680569 111.672382-61.566194 0-111.679545-50.105164-111.679545-111.672382zm0 0\"\n        />\n      </svg>\n    </span>\n  </div>\n  <d-button\n    *ngIf=\"!autoUpload && !withoutBtn\"\n    (btnClick)=\"upload()\"\n    bsStyle=\"common\"\n    [style.margin-left.px]=\"8\"\n    [disabled]=\"\n      disabled ||\n      dSingleUploadView.uploadedFilesComponent.uploadedFiles.length > 0 ||\n      dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\n    \"\n  >\n    <span *ngIf=\"!dSingleUploadView.fileUploaders[0] || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.preLoad\">{{\n      uploadText || i18nText?.upload\n    }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\">{{ i18nText?.uploading }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\">{{ i18nText?.uploaded }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\">{{ i18nText?.uploadFailed }}</span>\n  </d-button>\n</div>\n<ng-container *ngIf=\"showTip\">\n  <div class=\"devui-upload-tip\">\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"devui-loading\">\n      {{ i18nText?.uploading }}\n    </span>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"devui-loaded\">\n      <i class=\"icon icon-right-o\"></i>\n      <span style=\"vertical-align: middle\">{{ i18nText?.uploadSuccess }}</span>\n    </div>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"devui-upload-failed\">\n      <i class=\"icon icon-info-o\"></i>\n      <span style=\"vertical-align: middle\">\n        <span style=\"margin-right: 8px\">{{ i18nText?.uploadFailed }}</span>\n        <a (click)=\"upload()\">{{ i18nText?.reUpload }}</a>\n      </span>\n    </div>\n  </div>\n</ng-container>\n<d-single-upload-view\n  #dSingleUploadView=\"dSingleUploadView\"\n  [uploadOptions]=\"uploadOptions\"\n  [filePath]=\"filePath\"\n  [uploadedFiles]=\"uploadedFiles\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  [preloadFilesRef]=\"preloadFilesRef\"\n  [dynamicUploadOptionsFn]=\"dynamicUploadOptionsFn\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-single-upload-view>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-input-group{position:relative;display:flex;align-items:center;border-collapse:separate;width:100%}.devui-input-group:not(.disabled):hover .devui-input-group-addon{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);background-color:#f2f2f3;background-color:var(--devui-dividing-line, #f2f2f3);font-weight:700}.devui-input-group:not(.disabled):hover .devui-form-control{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);border-right-color:#d7d8da;border-right-color:var(--devui-form-control-line, #d7d8da)}.devui-input-group:not(.disabled) .devui-input-group-addon:active{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);border-right-color:#d7d8da;border-right-color:var(--devui-form-control-line, #d7d8da);background-color:#f2f2f3;background-color:var(--devui-dividing-line, #f2f2f3)}.devui-input-group .devui-input-group-addon{width:36px;white-space:nowrap;font-size:16px;font-size:var(--devui-font-size-icon, 16px);font-weight:400;line-height:1;color:#252b3a;color:var(--devui-text, #252b3a);background-color:#f5f5f5;background-color:var(--devui-area, #f5f5f5);border-top:1px solid #d7d8da;border-top:1px solid var(--devui-form-control-line, #d7d8da);border-bottom:1px solid #d7d8da;border-bottom:1px solid var(--devui-form-control-line, #d7d8da);border-right:1px solid #d7d8da;border-right:1px solid var(--devui-form-control-line, #d7d8da);border-radius:0 2px 2px 0;border-radius:0 var(--devui-border-radius, 2px) var(--devui-border-radius, 2px) 0;transition:border-color .3s cubic-bezier(.645,.045,.355,1),background-color .3s cubic-bezier(.645,.045,.355,1);transition:border-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)),background-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1));cursor:pointer;height:100%;position:relative;display:inline-block}.devui-input-group .devui-input-group-addon svg{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.devui-input-group .devui-form-control{cursor:pointer;display:block;width:100%;min-height:28px;height:unset;padding:4px 8px;font-size:12px;font-size:var(--devui-font-size, 12px);line-height:1.5;background-image:none;border:1px solid #d7d8da;border:1px solid var(--devui-form-control-line, #d7d8da);border-radius:2px 0 0 2px;border-radius:var(--devui-border-radius, 2px) 0 0 var(--devui-border-radius, 2px);transition:border-color .3s cubic-bezier(.645,.045,.355,1),box-shadow .3s cubic-bezier(.645,.045,.355,1);transition:border-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)),box-shadow var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1))}.devui-input-group .devui-form-control.devui-files-list{max-height:52px;padding:2px 2px 0;overflow-x:hidden;overflow-y:auto;max-width:100%}.devui-input-group .devui-form-control.devui-files-list .devui-file-item{height:22px;line-height:22px;padding:0 48px 0 12px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag{position:relative;background-color:#e9edfa;background-color:var(--devui-label-bg, #e9edfa);border-radius:2px;border-radius:var(--devui-border-radius, 2px);max-width:100%}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .devui-filename{height:100%;display:inline-block;vertical-align:middle;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon{position:absolute;cursor:pointer;right:8px;top:50%;transform:translateY(-50%)}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.icon-right{color:#50d4ab;color:var(--devui-success, #50d4ab)}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.icon-running{font-size:16px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.devui-upload-delete-file-button{margin-right:20px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.devui-uploading-delete,.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .devui-upload-progress,.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .icon-right{display:none}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .icon-close{display:inline-block}.devui-input-group.disabled .devui-upload-placeholder{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-input-group .devui-upload-placeholder{max-height:28px;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#babbc0;color:var(--devui-placeholder, #babbc0)}:host ::ng-deep .devui-upload-progress{width:16px;height:16px}.devui-input-group.disabled .devui-form-control,.devui-input-group.disabled .devui-input-group-addon{cursor:not-allowed;background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);border-color:#dfe1e6;border-color:var(--devui-disabled-line, #dfe1e6);color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}svg.svg-icon-dot>path{fill:#71757f;fill:var(--devui-icon-text, #71757f)}.devui-form-control{outline:none}.devui-input-group.disabled .devui-upload-delete-file-button{cursor:not-allowed;pointer-events:none}.devui-loading{color:#71757f;color:var(--devui-aide-text, #71757f)}.devui-failed-color{color:#f66f6a;color:var(--devui-danger, #f66f6a)}.devui-upload-tip{height:18px;margin-top:8px;font-size:12px}.devui-upload-tip .icon{margin-right:8px;font-size:16px;vertical-align:middle}.devui-upload-tip .icon-right-o{color:#50d4ab;color:var(--devui-success, #50d4ab)}.devui-upload-tip .devui-upload-failed{color:#f66f6a;color:var(--devui-danger, #f66f6a)}.devui-upload-tip a{color:#526ecc;color:var(--devui-link, #526ecc);cursor:pointer}\n"], components: [{ type: i4.ProgressComponent, selector: "d-progress", inputs: ["percentage", "percentageText", "barbgcolor", "strokeColor", "height", "strokeWidth", "isCircle", "type", "showContent"] }, { type: i5.ButtonComponent, selector: "d-button", inputs: ["id", "type", "bsStyle", "shape", "bsSize", "bsPosition", "bordered", "icon", "disabled", "showLoading", "width", "autofocus", "loadingTemplateRef"], outputs: ["btnClick"] }, { type: i6.SingleUploadViewComponent, selector: "d-single-upload-view", inputs: ["uploadOptions", "preloadFilesRef", "uploadedFiles", "uploadedFilesRef", "filePath", "dynamicUploadOptionsFn"], outputs: ["deleteUploadedFileEvent"], exportAs: ["dSingleUploadView"] }], directives: [{ type: i7.FileDropDirective, selector: "[d-file-drop]", inputs: ["enableDrop", "isSingle"], outputs: ["fileOver", "fileDrop"] }, { type: i8.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: SingleUploadComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-single-upload', exportAs: 'dSingleUpload', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => SingleUploadComponent),
                            multi: true
                        }
                    ], preserveWhitespaces: false, template: "<div\n  d-file-drop\n  [enableDrop]=\"enableDrop\"\n  [isSingle]=\"true\"\n  (fileDrop)=\"onFileDrop($event)\"\n  (fileOver)=\"onFileOver($event)\"\n  (fileSelect)=\"onFileSelect($event)\"\n  [ngStyle]=\"{ border: isDropOVer ? '1px solid #15bf15' : '0' }\"\n  style=\"display: flex\"\n>\n  <div\n    [class.disabled]=\"this.disabled || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\"\n    (click)=\"onClick($event)\"\n    class=\"devui-input-group\"\n  >\n    <div class=\"devui-form-control devui-files-list\">\n      <div *ngIf=\"!filename\" class=\"devui-file-item devui-upload-placeholder\">\n        {{ placeholderText ? placeholderText : i18nText?.chooseFile }}\n      </div>\n      <div *ngIf=\"!!filename\" class=\"devui-file-tag devui-file-item\" title=\"{{ filename }}\">\n        <span class=\"devui-filename {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-failed-color' : '' }}\">\n          {{ filename }}\n        </span>\n        <span\n          class=\"icon icon-close\n            {{ dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed ? 'devui-upload-delete-file-button' : '' }}\n            {{\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading ||\n            dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\n              ? 'devui-uploading-delete'\n              : ''\n          }}\"\n          (click)=\"deleteFile($event)\"\n        >\n        </span>\n        <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"icon devui-upload-progress\">\n          <d-progress\n            [type]=\"'circle'\"\n            [percentage]=\"dSingleUploadView.fileUploaders[0].percentage\"\n            [strokeColor]=\"'#50D4AB'\"\n            [strokeWidth]=\"8\"\n            [showContent]=\"false\"\n          >\n          </d-progress>\n        </div>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"icon icon-running\" (click)=\"upload()\">\n        </span>\n        <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"icon icon-right\"></span>\n      </div>\n    </div>\n    <span class=\"devui-input-group-addon\">\n      <svg class=\"svg-icon-dot\" height=\"1em\" width=\"1em\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n          d=\"m400.31892 176.970574c0-61.574381 50.113351-111.680569 111.679545-111.680569 61.576427 0 111.680569 50.106188 111.680569 111.680569 0 61.568241-50.104141 111.679545-111.680569 111.679545-61.566194 0-111.679545-50.111304-111.679545-111.679545zm0 335.028403c0-61.568241 50.113351-111.678522 111.679545-111.678522 61.576427 0 111.680569 50.110281 111.680569 111.678522 0 61.574381-50.105165 111.682615-111.680569 111.682615-61.566194 0-111.679545-50.108235-111.679545-111.682615zm0 335.037612c0-61.572334 50.113351-111.679545 111.679545-111.679545 61.575404 0 111.680569 50.107211 111.680569 111.679545 0 61.567217-50.105165 111.672382-111.680569 111.672382-61.566194 0-111.679545-50.105164-111.679545-111.672382zm0 0\"\n        />\n      </svg>\n    </span>\n  </div>\n  <d-button\n    *ngIf=\"!autoUpload && !withoutBtn\"\n    (btnClick)=\"upload()\"\n    bsStyle=\"common\"\n    [style.margin-left.px]=\"8\"\n    [disabled]=\"\n      disabled ||\n      dSingleUploadView.uploadedFilesComponent.uploadedFiles.length > 0 ||\n      dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\n    \"\n  >\n    <span *ngIf=\"!dSingleUploadView.fileUploaders[0] || dSingleUploadView.fileUploaders[0]?.status === UploadStatus.preLoad\">{{\n      uploadText || i18nText?.upload\n    }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\">{{ i18nText?.uploading }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\">{{ i18nText?.uploaded }}</span>\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\">{{ i18nText?.uploadFailed }}</span>\n  </d-button>\n</div>\n<ng-container *ngIf=\"showTip\">\n  <div class=\"devui-upload-tip\">\n    <span *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploading\" class=\"devui-loading\">\n      {{ i18nText?.uploading }}\n    </span>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.uploaded\" class=\"devui-loaded\">\n      <i class=\"icon icon-right-o\"></i>\n      <span style=\"vertical-align: middle\">{{ i18nText?.uploadSuccess }}</span>\n    </div>\n    <div *ngIf=\"dSingleUploadView.fileUploaders[0]?.status === UploadStatus.failed\" class=\"devui-upload-failed\">\n      <i class=\"icon icon-info-o\"></i>\n      <span style=\"vertical-align: middle\">\n        <span style=\"margin-right: 8px\">{{ i18nText?.uploadFailed }}</span>\n        <a (click)=\"upload()\">{{ i18nText?.reUpload }}</a>\n      </span>\n    </div>\n  </div>\n</ng-container>\n<d-single-upload-view\n  #dSingleUploadView=\"dSingleUploadView\"\n  [uploadOptions]=\"uploadOptions\"\n  [filePath]=\"filePath\"\n  [uploadedFiles]=\"uploadedFiles\"\n  [uploadedFilesRef]=\"uploadedFilesRef\"\n  [preloadFilesRef]=\"preloadFilesRef\"\n  [dynamicUploadOptionsFn]=\"dynamicUploadOptionsFn\"\n  (deleteUploadedFileEvent)=\"_onDeleteUploadedFile($event)\"\n>\n</d-single-upload-view>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-input-group{position:relative;display:flex;align-items:center;border-collapse:separate;width:100%}.devui-input-group:not(.disabled):hover .devui-input-group-addon{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);background-color:#f2f2f3;background-color:var(--devui-dividing-line, #f2f2f3);font-weight:700}.devui-input-group:not(.disabled):hover .devui-form-control{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);border-right-color:#d7d8da;border-right-color:var(--devui-form-control-line, #d7d8da)}.devui-input-group:not(.disabled) .devui-input-group-addon:active{border-color:#5e7ce0;border-color:var(--devui-form-control-line-active, #5e7ce0);border-right-color:#d7d8da;border-right-color:var(--devui-form-control-line, #d7d8da);background-color:#f2f2f3;background-color:var(--devui-dividing-line, #f2f2f3)}.devui-input-group .devui-input-group-addon{width:36px;white-space:nowrap;font-size:16px;font-size:var(--devui-font-size-icon, 16px);font-weight:400;line-height:1;color:#252b3a;color:var(--devui-text, #252b3a);background-color:#f5f5f5;background-color:var(--devui-area, #f5f5f5);border-top:1px solid #d7d8da;border-top:1px solid var(--devui-form-control-line, #d7d8da);border-bottom:1px solid #d7d8da;border-bottom:1px solid var(--devui-form-control-line, #d7d8da);border-right:1px solid #d7d8da;border-right:1px solid var(--devui-form-control-line, #d7d8da);border-radius:0 2px 2px 0;border-radius:0 var(--devui-border-radius, 2px) var(--devui-border-radius, 2px) 0;transition:border-color .3s cubic-bezier(.645,.045,.355,1),background-color .3s cubic-bezier(.645,.045,.355,1);transition:border-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)),background-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1));cursor:pointer;height:100%;position:relative;display:inline-block}.devui-input-group .devui-input-group-addon svg{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.devui-input-group .devui-form-control{cursor:pointer;display:block;width:100%;min-height:28px;height:unset;padding:4px 8px;font-size:12px;font-size:var(--devui-font-size, 12px);line-height:1.5;background-image:none;border:1px solid #d7d8da;border:1px solid var(--devui-form-control-line, #d7d8da);border-radius:2px 0 0 2px;border-radius:var(--devui-border-radius, 2px) 0 0 var(--devui-border-radius, 2px);transition:border-color .3s cubic-bezier(.645,.045,.355,1),box-shadow .3s cubic-bezier(.645,.045,.355,1);transition:border-color var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)),box-shadow var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1))}.devui-input-group .devui-form-control.devui-files-list{max-height:52px;padding:2px 2px 0;overflow-x:hidden;overflow-y:auto;max-width:100%}.devui-input-group .devui-form-control.devui-files-list .devui-file-item{height:22px;line-height:22px;padding:0 48px 0 12px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag{position:relative;background-color:#e9edfa;background-color:var(--devui-label-bg, #e9edfa);border-radius:2px;border-radius:var(--devui-border-radius, 2px);max-width:100%}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .devui-filename{height:100%;display:inline-block;vertical-align:middle;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon{position:absolute;cursor:pointer;right:8px;top:50%;transform:translateY(-50%)}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.icon-right{color:#50d4ab;color:var(--devui-success, #50d4ab)}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.icon-running{font-size:16px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.devui-upload-delete-file-button{margin-right:20px}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag .icon.devui-uploading-delete,.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .devui-upload-progress,.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .icon-right{display:none}.devui-input-group .devui-form-control.devui-files-list .devui-file-tag:hover .icon-close{display:inline-block}.devui-input-group.disabled .devui-upload-placeholder{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-input-group .devui-upload-placeholder{max-height:28px;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#babbc0;color:var(--devui-placeholder, #babbc0)}:host ::ng-deep .devui-upload-progress{width:16px;height:16px}.devui-input-group.disabled .devui-form-control,.devui-input-group.disabled .devui-input-group-addon{cursor:not-allowed;background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);border-color:#dfe1e6;border-color:var(--devui-disabled-line, #dfe1e6);color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}svg.svg-icon-dot>path{fill:#71757f;fill:var(--devui-icon-text, #71757f)}.devui-form-control{outline:none}.devui-input-group.disabled .devui-upload-delete-file-button{cursor:not-allowed;pointer-events:none}.devui-loading{color:#71757f;color:var(--devui-aide-text, #71757f)}.devui-failed-color{color:#f66f6a;color:var(--devui-danger, #f66f6a)}.devui-upload-tip{height:18px;margin-top:8px;font-size:12px}.devui-upload-tip .icon{margin-right:8px;font-size:16px;vertical-align:middle}.devui-upload-tip .icon-right-o{color:#50d4ab;color:var(--devui-success, #50d4ab)}.devui-upload-tip .devui-upload-failed{color:#f66f6a;color:var(--devui-danger, #f66f6a)}.devui-upload-tip a{color:#526ecc;color:var(--devui-link, #526ecc);cursor:pointer}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.I18nService }, { type: i2.SelectFiles }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }, { type: i3.ToastService }]; }, propDecorators: { uploadOptions: [{
                type: Input
            }], fileOptions: [{
                type: Input
            }], autoUpload: [{
                type: Input
            }], withoutBtn: [{
                type: Input
            }], showTip: [{
                type: Input
            }], uploadedFiles: [{
                type: Input
            }], uploadedFilesRef: [{
                type: Input
            }], preloadFilesRef: [{
                type: Input
            }], filePath: [{
                type: Input
            }], placeholderText: [{
                type: Input
            }], uploadText: [{
                type: Input
            }], confirmText: [{
                type: Input
            }], beforeUpload: [{
                type: Input
            }], dynamicUploadOptionsFn: [{
                type: Input
            }], enableDrop: [{
                type: Input
            }], disabled: [{
                type: Input
            }], successEvent: [{
                type: Output
            }], errorEvent: [{
                type: Output
            }], errorChunkEvent: [{
                type: Output
            }], deleteUploadedFileEvent: [{
                type: Output
            }], fileDrop: [{
                type: Output
            }], fileOver: [{
                type: Output
            }], fileSelect: [{
                type: Output
            }], singleUploadViewComponent: [{
                type: ViewChild,
                args: ['dSingleUploadView', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2luZ2xlLXVwbG9hZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9kZXZ1aS91cGxvYWQvc2luZ2xlLXVwbG9hZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi9kZXZ1aS91cGxvYWQvc2luZ2xlLXVwbG9hZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQXFCLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RJLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQWlCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQTRCLE1BQU0sTUFBTSxDQUFDO0FBQzdELE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckQsT0FBTyxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDbkYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ25ELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7Ozs7Ozs7O0FBZTNFLE1BQU0sT0FBTyxxQkFBcUI7SUF1Q2hDLFlBQ1UsSUFBaUIsRUFDakIsV0FBd0IsRUFDTixHQUFRLEVBQzFCLFlBQTBCO1FBSDFCLFNB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dXJjZXNDb250ZW50IjpbImltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmLCBJbmplY3QsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0LCBUZW1wbGF0ZVJlZiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBJMThuSW50ZXJmYWNlLCBJMThuU2VydmljZSB9IGZyb20gJ25nLWRldnVpL2kxOG4nO1xuaW1wb3J0IHsgVG9hc3RTZXJ2aWNlIH0gZnJvbSAnbmctZGV2dWkvdG9hc3QnO1xuaW1wb3J0IHsgZnJvbSwgbWVyZ2UsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbGFzdCwgbWFwLCBtZXJnZU1hcCwgdG9BcnJheSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEZpbGVVcGxvYWRlciB9IGZyb20gJy4vZmlsZS11cGxvYWRlci5jbGFzcyc7XG5pbXBvcnQgeyBJRmlsZU9wdGlvbnMsIElVcGxvYWRPcHRpb25zLCBVcGxvYWRTdGF0dXMgfSBmcm9tICcuL2ZpbGUtdXBsb2FkZXIudHlwZXMnO1xuaW1wb3J0IHsgU2VsZWN0RmlsZXMgfSBmcm9tICcuL3NlbGVjdC1maWxlcy51dGlscyc7XG5pbXBvcnQgeyBTaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50IH0gZnJvbSAnLi9zaW5nbGUtdXBsb2FkLXZpZXcuY29tcG9uZW50JztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Qtc2luZ2xlLXVwbG9hZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9zaW5nbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sJyxcbiAgZXhwb3J0QXM6ICdkU2luZ2xlVXBsb2FkJyxcbiAgc3R5bGVVcmxzOiBbJy4vdXBsb2FkLXZpZXcuY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBTaW5nbGVVcGxvYWRDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF0sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBTaW5nbGVVcGxvYWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3ksIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuICBkU2luZ2xlVXBsb2FkVmlldztcbiAgQElucHV0KCkgdXBsb2FkT3B0aW9uczogSVVwbG9hZE9wdGlvbnM7XG4gIEBJbnB1dCgpIGZpbGVPcHRpb25zOiBJRmlsZU9wdGlvbnM7XG4gIEBJbnB1dCgpIGF1dG9VcGxvYWQgPSBmYWxzZTtcbiAgQElucHV0KCkgd2l0aG91dEJ0biA9IGZhbHNlO1xuICBASW5wdXQoKSBzaG93VGlwID0gZmFsc2U7XG4gIEBJbnB1dCgpIHVwbG9hZGVkRmlsZXM6IEFycmF5PE9iamVjdD4gPSBbXTtcbiAgQElucHV0KCkgdXBsb2FkZWRGaWxlc1JlZjogVGVtcGxhdGVSZWY8YW55PjtcbiAgQElucHV0KCkgcHJlbG9hZEZpbGVzUmVmPzogVGVtcGxhdGVSZWY8YW55PjtcbiAgQElucHV0KCkgZmlsZVBhdGg6IHN0cmluZztcbiAgQElucHV0KCkgcGxhY2Vob2xkZXJUZXh0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHVwbG9hZFRleHQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBASW5wdXQoKSBjb25maXJtVGV4dDogc3RyaW5nO1xuICBASW5wdXQoKSBiZWZvcmVVcGxvYWQ6IChmaWxlKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiB8IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIEBJbnB1dCgpIGR5bmFtaWNVcGxvYWRPcHRpb25zRm46IChmaWxlcywgdXBsb2FkT3B0aW9ucykgPT4gSVVwbG9hZE9wdGlvbnM7XG4gIEBJbnB1dCgpIGVuYWJsZURyb3AgPSBmYWxzZTtcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcbiAgQE91dHB1dCgpIHN1Y2Nlc3NFdmVudDogRXZlbnRFbWl0dGVyPEFycmF5PHsgZmlsZTogRmlsZTsgcmVzcG9uc2U6IGFueSB9Pj4gPSBuZXcgRXZlbnRFbWl0dGVyPEFycmF5PHsgZmlsZTogRmlsZTsgcmVzcG9uc2U6IGFueSB9Pj4oKTtcbiAgQE91dHB1dCgpIGVycm9yRXZlbnQ6IEV2ZW50RW1pdHRlcjx7IGZpbGU6IEZpbGU7IHJlc3BvbnNlOiBhbnkgfT4gPSBuZXcgRXZlbnRFbWl0dGVyPHsgZmlsZTogRmlsZTsgcmVzcG9uc2U6IGFueSB9PigpO1xuICBAT3V0cHV0KCkgZXJyb3JDaHVua0V2ZW50OiBFdmVudEVtaXR0ZXI8eyBmaWxlOiBGaWxlOyByZXNwb25zZTogYW55IH0+ID0gbmV3IEV2ZW50RW1pdHRlcjx7IGZpbGU6IEZpbGU7IHJlc3BvbnNlOiBhbnkgfT4oKTtcbiAgQE91dHB1dCgpIGRlbGV0ZVVwbG9hZGVkRmlsZUV2ZW50OiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBAT3V0cHV0KCkgZmlsZURyb3A6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBmaWxlT3ZlcjogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuICBAT3V0cHV0KCkgZmlsZVNlbGVjdDogRXZlbnRFbWl0dGVyPEZpbGU+ID0gbmV3IEV2ZW50RW1pdHRlcjxGaWxlPigpO1xuICBAVmlld0NoaWxkKCdkU2luZ2xlVXBsb2FkVmlldycsIHsgc3RhdGljOiB0cnVlIH0pIHNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQ6IFNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQ7XG4gIFVwbG9hZFN0YXR1cyA9IFVwbG9hZFN0YXR1cztcbiAgaXNEcm9wT1ZlciA9IGZhbHNlO1xuICBkZWZhdWx0Q2h1bmtTaXplID0gMTAyNCAqIDEwMjQgKiAyMDsgLy8g5Y2V5L2N5pivYnl0ZSDpu5jorqTliIbniYflpKflsI8gMjDlhYbjgIJcbiAgaTE4blRleHQ6IEkxOG5JbnRlcmZhY2VbJ3VwbG9hZCddO1xuICBpMThuQ29tbW9uVGV4dDogSTE4bkludGVyZmFjZVsnY29tbW9uJ107XG4gIGkxOG5TdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgZXJyb3JNc2cgPSBbXTtcbiAgZG9jdW1lbnQ6IERvY3VtZW50O1xuICBwcml2YXRlIG9uQ2hhbmdlID0gKF86IGFueSkgPT4gbnVsbDtcbiAgcHJpdmF0ZSBvblRvdWNoZWQgPSAoKSA9PiBudWxsO1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGkxOG46IEkxOG5TZXJ2aWNlLFxuICAgIHByaXZhdGUgc2VsZWN0RmlsZXM6IFNlbGVjdEZpbGVzLFxuICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jOiBhbnksXG4gICAgcHJpdmF0ZSB0b2FzdFNlcnZpY2U6IFRvYXN0U2VydmljZVxuICApIHtcbiAgICB0aGlzLmRvY3VtZW50ID0gdGhpcy5kb2M7XG4gIH1cblxuICB3cml0ZVZhbHVlKGZpbGVzOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoZmlsZXMpIHtcbiAgICAgIGNvbnN0IHNpbXVsYXRlRmlsZXMgPSBmcm9tKHRoaXMuc2ltdWxhdGVTZWxlY3RGaWxlcyhmaWxlcykpLnBpcGUobWVyZ2VNYXAoKGZpbGUpID0+IDxhbnk+ZmlsZSkpO1xuICAgICAgdGhpcy5fZGVhbEZpbGVzKHNpbXVsYXRlRmlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgc2ltdWxhdGVTZWxlY3RGaWxlcyhmaWxlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgcmVzb2x2ZShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmaWxlcykpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5pMThuVGV4dCA9IHRoaXMuaTE4bi5nZXRJMThuVGV4dCgpLnVwbG9hZDtcbiAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkuY29tbW9uO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5UZXh0ID0gZGF0YS51cGxvYWQ7XG4gICAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gZGF0YS5jb21tb247XG4gICAgfSk7XG4gIH1cblxuICBfZGVhbEZpbGVzKG9ic2VydmFsZSkge1xuICAgIG9ic2VydmFsZVxuICAgICAgLnBpcGUoXG4gICAgICAgIG1hcCgoZmlsZSkgPT4ge1xuICAgICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC5hZGRGaWxlKDxGaWxlPmZpbGUpO1xuICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC51cGxvYWRlZEZpbGVzQ29tcG9uZW50LmNsZWFuVXBsb2FkZWRGaWxlcygpO1xuICAgICAgICAgIHRoaXMuY2hlY2tWYWxpZCgpO1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQuZmlsZVVwbG9hZGVyc1swXT8uZmlsZTtcbiAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGZpbGUpO1xuICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICB0aGlzLm9uRmlsZVNlbGVjdChmaWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuYXV0b1VwbG9hZCkge1xuICAgICAgICAgICAgdGhpcy51cGxvYWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmFsZXJ0TXNnKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICApO1xuICB9XG5cbiAgY2hlY2tWYWxpZCgpIHtcbiAgICB0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQuZmlsZVVwbG9hZGVycy5mb3JFYWNoKChmaWxlVXBsb2FkZXIpID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gdGhpcy5zZWxlY3RGaWxlcy5fdmFsaWRhdGVGaWxlcyhmaWxlVXBsb2FkZXIuZmlsZSwgdGhpcy5maWxlT3B0aW9ucy5hY2NlcHQsIGZpbGVVcGxvYWRlci51cGxvYWRPcHRpb25zKTtcbiAgICAgIGlmIChjaGVja1Jlc3VsdC5jaGVja0Vycm9yKSB7XG4gICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC5kZWxldGVQcmVVcGxvYWRGaWxlKGZpbGVVcGxvYWRlci5maWxlKTtcbiAgICAgICAgdGhpcy5hbGVydE1zZyhjaGVja1Jlc3VsdC5lcnJvck1zZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkNsaWNrKCRldmVudCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGlzYWJsZWQgfHxcbiAgICAgICh0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQuZmlsZVVwbG9hZGVyc1swXSAmJiB0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQuZmlsZVVwbG9hZGVyc1swXS5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy51cGxvYWRpbmcpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2RlYWxGaWxlcyh0aGlzLnNlbGVjdEZpbGVzLnRyaWdnZXJTZWxlY3RGaWxlcyh0aGlzLmZpbGVPcHRpb25zLCB0aGlzLnVwbG9hZE9wdGlvbnMpKTtcbiAgfVxuXG4gIGdldCBmaWxlbmFtZSgpIHtcbiAgICByZXR1cm4gKHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC5nZXRGaWxlcygpWzBdIHx8ICh7fSBhcyBGaWxlKSkubmFtZSB8fCAnJztcbiAgfVxuXG4gIG9uRmlsZURyb3AoZmlsZXMpIHtcbiAgICB0aGlzLmlzRHJvcE9WZXIgPSBmYWxzZTtcbiAgICB0aGlzLl9kZWFsRmlsZXModGhpcy5zZWxlY3RGaWxlcy50cmlnZ2VyRHJvcEZpbGVzKHRoaXMuZmlsZU9wdGlvbnMsIHRoaXMudXBsb2FkT3B0aW9ucywgZmlsZXMpKTtcbiAgICB0aGlzLmZpbGVEcm9wLmVtaXQoZmlsZXNbMF0pO1xuICB9XG5cbiAgb25GaWxlT3ZlcihldmVudCkge1xuICAgIHRoaXMuaXNEcm9wT1ZlciA9IGV2ZW50O1xuICAgIHRoaXMuZmlsZU92ZXIuZW1pdChldmVudCk7XG4gIH1cblxuICBvbkZpbGVTZWxlY3QoZmlsZSkge1xuICAgIHRoaXMuZmlsZVNlbGVjdC5lbWl0KGZpbGUpO1xuICB9XG5cbiAgdXBsb2FkKCkge1xuICAgIHRoaXMuY2FuVXBsb2FkKCkudGhlbigoY2FuVXBsb2FkKSA9PiB7XG4gICAgICBpZiAoIWNhblVwbG9hZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB0ZW1wTm9kZSA9IHRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2QtdXBsb2FkLXRlbXAnKTtcbiAgICAgIGlmICh0ZW1wTm9kZSkge1xuICAgICAgICB0aGlzLmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcE5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudXBsb2FkT3B0aW9ucy5pc0NodW5rZWQgJiYgdGhpcy5pc05lZWRDaHVuaygpKSB7XG4gICAgICAgIHRoaXMuc2xpY2VVcGxvYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudFxuICAgICAgICAgIC51cGxvYWQoKVxuICAgICAgICAgIC5waXBlKGxhc3QoKSlcbiAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKHJlc3VsdHM6IEFycmF5PHsgZmlsZTogRmlsZTsgcmVzcG9uc2U6IGFueSB9PikgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3NFdmVudC5lbWl0KHJlc3VsdHMpO1xuICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC51cGxvYWRlZEZpbGVzQ29tcG9uZW50LmFkZEFuZE92ZXJ3cml0ZUZpbGUocmVzdWx0LmZpbGUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC5maWxlVXBsb2FkZXJzWzBdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LmZpbGVVcGxvYWRlcnNbMF0ucGVyY2VudGFnZSA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LnVwbG9hZGVkRmlsZXNDb21wb25lbnQuY2xlYW5VcGxvYWRlZEZpbGVzKCk7XG4gICAgICAgICAgICAgIHRoaXMuZXJyb3JFdmVudC5lbWl0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlzTmVlZENodW5rKCkge1xuICAgIGlmKHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC5maWxlVXBsb2FkZXJzWzBdPy5maWxlKXtcbiAgICAgIHJldHVybiB0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQuZmlsZVVwbG9hZGVyc1swXS5maWxlLnNpemUgPiB0aGlzLnVwbG9hZE9wdGlvbnMuY2h1bmtTaXplIHx8IHRoaXMuZGVmYXVsdENodW5rU2l6ZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzbGljZVVwbG9hZCgpIHtcbiAgICBjb25zdCBmaWxlVXBsb2FkZXJzID0gdGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LmZpbGVVcGxvYWRlcnM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVVcGxvYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZpbGVDaHVua0xpc3QgPSB0aGlzLmNyZWF0ZUZpbGVDaHVuayhmaWxlVXBsb2FkZXJzW2ldLmZpbGUpO1xuXG4gICAgICBjb25zdCBjdXJyZW50RmlsZSA9IGZpbGVVcGxvYWRlcnNbaV07XG4gICAgICAvLyDlubblj5HkuIrkvKBcbiAgICAgIGNvbnN0IHVwbG9hZE9ic2VydmFibGUgPSB0aGlzLnVwbG9hZENodW5rTGlzdChmaWxlQ2h1bmtMaXN0LCBjdXJyZW50RmlsZSk7XG4gICAgICAoYXdhaXQgdXBsb2FkT2JzZXJ2YWJsZSkuc3Vic2NyaWJlKFxuICAgICAgICAocmVzdWx0czogQXJyYXk8eyBmaWxlOiBGaWxlOyByZXNwb25zZTogYW55IH0+KSA9PiB7XG4gICAgICAgICAgY3VycmVudEZpbGUucGVyY2VudGFnZSA9IDEwMDtcbiAgICAgICAgICBjdXJyZW50RmlsZS5zdGF0dXMgPSBVcGxvYWRTdGF0dXMudXBsb2FkZWQ7XG4gICAgICAgICAgY29uc3Qgc3VjY2Vzc1JlcyA9IFt7XG4gICAgICAgICAgICBmaWxlIDpjdXJyZW50RmlsZS5maWxlLFxuICAgICAgICAgICAgcmVzcG9uc2UgOnJlc3VsdHNbMF0ucmVzcG9uc2UsXG4gICAgICAgICAgICBjaHVua0xpc3Q6cmVzdWx0c1xuICAgICAgICAgIH1dO1xuICAgICAgICAgIHRoaXMuc3VjY2Vzc0V2ZW50LmVtaXQoc3VjY2Vzc1Jlcyk7XG4gICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC51cGxvYWRlZEZpbGVzQ29tcG9uZW50LmFkZEFuZE92ZXJ3cml0ZUZpbGUocmVzdWx0LmZpbGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICBlcnJvci5maWxlID0gY3VycmVudEZpbGUuZmlsZTtcbiAgICAgICAgICBjdXJyZW50RmlsZS5zdGF0dXMgPSBVcGxvYWRTdGF0dXMuZmFpbGVkO1xuICAgICAgICAgIHRoaXMuc2luZ2xlVXBsb2FkVmlld0NvbXBvbmVudC51cGxvYWRlZEZpbGVzQ29tcG9uZW50LmNsZWFuVXBsb2FkZWRGaWxlcygpO1xuICAgICAgICAgIHRoaXMuZXJyb3JFdmVudC5lbWl0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuXG4gIGFzeW5jIHVwbG9hZENodW5rTGlzdChmaWxlQ2h1bmtMaXN0LCBjdXJyZW50RmlsZSkge1xuICAgIGN1cnJlbnRGaWxlLnN0YXR1cyA9IFVwbG9hZFN0YXR1cy51cGxvYWRpbmc7XG4gICAgY3VycmVudEZpbGUucGVyY2VudGFnZSA9IDA7XG4gICAgbGV0IHVwbG9hZHM6IGFueVtdID0gW107XG4gICAgY29uc3QgY2h1bmtQZXJjZW50YWdlID0gKDEgLyBmaWxlQ2h1bmtMaXN0Lmxlbmd0aCkgKiAxMDA7XG5cbiAgICB1cGxvYWRzID0gZmlsZUNodW5rTGlzdC5tYXAoKGZpbGVVcGxvYWRlcikgPT4ge1xuICAgICAgZmlsZVVwbG9hZGVyLnBlcmNlbnRhZ2UgPSAwO1xuICAgICAgcmV0dXJuIGZyb20oZmlsZVVwbG9hZGVyLnNlbmQoKSk7XG4gICAgfSk7XG4gICAgaWYgKHVwbG9hZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdXBsb2FkT2JzZXJ2YWJsZSA9IG1lcmdlKC4uLnVwbG9hZHMpO1xuICAgICAgKGF3YWl0IHVwbG9hZE9ic2VydmFibGUpLnN1YnNjcmliZShcbiAgICAgICAgKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICBjdXJyZW50RmlsZS5wZXJjZW50YWdlID0gY3VycmVudEZpbGUucGVyY2VudGFnZSArIGNodW5rUGVyY2VudGFnZTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgY3VycmVudEZpbGUuc3RhdHVzID0gVXBsb2FkU3RhdHVzLmZhaWxlZDtcbiAgICAgICAgICB0aGlzLnNpbmdsZVVwbG9hZFZpZXdDb21wb25lbnQudXBsb2FkZWRGaWxlc0NvbXBvbmVudC5jbGVhblVwbG9hZGVkRmlsZXMoKTtcbiAgICAgICAgICB0aGlzLmVycm9yQ2h1bmtFdmVudC5lbWl0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBtZXJnZSguLi51cGxvYWRzKS5waXBlKHRvQXJyYXkoKSk7XG4gICAgfVxuICAgIHJldHVybiBmcm9tKFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignbm8gZmlsZXMnKSkpO1xuICB9XG4gIC8vIOeUn+aIkOWIhueJh+S4iuS8oOeahOaVsOe7hFxuICBjcmVhdGVGaWxlQ2h1bmsoZmlsZTogRmlsZSkge1xuICAgIGNvbnN0IGNodW5rU2l6ZSA9IHRoaXMudXBsb2FkT3B0aW9ucy5jaHVua1NpemUgfHwgdGhpcy5kZWZhdWx0Q2h1bmtTaXplO1xuICAgIGNvbnN0IHsgbmFtZSwgdHlwZSAsbGFzdE1vZGlmaWVkLHNpemV9ID0gZmlsZTtcbiAgICBjb25zdCBmaWxlSWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBjb25zdCBmaWxlQ2h1bmtMaXN0OiBBcnJheTxGaWxlVXBsb2FkZXI+ID0gW107XG4gICAgbGV0IGZpbGVTbGljZVN0YXJ0ID0gMDtcbiAgICBsZXQgY2h1bmtlZEZpbGVJbmRleCA9IDA7XG4gICAgY29uc3QgY2h1bmtzID0gTWF0aC5jZWlsKHNpemUgLyBjaHVua1NpemUpO1xuICAgIHdoaWxlIChmaWxlU2xpY2VTdGFydCA8IGZpbGUuc2l6ZSkge1xuICAgICAgY2h1bmtlZEZpbGVJbmRleCA9IGNodW5rZWRGaWxlSW5kZXggKyAxO1xuICAgICAgY29uc3Qgc2xpY2VkRmlsZSA9IGZpbGUuc2xpY2UoZmlsZVNsaWNlU3RhcnQsIGZpbGVTbGljZVN0YXJ0ICsgY2h1bmtTaXplKTtcbiAgICAgIGNvbnN0IG5ld0NodW5rRmlsZSA9IG5ldyBGaWxlKFtzbGljZWRGaWxlXSwgYCR7ZmlsZUlkfS0ke2NodW5rZWRGaWxlSW5kZXh9LSR7Y2h1bmtzfS0ke3NpemV9LSR7bGFzdE1vZGlmaWVkfS0ke25hbWV9YCwgeyB0eXBlIH0pO1xuICAgICAgZmlsZUNodW5rTGlzdC5wdXNoKG5ldyBGaWxlVXBsb2FkZXIobmV3Q2h1bmtGaWxlLCB0aGlzLnVwbG9hZE9wdGlvbnMpKTtcbiAgICAgIGZpbGVTbGljZVN0YXJ0ICs9IGNodW5rU2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVDaHVua0xpc3Q7XG4gIH1cblxuICBjYW5VcGxvYWQoKSB7XG4gICAgbGV0IHVwbG9hZFJlc3VsdCA9IFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICBpZiAodGhpcy5iZWZvcmVVcGxvYWQpIHtcbiAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0gdGhpcy5iZWZvcmVVcGxvYWQodGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LmdldEZ1bGxGaWxlcygpWzBdIHx8ICh7fSBhcyBGaWxlKSk7XG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHJlc3VsdC50aGVuKSB7XG4gICAgICAgICAgdXBsb2FkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdWJzY3JpYmUpIHtcbiAgICAgICAgICB1cGxvYWRSZXN1bHQgPSAocmVzdWx0IGFzIE9ic2VydmFibGU8Ym9vbGVhbj4pLnRvUHJvbWlzZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVwbG9hZFJlc3VsdCA9IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGxvYWRSZXN1bHQ7XG4gIH1cblxuICBfb25EZWxldGVVcGxvYWRlZEZpbGUoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIHRoaXMuZGVsZXRlVXBsb2FkZWRGaWxlRXZlbnQuZW1pdChmaWxlUGF0aCk7XG4gICAgdGhpcy5vbkNoYW5nZShudWxsKTtcbiAgfVxuXG4gIGRlbGV0ZUZpbGUoJGV2ZW50KSB7XG4gICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LmdldEZpbGVzKCk7XG4gICAgdGhpcy5zaW5nbGVVcGxvYWRWaWV3Q29tcG9uZW50LmRlbGV0ZUZpbGUoZmlsZXNbMF0pO1xuICB9XG5cbiAgYWxlcnRNc2coZXJyb3JNc2cpIHtcbiAgICB0aGlzLnRvYXN0U2VydmljZS5vcGVuKHtcbiAgICAgIHZhbHVlOiBbeyBzZXZlcml0eTogJ3dhcm4nLCBjb250ZW50OiBlcnJvck1zZyB9XSxcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmkxOG5TdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiPGRpdlxuICBkLWZpbGUtZHJvcFxuICBbZW5hYmxlRHJvcF09XCJlbmFibGVEcm9wXCJcbiAgW2lzU2luZ2xlXT1cInRydWVcIlxuICAoZmlsZURyb3ApPVwib25GaWxlRHJvcCgkZXZlbnQpXCJcbiAgKGZpbGVPdmVyKT1cIm9uRmlsZU92ZXIoJGV2ZW50KVwiXG4gIChmaWxlU2VsZWN0KT1cIm9uRmlsZVNlbGVjdCgkZXZlbnQpXCJcbiAgW25nU3R5bGVdPVwieyBib3JkZXI6IGlzRHJvcE9WZXIgPyAnMXB4IHNvbGlkICMxNWJmMTUnIDogJzAnIH1cIlxuICBzdHlsZT1cImRpc3BsYXk6IGZsZXhcIlxuPlxuICA8ZGl2XG4gICAgW2NsYXNzLmRpc2FibGVkXT1cInRoaXMuZGlzYWJsZWQgfHwgZFNpbmdsZVVwbG9hZFZpZXcuZmlsZVVwbG9hZGVyc1swXT8uc3RhdHVzID09PSBVcGxvYWRTdGF0dXMudXBsb2FkaW5nXCJcbiAgICAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCJcbiAgICBjbGFzcz1cImRldnVpLWlucHV0LWdyb3VwXCJcbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS1mb3JtLWNvbnRyb2wgZGV2dWktZmlsZXMtbGlzdFwiPlxuICAgICAgPGRpdiAqbmdJZj1cIiFmaWxlbmFtZVwiIGNsYXNzPVwiZGV2dWktZmlsZS1pdGVtIGRldnVpLXVwbG9hZC1wbGFjZWhvbGRlclwiPlxuICAgICAgICB7eyBwbGFjZWhvbGRlclRleHQgPyBwbGFjZWhvbGRlclRleHQgOiBpMThuVGV4dD8uY2hvb3NlRmlsZSB9fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2ICpuZ0lmPVwiISFmaWxlbmFtZVwiIGNsYXNzPVwiZGV2dWktZmlsZS10YWcgZGV2dWktZmlsZS1pdGVtXCIgdGl0bGU9XCJ7eyBmaWxlbmFtZSB9fVwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImRldnVpLWZpbGVuYW1lIHt7IGRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLmZhaWxlZCA/ICdkZXZ1aS1mYWlsZWQtY29sb3InIDogJycgfX1cIj5cbiAgICAgICAgICB7eyBmaWxlbmFtZSB9fVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3M9XCJpY29uIGljb24tY2xvc2VcbiAgICAgICAgICAgIHt7IGRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLmZhaWxlZCA/ICdkZXZ1aS11cGxvYWQtZGVsZXRlLWZpbGUtYnV0dG9uJyA6ICcnIH19XG4gICAgICAgICAgICB7e1xuICAgICAgICAgICAgZFNpbmdsZVVwbG9hZFZpZXcuZmlsZVVwbG9hZGVyc1swXT8uc3RhdHVzID09PSBVcGxvYWRTdGF0dXMudXBsb2FkaW5nIHx8XG4gICAgICAgICAgICBkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy51cGxvYWRlZFxuICAgICAgICAgICAgICA/ICdkZXZ1aS11cGxvYWRpbmctZGVsZXRlJ1xuICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgfX1cIlxuICAgICAgICAgIChjbGljayk9XCJkZWxldGVGaWxlKCRldmVudClcIlxuICAgICAgICA+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGRpdiAqbmdJZj1cImRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLnVwbG9hZGluZ1wiIGNsYXNzPVwiaWNvbiBkZXZ1aS11cGxvYWQtcHJvZ3Jlc3NcIj5cbiAgICAgICAgICA8ZC1wcm9ncmVzc1xuICAgICAgICAgICAgW3R5cGVdPVwiJ2NpcmNsZSdcIlxuICAgICAgICAgICAgW3BlcmNlbnRhZ2VdPVwiZFNpbmdsZVVwbG9hZFZpZXcuZmlsZVVwbG9hZGVyc1swXS5wZXJjZW50YWdlXCJcbiAgICAgICAgICAgIFtzdHJva2VDb2xvcl09XCInIzUwRDRBQidcIlxuICAgICAgICAgICAgW3N0cm9rZVdpZHRoXT1cIjhcIlxuICAgICAgICAgICAgW3Nob3dDb250ZW50XT1cImZhbHNlXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgPC9kLXByb2dyZXNzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy5mYWlsZWRcIiBjbGFzcz1cImljb24gaWNvbi1ydW5uaW5nXCIgKGNsaWNrKT1cInVwbG9hZCgpXCI+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy51cGxvYWRlZFwiIGNsYXNzPVwiaWNvbiBpY29uLXJpZ2h0XCI+PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPHNwYW4gY2xhc3M9XCJkZXZ1aS1pbnB1dC1ncm91cC1hZGRvblwiPlxuICAgICAgPHN2ZyBjbGFzcz1cInN2Zy1pY29uLWRvdFwiIGhlaWdodD1cIjFlbVwiIHdpZHRoPVwiMWVtXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgZD1cIm00MDAuMzE4OTIgMTc2Ljk3MDU3NGMwLTYxLjU3NDM4MSA1MC4xMTMzNTEtMTExLjY4MDU2OSAxMTEuNjc5NTQ1LTExMS42ODA1NjkgNjEuNTc2NDI3IDAgMTExLjY4MDU2OSA1MC4xMDYxODggMTExLjY4MDU2OSAxMTEuNjgwNTY5IDAgNjEuNTY4MjQxLTUwLjEwNDE0MSAxMTEuNjc5NTQ1LTExMS42ODA1NjkgMTExLjY3OTU0NS02MS41NjYxOTQgMC0xMTEuNjc5NTQ1LTUwLjExMTMwNC0xMTEuNjc5NTQ1LTExMS42Nzk1NDV6bTAgMzM1LjAyODQwM2MwLTYxLjU2ODI0MSA1MC4xMTMzNTEtMTExLjY3ODUyMiAxMTEuNjc5NTQ1LTExMS42Nzg1MjIgNjEuNTc2NDI3IDAgMTExLjY4MDU2OSA1MC4xMTAyODEgMTExLjY4MDU2OSAxMTEuNjc4NTIyIDAgNjEuNTc0MzgxLTUwLjEwNTE2NSAxMTEuNjgyNjE1LTExMS42ODA1NjkgMTExLjY4MjYxNS02MS41NjYxOTQgMC0xMTEuNjc5NTQ1LTUwLjEwODIzNS0xMTEuNjc5NTQ1LTExMS42ODI2MTV6bTAgMzM1LjAzNzYxMmMwLTYxLjU3MjMzNCA1MC4xMTMzNTEtMTExLjY3OTU0NSAxMTEuNjc5NTQ1LTExMS42Nzk1NDUgNjEuNTc1NDA0IDAgMTExLjY4MDU2OSA1MC4xMDcyMTEgMTExLjY4MDU2OSAxMTEuNjc5NTQ1IDAgNjEuNTY3MjE3LTUwLjEwNTE2NSAxMTEuNjcyMzgyLTExMS42ODA1NjkgMTExLjY3MjM4Mi02MS41NjYxOTQgMC0xMTEuNjc5NTQ1LTUwLjEwNTE2NC0xMTEuNjc5NTQ1LTExMS42NzIzODJ6bTAgMFwiXG4gICAgICAgIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L3NwYW4+XG4gIDwvZGl2PlxuICA8ZC1idXR0b25cbiAgICAqbmdJZj1cIiFhdXRvVXBsb2FkICYmICF3aXRob3V0QnRuXCJcbiAgICAoYnRuQ2xpY2spPVwidXBsb2FkKClcIlxuICAgIGJzU3R5bGU9XCJjb21tb25cIlxuICAgIFtzdHlsZS5tYXJnaW4tbGVmdC5weF09XCI4XCJcbiAgICBbZGlzYWJsZWRdPVwiXG4gICAgICBkaXNhYmxlZCB8fFxuICAgICAgZFNpbmdsZVVwbG9hZFZpZXcudXBsb2FkZWRGaWxlc0NvbXBvbmVudC51cGxvYWRlZEZpbGVzLmxlbmd0aCA+IDAgfHxcbiAgICAgIGRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLnVwbG9hZGluZ1xuICAgIFwiXG4gID5cbiAgICA8c3BhbiAqbmdJZj1cIiFkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdIHx8IGRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLnByZUxvYWRcIj57e1xuICAgICAgdXBsb2FkVGV4dCB8fCBpMThuVGV4dD8udXBsb2FkXG4gICAgfX08L3NwYW4+XG4gICAgPHNwYW4gKm5nSWY9XCJkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy51cGxvYWRpbmdcIj57eyBpMThuVGV4dD8udXBsb2FkaW5nIH19PC9zcGFuPlxuICAgIDxzcGFuICpuZ0lmPVwiZFNpbmdsZVVwbG9hZFZpZXcuZmlsZVVwbG9hZGVyc1swXT8uc3RhdHVzID09PSBVcGxvYWRTdGF0dXMudXBsb2FkZWRcIj57eyBpMThuVGV4dD8udXBsb2FkZWQgfX08L3NwYW4+XG4gICAgPHNwYW4gKm5nSWY9XCJkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy5mYWlsZWRcIj57eyBpMThuVGV4dD8udXBsb2FkRmFpbGVkIH19PC9zcGFuPlxuICA8L2QtYnV0dG9uPlxuPC9kaXY+XG48bmctY29udGFpbmVyICpuZ0lmPVwic2hvd1RpcFwiPlxuICA8ZGl2IGNsYXNzPVwiZGV2dWktdXBsb2FkLXRpcFwiPlxuICAgIDxzcGFuICpuZ0lmPVwiZFNpbmdsZVVwbG9hZFZpZXcuZmlsZVVwbG9hZGVyc1swXT8uc3RhdHVzID09PSBVcGxvYWRTdGF0dXMudXBsb2FkaW5nXCIgY2xhc3M9XCJkZXZ1aS1sb2FkaW5nXCI+XG4gICAgICB7eyBpMThuVGV4dD8udXBsb2FkaW5nIH19XG4gICAgPC9zcGFuPlxuICAgIDxkaXYgKm5nSWY9XCJkU2luZ2xlVXBsb2FkVmlldy5maWxlVXBsb2FkZXJzWzBdPy5zdGF0dXMgPT09IFVwbG9hZFN0YXR1cy51cGxvYWRlZFwiIGNsYXNzPVwiZGV2dWktbG9hZGVkXCI+XG4gICAgICA8aSBjbGFzcz1cImljb24gaWNvbi1yaWdodC1vXCI+PC9pPlxuICAgICAgPHNwYW4gc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCI+e3sgaTE4blRleHQ/LnVwbG9hZFN1Y2Nlc3MgfX08L3NwYW4+XG4gICAgPC9kaXY+XG4gICAgPGRpdiAqbmdJZj1cImRTaW5nbGVVcGxvYWRWaWV3LmZpbGVVcGxvYWRlcnNbMF0/LnN0YXR1cyA9PT0gVXBsb2FkU3RhdHVzLmZhaWxlZFwiIGNsYXNzPVwiZGV2dWktdXBsb2FkLWZhaWxlZFwiPlxuICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24taW5mby1vXCI+PC9pPlxuICAgICAgPHNwYW4gc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCI+XG4gICAgICAgIDxzcGFuIHN0eWxlPVwibWFyZ2luLXJpZ2h0OiA4cHhcIj57eyBpMThuVGV4dD8udXBsb2FkRmFpbGVkIH19PC9zcGFuPlxuICAgICAgICA8YSAoY2xpY2spPVwidXBsb2FkKClcIj57eyBpMThuVGV4dD8ucmVVcGxvYWQgfX08L2E+XG4gICAgICA8L3NwYW4+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy1jb250YWluZXI+XG48ZC1zaW5nbGUtdXBsb2FkLXZpZXdcbiAgI2RTaW5nbGVVcGxvYWRWaWV3PVwiZFNpbmdsZVVwbG9hZFZpZXdcIlxuICBbdXBsb2FkT3B0aW9uc109XCJ1cGxvYWRPcHRpb25zXCJcbiAgW2ZpbGVQYXRoXT1cImZpbGVQYXRoXCJcbiAgW3VwbG9hZGVkRmlsZXNdPVwidXBsb2FkZWRGaWxlc1wiXG4gIFt1cGxvYWRlZEZpbGVzUmVmXT1cInVwbG9hZGVkRmlsZXNSZWZcIlxuICBbcHJlbG9hZEZpbGVzUmVmXT1cInByZWxvYWRGaWxlc1JlZlwiXG4gIFtkeW5hbWljVXBsb2FkT3B0aW9uc0ZuXT1cImR5bmFtaWNVcGxvYWRPcHRpb25zRm5cIlxuICAoZGVsZXRlVXBsb2FkZWRGaWxlRXZlbnQpPVwiX29uRGVsZXRlVXBsb2FkZWRGaWxlKCRldmVudClcIlxuPlxuPC9kLXNpbmdsZS11cGxvYWQtdmlldz5cbiJdfQ==