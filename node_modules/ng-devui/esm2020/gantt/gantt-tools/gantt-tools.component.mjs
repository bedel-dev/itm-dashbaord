import { Component, EventEmitter, Input, Output } from '@angular/core';
import { I18nService } from 'ng-devui/i18n';
import { UnitRole } from '../gantt.model';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "ng-devui/button";
import * as i3 from "ng-devui/dropdown";
import * as i4 from "@angular/common";
export class GanttToolsComponent {
    constructor(i18n) {
        this.i18n = i18n;
        this.isFullScreen = false;
        this.goToday = new EventEmitter();
        this.reduceUnit = new EventEmitter();
        this.increaseUnit = new EventEmitter();
        this.switchView = new EventEmitter();
        this.unitRole = UnitRole;
        this._currentUnit = '';
        this.views = [
            {
                label: 'Day',
                value: 'day'
            },
            {
                label: 'Week',
                value: 'week'
            },
            {
                label: 'Month',
                value: 'month'
            }
        ];
    }
    set currentUnit(val) {
        this._currentUnit = val;
        const data = this.views.filter(i => i.value === val);
    }
    get currentUnit() {
        return this._currentUnit;
    }
    get currentUnitLabel() {
        return this._currentLabel || (this.views.length > 0 ? this.views[0].label : '');
    }
    ;
    ngOnInit() {
        this.i18nText = this.i18n.getI18nText().gantt;
        this.i18nLocale = this.i18n.getI18nText().locale;
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nText = data.gantt;
            this.i18nLocale = data.locale;
            this.views = [
                {
                    label: this.i18nText?.day,
                    value: 'day'
                },
                {
                    label: this.i18nText?.week,
                    value: 'week'
                },
                {
                    label: this.i18nText?.month,
                    value: 'month'
                }
            ];
        });
    }
    avtionHandle(type) {
        switch (type) {
            case 'today':
                this.goToday.emit();
                break;
            case 'reduce':
                this.reduceUnit.emit();
                break;
            case 'increase':
                this.increaseUnit.emit();
                break;
        }
    }
    selectView(menu) {
        this._currentLabel = menu.label;
        this.switchView.emit(menu.value);
    }
}
GanttToolsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: GanttToolsComponent, deps: [{ token: i1.I18nService }], target: i0.ɵɵFactoryTarget.Component });
GanttToolsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: GanttToolsComponent, selector: "d-gantt-tools", inputs: { currentUnit: "currentUnit", isFullScreen: "isFullScreen" }, outputs: { goToday: "goToday", reduceUnit: "reduceUnit", increaseUnit: "increaseUnit", switchView: "switchView" }, ngImport: i0, template: "<div class=\"tools-container\" [style.position]=\"isFullScreen ? 'fixed' : 'absolute'\">\n  <d-button bsStyle=\"text\" (click)=\"avtionHandle('today')\" class=\"tool\">{{ i18nText.today }}</d-button>\n  <div class=\"tool\">\n    <span dDropDown [trigger]=\"'click'\" appendToBody class=\"switch-view\">\n      <span dDropDownToggle class=\"devui-dropdown-origin\">{{ currentUnitLabel }} <span class=\"icon-chevron-down\"></span></span>\n      <ul dDropDownMenu class=\"devui-dropdown-menu devui-scrollbar\" role=\"menu\">\n        <li role=\"menuItem\" *ngFor=\"let menu of views\" (click)=\"selectView(menu)\">\n          <a class=\"devui-dropdown-item\">{{ menu.label }}</a>\n        </li>\n      </ul>\n    </span>\n  </div>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('reduce')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.day }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.day\"\n  >\n    <i class=\"icon icon-minus\"></i>\n  </d-button>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('increase')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.month }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.month\"\n  >\n    <i class=\"icon icon-add\"></i>\n  </d-button>\n  <ng-content></ng-content>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.tools-container{position:absolute;top:70px;right:20px;z-index:10}.tool{display:inline-flex;align-items:center;justify-content:center;height:32px;margin-left:12px;background-color:#fff;background-color:var(--devui-base-bg, #ffffff);box-shadow:0 1px 4px rgba(81,112,255,.4);box-shadow:var(--devui-shadow-length-base, 0 1px 4px 0) rgba(81,112,255,.4);cursor:pointer}.tool.disabled{opacity:.5}.tool span{border:0!important}.tool .switch-view{padding:0 8px}.tool .switch-view:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}.devui-dropdown-menu{top:10px!important;left:-6px!important}:host ::ng-deep .devui-dropdown-origin{border:0}:host ::ng-deep .devui-dropdown-origin:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}:host ::ng-deep .devui-btn{height:32px!important;color:#252b3a!important;color:var(--devui-text, #252b3a)!important;padding:0 8px!important}:host ::ng-deep .devui-btn:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}\n"], components: [{ type: i2.ButtonComponent, selector: "d-button", inputs: ["id", "type", "bsStyle", "shape", "bsSize", "bsPosition", "bordered", "icon", "disabled", "showLoading", "width", "autofocus", "loadingTemplateRef"], outputs: ["btnClick"] }, { type: i3.DropDownAppendToBodyComponent, selector: "[dDropDown][appendToBody]", inputs: ["alignOrigin", "appendToBodyDirections"] }], directives: [{ type: i3.DropDownDirective, selector: "[dDropDown]", inputs: ["isOpen", "disabled", "showAnimation", "trigger", "closeScope", "closeOnMouseLeaveMenu"], outputs: ["toggleEvent"], exportAs: ["d-dropdown"] }, { type: i3.DropDownToggleDirective, selector: "[dDropDownToggle]", inputs: ["toggleOnFocus", "autoFocus"], exportAs: ["d-dropdown-toggle"] }, { type: i3.DropDownMenuDirective, selector: "[dDropDownMenu]", exportAs: ["d-dropdown-menu"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: GanttToolsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-gantt-tools', template: "<div class=\"tools-container\" [style.position]=\"isFullScreen ? 'fixed' : 'absolute'\">\n  <d-button bsStyle=\"text\" (click)=\"avtionHandle('today')\" class=\"tool\">{{ i18nText.today }}</d-button>\n  <div class=\"tool\">\n    <span dDropDown [trigger]=\"'click'\" appendToBody class=\"switch-view\">\n      <span dDropDownToggle class=\"devui-dropdown-origin\">{{ currentUnitLabel }} <span class=\"icon-chevron-down\"></span></span>\n      <ul dDropDownMenu class=\"devui-dropdown-menu devui-scrollbar\" role=\"menu\">\n        <li role=\"menuItem\" *ngFor=\"let menu of views\" (click)=\"selectView(menu)\">\n          <a class=\"devui-dropdown-item\">{{ menu.label }}</a>\n        </li>\n      </ul>\n    </span>\n  </div>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('reduce')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.day }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.day\"\n  >\n    <i class=\"icon icon-minus\"></i>\n  </d-button>\n  <d-button\n    bsStyle=\"text\"\n    (click)=\"avtionHandle('increase')\"\n    class=\"tool\"\n    [ngClass]=\"{ disabled: unitRole[this.currentUnit] === unitRole.month }\"\n    [disabled]=\"unitRole[this.currentUnit] === unitRole.month\"\n  >\n    <i class=\"icon icon-add\"></i>\n  </d-button>\n  <ng-content></ng-content>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.tools-container{position:absolute;top:70px;right:20px;z-index:10}.tool{display:inline-flex;align-items:center;justify-content:center;height:32px;margin-left:12px;background-color:#fff;background-color:var(--devui-base-bg, #ffffff);box-shadow:0 1px 4px rgba(81,112,255,.4);box-shadow:var(--devui-shadow-length-base, 0 1px 4px 0) rgba(81,112,255,.4);cursor:pointer}.tool.disabled{opacity:.5}.tool span{border:0!important}.tool .switch-view{padding:0 8px}.tool .switch-view:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}.devui-dropdown-menu{top:10px!important;left:-6px!important}:host ::ng-deep .devui-dropdown-origin{border:0}:host ::ng-deep .devui-dropdown-origin:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}:host ::ng-deep .devui-btn{height:32px!important;color:#252b3a!important;color:var(--devui-text, #252b3a)!important;padding:0 8px!important}:host ::ng-deep .devui-btn:hover{color:#526ecc!important;color:var(--devui-link, #526ecc)!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.I18nService }]; }, propDecorators: { currentUnit: [{
                type: Input,
                args: ['currentUnit']
            }], isFullScreen: [{
                type: Input
            }], goToday: [{
                type: Output
            }], reduceUnit: [{
                type: Output
            }], increaseUnit: [{
                type: Output
            }], switchView: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FudHQtdG9vbHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vZGV2dWkvZ2FudHQvZ2FudHQtdG9vbHMvZ2FudHQtdG9vbHMuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vZGV2dWkvZ2FudHQvZ2FudHQtdG9vbHMvZ2FudHQtdG9vbHMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQWlCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7OztBQU8xQyxNQUFNLE9BQU8sbUJBQW1CO0lBa0Q5QixZQUNVLElBQWlCO1FBQWpCLFNBQUksR0FBSixJQUFJLENBQWE7UUF4Q2xCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBRXBCLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTdCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRWhDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVsQyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUxQyxhQUFRLEdBQUcsUUFBUSxDQUFDO1FBUXBCLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBRWxCLFVBQUssR0FBRztZQUNOO2dCQUNFLEtBQUssRUFBRSxLQUFLO2dCQUNaLEtBQUssRUFBRSxLQUFLO2FBQ2I7WUFDRDtnQkFDRSxLQUFLLEVBQUUsTUFBTTtnQkFDYixLQUFLLEVBQUUsTUFBTTthQUNkO1lBQ0Q7Z0JBQ0UsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsS0FBSyxFQUFFLE9BQU87YUFDZjtTQUNGLENBQUM7SUFRQyxDQUFDO0lBbERKLElBQTBCLFdBQVcsQ0FBQyxHQUFHO1FBQ3ZDLElBQUksQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFDO1FBQ3hCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxHQUFHLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsSUFBSSxXQUFXO1FBQ2IsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7SUFjRCxJQUFJLGdCQUFnQjtRQUNsQixPQUFPLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBQUEsQ0FBQztJQTZCRixRQUFRO1FBQ04sSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLEtBQUssQ0FBQztRQUM5QyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxDQUFDO1FBQ2pELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ2hFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDOUIsSUFBSSxDQUFDLEtBQUssR0FBRztnQkFDWDtvQkFDRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHO29CQUN6QixLQUFLLEVBQUUsS0FBSztpQkFDYjtnQkFDRDtvQkFDRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJO29CQUMxQixLQUFLLEVBQUUsTUFBTTtpQkFDZDtnQkFDRDtvQkFDRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLO29CQUMzQixLQUFLLEVBQUUsT0FBTztpQkFDZjthQUNGLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxZQUFZLENBQUUsSUFBSTtRQUNoQixRQUFRLElBQUksRUFBRTtZQUNkLEtBQUssT0FBTztnQkFDVixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNwQixNQUFNO1lBQ1IsS0FBSyxRQUFRO2dCQUNYLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3ZCLE1BQU07WUFDUixLQUFLLFVBQVU7Z0JBQ2IsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDekIsTUFBTTtTQUNQO0lBQ0gsQ0FBQztJQUVELFVBQVUsQ0FBRSxJQUFJO1FBQ2QsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDOztnSEE5RlUsbUJBQW1CO29HQUFuQixtQkFBbUIsOE9DVmhDLGsxQ0FnQ0E7MkZEdEJhLG1CQUFtQjtrQkFML0IsU0FBUzsrQkFDRSxlQUFlO2tHQU1DLFdBQVc7c0JBQXBDLEtBQUs7dUJBQUMsYUFBYTtnQkFTWCxZQUFZO3NCQUFwQixLQUFLO2dCQUVJLE9BQU87c0JBQWhCLE1BQU07Z0JBRUcsVUFBVTtzQkFBbkIsTUFBTTtnQkFFRyxZQUFZO3NCQUFyQixNQUFNO2dCQUVHLFVBQVU7c0JBQW5CLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJMThuSW50ZXJmYWNlLCBJMThuU2VydmljZSB9IGZyb20gJ25nLWRldnVpL2kxOG4nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBVbml0Um9sZSB9IGZyb20gJy4uL2dhbnR0Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZC1nYW50dC10b29scycsXG4gIHRlbXBsYXRlVXJsOiAnLi9nYW50dC10b29scy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2dhbnR0LXRvb2xzLmNvbXBvbmVudC5zY3NzJ10sXG59KVxuZXhwb3J0IGNsYXNzIEdhbnR0VG9vbHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXR7XG5cbiAgQElucHV0KCdjdXJyZW50VW5pdCcpIHNldCBjdXJyZW50VW5pdCh2YWwpIHtcbiAgICB0aGlzLl9jdXJyZW50VW5pdCA9IHZhbDtcbiAgICBjb25zdCBkYXRhID0gdGhpcy52aWV3cy5maWx0ZXIoaSA9PiBpLnZhbHVlID09PSB2YWwpO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRVbml0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFVuaXQ7XG4gIH1cblxuICBASW5wdXQoKSBpc0Z1bGxTY3JlZW4gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgZ29Ub2RheSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgcmVkdWNlVW5pdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAT3V0cHV0KCkgaW5jcmVhc2VVbml0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBPdXRwdXQoKSBzd2l0Y2hWaWV3ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHVuaXRSb2xlID0gVW5pdFJvbGU7XG5cbiAgZ2V0IGN1cnJlbnRVbml0TGFiZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRMYWJlbCB8fCAodGhpcy52aWV3cy5sZW5ndGggPiAwID8gdGhpcy52aWV3c1swXS5sYWJlbCA6ICcnKTtcbiAgfTtcblxuICBfY3VycmVudExhYmVsOiBzdHJpbmc7XG5cbiAgX2N1cnJlbnRVbml0ID0gJyc7XG5cbiAgdmlld3MgPSBbXG4gICAge1xuICAgICAgbGFiZWw6ICdEYXknLFxuICAgICAgdmFsdWU6ICdkYXknXG4gICAgfSxcbiAgICB7XG4gICAgICBsYWJlbDogJ1dlZWsnLFxuICAgICAgdmFsdWU6ICd3ZWVrJ1xuICAgIH0sXG4gICAge1xuICAgICAgbGFiZWw6ICdNb250aCcsXG4gICAgICB2YWx1ZTogJ21vbnRoJ1xuICAgIH1cbiAgXTtcblxuICBpMThuVGV4dDogSTE4bkludGVyZmFjZVsnZ2FudHQnXTtcbiAgaTE4bkxvY2FsZTogSTE4bkludGVyZmFjZVsnbG9jYWxlJ107XG4gIGkxOG5TdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGkxOG46IEkxOG5TZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmkxOG5UZXh0ID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkuZ2FudHQ7XG4gICAgdGhpcy5pMThuTG9jYWxlID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkubG9jYWxlO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5UZXh0ID0gZGF0YS5nYW50dDtcbiAgICAgIHRoaXMuaTE4bkxvY2FsZSA9IGRhdGEubG9jYWxlO1xuICAgICAgdGhpcy52aWV3cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiB0aGlzLmkxOG5UZXh0Py5kYXksXG4gICAgICAgICAgdmFsdWU6ICdkYXknXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogdGhpcy5pMThuVGV4dD8ud2VlayxcbiAgICAgICAgICB2YWx1ZTogJ3dlZWsnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogdGhpcy5pMThuVGV4dD8ubW9udGgsXG4gICAgICAgICAgdmFsdWU6ICdtb250aCdcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9KTtcbiAgfVxuXG4gIGF2dGlvbkhhbmRsZSAodHlwZSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3RvZGF5JzpcbiAgICAgIHRoaXMuZ29Ub2RheS5lbWl0KCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdyZWR1Y2UnOlxuICAgICAgdGhpcy5yZWR1Y2VVbml0LmVtaXQoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2luY3JlYXNlJzpcbiAgICAgIHRoaXMuaW5jcmVhc2VVbml0LmVtaXQoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdFZpZXcgKG1lbnUpIHtcbiAgICB0aGlzLl9jdXJyZW50TGFiZWwgPSBtZW51LmxhYmVsO1xuICAgIHRoaXMuc3dpdGNoVmlldy5lbWl0KG1lbnUudmFsdWUpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidG9vbHMtY29udGFpbmVyXCIgW3N0eWxlLnBvc2l0aW9uXT1cImlzRnVsbFNjcmVlbiA/ICdmaXhlZCcgOiAnYWJzb2x1dGUnXCI+XG4gIDxkLWJ1dHRvbiBic1N0eWxlPVwidGV4dFwiIChjbGljayk9XCJhdnRpb25IYW5kbGUoJ3RvZGF5JylcIiBjbGFzcz1cInRvb2xcIj57eyBpMThuVGV4dC50b2RheSB9fTwvZC1idXR0b24+XG4gIDxkaXYgY2xhc3M9XCJ0b29sXCI+XG4gICAgPHNwYW4gZERyb3BEb3duIFt0cmlnZ2VyXT1cIidjbGljaydcIiBhcHBlbmRUb0JvZHkgY2xhc3M9XCJzd2l0Y2gtdmlld1wiPlxuICAgICAgPHNwYW4gZERyb3BEb3duVG9nZ2xlIGNsYXNzPVwiZGV2dWktZHJvcGRvd24tb3JpZ2luXCI+e3sgY3VycmVudFVuaXRMYWJlbCB9fSA8c3BhbiBjbGFzcz1cImljb24tY2hldnJvbi1kb3duXCI+PC9zcGFuPjwvc3Bhbj5cbiAgICAgIDx1bCBkRHJvcERvd25NZW51IGNsYXNzPVwiZGV2dWktZHJvcGRvd24tbWVudSBkZXZ1aS1zY3JvbGxiYXJcIiByb2xlPVwibWVudVwiPlxuICAgICAgICA8bGkgcm9sZT1cIm1lbnVJdGVtXCIgKm5nRm9yPVwibGV0IG1lbnUgb2Ygdmlld3NcIiAoY2xpY2spPVwic2VsZWN0VmlldyhtZW51KVwiPlxuICAgICAgICAgIDxhIGNsYXNzPVwiZGV2dWktZHJvcGRvd24taXRlbVwiPnt7IG1lbnUubGFiZWwgfX08L2E+XG4gICAgICAgIDwvbGk+XG4gICAgICA8L3VsPlxuICAgIDwvc3Bhbj5cbiAgPC9kaXY+XG4gIDxkLWJ1dHRvblxuICAgIGJzU3R5bGU9XCJ0ZXh0XCJcbiAgICAoY2xpY2spPVwiYXZ0aW9uSGFuZGxlKCdyZWR1Y2UnKVwiXG4gICAgY2xhc3M9XCJ0b29sXCJcbiAgICBbbmdDbGFzc109XCJ7IGRpc2FibGVkOiB1bml0Um9sZVt0aGlzLmN1cnJlbnRVbml0XSA9PT0gdW5pdFJvbGUuZGF5IH1cIlxuICAgIFtkaXNhYmxlZF09XCJ1bml0Um9sZVt0aGlzLmN1cnJlbnRVbml0XSA9PT0gdW5pdFJvbGUuZGF5XCJcbiAgPlxuICAgIDxpIGNsYXNzPVwiaWNvbiBpY29uLW1pbnVzXCI+PC9pPlxuICA8L2QtYnV0dG9uPlxuICA8ZC1idXR0b25cbiAgICBic1N0eWxlPVwidGV4dFwiXG4gICAgKGNsaWNrKT1cImF2dGlvbkhhbmRsZSgnaW5jcmVhc2UnKVwiXG4gICAgY2xhc3M9XCJ0b29sXCJcbiAgICBbbmdDbGFzc109XCJ7IGRpc2FibGVkOiB1bml0Um9sZVt0aGlzLmN1cnJlbnRVbml0XSA9PT0gdW5pdFJvbGUubW9udGggfVwiXG4gICAgW2Rpc2FibGVkXT1cInVuaXRSb2xlW3RoaXMuY3VycmVudFVuaXRdID09PSB1bml0Um9sZS5tb250aFwiXG4gID5cbiAgICA8aSBjbGFzcz1cImljb24gaWNvbi1hZGRcIj48L2k+XG4gIDwvZC1idXR0b24+XG4gIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbjwvZGl2PlxuIl19