import { ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, forwardRef, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { I18nService } from 'ng-devui/i18n';
import { DefaultDateConverter } from 'ng-devui/utils';
import { fromEvent, Subject } from 'rxjs';
import { debounceTime, map, takeUntil } from 'rxjs/operators';
import { DatepickerProService } from './datepicker-pro.service';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "./datepicker-pro.service";
import * as i3 from "ng-devui/dropdown";
import * as i4 from "./datepicker-panel.component";
import * as i5 from "@angular/common";
import * as i6 from "@angular/forms";
export class RangeDatepickerProComponent {
    constructor(i18n, pickerSrv, cdr) {
        this.i18n = i18n;
        this.pickerSrv = pickerSrv;
        this.cdr = cdr;
        this.mode = 'date';
        this.showTime = false;
        this.disabled = false;
        this.autoOpen = false;
        this.splitter = '-';
        this.startIndexOfWeek = 0;
        this.appendToBody = true;
        this.allowClear = true;
        this.dropdownToggle = new EventEmitter();
        this.confirmEvent = new EventEmitter();
        this._dateValue = [];
        this.unsubscribe$ = new Subject();
        this.isOpen = false;
        this.strWidth = 0;
        this.onChange = (_) => null;
        this.onTouched = () => null;
        this.inputChangeCallback = (type) => {
            const targetValue = type === 'start' ? this.dateValue[0] : this.dateValue[1];
            if (!targetValue) {
                return;
            }
            const inputDate = this.datepickerConvert.parse(targetValue, this.curFormat);
            const curDate = type === 'start' ? this.pickerSrv.curRangeDate[0] : this.pickerSrv.curRangeDate[1];
            if (inputDate instanceof Date && inputDate.getTime() === curDate?.getTime()) {
                return;
            }
            if (this.validateDate(targetValue)) {
                if (type === 'start') {
                    this.pickerSrv.curRangeDate[0] = inputDate;
                }
                else {
                    this.pickerSrv.curRangeDate[1] = inputDate;
                }
                this.pickerSrv.updateDateValue.next({
                    type: 'range',
                    value: this.pickerSrv.curRangeDate
                });
                if (this.showTime) {
                    this.pickerSrv.updateTimeChange.next({
                        activeInput: type,
                        hour: inputDate.getHours(),
                        min: inputDate.getMinutes(),
                        seconds: inputDate.getSeconds()
                    });
                }
            }
        };
        this.inputBlurCallback = (type) => {
            const targetValue = type === 'start' ? this.dateValue[0] : this.dateValue[1];
            if (!this.validateDate(targetValue)) {
                if (type === 'start') {
                    this.dateValue[0] = this.pickerSrv.curRangeDate[0] ?
                        this.datepickerConvert.format(this.pickerSrv.curRangeDate[0], this.curFormat, this.locale || this.i18nLocale) :
                        '';
                }
                else {
                    this.dateValue[1] = this.pickerSrv.curRangeDate[1] ?
                        this.datepickerConvert.format(this.pickerSrv.curRangeDate[1], this.curFormat, this.locale || this.i18nLocale) :
                        '';
                }
            }
            this.getStrWidth();
        };
        this.i18nText = this.i18n.getI18nText().datePickerPro;
        this.datepickerConvert = new DefaultDateConverter();
    }
    set calenderRange(value) {
        this.pickerSrv.calendarRange = value || [1970, 2099];
    }
    set minDate(value) {
        if (!value) {
            return;
        }
        this.pickerSrv.minDate = value;
    }
    set maxDate(value) {
        if (!value) {
            return;
        }
        this.pickerSrv.maxDate = value;
    }
    set markedRangeDateList(value) {
        this.pickerSrv.markedRangeDateList = value;
    }
    ;
    set markedDateList(value) {
        this.pickerSrv.markedDateList = value;
    }
    set markDateInfoTemplate(tmp) {
        this.pickerSrv.markDateInfoTemplate = tmp;
    }
    ;
    get dateValue() {
        return this._dateValue;
    }
    set dateValue(value) {
        this._dateValue = value;
        this.getStrWidth();
    }
    set currentActiveInput(value) {
        this.pickerSrv.currentActiveInput = value;
    }
    get currentActiveInput() {
        return this.pickerSrv.currentActiveInput;
    }
    get dateConfig() {
        return {
            dateConverter: this.datepickerConvert,
            min: this.pickerSrv.minDate || new Date(this.pickerSrv.calendarRange[0] + '/01/01'),
            max: this.pickerSrv.maxDate || new Date(this.pickerSrv.calendarRange[1] + '/12/31'),
            format: {
                date: this.format || 'y/MM/dd',
                time: this.format || 'y/MM/dd HH:mm:ss',
                month: this.format || 'y-MM',
                year: 'y'
            }
        };
    }
    get curFormat() {
        if (this.mode === 'year') {
            return this.dateConfig.format.year;
        }
        else if (this.mode === 'month') {
            return this.dateConfig.format.month;
        }
        else {
            return this.showTime ? this.dateConfig.format.time : this.dateConfig.format.date;
        }
    }
    get curActiveDate() {
        if (this.pickerSrv.currentActiveInput === 'start') {
            return this.pickerSrv.curRangeDate[0] || this.pickerSrv.curRangeDate[1] || new Date();
        }
        else {
            return this.pickerSrv.curRangeDate[1] || this.pickerSrv.curRangeDate[0] || new Date();
        }
    }
    ngOnInit() {
        this.initSrvStatus();
        this.setI18nText();
        setTimeout(() => {
            this.isOpen = this.autoOpen;
        });
    }
    ngAfterViewInit() {
        this.initObservable();
    }
    initSrvStatus() {
        this.pickerSrv.showTime = this.showTime;
        this.pickerSrv.isRange = true;
        this.pickerSrv.startIndexOfWeek = this.startIndexOfWeek;
    }
    initObservable() {
        this.pickerSrv.selectedDateChange.pipe(takeUntil(this.unsubscribe$)).subscribe(change => {
            this.pickerSrv.curRangeDate = change.value;
            this.dateValue = change.value.map(d => this.formatDateToString(d));
            this.onChange(change.value);
        });
        this.pickerSrv.closeDropdownEvent.pipe(takeUntil(this.unsubscribe$)).subscribe(isConfirm => {
            this.isOpen = false;
            this.dropdownToggle.emit(false);
            if (isConfirm) {
                this.confirmEvent.emit(this.pickerSrv.curRangeDate);
            }
        });
        this.pickerSrv.activeInputChange.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {
            this.getStrWidth();
        });
        if (!this.hostTemplate) {
            fromEvent(this.datepickerInputStart.nativeElement, 'input').pipe(takeUntil(this.unsubscribe$), map(t => {
                this.getStrWidth();
                return 'start';
            }), debounceTime(300)).subscribe(this.inputChangeCallback);
            fromEvent(this.datepickerInputEnd.nativeElement, 'input').pipe(takeUntil(this.unsubscribe$), map(t => {
                this.getStrWidth();
                return 'end';
            }), debounceTime(300)).subscribe(this.inputChangeCallback);
            fromEvent(this.datepickerInputStart.nativeElement, 'blur').pipe(takeUntil(this.unsubscribe$), map(t => 'start')).subscribe(this.inputBlurCallback);
            fromEvent(this.datepickerInputEnd.nativeElement, 'blur').pipe(takeUntil(this.unsubscribe$), map(t => 'end')).subscribe(this.inputBlurCallback);
        }
        if (this.showTime) {
            this.pickerSrv.selectedTimeChange.pipe(takeUntil(this.unsubscribe$)).subscribe(change => {
                const curTime = new Date(this.curActiveDate.getTime()).setHours(change.hour, change.min, change.seconds);
                const curDate = new Date(curTime);
                if (change.activeInput === 'start') {
                    this.pickerSrv.curRangeDate[0] = curDate;
                    if (this.isSameDateAndTimeWrong()) {
                        this.pickerSrv.curRangeDate[1] = curDate;
                        this.dateValue[1] = this.formatDateToString(curDate);
                    }
                    this.dateValue = [this.formatDateToString(curDate), this.dateValue[1]];
                }
                else {
                    this.pickerSrv.curRangeDate[1] = curDate;
                    if (this.isSameDateAndTimeWrong()) {
                        this.pickerSrv.curRangeDate[0] = curDate;
                        this.dateValue[0] = this.formatDateToString(curDate);
                    }
                    this.dateValue = [this.dateValue[0], this.formatDateToString(curDate)];
                }
                this.onChange(this.pickerSrv.curRangeDate);
            });
        }
    }
    isSameDateAndTimeWrong() {
        if (this.pickerSrv.curRangeDate[0]?.toDateString() === this.pickerSrv.curRangeDate[1]?.toDateString()) {
            return this.pickerSrv.curRangeDate[0].getTime() > this.pickerSrv.curRangeDate[1].getTime();
        }
        return false;
    }
    getStrWidth() {
        let str = this.pickerSrv.currentActiveInput === 'start' ? this.dateValue[0] : this.dateValue[1];
        if (!str || !str.length) {
            str = this.pickerSrv.currentActiveInput === 'start' ? this.i18nText.startPlaceholder : this.i18nText.endPlaceholder;
        }
        this.strWidth = this.pickerSrv.mearsureStrWidth(str);
    }
    formatDateToString(date) {
        if (!date) {
            return '';
        }
        return this.datepickerConvert.format(date, this.curFormat);
    }
    setI18nText() {
        this.i18nLocale = this.i18n.getI18nText().locale;
        this.i18n.langChange().pipe(takeUntil(this.unsubscribe$)).subscribe((data) => {
            this.i18nLocale = data.locale;
            this.i18nText = data.datePickerPro;
        });
    }
    focusChange(type) {
        if (!this.isOpen) {
            type = 'start';
        }
        this.currentActiveInput = type;
        this.pickerSrv.activeInputChange.next(type);
        if (type === 'start') {
            setTimeout(() => {
                if (this.datepickerInputStart?.nativeElement) {
                    this.datepickerInputStart.nativeElement.focus();
                }
            });
        }
        else {
            setTimeout(() => {
                if (this.datepickerInputEnd?.nativeElement) {
                    this.datepickerInputEnd.nativeElement.focus();
                }
            });
        }
    }
    validateDate(value) {
        const valueDate = this.datepickerConvert.parse(value, this.curFormat);
        const valueFormat = valueDate && !isNaN(valueDate.getTime()) &&
            this.datepickerConvert.format(valueDate, this.curFormat, this.locale || this.i18nLocale);
        if (!valueDate || value !== valueFormat ||
            (value === valueFormat && !this.pickerSrv.dateInRange(valueDate))) {
            return false;
        }
        else {
            return true;
        }
    }
    onToggle(isOpen) {
        if (isOpen !== this.isOpen || isOpen) {
            this.dropdownToggle.emit(isOpen);
        }
        this.isOpen = isOpen;
        this.pickerSrv.toggleEvent.next(isOpen);
    }
    openDropdown(event) {
        if (this.isOpen) {
            event.stopPropagation();
        }
        this.isOpen = true;
    }
    clear(event, isHandle) {
        if (event) {
            event.stopPropagation();
        }
        if (this.disabled && isHandle) {
            return;
        }
        this.pickerSrv.updateDateValue.next({
            type: 'range',
            value: []
        });
        this.pickerSrv.updateTimeChange.next({
            hour: null,
            min: null,
            seconds: null
        });
        this.dateValue = [];
        this.pickerSrv.curRangeDate = [];
        this.currentActiveInput = 'start';
        if (event) {
            this.onChange(this.pickerSrv.curRangeDate);
        }
    }
    writeValue(value) {
        if (!value || !value.length) {
            this.clear();
            return;
        }
        if (value.find(t => !this.pickerSrv.dateInRange(t))) {
            return;
        }
        this.dateValue = value.map(d => {
            return d ? this.datepickerConvert.format(d, this.curFormat) : '';
        });
        this.pickerSrv.curRangeDate = value;
        this.pickerSrv.updateDateValue.next({
            type: 'range',
            value
        });
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    ngOnDestroy() {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    }
}
RangeDatepickerProComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: RangeDatepickerProComponent, deps: [{ token: i1.I18nService }, { token: i2.DatepickerProService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
RangeDatepickerProComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: RangeDatepickerProComponent, selector: "d-range-datepicker-pro", inputs: { mode: "mode", showTime: "showTime", disabled: "disabled", autoOpen: "autoOpen", format: "format", locale: "locale", cssClass: "cssClass", splitter: "splitter", width: "width", startIndexOfWeek: "startIndexOfWeek", appendToBody: "appendToBody", placeholder: "placeholder", allowClear: "allowClear", calenderRange: "calenderRange", minDate: "minDate", maxDate: "maxDate", markedRangeDateList: "markedRangeDateList", markedDateList: "markedDateList" }, outputs: { dropdownToggle: "dropdownToggle", confirmEvent: "confirmEvent" }, providers: [
        DatepickerProService,
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => RangeDatepickerProComponent),
            multi: true
        }
    ], queries: [{ propertyName: "customTemplate", first: true, predicate: ["customTemplate"], descendants: true }, { propertyName: "footerTemplate", first: true, predicate: ["footerTemplate"], descendants: true }, { propertyName: "hostTemplate", first: true, predicate: ["hostTemplate"], descendants: true }, { propertyName: "markDateInfoTemplate", first: true, predicate: ["markDateInfoTemplate"], descendants: true }], viewQueries: [{ propertyName: "datepickerInputStart", first: true, predicate: ["dateInputStart"], descendants: true }, { propertyName: "datepickerInputEnd", first: true, predicate: ["dateInputEnd"], descendants: true }], ngImport: i0, template: "<div\n  class=\"devui-datepicker-pro-wrapper {{ cssClass }}\"\n  *ngIf=\"appendToBody; else normal\"\n  dDropDown\n  appendToBody\n  [disabled]=\"disabled\"\n  [isOpen]=\"isOpen\"\n  [trigger]=\"'manually'\"\n  (toggleEvent)=\"onToggle($event)\"\n  (click)=\"openDropdown($event)\"\n  [closeScope]=\"'blank'\"\n  [ngStyle]=\"{ width: width || (showTime ? '400px' : '300px') }\"\n>\n  <div dDropDownToggle>\n    <ng-template [ngTemplateOutlet]=\"hostTemplate || default\" [ngTemplateOutletContext]=\"{ values: dateValue }\"></ng-template>\n  </div>\n\n  <div class=\"devui-datepicker-pro-dropdown-panel\" [ngStyle]=\"{ paddingBottom: !showTime && !footerTemplate ? 0 : '4px' }\" dDropDownMenu>\n    <d-datepicker-panel\n      [isRangeType]=\"true\"\n      [showTime]=\"showTime\"\n      [customTemplate]=\"customTemplate\"\n      [footerTemplate]=\"footerTemplate\"\n      [mode]=\"mode\"\n    >\n    </d-datepicker-panel>\n  </div>\n</div>\n\n<ng-template #normal>\n  <div\n    class=\"devui-datepicker-pro-wrapper {{ cssClass }}\"\n    dDropDown\n    [disabled]=\"disabled\"\n    [isOpen]=\"isOpen\"\n    [trigger]=\"'manually'\"\n    (toggleEvent)=\"onToggle($event)\"\n    (click)=\"openDropdown($event)\"\n    [closeScope]=\"'blank'\"\n    [ngStyle]=\"{ width: width || (showTime ? '400px' : '300px') }\"\n  >\n    <div dDropDownToggle>\n      <ng-template [ngTemplateOutlet]=\"hostTemplate || default\" [ngTemplateOutletContext]=\"{ values: dateValue }\"></ng-template>\n    </div>\n\n    <div class=\"devui-datepicker-pro-dropdown-panel\" [ngStyle]=\"{ paddingBottom: !showTime && !footerTemplate ? 0 : '4px' }\" dDropDownMenu>\n      <d-datepicker-panel\n        [isRangeType]=\"true\"\n        [showTime]=\"showTime\"\n        [customTemplate]=\"customTemplate\"\n        [footerTemplate]=\"footerTemplate\"\n        [mode]=\"mode\"\n      >\n      </d-datepicker-panel>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #default>\n  <div\n    class=\"devui-range-picker devui-input-group devui-dropdown-origin\"\n    [ngClass]=\"{\n      'devui-disabled': disabled,\n      'devui-has-value': dateValue[0] || dateValue[1]\n    }\"\n  >\n    <i class=\"devui-range-picker-icon\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M5,0 L5,1 L11,1 L11,0 L12,0 L12,1 L14,1 C15.1045695,1 16,1.8954305 16,3 L16,14 C16,15.1045695 15.1045695,16 14,16 L2,16 C0.8954305,16 0,15.1045695 0,14 L0,3 C0,1.8954305 0.8954305,1 2,1 L4,1 L4,0 L5,0 Z M15,5 L1,5 L1,14 C1,14.5522847 1.44771525,15 2,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,5 Z M6,7 C6.55228475,7 7,7.44771525 7,8 L7,10 C7,10.5522847 6.55228475,11 6,11 L4,11 C3.44771525,11 3,10.5522847 3,10 L3,8 C3,7.44771525 3.44771525,7 4,7 L6,7 Z M6,8 L4,8 L4,10 L6,10 L6,8 Z M4,2 L2,2 C1.44771525,2 1,2.44771525 1,3 L1,4 L15,4 L15,3 C15,2.44771525 14.5522847,2 14,2 L12,2 L12,3 L11,3 L11,2 L5,2 L5,3 L4,3 L4,2 Z\"\n            fill=\"#BABBC0\"\n          ></path>\n        </g>\n      </svg>\n    </i>\n    <input\n      #dateInputStart\n      class=\"devui-input devui-form-control devui-date-start\"\n      [ngClass]=\"{ 'devui-active-input': currentActiveInput === 'start' && isOpen }\"\n      [disabled]=\"disabled\"\n      [placeholder]=\"(placeholder && placeholder[0]) || i18nText.startPlaceholder\"\n      [(ngModel)]=\"dateValue[0]\"\n      (click)=\"focusChange('start')\"\n      autocomplete=\"off\"\n    />\n    <span> {{ splitter }} </span>\n    <input\n      #dateInputEnd\n      class=\"devui-input devui-form-control devui-date-end\"\n      [ngClass]=\"{ 'devui-active-input': currentActiveInput === 'end' && isOpen }\"\n      [disabled]=\"disabled\"\n      [placeholder]=\"(placeholder && placeholder[1]) || i18nText.endPlaceholder\"\n      [(ngModel)]=\"dateValue[1]\"\n      (click)=\"focusChange('end')\"\n      autocomplete=\"off\"\n    />\n    <div\n      class=\"devui-date-input-active-bar\"\n      *ngIf=\"isOpen\"\n      [style.width.px]=\"strWidth\"\n      [ngClass]=\"{\n        'devui-start-side': currentActiveInput === 'start',\n        'devui-end-side': currentActiveInput === 'end'\n      }\"\n    ></div>\n    <div *ngIf=\"allowClear\" class=\"devui-input-group-addon close-icon-wrapper\" (click)=\"clear($event, true)\">\n      <div class=\"close-icon\">\n        <svg\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <path\n              d=\"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M5.87867966,5.17157288 C5.68341751,4.97631073 5.36683502,4.97631073 5.17157288,5.17157288 C4.99800652,5.34513923 4.97872137,5.61456363 5.11371742,5.80943177 L5.17157288,5.87867966 L7.29218611,7.99929289 L5.17157288,10.1213203 C4.97631073,10.3165825 4.97631073,10.633165 5.17157288,10.8284271 C5.34513923,11.0019935 5.61456363,11.0212786 5.80943177,10.8862826 L5.87867966,10.8284271 L7.99929289,8.70639967 L10.1213203,10.8284271 C10.3165825,11.0236893 10.633165,11.0236893 10.8284271,10.8284271 C11.0019935,10.6548608 11.0212786,10.3854364 10.8862826,10.1905682 L10.8284271,10.1213203 L8.70710678,8 L10.8284271,5.87867966 C11.0236893,5.68341751 11.0236893,5.36683502 10.8284271,5.17157288 C10.6548608,4.99800652 10.3854364,4.97872137 10.1905682,5.11371742 L10.1213203,5.17157288 L8,7.29289322 L5.87867966,5.17157288 Z\"\n              fill-rule=\"nonzero\"\n            ></path>\n          </g>\n        </svg>\n      </div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".devui-datepicker-pro-wrapper{display:inline-block;background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-datepicker-pro-wrapper .devui-range-picker{padding:0 8px;position:relative;box-sizing:border-box;width:100%;min-height:24px}.devui-datepicker-pro-wrapper .devui-range-picker .devui-input{padding:4px 8px;width:calc(50% - 18px)}.devui-datepicker-pro-wrapper .devui-range-picker .devui-input.devui-active-input{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar{display:block;max-width:calc(50% - 48px);height:1px;background-color:#f2f2f3;background-color:var(--devui-brand-foil, #f2f2f3);position:absolute;bottom:0}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar.devui-start-side{left:35px}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar.devui-end-side{left:calc(50% + 20px)}.devui-datepicker-pro-wrapper .devui-range-picker-icon{vertical-align:bottom}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper{padding:0 8px;visibility:hidden;position:absolute;right:0;top:0;line-height:25px}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon{width:16px;height:16px;display:inline-block;line-height:16px}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon svg{vertical-align:middle;position:relative;top:-.1em}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon svg path{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da)}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon:hover svg path{fill:#babbc0;fill:var(--devui-shape-icon-fill-active, #babbc0)}.devui-datepicker-pro-wrapper .devui-range-picker.devui-has-value:hover .close-icon-wrapper{visibility:visible}.devui-datepicker-pro-wrapper .devui-range-picker:not(.devui-disabled) .close-icon-wrapper{cursor:pointer}.devui-datepicker-pro-wrapper .devui-input-group>.devui-input{display:inline-block}.devui-datepicker-pro-wrapper .devui-input-group>.devui-input::-ms-clear{display:none}\n"], components: [{ type: i3.DropDownAppendToBodyComponent, selector: "[dDropDown][appendToBody]", inputs: ["alignOrigin", "appendToBodyDirections"] }, { type: i4.DatepickerPanelComponent, selector: "d-datepicker-panel", inputs: ["isRangeType", "showTime", "showCustom", "customTemplate", "footerTemplate", "mode"] }], directives: [{ type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.DropDownDirective, selector: "[dDropDown]", inputs: ["isOpen", "disabled", "showAnimation", "trigger", "closeScope", "closeOnMouseLeaveMenu"], outputs: ["toggleEvent"], exportAs: ["d-dropdown"] }, { type: i5.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i3.DropDownToggleDirective, selector: "[dDropDownToggle]", inputs: ["toggleOnFocus", "autoFocus"], exportAs: ["d-dropdown-toggle"] }, { type: i5.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i3.DropDownMenuDirective, selector: "[dDropDownMenu]", exportAs: ["d-dropdown-menu"] }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i6.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: RangeDatepickerProComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-range-datepicker-pro', providers: [
                        DatepickerProService,
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => RangeDatepickerProComponent),
                            multi: true
                        }
                    ], preserveWhitespaces: false, template: "<div\n  class=\"devui-datepicker-pro-wrapper {{ cssClass }}\"\n  *ngIf=\"appendToBody; else normal\"\n  dDropDown\n  appendToBody\n  [disabled]=\"disabled\"\n  [isOpen]=\"isOpen\"\n  [trigger]=\"'manually'\"\n  (toggleEvent)=\"onToggle($event)\"\n  (click)=\"openDropdown($event)\"\n  [closeScope]=\"'blank'\"\n  [ngStyle]=\"{ width: width || (showTime ? '400px' : '300px') }\"\n>\n  <div dDropDownToggle>\n    <ng-template [ngTemplateOutlet]=\"hostTemplate || default\" [ngTemplateOutletContext]=\"{ values: dateValue }\"></ng-template>\n  </div>\n\n  <div class=\"devui-datepicker-pro-dropdown-panel\" [ngStyle]=\"{ paddingBottom: !showTime && !footerTemplate ? 0 : '4px' }\" dDropDownMenu>\n    <d-datepicker-panel\n      [isRangeType]=\"true\"\n      [showTime]=\"showTime\"\n      [customTemplate]=\"customTemplate\"\n      [footerTemplate]=\"footerTemplate\"\n      [mode]=\"mode\"\n    >\n    </d-datepicker-panel>\n  </div>\n</div>\n\n<ng-template #normal>\n  <div\n    class=\"devui-datepicker-pro-wrapper {{ cssClass }}\"\n    dDropDown\n    [disabled]=\"disabled\"\n    [isOpen]=\"isOpen\"\n    [trigger]=\"'manually'\"\n    (toggleEvent)=\"onToggle($event)\"\n    (click)=\"openDropdown($event)\"\n    [closeScope]=\"'blank'\"\n    [ngStyle]=\"{ width: width || (showTime ? '400px' : '300px') }\"\n  >\n    <div dDropDownToggle>\n      <ng-template [ngTemplateOutlet]=\"hostTemplate || default\" [ngTemplateOutletContext]=\"{ values: dateValue }\"></ng-template>\n    </div>\n\n    <div class=\"devui-datepicker-pro-dropdown-panel\" [ngStyle]=\"{ paddingBottom: !showTime && !footerTemplate ? 0 : '4px' }\" dDropDownMenu>\n      <d-datepicker-panel\n        [isRangeType]=\"true\"\n        [showTime]=\"showTime\"\n        [customTemplate]=\"customTemplate\"\n        [footerTemplate]=\"footerTemplate\"\n        [mode]=\"mode\"\n      >\n      </d-datepicker-panel>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #default>\n  <div\n    class=\"devui-range-picker devui-input-group devui-dropdown-origin\"\n    [ngClass]=\"{\n      'devui-disabled': disabled,\n      'devui-has-value': dateValue[0] || dateValue[1]\n    }\"\n  >\n    <i class=\"devui-range-picker-icon\">\n      <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M5,0 L5,1 L11,1 L11,0 L12,0 L12,1 L14,1 C15.1045695,1 16,1.8954305 16,3 L16,14 C16,15.1045695 15.1045695,16 14,16 L2,16 C0.8954305,16 0,15.1045695 0,14 L0,3 C0,1.8954305 0.8954305,1 2,1 L4,1 L4,0 L5,0 Z M15,5 L1,5 L1,14 C1,14.5522847 1.44771525,15 2,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,5 Z M6,7 C6.55228475,7 7,7.44771525 7,8 L7,10 C7,10.5522847 6.55228475,11 6,11 L4,11 C3.44771525,11 3,10.5522847 3,10 L3,8 C3,7.44771525 3.44771525,7 4,7 L6,7 Z M6,8 L4,8 L4,10 L6,10 L6,8 Z M4,2 L2,2 C1.44771525,2 1,2.44771525 1,3 L1,4 L15,4 L15,3 C15,2.44771525 14.5522847,2 14,2 L12,2 L12,3 L11,3 L11,2 L5,2 L5,3 L4,3 L4,2 Z\"\n            fill=\"#BABBC0\"\n          ></path>\n        </g>\n      </svg>\n    </i>\n    <input\n      #dateInputStart\n      class=\"devui-input devui-form-control devui-date-start\"\n      [ngClass]=\"{ 'devui-active-input': currentActiveInput === 'start' && isOpen }\"\n      [disabled]=\"disabled\"\n      [placeholder]=\"(placeholder && placeholder[0]) || i18nText.startPlaceholder\"\n      [(ngModel)]=\"dateValue[0]\"\n      (click)=\"focusChange('start')\"\n      autocomplete=\"off\"\n    />\n    <span> {{ splitter }} </span>\n    <input\n      #dateInputEnd\n      class=\"devui-input devui-form-control devui-date-end\"\n      [ngClass]=\"{ 'devui-active-input': currentActiveInput === 'end' && isOpen }\"\n      [disabled]=\"disabled\"\n      [placeholder]=\"(placeholder && placeholder[1]) || i18nText.endPlaceholder\"\n      [(ngModel)]=\"dateValue[1]\"\n      (click)=\"focusChange('end')\"\n      autocomplete=\"off\"\n    />\n    <div\n      class=\"devui-date-input-active-bar\"\n      *ngIf=\"isOpen\"\n      [style.width.px]=\"strWidth\"\n      [ngClass]=\"{\n        'devui-start-side': currentActiveInput === 'start',\n        'devui-end-side': currentActiveInput === 'end'\n      }\"\n    ></div>\n    <div *ngIf=\"allowClear\" class=\"devui-input-group-addon close-icon-wrapper\" (click)=\"clear($event, true)\">\n      <div class=\"close-icon\">\n        <svg\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <path\n              d=\"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M5.87867966,5.17157288 C5.68341751,4.97631073 5.36683502,4.97631073 5.17157288,5.17157288 C4.99800652,5.34513923 4.97872137,5.61456363 5.11371742,5.80943177 L5.17157288,5.87867966 L7.29218611,7.99929289 L5.17157288,10.1213203 C4.97631073,10.3165825 4.97631073,10.633165 5.17157288,10.8284271 C5.34513923,11.0019935 5.61456363,11.0212786 5.80943177,10.8862826 L5.87867966,10.8284271 L7.99929289,8.70639967 L10.1213203,10.8284271 C10.3165825,11.0236893 10.633165,11.0236893 10.8284271,10.8284271 C11.0019935,10.6548608 11.0212786,10.3854364 10.8862826,10.1905682 L10.8284271,10.1213203 L8.70710678,8 L10.8284271,5.87867966 C11.0236893,5.68341751 11.0236893,5.36683502 10.8284271,5.17157288 C10.6548608,4.99800652 10.3854364,4.97872137 10.1905682,5.11371742 L10.1213203,5.17157288 L8,7.29289322 L5.87867966,5.17157288 Z\"\n              fill-rule=\"nonzero\"\n            ></path>\n          </g>\n        </svg>\n      </div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".devui-datepicker-pro-wrapper{display:inline-block;background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-datepicker-pro-wrapper .devui-range-picker{padding:0 8px;position:relative;box-sizing:border-box;width:100%;min-height:24px}.devui-datepicker-pro-wrapper .devui-range-picker .devui-input{padding:4px 8px;width:calc(50% - 18px)}.devui-datepicker-pro-wrapper .devui-range-picker .devui-input.devui-active-input{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar{display:block;max-width:calc(50% - 48px);height:1px;background-color:#f2f2f3;background-color:var(--devui-brand-foil, #f2f2f3);position:absolute;bottom:0}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar.devui-start-side{left:35px}.devui-datepicker-pro-wrapper .devui-range-picker .devui-date-input-active-bar.devui-end-side{left:calc(50% + 20px)}.devui-datepicker-pro-wrapper .devui-range-picker-icon{vertical-align:bottom}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper{padding:0 8px;visibility:hidden;position:absolute;right:0;top:0;line-height:25px}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon{width:16px;height:16px;display:inline-block;line-height:16px}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon svg{vertical-align:middle;position:relative;top:-.1em}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon svg path{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da)}.devui-datepicker-pro-wrapper .devui-range-picker .close-icon-wrapper .close-icon:hover svg path{fill:#babbc0;fill:var(--devui-shape-icon-fill-active, #babbc0)}.devui-datepicker-pro-wrapper .devui-range-picker.devui-has-value:hover .close-icon-wrapper{visibility:visible}.devui-datepicker-pro-wrapper .devui-range-picker:not(.devui-disabled) .close-icon-wrapper{cursor:pointer}.devui-datepicker-pro-wrapper .devui-input-group>.devui-input{display:inline-block}.devui-datepicker-pro-wrapper .devui-input-group>.devui-input::-ms-clear{display:none}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.I18nService }, { type: i2.DatepickerProService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { mode: [{
                type: Input
            }], showTime: [{
                type: Input
            }], disabled: [{
                type: Input
            }], autoOpen: [{
                type: Input
            }], format: [{
                type: Input
            }], locale: [{
                type: Input
            }], cssClass: [{
                type: Input
            }], splitter: [{
                type: Input
            }], width: [{
                type: Input
            }], startIndexOfWeek: [{
                type: Input
            }], appendToBody: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], allowClear: [{
                type: Input
            }], calenderRange: [{
                type: Input
            }], minDate: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], markedRangeDateList: [{
                type: Input
            }], markedDateList: [{
                type: Input
            }], dropdownToggle: [{
                type: Output
            }], confirmEvent: [{
                type: Output
            }], customTemplate: [{
                type: ContentChild,
                args: ['customTemplate']
            }], footerTemplate: [{
                type: ContentChild,
                args: ['footerTemplate']
            }], hostTemplate: [{
                type: ContentChild,
                args: ['hostTemplate']
            }], markDateInfoTemplate: [{
                type: ContentChild,
                args: ['markDateInfoTemplate']
            }], datepickerInputStart: [{
                type: ViewChild,
                args: ['dateInputStart']
            }], datepickerInputEnd: [{
                type: ViewChild,
                args: ['dateInputEnd']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFuZ2UtZGF0ZXBpY2tlci1wcm8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vZGV2dWkvZGF0ZXBpY2tlci1wcm8vcmFuZ2UtZGF0ZXBpY2tlci1wcm8uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZGV2dWkvZGF0ZXBpY2tlci1wcm8vcmFuZ2UtZGF0ZXBpY2tlci1wcm8uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFDVixZQUFZLEVBQ1osVUFBVSxFQUNWLEtBQUssRUFHTCxNQUFNLEVBQ04sV0FBVyxFQUNYLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFpQixXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0QsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7Ozs7Ozs7O0FBaUJoRSxNQUFNLE9BQU8sMkJBQTJCO0lBeUd0QyxZQUNVLElBQWlCLEVBQ2pCLFNBQStCLEVBQy9CLEdBQXNCO1FBRnRCLFNBQUksR0FBSixJQUFJLENBQWE7UUFDakIsY0FBUyxHQUFULFNBQVMsQ0FBc0I7UUFDL0IsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUEzR3ZCLFNBQUksR0FBdUMsTUFBTSxDQUFDO1FBQ2xELGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsYUFBUSxHQUFHLEtBQUssQ0FBQztR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aEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBQ08sYUFBYTtzQkFBekIsS0FBSztnQkFHTyxPQUFPO3NCQUFuQixLQUFLO2dCQU1PLE9BQU87c0JBQW5CLEtBQUs7Z0JBTU8sbUJBQW1CO3NCQUEvQixLQUFLO2dCQUdPLGNBQWM7c0JBQTFCLEtBQUs7Z0JBR0ksY0FBYztzQkFBdkIsTUFBTTtnQkFDRyxZQUFZO3NCQUFyQixNQUFNO2dCQUN5QixjQUFjO3NCQUE3QyxZQUFZO3VCQUFDLGdCQUFnQjtnQkFDRSxjQUFjO3NCQUE3QyxZQUFZO3VCQUFDLGdCQUFnQjtnQkFDQSxZQUFZO3NCQUF6QyxZQUFZO3VCQUFDLGNBQWM7Z0JBQ2Msb0JBQW9CO3NCQUE3RCxZQUFZO3VCQUFDLHNCQUFzQjtnQkFHUCxvQkFBb0I7c0JBQWhELFNBQVM7dUJBQUMsZ0JBQWdCO2dCQUNBLGtCQUFrQjtzQkFBNUMsU0FBUzt1QkFBQyxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQ29udGVudENoaWxkLFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSTE4bkludGVyZmFjZSwgSTE4blNlcnZpY2UgfSBmcm9tICduZy1kZXZ1aS9pMThuJztcbmltcG9ydCB7IERlZmF1bHREYXRlQ29udmVydGVyIH0gZnJvbSAnbmctZGV2dWkvdXRpbHMnO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIG1hcCwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgRGF0ZXBpY2tlclByb1NlcnZpY2UgfSBmcm9tICcuL2RhdGVwaWNrZXItcHJvLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGF0ZUNvbmZpZyB9IGZyb20gJy4vbGliL2RhdGVwaWNrZXItcHJvLnR5cGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkLXJhbmdlLWRhdGVwaWNrZXItcHJvJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3JhbmdlLWRhdGVwaWNrZXItcHJvLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcmFuZ2UtZGF0ZXBpY2tlci1wcm8uY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgRGF0ZXBpY2tlclByb1NlcnZpY2UsXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBSYW5nZURhdGVwaWNrZXJQcm9Db21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF0sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBSYW5nZURhdGVwaWNrZXJQcm9Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuICBASW5wdXQoKSBtb2RlOiAneWVhcicgfCAnbW9udGgnIHwgJ2RhdGUnIHwgJ3dlZWsnID0gJ2RhdGUnO1xuICBASW5wdXQoKSBzaG93VGltZSA9IGZhbHNlO1xuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xuICBASW5wdXQoKSBhdXRvT3BlbiA9IGZhbHNlO1xuICBASW5wdXQoKSBmb3JtYXQ6IHN0cmluZztcbiAgQElucHV0KCkgbG9jYWxlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNzc0NsYXNzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNwbGl0dGVyID0gJy0nO1xuICBASW5wdXQoKSB3aWR0aDogc3RyaW5nO1xuICBASW5wdXQoKSBzdGFydEluZGV4T2ZXZWVrID0gMDtcbiAgQElucHV0KCkgYXBwZW5kVG9Cb2R5ID0gdHJ1ZTtcbiAgQElucHV0KCkgcGxhY2Vob2xkZXI6IHN0cmluZ1tdO1xuICBASW5wdXQoKSBhbGxvd0NsZWFyID0gdHJ1ZTtcbiAgQElucHV0KCkgc2V0IGNhbGVuZGVyUmFuZ2UgKHZhbHVlKSB7XG4gICAgdGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZSA9IHZhbHVlIHx8IFsxOTcwLCAyMDk5XTtcbiAgfVxuICBASW5wdXQoKSBzZXQgbWluRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5waWNrZXJTcnYubWluRGF0ZSA9IHZhbHVlO1xuICB9XG4gIEBJbnB1dCgpIHNldCBtYXhEYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnBpY2tlclNydi5tYXhEYXRlID0gdmFsdWU7XG4gIH1cbiAgQElucHV0KCkgc2V0IG1hcmtlZFJhbmdlRGF0ZUxpc3QodmFsdWU6IERhdGVbXVtdKSB7XG4gICAgdGhpcy5waWNrZXJTcnYubWFya2VkUmFuZ2VEYXRlTGlzdCA9IHZhbHVlO1xuICB9O1xuICBASW5wdXQoKSBzZXQgbWFya2VkRGF0ZUxpc3QodmFsdWU6IERhdGVbXSkge1xuICAgIHRoaXMucGlja2VyU3J2Lm1hcmtlZERhdGVMaXN0ID0gdmFsdWU7XG4gIH1cbiAgQE91dHB1dCgpIGRyb3Bkb3duVG9nZ2xlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuICBAT3V0cHV0KCkgY29uZmlybUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxEYXRlW10+KCk7XG4gIEBDb250ZW50Q2hpbGQoJ2N1c3RvbVRlbXBsYXRlJykgY3VzdG9tVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ2Zvb3RlclRlbXBsYXRlJykgZm9vdGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBDb250ZW50Q2hpbGQoJ2hvc3RUZW1wbGF0ZScpIGhvc3RUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgQENvbnRlbnRDaGlsZCgnbWFya0RhdGVJbmZvVGVtcGxhdGUnKSBzZXQgbWFya0RhdGVJbmZvVGVtcGxhdGUodG1wOiBUZW1wbGF0ZVJlZjxhbnk+KSB7XG4gICAgdGhpcy5waWNrZXJTcnYubWFya0RhdGVJbmZvVGVtcGxhdGUgPSB0bXA7XG4gIH07XG4gIEBWaWV3Q2hpbGQoJ2RhdGVJbnB1dFN0YXJ0JykgZGF0ZXBpY2tlcklucHV0U3RhcnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RhdGVJbnB1dEVuZCcpIGRhdGVwaWNrZXJJbnB1dEVuZDogRWxlbWVudFJlZjtcblxuICBwcml2YXRlIGkxOG5Mb2NhbGU6IEkxOG5JbnRlcmZhY2VbJ2xvY2FsZSddO1xuXG4gIGkxOG5UZXh0O1xuICBfZGF0ZVZhbHVlID0gW107XG4gIGRhdGVwaWNrZXJDb252ZXJ0OiBEZWZhdWx0RGF0ZUNvbnZlcnRlcjtcbiAgdW5zdWJzY3JpYmUkID0gbmV3IFN1YmplY3QoKTtcbiAgaXNPcGVuID0gZmFsc2U7XG4gIHN0cldpZHRoID0gMDtcblxuICBnZXQgZGF0ZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl9kYXRlVmFsdWU7XG4gIH1cblxuICBzZXQgZGF0ZVZhbHVlKHZhbHVlOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuX2RhdGVWYWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuZ2V0U3RyV2lkdGgoKTtcbiAgfVxuXG4gIHNldCBjdXJyZW50QWN0aXZlSW5wdXQodmFsdWU6ICdzdGFydCcgfCAnZW5kJykge1xuICAgIHRoaXMucGlja2VyU3J2LmN1cnJlbnRBY3RpdmVJbnB1dCA9IHZhbHVlO1xuICB9XG4gIGdldCBjdXJyZW50QWN0aXZlSW5wdXQoKTogJ3N0YXJ0JyB8ICdlbmQnIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0O1xuICB9XG4gIGdldCBkYXRlQ29uZmlnKCk6IERhdGVDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRlQ29udmVydGVyOiB0aGlzLmRhdGVwaWNrZXJDb252ZXJ0LFxuICAgICAgbWluOiB0aGlzLnBpY2tlclNydi5taW5EYXRlIHx8IG5ldyBEYXRlKHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMF0gKyAnLzAxLzAxJyksXG4gICAgICBtYXg6IHRoaXMucGlja2VyU3J2Lm1heERhdGUgfHwgbmV3IERhdGUodGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZVsxXSArICcvMTIvMzEnKSxcbiAgICAgIGZvcm1hdDoge1xuICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdCB8fCAneS9NTS9kZCcsXG4gICAgICAgIHRpbWU6IHRoaXMuZm9ybWF0IHx8ICd5L01NL2RkIEhIOm1tOnNzJyxcbiAgICAgICAgbW9udGg6IHRoaXMuZm9ybWF0IHx8ICd5LU1NJyxcbiAgICAgICAgeWVhcjogJ3knXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGdldCBjdXJGb3JtYXQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5tb2RlID09PSAneWVhcicpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGVDb25maWcuZm9ybWF0LnllYXI7XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09ICdtb250aCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGVDb25maWcuZm9ybWF0Lm1vbnRoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gIHRoaXMuc2hvd1RpbWUgPyB0aGlzLmRhdGVDb25maWcuZm9ybWF0LnRpbWUgOiB0aGlzLmRhdGVDb25maWcuZm9ybWF0LmRhdGU7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGN1ckFjdGl2ZURhdGUoKTogRGF0ZSB7XG4gICAgaWYgKHRoaXMucGlja2VyU3J2LmN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSB8fCB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV0gfHwgbmV3IERhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXSB8fCB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMF0gfHwgbmV3IERhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uQ2hhbmdlID0gKF86IGFueSkgPT4gbnVsbDtcbiAgcHJpdmF0ZSBvblRvdWNoZWQgPSAoKSA9PiBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaTE4bjogSTE4blNlcnZpY2UsXG4gICAgcHJpdmF0ZSBwaWNrZXJTcnY6IERhdGVwaWNrZXJQcm9TZXJ2aWNlLFxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHtcbiAgICB0aGlzLmkxOG5UZXh0ID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkuZGF0ZVBpY2tlclBybztcbiAgICB0aGlzLmRhdGVwaWNrZXJDb252ZXJ0ID0gbmV3IERlZmF1bHREYXRlQ29udmVydGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmluaXRTcnZTdGF0dXMoKTtcbiAgICB0aGlzLnNldEkxOG5UZXh0KCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmlzT3BlbiA9IHRoaXMuYXV0b09wZW47XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgdGhpcy5pbml0T2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0U3J2U3RhdHVzKCkge1xuICAgIHRoaXMucGlja2VyU3J2LnNob3dUaW1lID0gdGhpcy5zaG93VGltZTtcbiAgICB0aGlzLnBpY2tlclNydi5pc1JhbmdlID0gdHJ1ZTtcbiAgICB0aGlzLnBpY2tlclNydi5zdGFydEluZGV4T2ZXZWVrID0gdGhpcy5zdGFydEluZGV4T2ZXZWVrO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0T2JzZXJ2YWJsZSgpIHtcbiAgICB0aGlzLnBpY2tlclNydi5zZWxlY3RlZERhdGVDaGFuZ2UucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICApLnN1YnNjcmliZShjaGFuZ2UgPT4ge1xuICAgICAgdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlID0gY2hhbmdlLnZhbHVlIGFzIERhdGVbXTtcbiAgICAgIHRoaXMuZGF0ZVZhbHVlID0gKGNoYW5nZS52YWx1ZSBhcyBEYXRlW10pLm1hcChkID0+IHRoaXMuZm9ybWF0RGF0ZVRvU3RyaW5nKGQpKTtcbiAgICAgIHRoaXMub25DaGFuZ2UoY2hhbmdlLnZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGlja2VyU3J2LmNsb3NlRHJvcGRvd25FdmVudC5waXBlKFxuICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKVxuICAgICkuc3Vic2NyaWJlKGlzQ29uZmlybSA9PiB7XG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5kcm9wZG93blRvZ2dsZS5lbWl0KGZhbHNlKTtcbiAgICAgIGlmIChpc0NvbmZpcm0pIHtcbiAgICAgICAgdGhpcy5jb25maXJtRXZlbnQuZW1pdCh0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5waWNrZXJTcnYuYWN0aXZlSW5wdXRDaGFuZ2UucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICApLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLmdldFN0cldpZHRoKCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuaG9zdFRlbXBsYXRlKSB7XG4gICAgICBmcm9tRXZlbnQodGhpcy5kYXRlcGlja2VySW5wdXRTdGFydC5uYXRpdmVFbGVtZW50LCAnaW5wdXQnKS5waXBlKFxuICAgICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICAgICBtYXAodCA9PiB7XG4gICAgICAgICAgdGhpcy5nZXRTdHJXaWR0aCgpO1xuICAgICAgICAgIHJldHVybiAnc3RhcnQnO1xuICAgICAgICB9KSxcbiAgICAgICAgZGVib3VuY2VUaW1lKDMwMClcbiAgICAgICkuc3Vic2NyaWJlKHRoaXMuaW5wdXRDaGFuZ2VDYWxsYmFjayk7XG5cbiAgICAgIGZyb21FdmVudCh0aGlzLmRhdGVwaWNrZXJJbnB1dEVuZC5uYXRpdmVFbGVtZW50LCAnaW5wdXQnKS5waXBlKFxuICAgICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICAgICBtYXAodCA9PiB7XG4gICAgICAgICAgdGhpcy5nZXRTdHJXaWR0aCgpO1xuICAgICAgICAgIHJldHVybiAnZW5kJztcbiAgICAgICAgfSksXG4gICAgICAgIGRlYm91bmNlVGltZSgzMDApXG4gICAgICApLnN1YnNjcmliZSh0aGlzLmlucHV0Q2hhbmdlQ2FsbGJhY2spO1xuXG4gICAgICBmcm9tRXZlbnQodGhpcy5kYXRlcGlja2VySW5wdXRTdGFydC5uYXRpdmVFbGVtZW50LCAnYmx1cicpLnBpcGUoXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCksXG4gICAgICAgIG1hcCh0ID0+ICdzdGFydCcpLFxuICAgICAgKS5zdWJzY3JpYmUodGhpcy5pbnB1dEJsdXJDYWxsYmFjayk7XG5cbiAgICAgIGZyb21FdmVudCh0aGlzLmRhdGVwaWNrZXJJbnB1dEVuZC5uYXRpdmVFbGVtZW50LCAnYmx1cicpLnBpcGUoXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCksXG4gICAgICAgIG1hcCh0ID0+ICdlbmQnKSxcbiAgICAgICkuc3Vic2NyaWJlKHRoaXMuaW5wdXRCbHVyQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNob3dUaW1lKSB7XG4gICAgICB0aGlzLnBpY2tlclNydi5zZWxlY3RlZFRpbWVDaGFuZ2UucGlwZShcbiAgICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKVxuICAgICAgKS5zdWJzY3JpYmUoY2hhbmdlID0+IHtcbiAgICAgICAgY29uc3QgY3VyVGltZSA9IG5ldyBEYXRlKHRoaXMuY3VyQWN0aXZlRGF0ZS5nZXRUaW1lKCkpLnNldEhvdXJzKGNoYW5nZS5ob3VyLCBjaGFuZ2UubWluLCBjaGFuZ2Uuc2Vjb25kcyk7XG4gICAgICAgIGNvbnN0IGN1ckRhdGUgPSBuZXcgRGF0ZShjdXJUaW1lKTtcbiAgICAgICAgaWYgKGNoYW5nZS5hY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSA9IGN1ckRhdGU7XG4gICAgICAgICAgaWYgKHRoaXMuaXNTYW1lRGF0ZUFuZFRpbWVXcm9uZygpKSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV0gPSBjdXJEYXRlO1xuICAgICAgICAgICAgdGhpcy5kYXRlVmFsdWVbMV0gPSB0aGlzLmZvcm1hdERhdGVUb1N0cmluZyhjdXJEYXRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5kYXRlVmFsdWUgPSBbdGhpcy5mb3JtYXREYXRlVG9TdHJpbmcoY3VyRGF0ZSksIHRoaXMuZGF0ZVZhbHVlWzFdXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV0gPSBjdXJEYXRlO1xuICAgICAgICAgIGlmICh0aGlzLmlzU2FtZURhdGVBbmRUaW1lV3JvbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzBdID0gY3VyRGF0ZTtcbiAgICAgICAgICAgIHRoaXMuZGF0ZVZhbHVlWzBdID0gdGhpcy5mb3JtYXREYXRlVG9TdHJpbmcoY3VyRGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZGF0ZVZhbHVlID0gW3RoaXMuZGF0ZVZhbHVlWzBdLCB0aGlzLmZvcm1hdERhdGVUb1N0cmluZyhjdXJEYXRlKV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaXNTYW1lRGF0ZUFuZFRpbWVXcm9uZygpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzBdPy50b0RhdGVTdHJpbmcoKSA9PT0gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdPy50b0RhdGVTdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXS5nZXRUaW1lKCkgPiB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV0uZ2V0VGltZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRTdHJXaWR0aCgpIHtcbiAgICBsZXQgc3RyID0gdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnc3RhcnQnID8gdGhpcy5kYXRlVmFsdWVbMF0gOiB0aGlzLmRhdGVWYWx1ZVsxXTtcbiAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgc3RyID0gdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnc3RhcnQnID8gdGhpcy5pMThuVGV4dC5zdGFydFBsYWNlaG9sZGVyIDogdGhpcy5pMThuVGV4dC5lbmRQbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgdGhpcy5zdHJXaWR0aCA9IHRoaXMucGlja2VyU3J2Lm1lYXJzdXJlU3RyV2lkdGgoc3RyKTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZVRvU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGlmICghZGF0ZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRlcGlja2VyQ29udmVydC5mb3JtYXQoZGF0ZSwgdGhpcy5jdXJGb3JtYXQpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRJMThuVGV4dCgpIHtcbiAgICB0aGlzLmkxOG5Mb2NhbGUgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5sb2NhbGU7XG4gICAgdGhpcy5pMThuLmxhbmdDaGFuZ2UoKS5waXBlKFxuICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKVxuICAgICkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5Mb2NhbGUgPSBkYXRhLmxvY2FsZTtcbiAgICAgIHRoaXMuaTE4blRleHQgPSBkYXRhLmRhdGVQaWNrZXJQcm87XG4gICAgfSk7XG4gIH1cblxuICBpbnB1dENoYW5nZUNhbGxiYWNrID0gKHR5cGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHR5cGUgPT09ICdzdGFydCcgPyB0aGlzLmRhdGVWYWx1ZVswXSA6IHRoaXMuZGF0ZVZhbHVlWzFdO1xuICAgIGlmICghdGFyZ2V0VmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5wdXREYXRlID0gdGhpcy5kYXRlcGlja2VyQ29udmVydC5wYXJzZSh0YXJnZXRWYWx1ZSwgdGhpcy5jdXJGb3JtYXQpO1xuICAgIGNvbnN0IGN1ckRhdGUgPSB0eXBlID09PSAnc3RhcnQnID8gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzBdIDogdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdO1xuICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlICYmIGlucHV0RGF0ZS5nZXRUaW1lKCkgPT09IGN1ckRhdGU/LmdldFRpbWUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnZhbGlkYXRlRGF0ZSh0YXJnZXRWYWx1ZSkpIHtcbiAgICAgIGlmICh0eXBlID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSA9IGlucHV0RGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXSA9IGlucHV0RGF0ZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5waWNrZXJTcnYudXBkYXRlRGF0ZVZhbHVlLm5leHQoe1xuICAgICAgICB0eXBlOiAncmFuZ2UnLFxuICAgICAgICB2YWx1ZTogdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlXG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMuc2hvd1RpbWUpIHtcbiAgICAgICAgdGhpcy5waWNrZXJTcnYudXBkYXRlVGltZUNoYW5nZS5uZXh0KHtcbiAgICAgICAgICBhY3RpdmVJbnB1dDogdHlwZSxcbiAgICAgICAgICBob3VyOiBpbnB1dERhdGUuZ2V0SG91cnMoKSxcbiAgICAgICAgICBtaW46IGlucHV0RGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgICAgc2Vjb25kczogaW5wdXREYXRlLmdldFNlY29uZHMoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfTtcblxuICBpbnB1dEJsdXJDYWxsYmFjayA9ICh0eXBlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0VmFsdWUgPSB0eXBlID09PSAnc3RhcnQnID8gdGhpcy5kYXRlVmFsdWVbMF0gOiB0aGlzLmRhdGVWYWx1ZVsxXTtcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVEYXRlKHRhcmdldFZhbHVlKSkge1xuICAgICAgaWYgKHR5cGUgPT09ICdzdGFydCcpIHtcbiAgICAgICAgdGhpcy5kYXRlVmFsdWVbMF0gPSB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMF0gP1xuICAgICAgICAgIHRoaXMuZGF0ZXBpY2tlckNvbnZlcnQuZm9ybWF0KHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSwgdGhpcy5jdXJGb3JtYXQsIHRoaXMubG9jYWxlIHx8IHRoaXMuaTE4bkxvY2FsZSkgOlxuICAgICAgICAgICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRlVmFsdWVbMV0gPSB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV0gP1xuICAgICAgICAgIHRoaXMuZGF0ZXBpY2tlckNvbnZlcnQuZm9ybWF0KHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXSwgdGhpcy5jdXJGb3JtYXQsIHRoaXMubG9jYWxlIHx8IHRoaXMuaTE4bkxvY2FsZSkgOlxuICAgICAgICAgICcnO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmdldFN0cldpZHRoKCk7XG4gIH07XG5cbiAgcHVibGljIGZvY3VzQ2hhbmdlKHR5cGU6ICdzdGFydCcgfCAnZW5kJykge1xuICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgIHR5cGUgPSAnc3RhcnQnO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRBY3RpdmVJbnB1dCA9IHR5cGU7XG4gICAgdGhpcy5waWNrZXJTcnYuYWN0aXZlSW5wdXRDaGFuZ2UubmV4dCh0eXBlKTtcbiAgICBpZiAodHlwZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmRhdGVwaWNrZXJJbnB1dFN0YXJ0Py5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5kYXRlcGlja2VySW5wdXRTdGFydC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZXBpY2tlcklucHV0RW5kPy5uYXRpdmVFbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5kYXRlcGlja2VySW5wdXRFbmQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZURhdGUodmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IHZhbHVlRGF0ZSA9IHRoaXMuZGF0ZXBpY2tlckNvbnZlcnQucGFyc2UodmFsdWUsIHRoaXMuY3VyRm9ybWF0KTtcbiAgICBjb25zdCB2YWx1ZUZvcm1hdCA9IHZhbHVlRGF0ZSAmJiAhaXNOYU4odmFsdWVEYXRlLmdldFRpbWUoKSkgJiZcbiAgICAgIHRoaXMuZGF0ZXBpY2tlckNvbnZlcnQuZm9ybWF0KHZhbHVlRGF0ZSwgdGhpcy5jdXJGb3JtYXQsIHRoaXMubG9jYWxlIHx8IHRoaXMuaTE4bkxvY2FsZSk7XG4gICAgaWYgKFxuICAgICAgIXZhbHVlRGF0ZSB8fCB2YWx1ZSAhPT0gdmFsdWVGb3JtYXQgfHxcbiAgICAgICh2YWx1ZSA9PT0gdmFsdWVGb3JtYXQgJiYgIXRoaXMucGlja2VyU3J2LmRhdGVJblJhbmdlKHZhbHVlRGF0ZSkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIG9uVG9nZ2xlKGlzT3Blbikge1xuICAgIGlmIChpc09wZW4gIT09IHRoaXMuaXNPcGVuIHx8IGlzT3Blbikge1xuICAgICAgdGhpcy5kcm9wZG93blRvZ2dsZS5lbWl0KGlzT3Blbik7XG4gICAgfVxuICAgIHRoaXMuaXNPcGVuID0gaXNPcGVuO1xuICAgIHRoaXMucGlja2VyU3J2LnRvZ2dsZUV2ZW50Lm5leHQoaXNPcGVuKTtcbiAgfVxuXG4gIG9wZW5Ecm9wZG93bihldmVudDogRXZlbnQpIHtcbiAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgfVxuXG4gIGNsZWFyKGV2ZW50PzogTW91c2VFdmVudCwgaXNIYW5kbGU/OiBib29sZWFuKSB7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgJiYgaXNIYW5kbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5waWNrZXJTcnYudXBkYXRlRGF0ZVZhbHVlLm5leHQoe1xuICAgICAgdHlwZTogJ3JhbmdlJyxcbiAgICAgIHZhbHVlOiBbXVxuICAgIH0pO1xuXG4gICAgdGhpcy5waWNrZXJTcnYudXBkYXRlVGltZUNoYW5nZS5uZXh0KHtcbiAgICAgIGhvdXI6IG51bGwsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBzZWNvbmRzOiBudWxsXG4gICAgfSk7XG4gICAgdGhpcy5kYXRlVmFsdWUgPSBbXTtcbiAgICB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGUgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRBY3RpdmVJbnB1dCA9ICdzdGFydCc7XG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgd3JpdGVWYWx1ZSh2YWx1ZTogRGF0ZVtdKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoKSB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlLmZpbmQodCA9PiAhdGhpcy5waWNrZXJTcnYuZGF0ZUluUmFuZ2UodCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kYXRlVmFsdWUgPSB2YWx1ZS5tYXAoZCA9PiB7XG4gICAgICByZXR1cm4gZCA/IHRoaXMuZGF0ZXBpY2tlckNvbnZlcnQuZm9ybWF0KGQsIHRoaXMuY3VyRm9ybWF0KSA6ICcnO1xuICAgIH0pO1xuICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZSA9IHZhbHVlO1xuICAgIHRoaXMucGlja2VyU3J2LnVwZGF0ZURhdGVWYWx1ZS5uZXh0KHtcbiAgICAgIHR5cGU6ICdyYW5nZScsXG4gICAgICB2YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnVuc3Vic2NyaWJlJC5uZXh0KCk7XG4gICAgdGhpcy51bnN1YnNjcmliZSQuY29tcGxldGUoKTtcbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cImRldnVpLWRhdGVwaWNrZXItcHJvLXdyYXBwZXIge3sgY3NzQ2xhc3MgfX1cIlxuICAqbmdJZj1cImFwcGVuZFRvQm9keTsgZWxzZSBub3JtYWxcIlxuICBkRHJvcERvd25cbiAgYXBwZW5kVG9Cb2R5XG4gIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gIFtpc09wZW5dPVwiaXNPcGVuXCJcbiAgW3RyaWdnZXJdPVwiJ21hbnVhbGx5J1wiXG4gICh0b2dnbGVFdmVudCk9XCJvblRvZ2dsZSgkZXZlbnQpXCJcbiAgKGNsaWNrKT1cIm9wZW5Ecm9wZG93bigkZXZlbnQpXCJcbiAgW2Nsb3NlU2NvcGVdPVwiJ2JsYW5rJ1wiXG4gIFtuZ1N0eWxlXT1cInsgd2lkdGg6IHdpZHRoIHx8IChzaG93VGltZSA/ICc0MDBweCcgOiAnMzAwcHgnKSB9XCJcbj5cbiAgPGRpdiBkRHJvcERvd25Ub2dnbGU+XG4gICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImhvc3RUZW1wbGF0ZSB8fCBkZWZhdWx0XCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgdmFsdWVzOiBkYXRlVmFsdWUgfVwiPjwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJkZXZ1aS1kYXRlcGlja2VyLXByby1kcm9wZG93bi1wYW5lbFwiIFtuZ1N0eWxlXT1cInsgcGFkZGluZ0JvdHRvbTogIXNob3dUaW1lICYmICFmb290ZXJUZW1wbGF0ZSA/IDAgOiAnNHB4JyB9XCIgZERyb3BEb3duTWVudT5cbiAgICA8ZC1kYXRlcGlja2VyLXBhbmVsXG4gICAgICBbaXNSYW5nZVR5cGVdPVwidHJ1ZVwiXG4gICAgICBbc2hvd1RpbWVdPVwic2hvd1RpbWVcIlxuICAgICAgW2N1c3RvbVRlbXBsYXRlXT1cImN1c3RvbVRlbXBsYXRlXCJcbiAgICAgIFtmb290ZXJUZW1wbGF0ZV09XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICBbbW9kZV09XCJtb2RlXCJcbiAgICA+XG4gICAgPC9kLWRhdGVwaWNrZXItcGFuZWw+XG4gIDwvZGl2PlxuPC9kaXY+XG5cbjxuZy10ZW1wbGF0ZSAjbm9ybWFsPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJkZXZ1aS1kYXRlcGlja2VyLXByby13cmFwcGVyIHt7IGNzc0NsYXNzIH19XCJcbiAgICBkRHJvcERvd25cbiAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgIFtpc09wZW5dPVwiaXNPcGVuXCJcbiAgICBbdHJpZ2dlcl09XCInbWFudWFsbHknXCJcbiAgICAodG9nZ2xlRXZlbnQpPVwib25Ub2dnbGUoJGV2ZW50KVwiXG4gICAgKGNsaWNrKT1cIm9wZW5Ecm9wZG93bigkZXZlbnQpXCJcbiAgICBbY2xvc2VTY29wZV09XCInYmxhbmsnXCJcbiAgICBbbmdTdHlsZV09XCJ7IHdpZHRoOiB3aWR0aCB8fCAoc2hvd1RpbWUgPyAnNDAwcHgnIDogJzMwMHB4JykgfVwiXG4gID5cbiAgICA8ZGl2IGREcm9wRG93blRvZ2dsZT5cbiAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJob3N0VGVtcGxhdGUgfHwgZGVmYXVsdFwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IHZhbHVlczogZGF0ZVZhbHVlIH1cIj48L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImRldnVpLWRhdGVwaWNrZXItcHJvLWRyb3Bkb3duLXBhbmVsXCIgW25nU3R5bGVdPVwieyBwYWRkaW5nQm90dG9tOiAhc2hvd1RpbWUgJiYgIWZvb3RlclRlbXBsYXRlID8gMCA6ICc0cHgnIH1cIiBkRHJvcERvd25NZW51PlxuICAgICAgPGQtZGF0ZXBpY2tlci1wYW5lbFxuICAgICAgICBbaXNSYW5nZVR5cGVdPVwidHJ1ZVwiXG4gICAgICAgIFtzaG93VGltZV09XCJzaG93VGltZVwiXG4gICAgICAgIFtjdXN0b21UZW1wbGF0ZV09XCJjdXN0b21UZW1wbGF0ZVwiXG4gICAgICAgIFtmb290ZXJUZW1wbGF0ZV09XCJmb290ZXJUZW1wbGF0ZVwiXG4gICAgICAgIFttb2RlXT1cIm1vZGVcIlxuICAgICAgPlxuICAgICAgPC9kLWRhdGVwaWNrZXItcGFuZWw+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNkZWZhdWx0PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJkZXZ1aS1yYW5nZS1waWNrZXIgZGV2dWktaW5wdXQtZ3JvdXAgZGV2dWktZHJvcGRvd24tb3JpZ2luXCJcbiAgICBbbmdDbGFzc109XCJ7XG4gICAgICAnZGV2dWktZGlzYWJsZWQnOiBkaXNhYmxlZCxcbiAgICAgICdkZXZ1aS1oYXMtdmFsdWUnOiBkYXRlVmFsdWVbMF0gfHwgZGF0ZVZhbHVlWzFdXG4gICAgfVwiXG4gID5cbiAgICA8aSBjbGFzcz1cImRldnVpLXJhbmdlLXBpY2tlci1pY29uXCI+XG4gICAgICA8c3ZnIHdpZHRoPVwiMTZweFwiIGhlaWdodD1cIjE2cHhcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgdmVyc2lvbj1cIjEuMVwiPlxuICAgICAgICA8ZyBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTUsMCBMNSwxIEwxMSwxIEwxMSwwIEwxMiwwIEwxMiwxIEwxNCwxIEMxNS4xMDQ1Njk1LDEgMTYsMS44OTU0MzA1IDE2LDMgTDE2LDE0IEMxNiwxNS4xMDQ1Njk1IDE1LjEwNDU2OTUsMTYgMTQsMTYgTDIsMTYgQzAuODk1NDMwNSwxNiAwLDE1LjEwNDU2OTUgMCwxNCBMMCwzIEMwLDEuODk1NDMwNSAwLjg5NTQzMDUsMSAyLDEgTDQsMSBMNCwwIEw1LDAgWiBNMTUsNSBMMSw1IEwxLDE0IEMxLDE0LjU1MjI4NDcgMS40NDc3MTUyNSwxNSAyLDE1IEwxNCwxNSBDMTQuNTUyMjg0NywxNSAxNSwxNC41NTIyODQ3IDE1LDE0IEwxNSw1IFogTTYsNyBDNi41NTIyODQ3NSw3IDcsNy40NDc3MTUyNSA3LDggTDcsMTAgQzcsMTAuNTUyMjg0NyA2LjU1MjI4NDc1LDExIDYsMTEgTDQsMTEgQzMuNDQ3NzE1MjUsMTEgMywxMC41NTIyODQ3IDMsMTAgTDMsOCBDMyw3LjQ0NzcxNTI1IDMuNDQ3NzE1MjUsNyA0LDcgTDYsNyBaIE02LDggTDQsOCBMNCwxMCBMNiwxMCBMNiw4IFogTTQsMiBMMiwyIEMxLjQ0NzcxNTI1LDIgMSwyLjQ0NzcxNTI1IDEsMyBMMSw0IEwxNSw0IEwxNSwzIEMxNSwyLjQ0NzcxNTI1IDE0LjU1MjI4NDcsMiAxNCwyIEwxMiwyIEwxMiwzIEwxMSwzIEwxMSwyIEw1LDIgTDUsMyBMNCwzIEw0LDIgWlwiXG4gICAgICAgICAgICBmaWxsPVwiI0JBQkJDMFwiXG4gICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgPC9nPlxuICAgICAgPC9zdmc+XG4gICAgPC9pPlxuICAgIDxpbnB1dFxuICAgICAgI2RhdGVJbnB1dFN0YXJ0XG4gICAgICBjbGFzcz1cImRldnVpLWlucHV0IGRldnVpLWZvcm0tY29udHJvbCBkZXZ1aS1kYXRlLXN0YXJ0XCJcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ2RldnVpLWFjdGl2ZS1pbnB1dCc6IGN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0JyAmJiBpc09wZW4gfVwiXG4gICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgW3BsYWNlaG9sZGVyXT1cIihwbGFjZWhvbGRlciAmJiBwbGFjZWhvbGRlclswXSkgfHwgaTE4blRleHQuc3RhcnRQbGFjZWhvbGRlclwiXG4gICAgICBbKG5nTW9kZWwpXT1cImRhdGVWYWx1ZVswXVwiXG4gICAgICAoY2xpY2spPVwiZm9jdXNDaGFuZ2UoJ3N0YXJ0JylcIlxuICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAvPlxuICAgIDxzcGFuPiB7eyBzcGxpdHRlciB9fSA8L3NwYW4+XG4gICAgPGlucHV0XG4gICAgICAjZGF0ZUlucHV0RW5kXG4gICAgICBjbGFzcz1cImRldnVpLWlucHV0IGRldnVpLWZvcm0tY29udHJvbCBkZXZ1aS1kYXRlLWVuZFwiXG4gICAgICBbbmdDbGFzc109XCJ7ICdkZXZ1aS1hY3RpdmUtaW5wdXQnOiBjdXJyZW50QWN0aXZlSW5wdXQgPT09ICdlbmQnICYmIGlzT3BlbiB9XCJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICBbcGxhY2Vob2xkZXJdPVwiKHBsYWNlaG9sZGVyICYmIHBsYWNlaG9sZGVyWzFdKSB8fCBpMThuVGV4dC5lbmRQbGFjZWhvbGRlclwiXG4gICAgICBbKG5nTW9kZWwpXT1cImRhdGVWYWx1ZVsxXVwiXG4gICAgICAoY2xpY2spPVwiZm9jdXNDaGFuZ2UoJ2VuZCcpXCJcbiAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgLz5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImRldnVpLWRhdGUtaW5wdXQtYWN0aXZlLWJhclwiXG4gICAgICAqbmdJZj1cImlzT3BlblwiXG4gICAgICBbc3R5bGUud2lkdGgucHhdPVwic3RyV2lkdGhcIlxuICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAnZGV2dWktc3RhcnQtc2lkZSc6IGN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0JyxcbiAgICAgICAgJ2RldnVpLWVuZC1zaWRlJzogY3VycmVudEFjdGl2ZUlucHV0ID09PSAnZW5kJ1xuICAgICAgfVwiXG4gICAgPjwvZGl2PlxuICAgIDxkaXYgKm5nSWY9XCJhbGxvd0NsZWFyXCIgY2xhc3M9XCJkZXZ1aS1pbnB1dC1ncm91cC1hZGRvbiBjbG9zZS1pY29uLXdyYXBwZXJcIiAoY2xpY2spPVwiY2xlYXIoJGV2ZW50LCB0cnVlKVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNsb3NlLWljb25cIj5cbiAgICAgICAgPHN2Z1xuICAgICAgICAgIHdpZHRoPVwiMTZweFwiXG4gICAgICAgICAgaGVpZ2h0PVwiMTZweFwiXG4gICAgICAgICAgdmlld0JveD1cIjAgMCAxNiAxNlwiXG4gICAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBkPVwiTTgsMSBDMTEuODY1OTkzMiwxIDE1LDQuMTM0MDA2NzUgMTUsOCBDMTUsMTEuODY1OTkzMiAxMS44NjU5OTMyLDE1IDgsMTUgQzQuMTM0MDA2NzUsMTUgMSwxMS44NjU5OTMyIDEsOCBDMSw0LjEzNDAwNjc1IDQuMTM0MDA2NzUsMSA4LDEgWiBNNS44Nzg2Nzk2Niw1LjE3MTU3Mjg4IEM1LjY4MzQxNzUxLDQuOTc2MzEwNzMgNS4zNjY4MzUwMiw0Ljk3NjMxMDczIDUuMTcxNTcyODgsNS4xNzE1NzI4OCBDNC45OTgwMDY1Miw1LjM0NTEzOTIzIDQuOTc4NzIxMzcsNS42MTQ1NjM2MyA1LjExMzcxNzQyLDUuODA5NDMxNzcgTDUuMTcxNTcyODgsNS44Nzg2Nzk2NiBMNy4yOTIxODYxMSw3Ljk5OTI5Mjg5IEw1LjE3MTU3Mjg4LDEwLjEyMTMyMDMgQzQuOTc2MzEwNzMsMTAuMzE2NTgyNSA0Ljk3NjMxMDczLDEwLjYzMzE2NSA1LjE3MTU3Mjg4LDEwLjgyODQyNzEgQzUuMzQ1MTM5MjMsMTEuMDAxOTkzNSA1LjYxNDU2MzYzLDExLjAyMTI3ODYgNS44MDk0MzE3NywxMC44ODYyODI2IEw1Ljg3ODY3OTY2LDEwLjgyODQyNzEgTDcuOTk5MjkyODksOC43MDYzOTk2NyBMMTAuMTIxMzIwMywxMC44Mjg0MjcxIEMxMC4zMTY1ODI1LDExLjAyMzY4OTMgMTAuNjMzMTY1LDExLjAyMzY4OTMgMTAuODI4NDI3MSwxMC44Mjg0MjcxIEMxMS4wMDE5OTM1LDEwLjY1NDg2MDggMTEuMDIxMjc4NiwxMC4zODU0MzY0IDEwLjg4NjI4MjYsMTAuMTkwNTY4MiBMMTAuODI4NDI3MSwxMC4xMjEzMjAzIEw4LjcwNzEwNjc4LDggTDEwLjgyODQyNzEsNS44Nzg2Nzk2NiBDMTEuMDIzNjg5Myw1LjY4MzQxNzUxIDExLjAyMzY4OTMsNS4zNjY4MzUwMiAxMC44Mjg0MjcxLDUuMTcxNTcyODggQzEwLjY1NDg2MDgsNC45OTgwMDY1MiAxMC4zODU0MzY0LDQuOTc4NzIxMzcgMTAuMTkwNTY4Miw1LjExMzcxNzQyIEwxMC4xMjEzMjAzLDUuMTcxNTcyODggTDgsNy4yOTI4OTMyMiBMNS44Nzg2Nzk2Niw1LjE3MTU3Mjg4IFpcIlxuICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgPC9nPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=