import { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, ViewChild } from '@angular/core';
import { I18nService } from 'ng-devui/i18n';
import { fromEvent, Subject } from 'rxjs';
import { debounceTime, takeUntil } from 'rxjs/operators';
import { DatepickerProService } from './../datepicker-pro.service';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "./../datepicker-pro.service";
import * as i3 from "@angular/cdk/scrolling";
import * as i4 from "@angular/common";
export class MonthPanelComponent {
    constructor(i18n, pickerSrv, cdr) {
        this.i18n = i18n;
        this.pickerSrv = pickerSrv;
        this.cdr = cdr;
        this.isRangeType = false;
        this.unsubscribe$ = new Subject();
        this.yearList = [];
        this.calenderItemSize = 186;
        this.monthList = [
            [1, 2, 3],
            [4, 5, 6],
            [7, 8, 9],
            [10, 11, 12]
        ];
    }
    get curHoverDate() {
        return this.pickerSrv.curHoverDate;
    }
    set curHoverDate(value) {
        this.pickerSrv.curHoverDate = value;
    }
    get selectedRangeDate() {
        return this.pickerSrv.curRangeDate;
    }
    set selectedRangeDate(dateList) {
        this.pickerSrv.curRangeDate = dateList;
    }
    get currentDate() {
        if (this.isRangeType) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                return this.pickerSrv.curRangeDate[0];
            }
            else if (this.pickerSrv.currentActiveInput === 'end') {
                return this.pickerSrv.curRangeDate[1];
            }
        }
        else {
            return this.pickerSrv.curDate;
        }
    }
    set currentDate(value) {
        if (this.isRangeType) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                this.pickerSrv.curRangeDate[0] = value;
            }
            else if (this.pickerSrv.currentActiveInput === 'end') {
                this.pickerSrv.curRangeDate[1] = value;
            }
        }
        else {
            this.pickerSrv.curDate = value;
        }
    }
    ngOnInit() {
        this.thisMonth = new Date();
        this.initList();
        this.initObservable();
        this.setI18nText();
    }
    setI18nText() {
        this.i18nText = this.i18n.getI18nText().datePickerPro;
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nText = data.datePickerPro;
            this.cdr.detectChanges();
        });
    }
    initObservable() {
        this.pickerSrv.toggleEvent.pipe(takeUntil(this.unsubscribe$)).subscribe(isOpen => {
            if (isOpen) {
                setTimeout(() => {
                    this.goToDate(this.currentDate || new Date());
                });
            }
            if (!this.scrollListener) {
                this.initScrollListener();
            }
        });
        this.pickerSrv.updateDateValue.pipe(takeUntil(this.unsubscribe$)).subscribe(res => {
            if (res.type === 'range') {
                this.pickerSrv.curRangeDate = res.value;
            }
            else {
                this.pickerSrv.curDate = res.value;
            }
            this.goToDate(this.currentDate || new Date());
            this.cdr.detectChanges();
        });
        this.pickerSrv.activeInputChange.pipe(takeUntil(this.unsubscribe$)).subscribe(type => {
            if (type === 'start') {
                this.goToDate(this.selectedRangeDate[0] || this.selectedRangeDate[1] || new Date());
            }
            else {
                this.goToDate(this.selectedRangeDate[1] || this.selectedRangeDate[0] || new Date());
            }
        });
    }
    initList() {
        for (let yearIndex = this.pickerSrv.calendarRange[0]; yearIndex <= this.pickerSrv.calendarRange[1]; yearIndex++) {
            this.yearList.push({
                year: yearIndex,
                active: false
            });
        }
    }
    initScrollListener() {
        const scrollEle = this.scrollBodyCmp.getElementRef().nativeElement;
        this.scrollListener = fromEvent(scrollEle, 'mousewheel').pipe(takeUntil(this.unsubscribe$), debounceTime(180) // 滚动动画时间180，延时保证计算位置的准确
        ).subscribe(() => {
            const offsetY = this.scrollBodyCmp.measureScrollOffset();
            // 当面板滚过一半更新面板
            this.currentBodyIndex = Math.floor(offsetY / this.calenderItemSize) + (offsetY % this.calenderItemSize > 100 ? 1 : 0);
            this.goToListByIndex(this.currentBodyIndex);
            this.cdr.detectChanges();
        });
    }
    goToDate(date, scrollBehavior = 'auto') {
        if (date) {
            const index = date.getFullYear() - this.pickerSrv.calendarRange[0];
            this.currentBodyIndex = index;
            this.scrollBodyCmp.scrollToIndex(index, scrollBehavior);
            this.goToListByIndex(index);
        }
    }
    goToListByIndex(index) {
        const indexDelta = Math.abs(this.scrollListCmp.measureScrollOffset() / 30 - index);
        this.scrollListCmp.scrollToIndex(index - 4, indexDelta < 12 ? 'smooth' : 'auto');
    }
    selectMonth(yearIndex, monthIndex) {
        if (this.isDisable(yearIndex, monthIndex)) {
            return;
        }
        this.currentDate = new Date(yearIndex, monthIndex - 1, 1);
        if (this.isRangeType) {
            this.pickerSrv.fixRangeDate();
        }
        // 非时间模式下选完开始日期跳转到结束日期
        if (this.isRangeType) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                this.pickerSrv.currentActiveInput = 'end';
            }
            else if (this.pickerSrv.currentActiveInput === 'end' && !this.selectedRangeDate[0]) {
                this.pickerSrv.currentActiveInput = 'start';
            }
            else {
                this.pickerSrv.closeDropdownEvent.next();
            }
        }
        this.pickerSrv.selectedDateChange.next({
            type: this.isRangeType ? 'range' : 'single',
            value: this.isRangeType ? this.selectedRangeDate : this.currentDate
        });
        if (this.pickerSrv.closeAfterSelected) {
            this.pickerSrv.closeDropdownEvent.next();
        }
    }
    selectYear(yearIndex) {
        const isScroll = (yearIndex - this.pickerSrv.calendarRange[0]) - this.currentBodyIndex < 7;
        this.goToDate(new Date(yearIndex, 0, 1), isScroll ? 'smooth' : 'auto');
    }
    isSelected(yearIndex, monthIndex) {
        return this.pickerSrv.isMonthActive(yearIndex, monthIndex - 1);
    }
    isThisMonth(yearIndex, monthIndex) {
        return this.thisMonth.getFullYear() === yearIndex && this.thisMonth.getMonth() === monthIndex - 1;
    }
    isDateInRange(yearIndex, monthIndex) {
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isDateInRange(date);
    }
    isDisable(yearIndex, monthIndex) {
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.maxDate.getTime() < date.getTime() || this.pickerSrv.minDate.getTime() > date.getTime();
    }
    isStartDate(yearIndex, monthIndex) {
        if (!this.isRangeType) {
            return false;
        }
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isStartDate(date);
    }
    isEndDate(yearIndex, monthIndex) {
        if (!this.isRangeType) {
            return false;
        }
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isEndDate(date);
    }
    isDateAbandon(yearIndex, monthIndex) {
        if (!this.isRangeType || (!this.selectedRangeDate[0] || !this.selectedRangeDate[1])) {
            return false;
        }
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isDateAbandon(date);
    }
    isDateInSelectRange(yearIndex, monthIndex) {
        if (!this.isRangeType) {
            return false;
        }
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isDateInSelectRange(date);
    }
    isActiveTypeDate(yearIndex, monthIndex) {
        if (!this.isRangeType) {
            return false;
        }
        const date = new Date(yearIndex, monthIndex - 1, 1);
        return this.pickerSrv.isActiveInputTypeDate(date);
    }
    setHoverTarget(yearIndex, monthIndex) {
        const date = new Date(yearIndex, monthIndex - 1, 1);
        if (this.isRangeType && !this.isDisable(yearIndex, monthIndex)) {
            this.curHoverDate = date;
        }
    }
    ngOnDestroy() {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    }
}
MonthPanelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: MonthPanelComponent, deps: [{ token: i1.I18nService }, { token: i2.DatepickerProService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
MonthPanelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: MonthPanelComponent, selector: "d-month-panel", inputs: { isRangeType: "isRangeType" }, viewQueries: [{ propertyName: "scrollBodyCmp", first: true, predicate: ["scrollBody"], descendants: true }, { propertyName: "scrollListCmp", first: true, predicate: ["scrollList"], descendants: true }], ngImport: i0, template: "<div class=\"devui-month-panel\">\n  <cdk-virtual-scroll-viewport #scrollList [itemSize]=\"30\" class=\"devui-year-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n    <div\n      class=\"devui-year-list-item\"\n      [ngClass]=\"{ 'title-active': index === currentBodyIndex }\"\n      *cdkVirtualFor=\"let year of yearList; let index = index\"\n      (click)=\"selectYear(year.year)\"\n    >\n      <p class=\"devui-year-title\">{{ year.year }}</p>\n    </div>\n  </cdk-virtual-scroll-viewport>\n  <div class=\"devui-month-list-wrapper\">\n    <cdk-virtual-scroll-viewport #scrollBody [itemSize]=\"calenderItemSize\" class=\"devui-month-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n      <div *cdkVirtualFor=\"let year of yearList; let index = index\">\n        <p class=\"devui-table-year-title\">{{ year.year + '\u5E74' }}</p>\n        <table\n          class=\"devui-month-table\"\n          [ngClass]=\"{ 'devui-active-month': index === currentBodyIndex }\"\n          (mouseleave)=\"curHoverDate = null\"\n        >\n          <tbody>\n            <tr *ngFor=\"let season of monthList\">\n              <td\n                *ngFor=\"let month of season\"\n                class=\"devui-month-item\"\n                [ngClass]=\"{\n                  'devui-table-month-selected': isSelected(year.year, month),\n                  'devui-table-this-month': isThisMonth(year.year, month),\n                  'devui-table-date-inrange': isDateInRange(year.year, month),\n                  'devui-table-date-start': isStartDate(year.year, month),\n                  'devui-table-date-end': isEndDate(year.year, month),\n                  'devui-table-date-abandon-selected': isDateAbandon(year.year, month),\n                  'devui-table-date-in-selected-range': isDateInSelectRange(year.year, month),\n                  'devui-table-date-active-type': isActiveTypeDate(year.year, month)\n                }\"\n              >\n                <span\n                  (mouseenter)=\"setHoverTarget(year.year, month)\"\n                  [ngClass]=\"{ 'devui-disabled': isDisable(year.year, month) }\"\n                  (click)=\"selectMonth(year.year, month)\"\n                >\n                  {{ i18nText.monthsOfYear[month - 1] }}\n                </span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </div>\n</div>\n", styles: [".devui-month-panel{height:300px;font-size:0}.devui-month-panel .devui-year-list{padding:8px 0;display:inline-block;width:80px;height:300px;overflow:auto;text-align:center;font-size:12px;scrollbar-width:none}.devui-month-panel .devui-year-list::-webkit-scrollbar{width:0!important}.devui-month-panel .devui-year-list-item{height:30px;line-height:30px;background-color:#f8f8fa;background-color:var(--devui-global-bg, #f8f8fa);cursor:pointer}.devui-month-panel .devui-year-list-item.title-active{background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-month-panel .devui-year-list-item:hover:not(.title-active){background-color:#f2f5fc;background-color:var(--devui-list-item-selected-bg, #f2f5fc)}.devui-month-panel .devui-month-list-wrapper{padding:0 4px;display:inline-block}.devui-month-panel .devui-month-list{width:180px;height:295px;font-size:12px;scrollbar-width:none}.devui-month-panel .devui-month-list::-webkit-scrollbar{width:0!important}.devui-month-panel .devui-month-list .devui-table-year-title{text-align:start;line-height:26px;color:#71757f;color:var(--devui-aide-text, #71757f);padding-left:8px}.devui-month-panel .devui-month-list .devui-month-table{border-collapse:collapse}.devui-month-panel .devui-month-list .devui-month-item{width:60px;height:40px;padding:4px 0;box-sizing:border-box;text-align:center;cursor:pointer}.devui-month-panel .devui-month-list .devui-month-item:hover span:not(.devui-disabled){background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-panel .devui-month-list .devui-month-item span{display:block;line-height:32px;border-radius:4px;border-radius:var(--devui-border-radius-feedback, 4px)}.devui-month-panel .devui-month-list .devui-month-item span.devui-disabled{border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-this-month span{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected span{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected span:hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected.devui-table-date-abandon-selected span{background:#beccfa;background:var(--devui-primary-disabled, #beccfa)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-inrange:not(.devui-table-month-selected) span{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-start:not(.devui-table-date-end) span{border-radius:4px 0 0 4px;border-radius:var(--devui-border-radius-feedback, 4px) 0 0 var(--devui-border-radius-feedback, 4px)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-end:not(.devui-table-date-start) span{border-radius:0 4px 4px 0;border-radius:0 var(--devui-border-radius-feedback, 4px) var(--devui-border-radius-feedback, 4px) 0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-in-selected-range:not(.devui-table-date-inrange):not(:hover) span{background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-active-type:not(.devui-table-date-abandon-selected) span{-webkit-animation:2s ease 0s infinite normal both breath-animation;animation:2s ease 0s infinite normal both breath-animation}@-webkit-keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}@keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}\n"], components: [{ type: i3.CdkVirtualScrollViewport, selector: "cdk-virtual-scroll-viewport", inputs: ["orientation", "appendOnly"], outputs: ["scrolledIndexChange"] }], directives: [{ type: i3.CdkFixedSizeVirtualScroll, selector: "cdk-virtual-scroll-viewport[itemSize]", inputs: ["itemSize", "minBufferPx", "maxBufferPx"] }, { type: i3.CdkVirtualForOf, selector: "[cdkVirtualFor][cdkVirtualForOf]", inputs: ["cdkVirtualForOf", "cdkVirtualForTrackBy", "cdkVirtualForTemplate", "cdkVirtualForTemplateCacheSize"] }, { type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: MonthPanelComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-month-panel', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"devui-month-panel\">\n  <cdk-virtual-scroll-viewport #scrollList [itemSize]=\"30\" class=\"devui-year-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n    <div\n      class=\"devui-year-list-item\"\n      [ngClass]=\"{ 'title-active': index === currentBodyIndex }\"\n      *cdkVirtualFor=\"let year of yearList; let index = index\"\n      (click)=\"selectYear(year.year)\"\n    >\n      <p class=\"devui-year-title\">{{ year.year }}</p>\n    </div>\n  </cdk-virtual-scroll-viewport>\n  <div class=\"devui-month-list-wrapper\">\n    <cdk-virtual-scroll-viewport #scrollBody [itemSize]=\"calenderItemSize\" class=\"devui-month-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n      <div *cdkVirtualFor=\"let year of yearList; let index = index\">\n        <p class=\"devui-table-year-title\">{{ year.year + '\u5E74' }}</p>\n        <table\n          class=\"devui-month-table\"\n          [ngClass]=\"{ 'devui-active-month': index === currentBodyIndex }\"\n          (mouseleave)=\"curHoverDate = null\"\n        >\n          <tbody>\n            <tr *ngFor=\"let season of monthList\">\n              <td\n                *ngFor=\"let month of season\"\n                class=\"devui-month-item\"\n                [ngClass]=\"{\n                  'devui-table-month-selected': isSelected(year.year, month),\n                  'devui-table-this-month': isThisMonth(year.year, month),\n                  'devui-table-date-inrange': isDateInRange(year.year, month),\n                  'devui-table-date-start': isStartDate(year.year, month),\n                  'devui-table-date-end': isEndDate(year.year, month),\n                  'devui-table-date-abandon-selected': isDateAbandon(year.year, month),\n                  'devui-table-date-in-selected-range': isDateInSelectRange(year.year, month),\n                  'devui-table-date-active-type': isActiveTypeDate(year.year, month)\n                }\"\n              >\n                <span\n                  (mouseenter)=\"setHoverTarget(year.year, month)\"\n                  [ngClass]=\"{ 'devui-disabled': isDisable(year.year, month) }\"\n                  (click)=\"selectMonth(year.year, month)\"\n                >\n                  {{ i18nText.monthsOfYear[month - 1] }}\n                </span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </div>\n</div>\n", styles: [".devui-month-panel{height:300px;font-size:0}.devui-month-panel .devui-year-list{padding:8px 0;display:inline-block;width:80px;height:300px;overflow:auto;text-align:center;font-size:12px;scrollbar-width:none}.devui-month-panel .devui-year-list::-webkit-scrollbar{width:0!important}.devui-month-panel .devui-year-list-item{height:30px;line-height:30px;background-color:#f8f8fa;background-color:var(--devui-global-bg, #f8f8fa);cursor:pointer}.devui-month-panel .devui-year-list-item.title-active{background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-month-panel .devui-year-list-item:hover:not(.title-active){background-color:#f2f5fc;background-color:var(--devui-list-item-selected-bg, #f2f5fc)}.devui-month-panel .devui-month-list-wrapper{padding:0 4px;display:inline-block}.devui-month-panel .devui-month-list{width:180px;height:295px;font-size:12px;scrollbar-width:none}.devui-month-panel .devui-month-list::-webkit-scrollbar{width:0!important}.devui-month-panel .devui-month-list .devui-table-year-title{text-align:start;line-height:26px;color:#71757f;color:var(--devui-aide-text, #71757f);padding-left:8px}.devui-month-panel .devui-month-list .devui-month-table{border-collapse:collapse}.devui-month-panel .devui-month-list .devui-month-item{width:60px;height:40px;padding:4px 0;box-sizing:border-box;text-align:center;cursor:pointer}.devui-month-panel .devui-month-list .devui-month-item:hover span:not(.devui-disabled){background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-panel .devui-month-list .devui-month-item span{display:block;line-height:32px;border-radius:4px;border-radius:var(--devui-border-radius-feedback, 4px)}.devui-month-panel .devui-month-list .devui-month-item span.devui-disabled{border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-this-month span{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected span{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected span:hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-month-selected.devui-table-date-abandon-selected span{background:#beccfa;background:var(--devui-primary-disabled, #beccfa)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-inrange:not(.devui-table-month-selected) span{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-start:not(.devui-table-date-end) span{border-radius:4px 0 0 4px;border-radius:var(--devui-border-radius-feedback, 4px) 0 0 var(--devui-border-radius-feedback, 4px)}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-end:not(.devui-table-date-start) span{border-radius:0 4px 4px 0;border-radius:0 var(--devui-border-radius-feedback, 4px) var(--devui-border-radius-feedback, 4px) 0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-in-selected-range:not(.devui-table-date-inrange):not(:hover) span{background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);border-radius:0}.devui-month-panel .devui-month-list .devui-month-item.devui-table-date-active-type:not(.devui-table-date-abandon-selected) span{-webkit-animation:2s ease 0s infinite normal both breath-animation;animation:2s ease 0s infinite normal both breath-animation}@-webkit-keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}@keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.I18nService }, { type: i2.DatepickerProService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { scrollBodyCmp: [{
                type: ViewChild,
                args: ['scrollBody']
            }], scrollListCmp: [{
                type: ViewChild,
                args: ['scrollList']
            }], isRangeType: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9udGgtcGFuZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vZGV2dWkvZGF0ZXBpY2tlci1wcm8vbGliL21vbnRoLXBhbmVsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL2RldnVpL2RhdGVwaWNrZXItcHJvL2xpYi9tb250aC1wYW5lbC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNsRSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsS0FBSyxFQUdMLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQWlCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDeEQsT0FBTyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQzs7Ozs7O0FBU25FLE1BQU0sT0FBTyxtQkFBbUI7SUE2RDlCLFlBQ1ksSUFBaUIsRUFDbkIsU0FBK0IsRUFDL0IsR0FBc0I7UUFGcEIsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUNuQixjQUFTLEdBQVQsU0FBUyxDQUFzQjtRQUMvQixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQTdEdkIsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFFN0IsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBSzdCLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDZCxxQkFBZ0IsR0FBRyxHQUFHLENBQUM7UUFFdkIsY0FBUyxHQUFHO1lBQ1YsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNULENBQUMsQ0FBQyxFQUFFLENBQUMs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ZW50IjpbImltcG9ydCB7IENka1ZpcnR1YWxTY3JvbGxWaWV3cG9ydCB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9zY3JvbGxpbmcnO1xuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSTE4bkludGVyZmFjZSwgSTE4blNlcnZpY2UgfSBmcm9tICduZy1kZXZ1aS9pMThuJztcbmltcG9ydCB7IGZyb21FdmVudCwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IERhdGVwaWNrZXJQcm9TZXJ2aWNlIH0gZnJvbSAnLi8uLi9kYXRlcGlja2VyLXByby5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZC1tb250aC1wYW5lbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9tb250aC1wYW5lbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL21vbnRoLXBhbmVsLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBNb250aFBhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBAVmlld0NoaWxkKCdzY3JvbGxCb2R5Jykgc2Nyb2xsQm9keUNtcDogQ2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0O1xuICBAVmlld0NoaWxkKCdzY3JvbGxMaXN0Jykgc2Nyb2xsTGlzdENtcDogQ2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0O1xuICBASW5wdXQoKSBpc1JhbmdlVHlwZSA9IGZhbHNlO1xuXG4gIHVuc3Vic2NyaWJlJCA9IG5ldyBTdWJqZWN0KCk7XG4gIHNjcm9sbExpc3RlbmVyOiBTdWJzY3JpcHRpb247XG4gIGkxOG5UZXh0OiBJMThuSW50ZXJmYWNlWydkYXRlUGlja2VyUHJvJ107XG4gIGkxOG5TdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICB5ZWFyTGlzdCA9IFtdO1xuICBjYWxlbmRlckl0ZW1TaXplID0gMTg2O1xuICBjdXJyZW50Qm9keUluZGV4O1xuICBtb250aExpc3QgPSBbXG4gICAgWzEsIDIsIDNdLFxuICAgIFs0LCA1LCA2XSxcbiAgICBbNywgOCwgOV0sXG4gICAgWzEwLCAxMSwgMTJdXG4gIF07XG4gIHRoaXNNb250aDogRGF0ZTtcblxuICBnZXQgY3VySG92ZXJEYXRlKCkge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5jdXJIb3ZlckRhdGU7XG4gIH1cblxuICBzZXQgY3VySG92ZXJEYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgdGhpcy5waWNrZXJTcnYuY3VySG92ZXJEYXRlID0gdmFsdWU7XG4gIH1cblxuICBnZXQgc2VsZWN0ZWRSYW5nZURhdGUoKTogRGF0ZVtdIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlO1xuICB9XG5cbiAgc2V0IHNlbGVjdGVkUmFuZ2VEYXRlKGRhdGVMaXN0OiBEYXRlW10pIHtcbiAgICB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGUgPSBkYXRlTGlzdDtcbiAgfVxuXG4gIGdldCBjdXJyZW50RGF0ZSgpOiBEYXRlIHtcbiAgICBpZiAodGhpcy5pc1JhbmdlVHlwZSkge1xuICAgICAgaWYgKHRoaXMucGlja2VyU3J2LmN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzBdO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdlbmQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5jdXJEYXRlO1xuICAgIH1cbiAgfVxuXG4gIHNldCBjdXJyZW50RGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgIGlmICh0aGlzLmlzUmFuZ2VUeXBlKSB7XG4gICAgICBpZiAodGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdlbmQnKSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBpY2tlclNydi5jdXJEYXRlID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGkxOG46IEkxOG5TZXJ2aWNlLFxuICAgIHByaXZhdGUgcGlja2VyU3J2OiBEYXRlcGlja2VyUHJvU2VydmljZSxcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudGhpc01vbnRoID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmluaXRMaXN0KCk7XG4gICAgdGhpcy5pbml0T2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuc2V0STE4blRleHQoKTtcbiAgfVxuXG4gIHNldEkxOG5UZXh0KCkge1xuICAgIHRoaXMuaTE4blRleHQgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5kYXRlUGlja2VyUHJvO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5UZXh0ID0gZGF0YS5kYXRlUGlja2VyUHJvO1xuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdE9ic2VydmFibGUoKSB7XG4gICAgdGhpcy5waWNrZXJTcnYudG9nZ2xlRXZlbnQucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCksXG4gICAgKS5zdWJzY3JpYmUoaXNPcGVuID0+IHtcbiAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5nb1RvRGF0ZSh0aGlzLmN1cnJlbnREYXRlIHx8IG5ldyBEYXRlKCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5zY3JvbGxMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmluaXRTY3JvbGxMaXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5waWNrZXJTcnYudXBkYXRlRGF0ZVZhbHVlLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICBpZiAocmVzLnR5cGUgPT09ICdyYW5nZScpIHtcbiAgICAgICAgdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlID0gcmVzLnZhbHVlIGFzIERhdGVbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1ckRhdGUgPSByZXMudmFsdWUgYXMgRGF0ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ29Ub0RhdGUodGhpcy5jdXJyZW50RGF0ZSB8fCBuZXcgRGF0ZSgpKTtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGlja2VyU3J2LmFjdGl2ZUlucHV0Q2hhbmdlLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpXG4gICAgKS5zdWJzY3JpYmUodHlwZSA9PiB7XG4gICAgICBpZiAodHlwZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICB0aGlzLmdvVG9EYXRlKHRoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMF0gfHwgdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVsxXSB8fCBuZXcgRGF0ZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ29Ub0RhdGUodGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVsxXSB8fCB0aGlzLnNlbGVjdGVkUmFuZ2VEYXRlWzBdIHx8IG5ldyBEYXRlKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaW5pdExpc3QoKSB7XG4gICAgZm9yIChsZXQgeWVhckluZGV4ID0gdGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZVswXTsgeWVhckluZGV4IDw9IHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMV07IHllYXJJbmRleCsrKSB7XG4gICAgICB0aGlzLnllYXJMaXN0LnB1c2goe1xuICAgICAgICB5ZWFyOiB5ZWFySW5kZXgsXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGluaXRTY3JvbGxMaXN0ZW5lcigpIHtcbiAgICBjb25zdCBzY3JvbGxFbGUgPSB0aGlzLnNjcm9sbEJvZHlDbXAuZ2V0RWxlbWVudFJlZigpLm5hdGl2ZUVsZW1lbnQ7XG4gICAgdGhpcy5zY3JvbGxMaXN0ZW5lciA9IGZyb21FdmVudChzY3JvbGxFbGUsICdtb3VzZXdoZWVsJykucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCksXG4gICAgICBkZWJvdW5jZVRpbWUoMTgwKSAvLyDmu5rliqjliqjnlLvml7bpl7QxODDvvIzlu7bml7bkv53or4HorqHnrpfkvY3nva7nmoTlh4bnoa5cbiAgICApLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBjb25zdCBvZmZzZXRZID0gdGhpcy5zY3JvbGxCb2R5Q21wLm1lYXN1cmVTY3JvbGxPZmZzZXQoKTtcbiAgICAgIC8vIOW9k+mdouadv+a7mui/h+S4gOWNiuabtOaWsOmdouadv1xuICAgICAgdGhpcy5jdXJyZW50Qm9keUluZGV4ID0gTWF0aC5mbG9vcihvZmZzZXRZIC8gdGhpcy5jYWxlbmRlckl0ZW1TaXplKSArIChvZmZzZXRZICUgdGhpcy5jYWxlbmRlckl0ZW1TaXplID4gMTAwID8gMSA6IDApO1xuICAgICAgdGhpcy5nb1RvTGlzdEJ5SW5kZXgodGhpcy5jdXJyZW50Qm9keUluZGV4KTtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdvVG9EYXRlKGRhdGU6IERhdGUsIHNjcm9sbEJlaGF2aW9yOiAnYXV0bycgfCAnc21vb3RoJyA9ICdhdXRvJykge1xuICAgIGlmIChkYXRlKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGRhdGUuZ2V0RnVsbFllYXIoKSAtIHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMF07XG4gICAgICB0aGlzLmN1cnJlbnRCb2R5SW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMuc2Nyb2xsQm9keUNtcC5zY3JvbGxUb0luZGV4KGluZGV4LCBzY3JvbGxCZWhhdmlvcik7XG4gICAgICB0aGlzLmdvVG9MaXN0QnlJbmRleChpbmRleCk7XG4gICAgfVxuICB9XG5cbiAgZ29Ub0xpc3RCeUluZGV4KGluZGV4KSB7XG4gICAgY29uc3QgaW5kZXhEZWx0YSA9IE1hdGguYWJzKHRoaXMuc2Nyb2xsTGlzdENtcC5tZWFzdXJlU2Nyb2xsT2Zmc2V0KCkgLyAzMCAtIGluZGV4KTtcbiAgICB0aGlzLnNjcm9sbExpc3RDbXAuc2Nyb2xsVG9JbmRleChpbmRleCAtIDQsIGluZGV4RGVsdGEgPCAxMiA/ICdzbW9vdGgnIDogJ2F1dG8nKTtcbiAgfVxuXG4gIHNlbGVjdE1vbnRoKHllYXJJbmRleDogbnVtYmVyLCBtb250aEluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5pc0Rpc2FibGUoeWVhckluZGV4LCBtb250aEluZGV4KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnREYXRlID0gbmV3IERhdGUoeWVhckluZGV4LCBtb250aEluZGV4IC0gMSwgMSk7XG5cbiAgICBpZiAodGhpcy5pc1JhbmdlVHlwZSkge1xuICAgICAgdGhpcy5waWNrZXJTcnYuZml4UmFuZ2VEYXRlKCk7XG4gICAgfVxuXG4gICAgLy8g6Z2e5pe26Ze05qih5byP5LiL6YCJ5a6M5byA5aeL5pel5pyf6Lez6L2s5Yiw57uT5p2f5pel5pyfXG4gICAgaWYgKHRoaXMuaXNSYW5nZVR5cGUpIHtcbiAgICAgIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdzdGFydCcpIHtcbiAgICAgICAgdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID0gJ2VuZCc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucGlja2VyU3J2LmN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ2VuZCcgJiYgIXRoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMF0pIHtcbiAgICAgICAgdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID0gJ3N0YXJ0JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmNsb3NlRHJvcGRvd25FdmVudC5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5waWNrZXJTcnYuc2VsZWN0ZWREYXRlQ2hhbmdlLm5leHQoe1xuICAgICAgdHlwZTogdGhpcy5pc1JhbmdlVHlwZSA/ICdyYW5nZScgOiAnc2luZ2xlJyxcbiAgICAgIHZhbHVlOiB0aGlzLmlzUmFuZ2VUeXBlID8gdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZSA6IHRoaXMuY3VycmVudERhdGVcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnBpY2tlclNydi5jbG9zZUFmdGVyU2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMucGlja2VyU3J2LmNsb3NlRHJvcGRvd25FdmVudC5uZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgc2VsZWN0WWVhcih5ZWFySW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGlzU2Nyb2xsID0gKHllYXJJbmRleCAtIHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMF0pIC0gdGhpcy5jdXJyZW50Qm9keUluZGV4IDwgNztcbiAgICB0aGlzLmdvVG9EYXRlKG5ldyBEYXRlKHllYXJJbmRleCwgMCwgMSksIGlzU2Nyb2xsID8gJ3Ntb290aCcgOiAnYXV0bycpO1xuICB9XG5cbiAgaXNTZWxlY3RlZCh5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmlzTW9udGhBY3RpdmUoeWVhckluZGV4LCBtb250aEluZGV4IC0gMSk7XG4gIH1cblxuICBpc1RoaXNNb250aCh5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMudGhpc01vbnRoLmdldEZ1bGxZZWFyKCkgPT09IHllYXJJbmRleCAmJiB0aGlzLnRoaXNNb250aC5nZXRNb250aCgpID09PSBtb250aEluZGV4IC0gMTtcbiAgfVxuXG4gIGlzRGF0ZUluUmFuZ2UoeWVhckluZGV4OiBudW1iZXIsIG1vbnRoSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFySW5kZXgsIG1vbnRoSW5kZXggLSAxLCAxKTtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNEYXRlSW5SYW5nZShkYXRlKTtcbiAgfVxuXG4gIGlzRGlzYWJsZSh5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXJJbmRleCwgbW9udGhJbmRleCAtIDEsIDEpO1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5tYXhEYXRlLmdldFRpbWUoKSA8ICBkYXRlLmdldFRpbWUoKSB8fCB0aGlzLnBpY2tlclNydi5taW5EYXRlLmdldFRpbWUoKSA+ICBkYXRlLmdldFRpbWUoKTtcbiAgfVxuXG4gIGlzU3RhcnREYXRlKHllYXJJbmRleDogbnVtYmVyLCBtb250aEluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaXNSYW5nZVR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXJJbmRleCwgbW9udGhJbmRleCAtIDEsIDEpO1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5pc1N0YXJ0RGF0ZShkYXRlKTtcbiAgfVxuXG4gIGlzRW5kRGF0ZSh5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmlzUmFuZ2VUeXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFySW5kZXgsIG1vbnRoSW5kZXggLSAxLCAxKTtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNFbmREYXRlKGRhdGUpO1xuICB9XG5cbiAgaXNEYXRlQWJhbmRvbih5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmlzUmFuZ2VUeXBlIHx8ICghdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVswXSB8fCAhdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVsxXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXJJbmRleCwgbW9udGhJbmRleCAtIDEsIDEpO1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5pc0RhdGVBYmFuZG9uKGRhdGUpO1xuICB9XG5cbiAgaXNEYXRlSW5TZWxlY3RSYW5nZSh5ZWFySW5kZXg6IG51bWJlciwgbW9udGhJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmlzUmFuZ2VUeXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXJJbmRleCwgbW9udGhJbmRleCAtIDEsIDEpO1xuXG4gICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmlzRGF0ZUluU2VsZWN0UmFuZ2UoZGF0ZSk7XG4gIH1cblxuICBpc0FjdGl2ZVR5cGVEYXRlKHllYXJJbmRleDogbnVtYmVyLCBtb250aEluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNSYW5nZVR5cGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhckluZGV4LCBtb250aEluZGV4IC0gMSwgMSk7XG5cbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNBY3RpdmVJbnB1dFR5cGVEYXRlKGRhdGUpO1xuICB9XG5cbiAgc2V0SG92ZXJUYXJnZXQoeWVhckluZGV4OiBudW1iZXIsIG1vbnRoSW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFySW5kZXgsIG1vbnRoSW5kZXggLSAxLCAxKTtcbiAgICBpZiAodGhpcy5pc1JhbmdlVHlwZSAmJiAhdGhpcy5pc0Rpc2FibGUoeWVhckluZGV4LCBtb250aEluZGV4KSkge1xuICAgICAgdGhpcy5jdXJIb3ZlckRhdGUgPSBkYXRlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMudW5zdWJzY3JpYmUkLm5leHQoKTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlJC5jb21wbGV0ZSgpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiZGV2dWktbW9udGgtcGFuZWxcIj5cbiAgPGNkay12aXJ0dWFsLXNjcm9sbC12aWV3cG9ydCAjc2Nyb2xsTGlzdCBbaXRlbVNpemVdPVwiMzBcIiBjbGFzcz1cImRldnVpLXllYXItbGlzdFwiIG1pbkJ1ZmZlclB4PVwiNDAwXCIgbWF4QnVmZmVyUHg9XCI2MDBcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImRldnVpLXllYXItbGlzdC1pdGVtXCJcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ3RpdGxlLWFjdGl2ZSc6IGluZGV4ID09PSBjdXJyZW50Qm9keUluZGV4IH1cIlxuICAgICAgKmNka1ZpcnR1YWxGb3I9XCJsZXQgeWVhciBvZiB5ZWFyTGlzdDsgbGV0IGluZGV4ID0gaW5kZXhcIlxuICAgICAgKGNsaWNrKT1cInNlbGVjdFllYXIoeWVhci55ZWFyKVwiXG4gICAgPlxuICAgICAgPHAgY2xhc3M9XCJkZXZ1aS15ZWFyLXRpdGxlXCI+e3sgeWVhci55ZWFyIH19PC9wPlxuICAgIDwvZGl2PlxuICA8L2Nkay12aXJ0dWFsLXNjcm9sbC12aWV3cG9ydD5cbiAgPGRpdiBjbGFzcz1cImRldnVpLW1vbnRoLWxpc3Qtd3JhcHBlclwiPlxuICAgIDxjZGstdmlydHVhbC1zY3JvbGwtdmlld3BvcnQgI3Njcm9sbEJvZHkgW2l0ZW1TaXplXT1cImNhbGVuZGVySXRlbVNpemVcIiBjbGFzcz1cImRldnVpLW1vbnRoLWxpc3RcIiBtaW5CdWZmZXJQeD1cIjQwMFwiIG1heEJ1ZmZlclB4PVwiNjAwXCI+XG4gICAgICA8ZGl2ICpjZGtWaXJ0dWFsRm9yPVwibGV0IHllYXIgb2YgeWVhckxpc3Q7IGxldCBpbmRleCA9IGluZGV4XCI+XG4gICAgICAgIDxwIGNsYXNzPVwiZGV2dWktdGFibGUteWVhci10aXRsZVwiPnt7IHllYXIueWVhciArICflubQnIH19PC9wPlxuICAgICAgICA8dGFibGVcbiAgICAgICAgICBjbGFzcz1cImRldnVpLW1vbnRoLXRhYmxlXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJ7ICdkZXZ1aS1hY3RpdmUtbW9udGgnOiBpbmRleCA9PT0gY3VycmVudEJvZHlJbmRleCB9XCJcbiAgICAgICAgICAobW91c2VsZWF2ZSk9XCJjdXJIb3ZlckRhdGUgPSBudWxsXCJcbiAgICAgICAgPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgIDx0ciAqbmdGb3I9XCJsZXQgc2Vhc29uIG9mIG1vbnRoTGlzdFwiPlxuICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgbW9udGggb2Ygc2Vhc29uXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImRldnVpLW1vbnRoLWl0ZW1cIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICdkZXZ1aS10YWJsZS1tb250aC1zZWxlY3RlZCc6IGlzU2VsZWN0ZWQoeWVhci55ZWFyLCBtb250aCksXG4gICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtdGhpcy1tb250aCc6IGlzVGhpc01vbnRoKHllYXIueWVhciwgbW9udGgpLFxuICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtaW5yYW5nZSc6IGlzRGF0ZUluUmFuZ2UoeWVhci55ZWFyLCBtb250aCksXG4gICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtZGF0ZS1zdGFydCc6IGlzU3RhcnREYXRlKHllYXIueWVhciwgbW9udGgpLFxuICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtZW5kJzogaXNFbmREYXRlKHllYXIueWVhciwgbW9udGgpLFxuICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtYWJhbmRvbi1zZWxlY3RlZCc6IGlzRGF0ZUFiYW5kb24oeWVhci55ZWFyLCBtb250aCksXG4gICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtZGF0ZS1pbi1zZWxlY3RlZC1yYW5nZSc6IGlzRGF0ZUluU2VsZWN0UmFuZ2UoeWVhci55ZWFyLCBtb250aCksXG4gICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtZGF0ZS1hY3RpdmUtdHlwZSc6IGlzQWN0aXZlVHlwZURhdGUoeWVhci55ZWFyLCBtb250aClcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAobW91c2VlbnRlcik9XCJzZXRIb3ZlclRhcmdldCh5ZWFyLnllYXIsIG1vbnRoKVwiXG4gICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7ICdkZXZ1aS1kaXNhYmxlZCc6IGlzRGlzYWJsZSh5ZWFyLnllYXIsIG1vbnRoKSB9XCJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RNb250aCh5ZWFyLnllYXIsIG1vbnRoKVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3sgaTE4blRleHQubW9udGhzT2ZZZWFyW21vbnRoIC0gMV0gfX1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Nkay12aXJ0dWFsLXNjcm9sbC12aWV3cG9ydD5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==