import { CdkVirtualScrollViewport, ScrollDispatcher } from '@angular/cdk/scrolling';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, ViewChild } from '@angular/core';
import { I18nService } from 'ng-devui/i18n';
import { Subject } from 'rxjs';
import { debounceTime, filter, takeUntil } from 'rxjs/operators';
import { DatepickerProCommonDataService, DatepickerProService } from '../datepicker-pro.service';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "../datepicker-pro.service";
import * as i3 from "@angular/cdk/scrolling";
import * as i4 from "@angular/common";
import * as i5 from "ng-devui/popover";
const DAY_DURATION = 24 * 60 * 60 * 1000;
export class CalendarPanelComponent {
    constructor(i18n, pickerSrv, dataSrv, cdr, scrollDispatcher) {
        this.i18n = i18n;
        this.pickerSrv = pickerSrv;
        this.dataSrv = dataSrv;
        this.cdr = cdr;
        this.scrollDispatcher = scrollDispatcher;
        this.isWeekSelect = false;
        this.currentBodyIndex = 0;
        this.calendarItemSize = 186; // 一个月份日历的高度
        this.unsubscribe$ = new Subject();
        this.allMonthList = [];
        this.yearAndMonthList = [];
        this.isListCollopse = false;
        this.weekHoverRange = [];
    }
    get curHoverDate() {
        return this.pickerSrv.curHoverDate;
    }
    set curHoverDate(value) {
        this.pickerSrv.curHoverDate = value;
        this.cdr.detectChanges();
    }
    get curDate() {
        if (this.isRangeType) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                return this.pickerSrv.curRangeDate[0];
            }
            else if (this.pickerSrv.currentActiveInput === 'end') {
                return this.pickerSrv.curRangeDate[1];
            }
        }
        else {
            return this.pickerSrv.curDate;
        }
    }
    set curDate(value) {
        if (this.isRangeType) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                this.pickerSrv.curRangeDate[0] = value;
            }
            else if (this.pickerSrv.currentActiveInput === 'end') {
                if (this.pickerSrv.showTime) {
                    this.pickerSrv.curRangeDate[1] =
                        (this.pickerSrv.curRangeDate[1] && this.pickerSrv.curRangeDate[1].toDateString() === value.toDateString())
                            ? value
                            : new Date(value.setHours(23, 59, 59));
                }
                else {
                    this.pickerSrv.curRangeDate[1] = new Date(value.setHours(23, 59, 59));
                }
            }
        }
        else {
            this.pickerSrv.curDate = value;
        }
    }
    get selectedRangeDate() {
        return this.pickerSrv.curRangeDate;
    }
    set selectedRangeDate(dateList) {
        this.pickerSrv.curRangeDate = dateList;
    }
    get markDateTemplate() {
        return this.pickerSrv.markDateInfoTemplate;
    }
    setI18nText() {
        this.i18nText = this.i18n.getI18nText().datePickerPro;
        this.i18nSubscription = this.i18n.langChange().pipe(takeUntil(this.unsubscribe$)).subscribe((data) => {
            this.i18nText = data.datePickerPro;
            this.cdr.detectChanges();
        });
    }
    ngOnInit() {
        this.setI18nText();
        this.today = new Date();
        this.initDataList();
        this.initObservable();
    }
    initObservable() {
        this.pickerSrv.toggleEvent.pipe(takeUntil(this.unsubscribe$)).subscribe(isOpen => {
            if (isOpen) {
                setTimeout(() => {
                    this.goToDate(this.curDate || new Date(), 'auto');
                });
                // 首次展开添加滚动监听
                if (!this.scrollListener) {
                    this.initScrollListener();
                }
            }
            else {
                this.curHoverDate = null;
            }
        });
        this.pickerSrv.updateDateValue.pipe(takeUntil(this.unsubscribe$)).subscribe(res => {
            if (this.isRangeType) {
                this.updateRangeDate(res.value);
            }
            else {
                this.updateSingleDate(res.value);
            }
        });
        this.pickerSrv.detectedChanges.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {
            this.cdr.detectChanges();
        });
        this.pickerSrv.activeInputChange.pipe(takeUntil(this.unsubscribe$)).subscribe(type => {
            if (type === 'start') {
                this.goToDate(this.selectedRangeDate[0] || this.selectedRangeDate[1] || new Date());
            }
            else {
                if (!this.selectedRangeDate[1] && this.selectedRangeDate[0]) {
                    this.updateRangeDate([this.selectedRangeDate[0], this.selectedRangeDate[0]]);
                }
                this.goToDate(this.selectedRangeDate[1] || this.selectedRangeDate[0] || new Date());
            }
        });
    }
    initScrollListener() {
        this.scrollDispatcher.scrolled().pipe(takeUntil(this.unsubscribe$), filter((res) => {
            return res && res.getElementRef().nativeElement.classList.contains('devui-tbody-wrapper');
        }), debounceTime(50)).subscribe(() => {
            const offsetY = this.scrollBodyCmp.measureScrollOffset();
            // 当滚动超过一个月面板的一半时，就更新月份
            this.currentBodyIndex = Math.floor(offsetY / this.calendarItemSize) + (offsetY % this.calendarItemSize > 100 ? 1 : 0);
            const listIndex = this.isListCollopse ?
                Math.floor(this.currentBodyIndex / 12) : this.currentBodyIndex + Math.floor(this.currentBodyIndex / 12) + 1;
            this.goToListByIndex(listIndex);
            this.cdr.detectChanges();
        });
    }
    initDataList() {
        const key = `${this.pickerSrv.calendarRange.join('-')}-${this.pickerSrv.minDate.toDateString() + this.pickerSrv.maxDate.toDateString()}`;
        if (this.dataSrv.calendarDataCache[key]) {
            this.yearAndMonthList = this.dataSrv.calendarDataCache[key].yearAndMonthList;
            this.allMonthList = this.dataSrv.calendarDataCache[key].allMonthList;
            return;
        }
        this.yearAndMonthList = [];
        this.allMonthList = [];
        for (let yearIndex = this.pickerSrv.calendarRange[0]; yearIndex <= this.pickerSrv.calendarRange[1]; yearIndex++) {
            this.yearAndMonthList.push({
                year: yearIndex,
                isMonth: false,
                active: false
            });
            for (let monthIndex = 0; monthIndex < 12; monthIndex++) {
                this.allMonthList.push({
                    year: yearIndex,
                    month: monthIndex,
                    displayWeeks: this.getDisplayWeeks(yearIndex, monthIndex)
                });
                this.yearAndMonthList.push({
                    year: yearIndex,
                    month: monthIndex,
                    isMonth: true,
                    active: false
                });
            }
        }
        this.dataSrv.calendarDataCache[key] = {
            yearAndMonthList: this.yearAndMonthList,
            allMonthList: this.allMonthList
        };
    }
    getDisplayWeeks(yearIndex, monthIndex) {
        const firstDayOfMonth = new Date(yearIndex, monthIndex, 1);
        const weekOfDay = firstDayOfMonth.getDay();
        const startDate = new Date(firstDayOfMonth.getTime() - weekOfDay * DAY_DURATION);
        const displayWeeks = [];
        for (let i = 0; i < 6; i++) {
            const startWeekDate = startDate.getTime() + i * 7 * DAY_DURATION;
            const weekDays = new Array(7).fill(0).map((value, index) => {
                const currentDate = new Date(startWeekDate + index * DAY_DURATION);
                return {
                    day: this.fillLeft(currentDate.getDate()),
                    date: currentDate,
                    inMonth: currentDate.getMonth().toString() === monthIndex.toString(),
                    isToday: currentDate.toDateString() === this.today.toDateString()
                };
            });
            displayWeeks.push(weekDays);
        }
        return displayWeeks;
    }
    goToDate(date, scrollBehavior) {
        const indexObj = this.getCurrentIndex(date);
        const scroll = scrollBehavior || (Math.abs(indexObj.bodyIndex - this.currentBodyIndex) > 18 ? 'auto' : 'smooth');
        this.currentBodyIndex = indexObj.bodyIndex;
        this.scrollBodyCmp.scrollToIndex(indexObj.bodyIndex, scroll);
        this.goToListByIndex(indexObj.listIndex);
        this.cdr.detectChanges();
    }
    goToListByIndex(index) {
        const indexDelta = Math.abs(this.scrollListCmp.measureScrollOffset() / 30 - index);
        this.scrollListCmp.scrollToIndex(index - 4, indexDelta < 12 ? 'smooth' : 'auto');
        this.updateListActive(index);
    }
    selectMonth(year, month) {
        const date = new Date(year, month, 1);
        const curYear = this.yearAndMonthList.find(t => t.active)?.year || this.curDate.getFullYear();
        // 太远的虚拟滚动会导致白屏，所以超过两年的滚动都直接跳转
        const isSmoothAnimation = Math.abs(curYear - year) < 2;
        if (this.isListCollopse) {
            this.toggleListCollopse(date);
        }
        else {
            this.goToDate(date, isSmoothAnimation ? 'smooth' : 'auto');
        }
    }
    updateRangeDate(dateList) {
        if (!dateList) {
            this.selectedRangeDate = [];
            this.cdr.detectChanges();
            return;
        }
        const curDate = (this.pickerSrv.currentActiveInput === 'start' ?
            (dateList[0] || dateList[1]) : (dateList[1] || dateList[0])) || new Date();
        const moreThanOneYear = Math.abs(curDate.getFullYear() - (this.currentBodyIndex / 12 + this.pickerSrv.calendarRange[0])) > 1;
        this.selectedRangeDate = dateList;
        this.goToDate(curDate, moreThanOneYear ? 'auto' : 'smooth');
        this.cdr.detectChanges();
    }
    updateSingleDate(date) {
        if (!date) {
            this.curDate = null;
            this.cdr.detectChanges();
            return;
        }
        const moreThanOneYear = Math.abs(date.getFullYear() - (this.currentBodyIndex / 12 + this.pickerSrv.calendarRange[0])) > 1;
        this.curDate = date;
        this.goToDate(this.curDate, moreThanOneYear ? 'auto' : 'smooth');
        this.cdr.detectChanges();
    }
    updateListActive(index) {
        const curActive = this.yearAndMonthList.find(t => t.active);
        if (curActive) {
            curActive.active = false;
        }
        this.yearAndMonthList[index].active = true;
    }
    getCurrentIndex(curDate) {
        const year = curDate.getFullYear();
        const month = curDate.getMonth();
        const listIndex = this.isListCollopse ?
            (year - this.pickerSrv.calendarRange[0]) : (year - this.pickerSrv.calendarRange[0]) * 13 + month + 1;
        return {
            bodyIndex: (year - this.pickerSrv.calendarRange[0]) * 12 + month,
            listIndex
        };
    }
    selectDate(day) {
        if (this.isDisabled(day.date) || !day.inMonth) {
            return;
        }
        if (this.isWeekSelect) {
            this.pickerSrv.curRangeDate = this.getWeekRange(day.date);
            this.pickerSrv.currentActiveInput = 'end';
        }
        else {
            this.curDate = new Date(day.date.setHours(this.pickerSrv.curHour, this.pickerSrv.curMin, this.pickerSrv.curSec));
        }
        if (this.isRangeType) {
            this.pickerSrv.fixRangeDate();
        }
        this.cdr.detectChanges();
        // 非时间模式下选完开始日期跳转到结束日期
        if (this.isRangeType && !this.pickerSrv.showTime) {
            if (this.pickerSrv.currentActiveInput === 'start') {
                this.pickerSrv.currentActiveInput = 'end';
            }
            else if (this.pickerSrv.currentActiveInput === 'end' && !this.selectedRangeDate[0]) {
                this.selectedRangeDate[0] = this.curDate;
            }
            else {
                this.pickerSrv.closeDropdownEvent.next();
            }
        }
        this.pickerSrv.selectedDateChange.next({
            type: this.isRangeType ? 'range' : 'single',
            value: this.isRangeType ? this.selectedRangeDate : this.curDate
        });
        if (this.isRangeType && this.pickerSrv.showTime) {
            this.pickerSrv.updateTimeChange.next({
                activeInput: this.pickerSrv.currentActiveInput,
                hour: this.pickerSrv.curHour,
                min: this.pickerSrv.curMin,
                seconds: this.pickerSrv.curSec
            });
        }
        if (this.pickerSrv.closeAfterSelected) {
            this.pickerSrv.closeDropdownEvent.next();
        }
    }
    isStartDate(date) {
        return this.pickerSrv.isStartDate(date);
    }
    isDisabled(date) {
        return !this.pickerSrv.dateInRange(date);
    }
    isEndDate(date) {
        return this.pickerSrv.isEndDate(date);
    }
    isDateInRange(date) {
        if (this.isWeekSelect) {
            return this.isInWeekHoverRange(date);
        }
        else {
            return this.pickerSrv.isDateInRange(date);
        }
    }
    isDateInSelectRange(date) {
        return this.pickerSrv.isDateInSelectRange(date);
    }
    isDateActive(date) {
        return this.pickerSrv.isDateActive(date);
    }
    isActiveTypeDate(date) {
        return this.pickerSrv.isActiveInputTypeDate(date);
    }
    isDateAbandon(date) {
        return this.pickerSrv.isDateAbandon(date);
    }
    isDateSuggest(date) {
        return this.pickerSrv.isInSuggestList(date);
    }
    isDateMarked(date) {
        return this.pickerSrv.isMarkedDate(date);
    }
    isSingleDate() {
        if (this.pickerSrv.currentActiveInput === 'start') {
            return !this.pickerSrv.curRangeDate[1];
        }
        else if (this.pickerSrv.currentActiveInput === 'end') {
            return !this.pickerSrv.curRangeDate[0];
        }
    }
    setHoverTarget(date, isInMonth) {
        if (!isInMonth) {
            this.curHoverDate = null;
            return;
        }
        this.curHoverDate = date;
        if (this.isWeekSelect) {
            this.weekHoverRange = this.getWeekRange(date);
            this.curWeekHoverDate = date;
            this.cdr.markForCheck();
            return;
        }
    }
    getWeekRange(date) {
        if (!date) {
            return [];
        }
        const diff = date.getDay() < this.pickerSrv.startIndexOfWeek
            ? 7 - (this.pickerSrv.startIndexOfWeek - date.getDay())
            : date.getDay() - this.pickerSrv.startIndexOfWeek;
        const weekStart = new Date(date.getTime() - diff * DAY_DURATION);
        const weekEnd = new Date(weekStart.getTime() + DAY_DURATION * 6);
        weekEnd.setHours(23, 59, 59);
        return [weekStart, weekEnd];
    }
    isInWeekHoverRange(date) {
        const range = this.getWeekRange(this.curWeekHoverDate);
        const time = date.getTime();
        const timeStr = date.toDateString();
        if (this.pickerSrv.isDateActive(date)) {
            return false;
        }
        return ((range[0]?.getTime() < time && time < range[1]?.getTime()) ||
            (range[0]?.toDateString() === timeStr || timeStr === range[1]?.toDateString()));
    }
    toggleListCollopse(toDate) {
        const activeItem = this.yearAndMonthList.find(t => t.active);
        const curYear = activeItem?.year;
        const curMonth = activeItem?.month;
        this.isListCollopse = !this.isListCollopse;
        if (this.isListCollopse) {
            this.yearAndMonthList = this.yearAndMonthList.filter(t => !t.isMonth);
        }
        else {
            this.initDataList();
        }
        setTimeout(() => {
            this.goToDate(toDate || new Date(curYear, curMonth || 0, 1), 'auto');
        });
    }
    fillLeft(num) {
        return num < 10 ? `0${num}` : `${num}`;
    }
    ngOnDestroy() {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    }
}
CalendarPanelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: CalendarPanelComponent, deps: [{ token: i1.I18nService }, { token: i2.DatepickerProService }, { token: i2.DatepickerProCommonDataService }, { token: i0.ChangeDetectorRef }, { token: i3.ScrollDispatcher }], target: i0.ɵɵFactoryTarget.Component });
CalendarPanelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: CalendarPanelComponent, selector: "d-calendar-panel", inputs: { isRangeType: "isRangeType", isWeekSelect: "isWeekSelect" }, viewQueries: [{ propertyName: "scrollBodyCmp", first: true, predicate: ["scrollBody"], descendants: true }, { propertyName: "scrollListCmp", first: true, predicate: ["scrollList"], descendants: true }], ngImport: i0, template: "<div class=\"devui-canlender-panel\">\n  <cdk-virtual-scroll-viewport #scrollList [itemSize]=\"30\" class=\"devui-canlender-panel-year-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n    <div\n      class=\"devui-canlender-panel-year-list-item\"\n      [ngClass]=\"{ 'title-active': item.active }\"\n      *cdkVirtualFor=\"let item of yearAndMonthList; let index = index\"\n    >\n      <p class=\"devui-year-title\" *ngIf=\"!item.isMonth && !isListCollopse\" (click)=\"toggleListCollopse()\">{{ item.year }}</p>\n      <p class=\"devui-year-title\" *ngIf=\"!item.isMonth && isListCollopse\" (click)=\"selectMonth(item.year, 0)\">{{ item.year }}</p>\n      <p class=\"devui-month-title\" *ngIf=\"item.isMonth\" (click)=\"selectMonth(item.year, item.month)\">\n        {{ i18nText.monthsOfYear[item.month] }}\n      </p>\n    </div>\n  </cdk-virtual-scroll-viewport>\n\n  <div class=\"devui-canlender-panel-main\">\n    <table class=\"devui-table\">\n      <thead>\n        <tr class=\"small text-center devui-week-header\">\n          <td *ngFor=\"let item of i18nText?.daysOfWeek\">{{ item }}</td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td colspan=\"7\">\n            <cdk-virtual-scroll-viewport\n              #scrollBody\n              [itemSize]=\"calendarItemSize\"\n              class=\"devui-tbody-wrapper\"\n              minBufferPx=\"400\"\n              maxBufferPx=\"600\"\n            >\n              <div *cdkVirtualFor=\"let month of allMonthList; let index = index\">\n                <p class=\"devui-table-month-title\">{{ i18nText?.getYearMonthStr(month.year, month.month + 1) }}</p>\n                <table\n                  class=\"devui-month-table\"\n                  [ngClass]=\"{\n                    'devui-single-date': isSingleDate()\n                  }\"\n                  (mouseleave)=\"curHoverDate = null; curWeekHoverDate = null\"\n                >\n                  <tbody>\n                    <tr class=\"small text-center devui-week-header\" *ngFor=\"let week of month.displayWeeks\">\n                      <td\n                        [ngClass]=\"{\n                          'devui-table-date': day.inMonth,\n                          'devui-table-date-selected': isDateActive(day.date),\n                          'devui-table-date-abandon-selected': isDateAbandon(day.date),\n                          'devui-table-date-today': day.isToday,\n                          'devui-table-date-disable': isDisabled(day.date),\n                          'devui-table-date-inrange': isDateInRange(day.date),\n                          'devui-table-date-start': isStartDate(day.date),\n                          'devui-table-date-end': isEndDate(day.date),\n                          'devui-table-date-in-selected-range': isDateInSelectRange(day.date),\n                          'devui-table-date-active-type': isActiveTypeDate(day.date),\n                          'devui-table-date-suggested': isDateSuggest(day.date),\n                          'devui-table-date-marked': isDateMarked(day.date)\n                        }\"\n                        *ngFor=\"let day of week\"\n                        dPopover\n                        [content]=\"markDate\"\n                        [visible]=\"isDateMarked(day.date) && curHoverDate === day.date && !!markDateTemplate\"\n                        (click)=\"selectDate(day)\"\n                        (mouseenter)=\"setHoverTarget(day.date, day.inMonth)\"\n                      >\n                        <span>{{ day.inMonth ? day.day : '' }}</span>\n                        <ng-template #markDate>\n                          <ng-template [ngTemplateOutlet]=\"markDateTemplate\" [ngTemplateOutletContext]=\"{ date: day.date }\"></ng-template>\n                        </ng-template>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </cdk-virtual-scroll-viewport>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n", styles: [".devui-canlender-panel{text-align:center;font-size:0}.devui-canlender-panel-collopse-button{position:absolute;top:0;left:60px;font-size:16px;z-index:10;cursor:pointer;color:#71757f;color:var(--devui-aide-text, #71757f)}.devui-canlender-panel-year-list{padding:8px 0;display:inline-block;width:80px;height:305px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.devui-canlender-panel-year-list::-webkit-scrollbar{width:0!important}.devui-canlender-panel-year-list-item{background-color:#f8f8fa;background-color:var(--devui-global-bg, #f8f8fa)}.devui-canlender-panel-year-list-item .devui-year-title{font-size:14px;font-weight:700;line-height:30px;cursor:pointer}.devui-canlender-panel-year-list-item .devui-month-title{font-size:12px;line-height:30px;cursor:pointer}.devui-canlender-panel-year-list-item.title-active{background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-canlender-panel-year-list-item:hover:not(.title-active){background-color:#f2f5fc;background-color:var(--devui-list-item-selected-bg, #f2f5fc)}.devui-canlender-panel-main{width:249px;height:305px;padding:4px;display:inline-block;font-size:12px}.devui-tbody-wrapper{height:270px;width:100%;overflow-x:hidden;-ms-overflow-style:none;scrollbar-width:none}.devui-tbody-wrapper::-webkit-scrollbar{width:0!important}.devui-table{border-spacing:0}.devui-table .devui-week-header td{width:34px;height:22px}.devui-table .devui-table-month-title{text-align:start;line-height:26px;color:#71757f;color:var(--devui-aide-text, #71757f);padding-left:8px}.devui-table .devui-month-table{color:#252b3a;color:var(--devui-text, #252b3a);border-spacing:0 4px;border-collapse:separate}.devui-table .devui-month-table .devui-table-date{padding:0 4px;width:30px}.devui-table .devui-month-table .devui-table-date span{cursor:pointer;display:block;width:22px;height:22px;line-height:22px;border-radius:4px;border-radius:var(--devui-border-radius-feedback, 4px)}.devui-table .devui-month-table .devui-table-date:not(.devui-table-date-disable):not(.devui-table-date-selected):hover span{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-today span{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected{position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected span{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected span:hover{box-shadow:none;border-color:transparent}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-abandon-selected span{background:#beccfa;background:var(--devui-primary-disabled, #beccfa)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-active-type:not(.devui-table-date-abandon-selected) span{-webkit-animation:2s ease 0s infinite normal both breath-animation;animation:2s ease 0s infinite normal both breath-animation;position:absolute;top:0;right:7px;z-index:2}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-active-type.devui-table-date-end:not(.devui-table-date-abandon-selected) span{right:8px}@-webkit-keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}@keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}.devui-table .devui-month-table .devui-table-date.devui-table-date-inrange{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-inrange span:hover{background-color:#e9edfa;background-color:var(--devui-range-item-hover-bg, #e9edfa)}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end){position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end):after{content:\"\";display:block;position:absolute;width:8px;height:22px;background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);right:0;top:0}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end):not(:hover):not(.devui-table-date-selected):after{display:none}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end) span{border-radius:4px 0 0 4px;border-radius:var(--devui-border-radius-feedback, 4px) 0 0 var(--devui-border-radius-feedback, 4px)}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start){position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start):after{content:\"\";display:block;position:absolute;width:5px;height:22px;background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);left:0;top:0}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start) span{border-radius:0 4px 4px 0;border-radius:0 var(--devui-border-radius-feedback, 4px) var(--devui-border-radius-feedback, 4px) 0}.devui-table .devui-month-table .devui-table-date.devui-table-date-in-selected-range:not(.devui-table-date-inrange):not(:hover){background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-table .devui-month-table .devui-table-date.devui-table-date-disable span{cursor:not-allowed;color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-disable span:hover{box-shadow:none;border-color:transparent}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked span{position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked span:after{content:\"\";display:block;position:absolute;right:9px;bottom:2px;width:3px;height:3px;border-radius:50%;background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked.devui-table-date-selected span:after{background-color:#252b3a;background-color:var(--devui-list-item-active-text, #252b3a)}.devui-table .devui-month-table .devui-table-date.devui-table-date-suggested{border-bottom:1px solid #beccfa;border-bottom:1px solid var(--devui-link-light-active, #beccfa)}.devui-table .devui-month-table.devui-single-date .devui-table-date.devui-table-date-start:after{display:none}.devui-table .devui-month-table.devui-single-date .devui-table-date.devui-table-date-end:after{display:none}.devui-table .devui-tbody-wrapper{transform:none}:host{display:inline-block}\n"], components: [{ type: i3.CdkVirtualScrollViewport, selector: "cdk-virtual-scroll-viewport", inputs: ["orientation", "appendOnly"], outputs: ["scrolledIndexChange"] }], directives: [{ type: i3.CdkFixedSizeVirtualScroll, selector: "cdk-virtual-scroll-viewport[itemSize]", inputs: ["itemSize", "minBufferPx", "maxBufferPx"] }, { type: i3.CdkVirtualForOf, selector: "[cdkVirtualFor][cdkVirtualForOf]", inputs: ["cdkVirtualForOf", "cdkVirtualForTrackBy", "cdkVirtualForTemplate", "cdkVirtualForTemplateCacheSize"] }, { type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i5.PopoverDirective, selector: "[dPopover]", inputs: ["content", "controlled", "position", "showAnimation", "showAnimate", "scrollElement", "appendToBody", "zIndex", "popType", "popMaxWidth", "trigger", "hoverToContent", "hoverDelayTime", "popoverStyle", "mouseEnterDelay", "mouseLeaveDelay", "visible"], exportAs: ["dPopover"] }, { type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: CalendarPanelComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-calendar-panel', preserveWhitespaces: false, changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"devui-canlender-panel\">\n  <cdk-virtual-scroll-viewport #scrollList [itemSize]=\"30\" class=\"devui-canlender-panel-year-list\" minBufferPx=\"400\" maxBufferPx=\"600\">\n    <div\n      class=\"devui-canlender-panel-year-list-item\"\n      [ngClass]=\"{ 'title-active': item.active }\"\n      *cdkVirtualFor=\"let item of yearAndMonthList; let index = index\"\n    >\n      <p class=\"devui-year-title\" *ngIf=\"!item.isMonth && !isListCollopse\" (click)=\"toggleListCollopse()\">{{ item.year }}</p>\n      <p class=\"devui-year-title\" *ngIf=\"!item.isMonth && isListCollopse\" (click)=\"selectMonth(item.year, 0)\">{{ item.year }}</p>\n      <p class=\"devui-month-title\" *ngIf=\"item.isMonth\" (click)=\"selectMonth(item.year, item.month)\">\n        {{ i18nText.monthsOfYear[item.month] }}\n      </p>\n    </div>\n  </cdk-virtual-scroll-viewport>\n\n  <div class=\"devui-canlender-panel-main\">\n    <table class=\"devui-table\">\n      <thead>\n        <tr class=\"small text-center devui-week-header\">\n          <td *ngFor=\"let item of i18nText?.daysOfWeek\">{{ item }}</td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td colspan=\"7\">\n            <cdk-virtual-scroll-viewport\n              #scrollBody\n              [itemSize]=\"calendarItemSize\"\n              class=\"devui-tbody-wrapper\"\n              minBufferPx=\"400\"\n              maxBufferPx=\"600\"\n            >\n              <div *cdkVirtualFor=\"let month of allMonthList; let index = index\">\n                <p class=\"devui-table-month-title\">{{ i18nText?.getYearMonthStr(month.year, month.month + 1) }}</p>\n                <table\n                  class=\"devui-month-table\"\n                  [ngClass]=\"{\n                    'devui-single-date': isSingleDate()\n                  }\"\n                  (mouseleave)=\"curHoverDate = null; curWeekHoverDate = null\"\n                >\n                  <tbody>\n                    <tr class=\"small text-center devui-week-header\" *ngFor=\"let week of month.displayWeeks\">\n                      <td\n                        [ngClass]=\"{\n                          'devui-table-date': day.inMonth,\n                          'devui-table-date-selected': isDateActive(day.date),\n                          'devui-table-date-abandon-selected': isDateAbandon(day.date),\n                          'devui-table-date-today': day.isToday,\n                          'devui-table-date-disable': isDisabled(day.date),\n                          'devui-table-date-inrange': isDateInRange(day.date),\n                          'devui-table-date-start': isStartDate(day.date),\n                          'devui-table-date-end': isEndDate(day.date),\n                          'devui-table-date-in-selected-range': isDateInSelectRange(day.date),\n                          'devui-table-date-active-type': isActiveTypeDate(day.date),\n                          'devui-table-date-suggested': isDateSuggest(day.date),\n                          'devui-table-date-marked': isDateMarked(day.date)\n                        }\"\n                        *ngFor=\"let day of week\"\n                        dPopover\n                        [content]=\"markDate\"\n                        [visible]=\"isDateMarked(day.date) && curHoverDate === day.date && !!markDateTemplate\"\n                        (click)=\"selectDate(day)\"\n                        (mouseenter)=\"setHoverTarget(day.date, day.inMonth)\"\n                      >\n                        <span>{{ day.inMonth ? day.day : '' }}</span>\n                        <ng-template #markDate>\n                          <ng-template [ngTemplateOutlet]=\"markDateTemplate\" [ngTemplateOutletContext]=\"{ date: day.date }\"></ng-template>\n                        </ng-template>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </cdk-virtual-scroll-viewport>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n", styles: [".devui-canlender-panel{text-align:center;font-size:0}.devui-canlender-panel-collopse-button{position:absolute;top:0;left:60px;font-size:16px;z-index:10;cursor:pointer;color:#71757f;color:var(--devui-aide-text, #71757f)}.devui-canlender-panel-year-list{padding:8px 0;display:inline-block;width:80px;height:305px;overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.devui-canlender-panel-year-list::-webkit-scrollbar{width:0!important}.devui-canlender-panel-year-list-item{background-color:#f8f8fa;background-color:var(--devui-global-bg, #f8f8fa)}.devui-canlender-panel-year-list-item .devui-year-title{font-size:14px;font-weight:700;line-height:30px;cursor:pointer}.devui-canlender-panel-year-list-item .devui-month-title{font-size:12px;line-height:30px;cursor:pointer}.devui-canlender-panel-year-list-item.title-active{background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}.devui-canlender-panel-year-list-item:hover:not(.title-active){background-color:#f2f5fc;background-color:var(--devui-list-item-selected-bg, #f2f5fc)}.devui-canlender-panel-main{width:249px;height:305px;padding:4px;display:inline-block;font-size:12px}.devui-tbody-wrapper{height:270px;width:100%;overflow-x:hidden;-ms-overflow-style:none;scrollbar-width:none}.devui-tbody-wrapper::-webkit-scrollbar{width:0!important}.devui-table{border-spacing:0}.devui-table .devui-week-header td{width:34px;height:22px}.devui-table .devui-table-month-title{text-align:start;line-height:26px;color:#71757f;color:var(--devui-aide-text, #71757f);padding-left:8px}.devui-table .devui-month-table{color:#252b3a;color:var(--devui-text, #252b3a);border-spacing:0 4px;border-collapse:separate}.devui-table .devui-month-table .devui-table-date{padding:0 4px;width:30px}.devui-table .devui-month-table .devui-table-date span{cursor:pointer;display:block;width:22px;height:22px;line-height:22px;border-radius:4px;border-radius:var(--devui-border-radius-feedback, 4px)}.devui-table .devui-month-table .devui-table-date:not(.devui-table-date-disable):not(.devui-table-date-selected):hover span{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-today span{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected{position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected span{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected span:hover{box-shadow:none;border-color:transparent}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-abandon-selected span{background:#beccfa;background:var(--devui-primary-disabled, #beccfa)}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-active-type:not(.devui-table-date-abandon-selected) span{-webkit-animation:2s ease 0s infinite normal both breath-animation;animation:2s ease 0s infinite normal both breath-animation;position:absolute;top:0;right:7px;z-index:2}.devui-table .devui-month-table .devui-table-date.devui-table-date-selected.devui-table-date-active-type.devui-table-date-end:not(.devui-table-date-abandon-selected) span{right:8px}@-webkit-keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}@keyframes breath-animation{0%{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}50%{box-shadow:0 0 8px #f2f5fc;box-shadow:0 0 8px var(--devui-list-item-active-bg, #f2f5fc)}to{box-shadow:0 0 #f2f5fc;box-shadow:0 0 0 var(--devui-list-item-active-bg, #f2f5fc)}}.devui-table .devui-month-table .devui-table-date.devui-table-date-inrange{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-inrange span:hover{background-color:#e9edfa;background-color:var(--devui-range-item-hover-bg, #e9edfa)}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end){position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end):after{content:\"\";display:block;position:absolute;width:8px;height:22px;background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);right:0;top:0}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end):not(:hover):not(.devui-table-date-selected):after{display:none}.devui-table .devui-month-table .devui-table-date.devui-table-date-start:not(.devui-table-date-end) span{border-radius:4px 0 0 4px;border-radius:var(--devui-border-radius-feedback, 4px) 0 0 var(--devui-border-radius-feedback, 4px)}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start){position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start):after{content:\"\";display:block;position:absolute;width:5px;height:22px;background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3);left:0;top:0}.devui-table .devui-month-table .devui-table-date.devui-table-date-end:not(.devui-table-date-start) span{border-radius:0 4px 4px 0;border-radius:0 var(--devui-border-radius-feedback, 4px) var(--devui-border-radius-feedback, 4px) 0}.devui-table .devui-month-table .devui-table-date.devui-table-date-in-selected-range:not(.devui-table-date-inrange):not(:hover){background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-table .devui-month-table .devui-table-date.devui-table-date-disable span{cursor:not-allowed;color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-table .devui-month-table .devui-table-date.devui-table-date-disable span:hover{box-shadow:none;border-color:transparent}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked span{position:relative}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked span:after{content:\"\";display:block;position:absolute;right:9px;bottom:2px;width:3px;height:3px;border-radius:50%;background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-table .devui-month-table .devui-table-date.devui-table-date-marked.devui-table-date-selected span:after{background-color:#252b3a;background-color:var(--devui-list-item-active-text, #252b3a)}.devui-table .devui-month-table .devui-table-date.devui-table-date-suggested{border-bottom:1px solid #beccfa;border-bottom:1px solid var(--devui-link-light-active, #beccfa)}.devui-table .devui-month-table.devui-single-date .devui-table-date.devui-table-date-start:after{display:none}.devui-table .devui-month-table.devui-single-date .devui-table-date.devui-table-date-end:after{display:none}.devui-table .devui-tbody-wrapper{transform:none}:host{display:inline-block}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.I18nService }, { type: i2.DatepickerProService }, { type: i2.DatepickerProCommonDataService }, { type: i0.ChangeDetectorRef }, { type: i3.ScrollDispatcher }]; }, propDecorators: { scrollBodyCmp: [{
                type: ViewChild,
                args: ['scrollBody']
            }], scrollListCmp: [{
                type: ViewChild,
                args: ['scrollList']
            }], isRangeType: [{
                type: Input
            }], isWeekSelect: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItcGFuZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vZGV2dWkvZGF0ZXBpY2tlci1wcm8vbGliL2NhbGVuZGFyLXBhbmVsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL2RldnVpL2RhdGVwaWNrZXItcHJvL2xpYi9jYWxlbmRhci1wYW5lbC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQWlCLHdCQUF3QixFQUFFLGdCQUFnQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbkcsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUFFLEtBQUssRUFBcUIsU0FBUyxFQUMvQyxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQWlCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLEVBQUUsT0FBTyxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQzs7Ozs7OztBQUdqRyxNQUFNLFlBQVksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFTekMsTUFBTSxPQUFPLHNCQUFzQjtJQXlFakMsWUFDWSxJQUFpQixFQUNuQixTQUErQixFQUMvQixPQUF1QyxFQUN2QyxHQUFzQixFQUN0QixnQkFBa0M7UUFKaEMsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUNuQixjQUFTLEdBQVQsU0FBUyxDQUFzQjtRQUMvQixZQUFPLEdBQVAsT0FBTyxDQUFnQztRQUN2QyxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUN0QixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBMUVuQyxpQkFBWSxHQUFH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QUFFLENBQUM7SUFDL0IsQ0FBQzs7bUhBMWNVLHNCQUFzQjt1R0FBdEIsc0JBQXNCLHlVQ3JCbkMscytIQWlGQTsyRkQ1RGEsc0JBQXNCO2tCQVBsQyxTQUFTOytCQUNFLGtCQUFrQix1QkFHUCxLQUFLLG1CQUNULHVCQUF1QixDQUFDLE1BQU07aVBBR3RCLGFBQWE7c0JBQXJDLFNBQVM7dUJBQUMsWUFBWTtnQkFDRSxhQUFhO3NCQUFyQyxTQUFTO3VCQUFDLFlBQVk7Z0JBQ2QsV0FBVztzQkFBbkIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2RrU2Nyb2xsYWJsZSwgQ2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0LCBTY3JvbGxEaXNwYXRjaGVyIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3Njcm9sbGluZyc7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJMThuSW50ZXJmYWNlLCBJMThuU2VydmljZSB9IGZyb20gJ25nLWRldnVpL2kxOG4nO1xuaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGZpbHRlciwgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgRGF0ZXBpY2tlclByb0NvbW1vbkRhdGFTZXJ2aWNlLCBEYXRlcGlja2VyUHJvU2VydmljZSB9IGZyb20gJy4uL2RhdGVwaWNrZXItcHJvLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGV2dWlDYWxlbmRhckRhdGVJdGVtIH0gZnJvbSAnLi9kYXRlcGlja2VyLXByby50eXBlJztcblxuY29uc3QgREFZX0RVUkFUSU9OID0gMjQgKiA2MCAqIDYwICogMTAwMDtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZC1jYWxlbmRhci1wYW5lbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9jYWxlbmRhci1wYW5lbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2NhbGVuZGFyLXBhbmVsLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBDYWxlbmRhclBhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBAVmlld0NoaWxkKCdzY3JvbGxCb2R5Jykgc2Nyb2xsQm9keUNtcDogQ2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0O1xuICBAVmlld0NoaWxkKCdzY3JvbGxMaXN0Jykgc2Nyb2xsTGlzdENtcDogQ2RrVmlydHVhbFNjcm9sbFZpZXdwb3J0O1xuICBASW5wdXQoKSBpc1JhbmdlVHlwZTogYm9vbGVhbjtcbiAgQElucHV0KCkgaXNXZWVrU2VsZWN0ID0gZmFsc2U7XG5cbiAgY3VycmVudEJvZHlJbmRleCA9IDA7XG4gIHRvZGF5OiBEYXRlO1xuICBjYWxlbmRhckl0ZW1TaXplID0gMTg2OyAvLyDkuIDkuKrmnIjku73ml6XljobnmoTpq5jluqZcblxuICBpMThuVGV4dDogSTE4bkludGVyZmFjZVsnZGF0ZVBpY2tlclBybyddO1xuICBpMThuU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHVuc3Vic2NyaWJlJCA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgYWxsTW9udGhMaXN0ID0gW107XG4gIHllYXJBbmRNb250aExpc3QgPSBbXTtcbiAgc2Nyb2xsTGlzdGVuZXI6IFN1YnNjcmlwdGlvbjtcbiAgaXNMaXN0Q29sbG9wc2UgPSBmYWxzZTtcbiAgd2Vla0hvdmVyUmFuZ2UgPSBbXTtcbiAgY3VyV2Vla0hvdmVyRGF0ZTogRGF0ZTtcblxuICBnZXQgY3VySG92ZXJEYXRlKCkge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5jdXJIb3ZlckRhdGU7XG4gIH1cblxuICBzZXQgY3VySG92ZXJEYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgdGhpcy5waWNrZXJTcnYuY3VySG92ZXJEYXRlID0gdmFsdWU7XG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgZ2V0IGN1ckRhdGUoKTogRGF0ZSB7XG4gICAgaWYgKHRoaXMuaXNSYW5nZVR5cGUpIHtcbiAgICAgIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdzdGFydCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnZW5kJykge1xuICAgICAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VyRGF0ZTtcbiAgICB9XG4gIH1cblxuICBzZXQgY3VyRGF0ZSh2YWx1ZTogRGF0ZSkge1xuICAgIGlmICh0aGlzLmlzUmFuZ2VUeXBlKSB7XG4gICAgICBpZiAodGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnc3RhcnQnKSB7XG4gICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVswXSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdlbmQnKSB7XG4gICAgICAgIGlmICh0aGlzLnBpY2tlclNydi5zaG93VGltZSkge1xuICAgICAgICAgIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXSA9XG4gICAgICAgICAgICAodGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdICYmIHRoaXMucGlja2VyU3J2LmN1clJhbmdlRGF0ZVsxXS50b0RhdGVTdHJpbmcoKSA9PT0gdmFsdWUudG9EYXRlU3RyaW5nKCkpXG4gICAgICAgICAgICAgID8gdmFsdWVcbiAgICAgICAgICAgICAgOiBuZXcgRGF0ZSh2YWx1ZS5zZXRIb3VycygyMywgNTksIDU5KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdID0gbmV3IERhdGUodmFsdWUuc2V0SG91cnMoMjMsIDU5LCA1OSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGlja2VyU3J2LmN1ckRhdGUgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2VsZWN0ZWRSYW5nZURhdGUoKTogRGF0ZVtdIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlO1xuICB9XG5cbiAgc2V0IHNlbGVjdGVkUmFuZ2VEYXRlKGRhdGVMaXN0OiBEYXRlW10pIHtcbiAgICB0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGUgPSBkYXRlTGlzdDtcbiAgfVxuXG4gIGdldCBtYXJrRGF0ZVRlbXBsYXRlKCkge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5tYXJrRGF0ZUluZm9UZW1wbGF0ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBpMThuOiBJMThuU2VydmljZSxcbiAgICBwcml2YXRlIHBpY2tlclNydjogRGF0ZXBpY2tlclByb1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBkYXRhU3J2OiBEYXRlcGlja2VyUHJvQ29tbW9uRGF0YVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgc2Nyb2xsRGlzcGF0Y2hlcjogU2Nyb2xsRGlzcGF0Y2hlclxuICApIHtcbiAgfVxuXG4gIHNldEkxOG5UZXh0KCkge1xuICAgIHRoaXMuaTE4blRleHQgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5kYXRlUGlja2VyUHJvO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICApLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5pMThuVGV4dCA9IGRhdGEuZGF0ZVBpY2tlclBybztcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuc2V0STE4blRleHQoKTtcbiAgICB0aGlzLnRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmluaXREYXRhTGlzdCgpO1xuICAgIHRoaXMuaW5pdE9ic2VydmFibGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdE9ic2VydmFibGUoKSB7XG4gICAgdGhpcy5waWNrZXJTcnYudG9nZ2xlRXZlbnQucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJCksXG4gICAgKS5zdWJzY3JpYmUoaXNPcGVuID0+IHtcbiAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5nb1RvRGF0ZSh0aGlzLmN1ckRhdGUgfHwgbmV3IERhdGUoKSwgJ2F1dG8nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6aaW5qyh5bGV5byA5re75Yqg5rua5Yqo55uR5ZCsXG4gICAgICAgIGlmICghdGhpcy5zY3JvbGxMaXN0ZW5lcikge1xuICAgICAgICAgIHRoaXMuaW5pdFNjcm9sbExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VySG92ZXJEYXRlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMucGlja2VyU3J2LnVwZGF0ZURhdGVWYWx1ZS5waXBlKFxuICAgICAgdGFrZVVudGlsKHRoaXMudW5zdWJzY3JpYmUkKSxcbiAgICApLnN1YnNjcmliZShyZXMgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNSYW5nZVR5cGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVSYW5nZURhdGUocmVzLnZhbHVlIGFzIERhdGVbXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVwZGF0ZVNpbmdsZURhdGUocmVzLnZhbHVlIGFzIERhdGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5waWNrZXJTcnYuZGV0ZWN0ZWRDaGFuZ2VzLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucGlja2VyU3J2LmFjdGl2ZUlucHV0Q2hhbmdlLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpXG4gICAgKS5zdWJzY3JpYmUodHlwZSA9PiB7XG4gICAgICBpZiAodHlwZSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICB0aGlzLmdvVG9EYXRlKHRoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMF0gfHwgdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVsxXSB8fCBuZXcgRGF0ZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVsxXSAmJiB0aGlzLnNlbGVjdGVkUmFuZ2VEYXRlWzBdKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVSYW5nZURhdGUoW3RoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMF0sIHRoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMF1dKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdvVG9EYXRlKHRoaXMuc2VsZWN0ZWRSYW5nZURhdGVbMV0gfHwgdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVswXSB8fCBuZXcgRGF0ZSgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdFNjcm9sbExpc3RlbmVyKCkge1xuICAgIHRoaXMuc2Nyb2xsRGlzcGF0Y2hlci5zY3JvbGxlZCgpLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpLFxuICAgICAgZmlsdGVyKChyZXM6IENka1Njcm9sbGFibGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcyAmJiByZXMuZ2V0RWxlbWVudFJlZigpLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZXZ1aS10Ym9keS13cmFwcGVyJyk7XG4gICAgICB9KSxcbiAgICAgIGRlYm91bmNlVGltZSg1MClcbiAgICApLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBjb25zdCBvZmZzZXRZID0gdGhpcy5zY3JvbGxCb2R5Q21wLm1lYXN1cmVTY3JvbGxPZmZzZXQoKTtcbiAgICAgIC8vIOW9k+a7muWKqOi2hei/h+S4gOS4quaciOmdouadv+eahOS4gOWNiuaXtu+8jOWwseabtOaWsOaciOS7vVxuICAgICAgdGhpcy5jdXJyZW50Qm9keUluZGV4ID0gTWF0aC5mbG9vcihvZmZzZXRZIC8gdGhpcy5jYWxlbmRhckl0ZW1TaXplKSArIChvZmZzZXRZICUgdGhpcy5jYWxlbmRhckl0ZW1TaXplID4gMTAwID8gMSA6IDApO1xuICAgICAgY29uc3QgbGlzdEluZGV4ID0gdGhpcy5pc0xpc3RDb2xsb3BzZSA/XG4gICAgICAgIE1hdGguZmxvb3IodGhpcy5jdXJyZW50Qm9keUluZGV4IC8gMTIpIDogdGhpcy5jdXJyZW50Qm9keUluZGV4ICsgTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRCb2R5SW5kZXggLyAxMikgKyAxO1xuICAgICAgdGhpcy5nb1RvTGlzdEJ5SW5kZXgobGlzdEluZGV4KTtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdERhdGFMaXN0KCkge1xuICAgIGNvbnN0IGtleSA9IGAke3RoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2Uuam9pbignLScpfS0ke1xuICAgICAgdGhpcy5waWNrZXJTcnYubWluRGF0ZS50b0RhdGVTdHJpbmcoKSArIHRoaXMucGlja2VyU3J2Lm1heERhdGUudG9EYXRlU3RyaW5nKClcbiAgICB9YDtcbiAgICBpZiAodGhpcy5kYXRhU3J2LmNhbGVuZGFyRGF0YUNhY2hlW2tleV0pIHtcbiAgICAgIHRoaXMueWVhckFuZE1vbnRoTGlzdCA9IHRoaXMuZGF0YVNydi5jYWxlbmRhckRhdGFDYWNoZVtrZXldLnllYXJBbmRNb250aExpc3Q7XG4gICAgICB0aGlzLmFsbE1vbnRoTGlzdCA9IHRoaXMuZGF0YVNydi5jYWxlbmRhckRhdGFDYWNoZVtrZXldLmFsbE1vbnRoTGlzdDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnllYXJBbmRNb250aExpc3QgPSBbXTtcbiAgICB0aGlzLmFsbE1vbnRoTGlzdCA9IFtdO1xuXG4gICAgZm9yIChsZXQgeWVhckluZGV4ID0gdGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZVswXTsgeWVhckluZGV4IDw9IHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMV07IHllYXJJbmRleCsrKSB7XG4gICAgICB0aGlzLnllYXJBbmRNb250aExpc3QucHVzaCh7XG4gICAgICAgIHllYXI6IHllYXJJbmRleCxcbiAgICAgICAgaXNNb250aDogZmFsc2UsXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZm9yIChsZXQgbW9udGhJbmRleCA9IDA7IG1vbnRoSW5kZXggPCAxMjsgbW9udGhJbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWxsTW9udGhMaXN0LnB1c2goe1xuICAgICAgICAgIHllYXI6IHllYXJJbmRleCxcbiAgICAgICAgICBtb250aDogbW9udGhJbmRleCxcbiAgICAgICAgICBkaXNwbGF5V2Vla3M6IHRoaXMuZ2V0RGlzcGxheVdlZWtzKHllYXJJbmRleCwgbW9udGhJbmRleClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy55ZWFyQW5kTW9udGhMaXN0LnB1c2goe1xuICAgICAgICAgIHllYXI6IHllYXJJbmRleCxcbiAgICAgICAgICBtb250aDogbW9udGhJbmRleCxcbiAgICAgICAgICBpc01vbnRoOiB0cnVlLFxuICAgICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhU3J2LmNhbGVuZGFyRGF0YUNhY2hlW2tleV0gPSB7XG4gICAgICB5ZWFyQW5kTW9udGhMaXN0OiB0aGlzLnllYXJBbmRNb250aExpc3QsXG4gICAgICBhbGxNb250aExpc3Q6IHRoaXMuYWxsTW9udGhMaXN0XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGlzcGxheVdlZWtzKHllYXJJbmRleDogbnVtYmVyLCBtb250aEluZGV4OiBudW1iZXIpOiBEZXZ1aUNhbGVuZGFyRGF0ZUl0ZW1bXSB7XG4gICAgY29uc3QgZmlyc3REYXlPZk1vbnRoID0gbmV3IERhdGUoeWVhckluZGV4LCBtb250aEluZGV4LCAxKTtcbiAgICBjb25zdCB3ZWVrT2ZEYXkgPSBmaXJzdERheU9mTW9udGguZ2V0RGF5KCk7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoZmlyc3REYXlPZk1vbnRoLmdldFRpbWUoKSAtIHdlZWtPZkRheSAqIERBWV9EVVJBVElPTik7XG4gICAgY29uc3QgZGlzcGxheVdlZWtzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgIGNvbnN0IHN0YXJ0V2Vla0RhdGUgPSBzdGFydERhdGUuZ2V0VGltZSgpICsgaSAqIDcgKiBEQVlfRFVSQVRJT047XG4gICAgICBjb25zdCB3ZWVrRGF5cyA9IG5ldyBBcnJheSg3KS5maWxsKDApLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoc3RhcnRXZWVrRGF0ZSArIGluZGV4ICogREFZX0RVUkFUSU9OKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXk6IHRoaXMuZmlsbExlZnQoY3VycmVudERhdGUuZ2V0RGF0ZSgpKSxcbiAgICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgICBpbk1vbnRoOiBjdXJyZW50RGF0ZS5nZXRNb250aCgpLnRvU3RyaW5nKCkgPT09IG1vbnRoSW5kZXgudG9TdHJpbmcoKSxcbiAgICAgICAgICBpc1RvZGF5OiBjdXJyZW50RGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gdGhpcy50b2RheS50b0RhdGVTdHJpbmcoKVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBkaXNwbGF5V2Vla3MucHVzaCh3ZWVrRGF5cyk7XG4gICAgfVxuICAgIHJldHVybiBkaXNwbGF5V2Vla3M7XG4gIH1cblxuICBwcml2YXRlIGdvVG9EYXRlKGRhdGU6IERhdGUsIHNjcm9sbEJlaGF2aW9yPykge1xuICAgIGNvbnN0IGluZGV4T2JqID0gdGhpcy5nZXRDdXJyZW50SW5kZXgoZGF0ZSk7XG4gICAgY29uc3Qgc2Nyb2xsID0gc2Nyb2xsQmVoYXZpb3IgfHwgKE1hdGguYWJzKGluZGV4T2JqLmJvZHlJbmRleCAtIHRoaXMuY3VycmVudEJvZHlJbmRleCkgPiAxOCA/ICdhdXRvJyA6ICdzbW9vdGgnKTtcbiAgICB0aGlzLmN1cnJlbnRCb2R5SW5kZXggPSBpbmRleE9iai5ib2R5SW5kZXg7XG4gICAgdGhpcy5zY3JvbGxCb2R5Q21wLnNjcm9sbFRvSW5kZXgoaW5kZXhPYmouYm9keUluZGV4LCBzY3JvbGwpO1xuICAgIHRoaXMuZ29Ub0xpc3RCeUluZGV4KGluZGV4T2JqLmxpc3RJbmRleCk7XG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnb1RvTGlzdEJ5SW5kZXgoaW5kZXgpIHtcbiAgICBjb25zdCBpbmRleERlbHRhID0gTWF0aC5hYnModGhpcy5zY3JvbGxMaXN0Q21wLm1lYXN1cmVTY3JvbGxPZmZzZXQoKSAvIDMwIC0gaW5kZXgpO1xuICAgIHRoaXMuc2Nyb2xsTGlzdENtcC5zY3JvbGxUb0luZGV4KGluZGV4IC0gNCwgaW5kZXhEZWx0YSA8IDEyID8gJ3Ntb290aCcgOiAnYXV0bycpO1xuICAgIHRoaXMudXBkYXRlTGlzdEFjdGl2ZShpbmRleCk7XG4gIH1cblxuICBzZWxlY3RNb250aCh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xuICAgIGNvbnN0IGN1clllYXIgPSB0aGlzLnllYXJBbmRNb250aExpc3QuZmluZCh0ID0+IHQuYWN0aXZlKT8ueWVhciB8fCB0aGlzLmN1ckRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAvLyDlpKrov5znmoTomZrmi5/mu5rliqjkvJrlr7zoh7Tnmb3lsY/vvIzmiYDku6XotoXov4fkuKTlubTnmoTmu5rliqjpg73nm7TmjqXot7PovaxcbiAgICBjb25zdCBpc1Ntb290aEFuaW1hdGlvbiA9IE1hdGguYWJzKGN1clllYXIgLSB5ZWFyKSA8IDI7XG5cbiAgICBpZiAodGhpcy5pc0xpc3RDb2xsb3BzZSkge1xuICAgICAgdGhpcy50b2dnbGVMaXN0Q29sbG9wc2UoZGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ29Ub0RhdGUoZGF0ZSwgaXNTbW9vdGhBbmltYXRpb24gPyAnc21vb3RoJyA6ICdhdXRvJyk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUmFuZ2VEYXRlKGRhdGVMaXN0OiBEYXRlW10pIHtcbiAgICBpZiAoIWRhdGVMaXN0KSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VEYXRlID0gW107XG4gICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3VyRGF0ZSA9ICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdzdGFydCcgP1xuICAgICAgKGRhdGVMaXN0WzBdIHx8IGRhdGVMaXN0WzFdKSA6IChkYXRlTGlzdFsxXSB8fCBkYXRlTGlzdFswXSkpIHx8IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgbW9yZVRoYW5PbmVZZWFyID0gTWF0aC5hYnMoY3VyRGF0ZS5nZXRGdWxsWWVhcigpIC0gKHRoaXMuY3VycmVudEJvZHlJbmRleCAvIDEyICsgdGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZVswXSkpID4gMTtcbiAgICB0aGlzLnNlbGVjdGVkUmFuZ2VEYXRlID0gZGF0ZUxpc3Q7XG4gICAgdGhpcy5nb1RvRGF0ZShjdXJEYXRlLCBtb3JlVGhhbk9uZVllYXIgPyAnYXV0bycgOiAnc21vb3RoJyk7XG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgdXBkYXRlU2luZ2xlRGF0ZShkYXRlOiBEYXRlKSB7XG4gICAgaWYgKCFkYXRlKSB7XG4gICAgICB0aGlzLmN1ckRhdGUgPSBudWxsO1xuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb3JlVGhhbk9uZVllYXIgPSBNYXRoLmFicyhkYXRlLmdldEZ1bGxZZWFyKCkgLSAodGhpcy5jdXJyZW50Qm9keUluZGV4IC8gMTIgKyB0aGlzLnBpY2tlclNydi5jYWxlbmRhclJhbmdlWzBdKSkgPiAxO1xuICAgIHRoaXMuY3VyRGF0ZSA9IGRhdGU7XG4gICAgdGhpcy5nb1RvRGF0ZSh0aGlzLmN1ckRhdGUsIG1vcmVUaGFuT25lWWVhciA/ICdhdXRvJyA6ICdzbW9vdGgnKTtcbiAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICB1cGRhdGVMaXN0QWN0aXZlKGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBjdXJBY3RpdmUgPSB0aGlzLnllYXJBbmRNb250aExpc3QuZmluZCh0ID0+IHQuYWN0aXZlKTtcbiAgICBpZiAoY3VyQWN0aXZlKSB7XG4gICAgICBjdXJBY3RpdmUuYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMueWVhckFuZE1vbnRoTGlzdFtpbmRleF0uYWN0aXZlID0gdHJ1ZTtcbiAgfVxuXG4gIGdldEN1cnJlbnRJbmRleChjdXJEYXRlOiBEYXRlKSB7XG4gICAgY29uc3QgeWVhciA9IGN1ckRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IGN1ckRhdGUuZ2V0TW9udGgoKTtcbiAgICBjb25zdCBsaXN0SW5kZXggPSB0aGlzLmlzTGlzdENvbGxvcHNlID9cbiAgICAgICh5ZWFyIC0gdGhpcy5waWNrZXJTcnYuY2FsZW5kYXJSYW5nZVswXSkgOiAoeWVhciAtIHRoaXMucGlja2VyU3J2LmNhbGVuZGFyUmFuZ2VbMF0pICogMTMgKyBtb250aCArIDE7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJvZHlJbmRleDogKHllYXIgLSB0aGlzLnBpY2tlclNydi5jYWxlbmRhclJhbmdlWzBdKSAqIDEyICsgbW9udGgsXG4gICAgICBsaXN0SW5kZXhcbiAgICB9O1xuICB9XG5cbiAgc2VsZWN0RGF0ZShkYXk6IERldnVpQ2FsZW5kYXJEYXRlSXRlbSkge1xuICAgIGlmICh0aGlzLmlzRGlzYWJsZWQoZGF5LmRhdGUpIHx8ICFkYXkuaW5Nb250aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzV2Vla1NlbGVjdCkge1xuICAgICAgdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlID0gdGhpcy5nZXRXZWVrUmFuZ2UoZGF5LmRhdGUpO1xuICAgICAgdGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID0gJ2VuZCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VyRGF0ZSA9IG5ldyBEYXRlKGRheS5kYXRlLnNldEhvdXJzKHRoaXMucGlja2VyU3J2LmN1ckhvdXIsIHRoaXMucGlja2VyU3J2LmN1ck1pbiwgdGhpcy5waWNrZXJTcnYuY3VyU2VjKSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzUmFuZ2VUeXBlKSB7XG4gICAgICB0aGlzLnBpY2tlclNydi5maXhSYW5nZURhdGUoKTtcbiAgICB9XG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIC8vIOmdnuaXtumXtOaooeW8j+S4i+mAieWujOW8gOWni+aXpeacn+i3s+i9rOWIsOe7k+adn+aXpeacn1xuICAgIGlmICh0aGlzLmlzUmFuZ2VUeXBlICYmICF0aGlzLnBpY2tlclNydi5zaG93VGltZSkge1xuICAgICAgaWYgKHRoaXMucGlja2VyU3J2LmN1cnJlbnRBY3RpdmVJbnB1dCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICB0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPSAnZW5kJztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnZW5kJyAmJiAhdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZVswXSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VEYXRlWzBdID0gdGhpcy5jdXJEYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5waWNrZXJTcnYuY2xvc2VEcm9wZG93bkV2ZW50Lm5leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5waWNrZXJTcnYuc2VsZWN0ZWREYXRlQ2hhbmdlLm5leHQoe1xuICAgICAgdHlwZTogdGhpcy5pc1JhbmdlVHlwZSA/ICdyYW5nZScgOiAnc2luZ2xlJyxcbiAgICAgIHZhbHVlOiB0aGlzLmlzUmFuZ2VUeXBlID8gdGhpcy5zZWxlY3RlZFJhbmdlRGF0ZSA6IHRoaXMuY3VyRGF0ZVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuaXNSYW5nZVR5cGUgJiYgdGhpcy5waWNrZXJTcnYuc2hvd1RpbWUpIHtcbiAgICAgIHRoaXMucGlja2VyU3J2LnVwZGF0ZVRpbWVDaGFuZ2UubmV4dCh7XG4gICAgICAgIGFjdGl2ZUlucHV0OiB0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQsXG4gICAgICAgIGhvdXI6IHRoaXMucGlja2VyU3J2LmN1ckhvdXIsXG4gICAgICAgIG1pbjogdGhpcy5waWNrZXJTcnYuY3VyTWluLFxuICAgICAgICBzZWNvbmRzOiB0aGlzLnBpY2tlclNydi5jdXJTZWNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBpY2tlclNydi5jbG9zZUFmdGVyU2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMucGlja2VyU3J2LmNsb3NlRHJvcGRvd25FdmVudC5uZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgaXNTdGFydERhdGUoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5pc1N0YXJ0RGF0ZShkYXRlKTtcbiAgfVxuXG4gIGlzRGlzYWJsZWQoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5waWNrZXJTcnYuZGF0ZUluUmFuZ2UoZGF0ZSk7XG4gIH1cblxuICBpc0VuZERhdGUoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5pc0VuZERhdGUoZGF0ZSk7XG4gIH1cblxuICBpc0RhdGVJblJhbmdlKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5pc1dlZWtTZWxlY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzSW5XZWVrSG92ZXJSYW5nZShkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmlzRGF0ZUluUmFuZ2UoZGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgaXNEYXRlSW5TZWxlY3RSYW5nZShkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmlzRGF0ZUluU2VsZWN0UmFuZ2UoZGF0ZSk7XG4gIH1cblxuICBpc0RhdGVBY3RpdmUoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBpY2tlclNydi5pc0RhdGVBY3RpdmUoZGF0ZSk7XG4gIH1cblxuICBpc0FjdGl2ZVR5cGVEYXRlKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNBY3RpdmVJbnB1dFR5cGVEYXRlKGRhdGUpO1xuICB9XG5cbiAgaXNEYXRlQWJhbmRvbihkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGlja2VyU3J2LmlzRGF0ZUFiYW5kb24oZGF0ZSk7XG4gIH1cblxuICBpc0RhdGVTdWdnZXN0KGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNJblN1Z2dlc3RMaXN0KGRhdGUpO1xuICB9XG5cbiAgaXNEYXRlTWFya2VkKGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5waWNrZXJTcnYuaXNNYXJrZWREYXRlKGRhdGUpO1xuICB9XG5cbiAgaXNTaW5nbGVEYXRlKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLnBpY2tlclNydi5jdXJyZW50QWN0aXZlSW5wdXQgPT09ICdzdGFydCcpIHtcbiAgICAgIHJldHVybiAhdGhpcy5waWNrZXJTcnYuY3VyUmFuZ2VEYXRlWzFdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5waWNrZXJTcnYuY3VycmVudEFjdGl2ZUlucHV0ID09PSAnZW5kJykge1xuICAgICAgcmV0dXJuICF0aGlzLnBpY2tlclNydi5jdXJSYW5nZURhdGVbMF07XG4gICAgfVxuICB9XG5cbiAgc2V0SG92ZXJUYXJnZXQoZGF0ZTogRGF0ZSwgaXNJbk1vbnRoOiBib29sZWFuKSB7XG4gICAgaWYgKCFpc0luTW9udGgpIHtcbiAgICAgIHRoaXMuY3VySG92ZXJEYXRlID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jdXJIb3ZlckRhdGUgPSBkYXRlO1xuICAgIGlmICh0aGlzLmlzV2Vla1NlbGVjdCkge1xuICAgICAgdGhpcy53ZWVrSG92ZXJSYW5nZSA9IHRoaXMuZ2V0V2Vla1JhbmdlKGRhdGUpO1xuICAgICAgdGhpcy5jdXJXZWVrSG92ZXJEYXRlID0gZGF0ZTtcbiAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGdldFdlZWtSYW5nZShkYXRlOiBEYXRlKSB7XG4gICAgaWYgKCFkYXRlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGRpZmYgPSBkYXRlLmdldERheSgpIDwgdGhpcy5waWNrZXJTcnYuc3RhcnRJbmRleE9mV2Vla1xuICAgICAgPyA3IC0gKHRoaXMucGlja2VyU3J2LnN0YXJ0SW5kZXhPZldlZWsgLSBkYXRlLmdldERheSgpKVxuICAgICAgOiBkYXRlLmdldERheSgpIC0gdGhpcy5waWNrZXJTcnYuc3RhcnRJbmRleE9mV2VlaztcbiAgICBjb25zdCB3ZWVrU3RhcnQgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSAtIGRpZmYgKiBEQVlfRFVSQVRJT04pO1xuICAgIGNvbnN0IHdlZWtFbmQgPSBuZXcgRGF0ZSh3ZWVrU3RhcnQuZ2V0VGltZSgpICsgREFZX0RVUkFUSU9OICogNik7XG4gICAgd2Vla0VuZC5zZXRIb3VycygyMywgNTksIDU5KTtcblxuICAgIHJldHVybiBbd2Vla1N0YXJ0LCB3ZWVrRW5kXTtcbiAgfVxuXG4gIGlzSW5XZWVrSG92ZXJSYW5nZShkYXRlOiBEYXRlKSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldFdlZWtSYW5nZSh0aGlzLmN1cldlZWtIb3ZlckRhdGUpO1xuICAgIGNvbnN0IHRpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCB0aW1lU3RyID0gZGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgICBpZiAodGhpcy5waWNrZXJTcnYuaXNEYXRlQWN0aXZlKGRhdGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAoKHJhbmdlWzBdPy5nZXRUaW1lKCkgPCB0aW1lICYmIHRpbWUgPCByYW5nZVsxXT8uZ2V0VGltZSgpKSB8fFxuICAgIChyYW5nZVswXT8udG9EYXRlU3RyaW5nKCkgPT09IHRpbWVTdHIgfHwgdGltZVN0ciA9PT0gcmFuZ2VbMV0/LnRvRGF0ZVN0cmluZygpKSk7XG4gIH1cblxuICB0b2dnbGVMaXN0Q29sbG9wc2UodG9EYXRlPzogRGF0ZSkge1xuICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLnllYXJBbmRNb250aExpc3QuZmluZCh0ID0+IHQuYWN0aXZlKTtcbiAgICBjb25zdCBjdXJZZWFyID0gYWN0aXZlSXRlbT8ueWVhcjtcbiAgICBjb25zdCBjdXJNb250aCA9IGFjdGl2ZUl0ZW0/Lm1vbnRoO1xuICAgIHRoaXMuaXNMaXN0Q29sbG9wc2UgPSAhdGhpcy5pc0xpc3RDb2xsb3BzZTtcbiAgICBpZiAodGhpcy5pc0xpc3RDb2xsb3BzZSkge1xuICAgICAgdGhpcy55ZWFyQW5kTW9udGhMaXN0ID0gdGhpcy55ZWFyQW5kTW9udGhMaXN0LmZpbHRlcih0ID0+ICF0LmlzTW9udGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluaXREYXRhTGlzdCgpO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZ29Ub0RhdGUodG9EYXRlIHx8IG5ldyBEYXRlKGN1clllYXIsIGN1ck1vbnRoIHx8IDAsIDEpLCAnYXV0bycpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGZpbGxMZWZ0KG51bTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bSA8IDEwID8gYDAke251bX1gIDogYCR7bnVtfWA7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnVuc3Vic2NyaWJlJC5uZXh0KCk7XG4gICAgdGhpcy51bnN1YnNjcmliZSQuY29tcGxldGUoKTtcbiAgfVxuXG59XG4iLCI8ZGl2IGNsYXNzPVwiZGV2dWktY2FubGVuZGVyLXBhbmVsXCI+XG4gIDxjZGstdmlydHVhbC1zY3JvbGwtdmlld3BvcnQgI3Njcm9sbExpc3QgW2l0ZW1TaXplXT1cIjMwXCIgY2xhc3M9XCJkZXZ1aS1jYW5sZW5kZXItcGFuZWwteWVhci1saXN0XCIgbWluQnVmZmVyUHg9XCI0MDBcIiBtYXhCdWZmZXJQeD1cIjYwMFwiPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwiZGV2dWktY2FubGVuZGVyLXBhbmVsLXllYXItbGlzdC1pdGVtXCJcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ3RpdGxlLWFjdGl2ZSc6IGl0ZW0uYWN0aXZlIH1cIlxuICAgICAgKmNka1ZpcnR1YWxGb3I9XCJsZXQgaXRlbSBvZiB5ZWFyQW5kTW9udGhMaXN0OyBsZXQgaW5kZXggPSBpbmRleFwiXG4gICAgPlxuICAgICAgPHAgY2xhc3M9XCJkZXZ1aS15ZWFyLXRpdGxlXCIgKm5nSWY9XCIhaXRlbS5pc01vbnRoICYmICFpc0xpc3RDb2xsb3BzZVwiIChjbGljayk9XCJ0b2dnbGVMaXN0Q29sbG9wc2UoKVwiPnt7IGl0ZW0ueWVhciB9fTwvcD5cbiAgICAgIDxwIGNsYXNzPVwiZGV2dWkteWVhci10aXRsZVwiICpuZ0lmPVwiIWl0ZW0uaXNNb250aCAmJiBpc0xpc3RDb2xsb3BzZVwiIChjbGljayk9XCJzZWxlY3RNb250aChpdGVtLnllYXIsIDApXCI+e3sgaXRlbS55ZWFyIH19PC9wPlxuICAgICAgPHAgY2xhc3M9XCJkZXZ1aS1tb250aC10aXRsZVwiICpuZ0lmPVwiaXRlbS5pc01vbnRoXCIgKGNsaWNrKT1cInNlbGVjdE1vbnRoKGl0ZW0ueWVhciwgaXRlbS5tb250aClcIj5cbiAgICAgICAge3sgaTE4blRleHQubW9udGhzT2ZZZWFyW2l0ZW0ubW9udGhdIH19XG4gICAgICA8L3A+XG4gICAgPC9kaXY+XG4gIDwvY2RrLXZpcnR1YWwtc2Nyb2xsLXZpZXdwb3J0PlxuXG4gIDxkaXYgY2xhc3M9XCJkZXZ1aS1jYW5sZW5kZXItcGFuZWwtbWFpblwiPlxuICAgIDx0YWJsZSBjbGFzcz1cImRldnVpLXRhYmxlXCI+XG4gICAgICA8dGhlYWQ+XG4gICAgICAgIDx0ciBjbGFzcz1cInNtYWxsIHRleHQtY2VudGVyIGRldnVpLXdlZWstaGVhZGVyXCI+XG4gICAgICAgICAgPHRkICpuZ0Zvcj1cImxldCBpdGVtIG9mIGkxOG5UZXh0Py5kYXlzT2ZXZWVrXCI+e3sgaXRlbSB9fTwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICA8L3RoZWFkPlxuICAgICAgPHRib2R5PlxuICAgICAgICA8dHI+XG4gICAgICAgICAgPHRkIGNvbHNwYW49XCI3XCI+XG4gICAgICAgICAgICA8Y2RrLXZpcnR1YWwtc2Nyb2xsLXZpZXdwb3J0XG4gICAgICAgICAgICAgICNzY3JvbGxCb2R5XG4gICAgICAgICAgICAgIFtpdGVtU2l6ZV09XCJjYWxlbmRhckl0ZW1TaXplXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJkZXZ1aS10Ym9keS13cmFwcGVyXCJcbiAgICAgICAgICAgICAgbWluQnVmZmVyUHg9XCI0MDBcIlxuICAgICAgICAgICAgICBtYXhCdWZmZXJQeD1cIjYwMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXYgKmNka1ZpcnR1YWxGb3I9XCJsZXQgbW9udGggb2YgYWxsTW9udGhMaXN0OyBsZXQgaW5kZXggPSBpbmRleFwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZGV2dWktdGFibGUtbW9udGgtdGl0bGVcIj57eyBpMThuVGV4dD8uZ2V0WWVhck1vbnRoU3RyKG1vbnRoLnllYXIsIG1vbnRoLm1vbnRoICsgMSkgfX08L3A+XG4gICAgICAgICAgICAgICAgPHRhYmxlXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImRldnVpLW1vbnRoLXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXNpbmdsZS1kYXRlJzogaXNTaW5nbGVEYXRlKClcbiAgICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgICAgKG1vdXNlbGVhdmUpPVwiY3VySG92ZXJEYXRlID0gbnVsbDsgY3VyV2Vla0hvdmVyRGF0ZSA9IG51bGxcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic21hbGwgdGV4dC1jZW50ZXIgZGV2dWktd2Vlay1oZWFkZXJcIiAqbmdGb3I9XCJsZXQgd2VlayBvZiBtb250aC5kaXNwbGF5V2Vla3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGRcbiAgICAgICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUnOiBkYXkuaW5Nb250aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtc2VsZWN0ZWQnOiBpc0RhdGVBY3RpdmUoZGF5LmRhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtZGF0ZS1hYmFuZG9uLXNlbGVjdGVkJzogaXNEYXRlQWJhbmRvbihkYXkuZGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdkZXZ1aS10YWJsZS1kYXRlLXRvZGF5JzogZGF5LmlzVG9kYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdkZXZ1aS10YWJsZS1kYXRlLWRpc2FibGUnOiBpc0Rpc2FibGVkKGRheS5kYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtaW5yYW5nZSc6IGlzRGF0ZUluUmFuZ2UoZGF5LmRhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnZGV2dWktdGFibGUtZGF0ZS1zdGFydCc6IGlzU3RhcnREYXRlKGRheS5kYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtZW5kJzogaXNFbmREYXRlKGRheS5kYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtaW4tc2VsZWN0ZWQtcmFuZ2UnOiBpc0RhdGVJblNlbGVjdFJhbmdlKGRheS5kYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtYWN0aXZlLXR5cGUnOiBpc0FjdGl2ZVR5cGVEYXRlKGRheS5kYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RldnVpLXRhYmxlLWRhdGUtc3VnZ2VzdGVkJzogaXNEYXRlU3VnZ2VzdChkYXkuZGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdkZXZ1aS10YWJsZS1kYXRlLW1hcmtlZCc6IGlzRGF0ZU1hcmtlZChkYXkuZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGRheSBvZiB3ZWVrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRQb3BvdmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBbY29udGVudF09XCJtYXJrRGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbdmlzaWJsZV09XCJpc0RhdGVNYXJrZWQoZGF5LmRhdGUpICYmIGN1ckhvdmVyRGF0ZSA9PT0gZGF5LmRhdGUgJiYgISFtYXJrRGF0ZVRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3REYXRlKGRheSlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKG1vdXNlZW50ZXIpPVwic2V0SG92ZXJUYXJnZXQoZGF5LmRhdGUsIGRheS5pbk1vbnRoKVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3sgZGF5LmluTW9udGggPyBkYXkuZGF5IDogJycgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI21hcmtEYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwibWFya0RhdGVUZW1wbGF0ZVwiIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGRhdGU6IGRheS5kYXRlIH1cIj48L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvY2RrLXZpcnR1YWwtc2Nyb2xsLXZpZXdwb3J0PlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICA8L3Rib2R5PlxuICAgIDwvdGFibGU+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=