import { __decorate, __metadata } from "tslib";
import { CdkConnectedOverlay, CdkOverlayOrigin } from '@angular/cdk/overlay';
import { DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, HostListener, Inject, Input, NgZone, Output, Renderer2, ViewChild } from '@angular/core';
import { addClassToOrigin, AppendToBodyDirectionsConfig, DevConfigService, fadeInOut, formWithDropDown, removeClassFromOrigin, WithConfig } from 'ng-devui/utils';
import { WindowRef } from 'ng-devui/window-ref';
import { ToggleMenuListComponent } from './toggle-menu-list.component';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/window-ref";
import * as i2 from "ng-devui/utils";
import * as i3 from "@angular/common";
import * as i4 from "@angular/cdk/overlay";
export class ToggleMenuContainerComponent {
    constructor(element, windowRef, ngZone, renderer, changeDetectorRef, devConfigService, doc) {
        this.element = element;
        this.windowRef = windowRef;
        this.ngZone = ngZone;
        this.renderer = renderer;
        this.changeDetectorRef = changeDetectorRef;
        this.devConfigService = devConfigService;
        this.doc = doc;
        /**
         * 【可选】是否appendToBody
         */
        this.appendToBody = false;
        this.appendToBodyDirections = ['rightDown', 'leftDown', 'rightUp', 'leftUp'];
        /**
         * 【可选】是否禁用下拉框
         */
        this.disabled = false;
        /**
         * 【可选】是否展示动效
         */
        this.showAnimation = true;
        /**
         * 【可选】是否支持聚焦自动展开下拉
         */
        this.toggleOnFocus = false;
        this.closeScope = 'all';
        this.direction = 'down';
        /**
         * select下拉toggle事件，值为true或false
         */
        this.toggleChange = new EventEmitter();
        this.passEvent = new EventEmitter();
        this._isOpen = false;
        this.isInit = true;
        this.isMouseEvent = false;
        this.startAnimation = false;
        this.labelMinHeight = 20; // position.top小于20px时候，表示光标在第一行
        this.popDirection = 'bottom';
        this.menuPosition = 'bottom';
        this.onDocumentClick = (event) => {
            if (this.listInstance && this.isOpen && this.selectBoxElement && !this.selectBoxElement.nativeElement.contains(event.target)) {
                this.isOpen = false;
                this.listInstance.selectIndex = this.listInstance.activeIndex ? this.listInstance.activeIndex : -1;
                this.changeDetectorRef.detectChanges();
            }
        };
        this.document = this.doc;
    }
    set isOpen(value) {
        if (this._isOpen === value) {
            // 如果toggle-container自身触发开关，父级组件的isOpen随toggleChange改变，会通过input再次返回导致重复触发，通过值是否变化屏蔽该次触发
            return;
        }
        this._isOpen = value;
        this.toggleChange.emit(value);
        this.setDocumentClickListener();
        if (this.selectWrapper) {
            this.dropDownWidth = this.width ? this.width : this.selectWrapper.nativeElement.offsetWidth;
        }
        if (value) {
            addClassToOrigin(this.selectWrapper);
            setTimeout(() => {
                this.startAnimation = true;
                this.changeDetectorRef.detectChanges();
            });
        }
        else {
            removeClassFromOrigin(this.selectWrapper);
        }
    }
    get isOpen() {
        return this._isOpen;
    }
    ngOnInit() {
        this.isInit = false;
        this.setPositions();
    }
    ngOnChanges(changes) {
        if (changes['appendToBodyDirections']) {
            this.setPositions();
        }
    }
    animationEnd() {
        if (!this.isOpen && this.selectMenuElement && this.showAnimation) {
            const targetElement = this.selectMenuElement.nativeElement;
            this.startAnimation = false;
            setTimeout(() => {
                // 动画会覆盖导致display还是block， 所以要等动画覆盖完
                this.renderer.setStyle(targetElement, 'display', 'none');
            });
        }
    }
    setPositions() {
        if (this.appendToBodyDirections && this.appendToBodyDirections.length > 0) {
            this.overlayPositions = this.appendToBodyDirections
                .map((position) => {
                if (typeof position === 'string') {
                    return AppendToBodyDirectionsConfig[position];
                }
                else {
                    return position;
                }
            })
                .filter((position) => position !== undefined);
        }
        else {
            this.overlayPositions = undefined;
        }
    }
    updatePosition() {
        if (this.appendToBody) {
            setTimeout(() => {
                if (this.connectedOverlay && this.connectedOverlay.overlayRef) {
                    this.connectedOverlay.overlayRef.updatePosition();
                }
            });
        }
    }
    setPassEvent(event, type) {
        if (this.isOpen) {
            this.passEvent.emit({ event, type });
        }
    }
    onPositionChange(position) {
        this.menuPosition = position.connectionPair.originY;
    }
    setDocumentClickListener() {
        this.ngZone.runOutsideAngular(() => {
            if (this.isOpen) {
                this.document.addEventListener('click', this.onDocumentClick);
            }
            else {
                this.document.removeEventListener('click', this.onDocumentClick);
            }
        });
    }
    // mousedown mouseup解决focus与click冲突问题
    setMouseEventTrue(event) {
        this.isMouseEvent = true;
    }
    setMouseEventFalse(event) {
        this.isMouseEvent = false;
    }
    autoToggle(event) {
        event.preventDefault();
        event.stopPropagation();
        if (this.toggleOnFocus && !this.disabled && !this.isOpen && !this.isMouseEvent) {
            this.toggle();
        }
    }
    toggle(event) {
        if (this.disabled) {
            this.isOpen = false;
            return;
        }
        if (!this.isOpen) {
            if (!this.appendToBody) {
                let direction = '';
                switch (this.direction) {
                    case 'auto':
                        direction = this.isBottomRectEnough() ? 'bottom' : 'top';
                        break;
                    case 'down':
                        direction = 'bottom';
                        break;
                    case 'up':
                        direction = 'top';
                        break;
                    default:
                        direction = 'bottom';
                }
                this.popDirection = direction;
            }
            else {
                this.updateCdkConnectedOverlayOrigin();
            }
        }
        else {
            if (!this.showAnimation) {
                this.startAnimation = false;
            }
            if (this.closeScope === 'none' || (this.closeScope === 'blank' && this.element.nativeElement.contains(event.target))) {
                return;
            }
        }
        this.isOpen = !this.isOpen;
    }
    isBottomRectEnough() {
        const selectMenuElement = this.selectWrapper.nativeElement;
        const selectInputElement = this.selectBoxElement;
        const displayStyle = selectMenuElement.style['display'] || window.getComputedStyle(selectMenuElement).display;
        let tempStyle;
        if (displayStyle === 'none') {
            // 必要， 否则首次展开必有问题， 如果animationEnd之后设置为none也会有问题
            tempStyle = {
                visibility: selectMenuElement.style.visibility,
                display: selectMenuElement.style.display,
                transform: selectMenuElement.style.transform,
            };
            this.renderer.setStyle(selectMenuElement, 'visibility', 'hidden');
            this.renderer.setStyle(selectMenuElement, 'display', 'block');
            this.renderer.setStyle(selectMenuElement, 'transform', 'translate(0, -9999)');
        }
        const elementHeight = selectMenuElement.offsetHeight;
        const bottomDistance = this.windowRef.innerHeight - selectInputElement.nativeElement.getBoundingClientRect().bottom;
        const isBottomEnough = bottomDistance >= elementHeight;
        if (displayStyle === 'none') {
            this.renderer.setStyle(selectMenuElement, 'visibility', tempStyle.visibility);
            this.renderer.setStyle(selectMenuElement, 'display', tempStyle.display);
            this.renderer.setStyle(selectMenuElement, 'transform', tempStyle.transform);
        }
        return isBottomEnough;
    }
    updateCdkConnectedOverlayOrigin() {
        if (this.selectWrapper?.nativeElement) {
            this.cdkConnectedOverlayOrigin = new CdkOverlayOrigin(formWithDropDown(this.selectWrapper) || this.selectWrapper.nativeElement);
        }
    }
    toggleChangeFn(event) {
        this.isOpen = event;
    }
}
ToggleMenuContainerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: ToggleMenuContainerComponent, deps: [{ token: i0.ElementRef }, { token: i1.WindowRef }, { token: i0.NgZone }, { token: i0.Renderer2 }, { token: i0.ChangeDetectorRef }, { token: i2.DevConfigService }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
ToggleMenuContainerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: ToggleMenuContainerComponent, selector: "d-toggle-menu-container", inputs: { isOpen: "isOpen", appendToBody: "appendToBody", appendToBodyDirections: "appendToBodyDirections", width: "width", size: "size", overview: "overview", position: "position", disabled: "disabled", showAnimation: "showAnimation", toggleOnFocus: "toggleOnFocus", closeScope: "closeScope", direction: "direction", selectWrapper: "selectWrapper" }, outputs: { toggleChange: "toggleChange", passEvent: "passEvent" }, host: { listeners: { "mousedown": "setMouseEventTrue($event)", "mouseup": "setMouseEventFalse($event)" } }, queries: [{ propertyName: "listInstance", first: true, predicate: ToggleMenuListComponent, descendants: true }], viewQueries: [{ propertyName: "selectBoxElement", first: true, predicate: ["selectBox"], descendants: true, static: true }, { propertyName: "selectMenuElement", first: true, predicate: ["selectMenu"], descendants: true, static: true }, { propertyName: "connectedOverlay", first: true, predicate: CdkConnectedOverlay, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div\n  #selectBox\n  class=\"devui-toggle-menu-container devui-toggle-menu{{ size ? '-' + size : '' }} {{ disabled ? 'disabled' : '' }}\"\n  [tabindex]=\"0\"\n  (click)=\"toggle($event)\"\n  (focus)=\"autoToggle($event); setPassEvent($event, 'focus')\"\n  (blur)=\"setPassEvent($event, 'blur')\"\n  (keydown.esc)=\"setPassEvent($event, 'keydown.esc')\"\n  (keydown.ArrowUp)=\"setPassEvent($event, 'keydown.ArrowUp')\"\n  (keydown.ArrowDown)=\"setPassEvent($event, 'keydown.ArrowDown')\"\n  (keydown.enter)=\"setPassEvent($event, 'keydown.enter')\"\n  (keydown)=\"setPassEvent($event, 'keydown')\"\n>\n  <ng-content></ng-content>\n  <ng-container *ngIf=\"appendToBody; else selectDropdownTpl\">\n    <ng-template\n      cdk-connected-overlay\n      [cdkConnectedOverlayOrigin]=\"cdkConnectedOverlayOrigin\"\n      [cdkConnectedOverlayWidth]=\"dropDownWidth\"\n      [cdkConnectedOverlayOpen]=\"isOpen\"\n      [cdkConnectedOverlayPositions]=\"overlayPositions\"\n      (positionChange)=\"onPositionChange($event)\"\n      (backdropClick)=\"toggleChangeFn(false)\"\n    >\n      <ng-template [ngTemplateOutlet]=\"selectDropdownTpl\"></ng-template>\n    </ng-template>\n  </ng-container>\n  <ng-template #selectDropdownTpl>\n    <div\n      #selectMenu\n      class=\"devui-dropdown-menu\"\n      [ngClass]=\"{\n        'devui-dropdown-menu-cdk': appendToBody,\n        'devui-custom-right': listInstance?.customViewDirection === 'right',\n        'devui-custom-left': listInstance?.customViewDirection === 'left',\n        'devui-custom-top': listInstance?.customViewDirection === 'top',\n        'devui-dropdown-menu-multiple': listInstance?.multiple,\n        'devui-reset-min-width': width\n      }\"\n      [@fadeInOut]=\"isOpen && startAnimation ? (appendToBody ? menuPosition : popDirection) : 'void'\"\n      (@fadeInOut.done)=\"animationEnd()\"\n      [@.disabled]=\"!showAnimation\"\n    >\n      <ng-content select=\"d-toggle-menu-list\"></ng-content>\n    </div>\n  </ng-template>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}:host .devui-toggle-menu-container{padding:0;width:100%;height:auto;outline:none;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:2px;border-radius:var(--devui-border-radius, 2px);border:solid 1px #d7d8da;border:solid 1px var(--devui-form-control-line, #d7d8da);background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}:host .devui-toggle-menu-container.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);border-color:#dfe1e6;border-color:var(--devui-disabled-line, #dfe1e6);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}:host ::ng-deep d-toggle-menu-label{max-width:100%}:host ::ng-deep .devui-toggle-menu{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px}:host ::ng-deep .devui-toggle-menu d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu d-toggle-menu-search{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px;line-height:18px}:host ::ng-deep .devui-toggle-menu-lg{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px}:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-search{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px;line-height:46px}:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-list-item{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:40px;line-height:28px}:host ::ng-deep .devui-toggle-menu-sm{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px}:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-search,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-list-item{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px;line-height:14px}:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-list-item{min-height:26px}.devui-dropdown-menu{width:100%;padding-bottom:0}.devui-dropdown-menu:not(.devui-dropdown-menu-cdk){width:calc(100% + 2px);left:-1px;margin:4px 0}.devui-dropdown-menu-cdk{position:static;display:block;width:100%}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-search{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px;line-height:18px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-search{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px;line-height:46px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-list-item{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:40px;line-height:28px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-search,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-list-item{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px;line-height:14px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-list-item{min-height:26px}::ng-deep .devui-dropdown-menu.devui-custom-right,::ng-deep .devui-dropdown-menu.devui-custom-left,::ng-deep .devui-dropdown-menu.devui-custom-top{min-width:400px}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list{width:100%;display:flex!important}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list .devui-dropdown-menu-wrap{display:inline-block}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list .devui-select-custom-area{display:inline-block;overflow:auto}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap{width:calc(50% - 1px)}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area{width:50%}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before{display:none}::ng-deep .devui-dropdown-menu.devui-custom-top{flex-direction:column-reverse}::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-select-custom-area{border-right:1px solid #f2f2f3;border-right:1px solid var(--devui-dividing-line, #f2f2f3);order:-1}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-select-custom-area{border-left:1px solid #f2f2f3;border-left:1px solid var(--devui-dividing-line, #f2f2f3)}::ng-deep .devui-dropdown-menu.devui-custom-top>.devui-select-custom-area{border-bottom:1px solid #f2f2f3;border-bottom:1px solid var(--devui-dividing-line, #f2f2f3)}::ng-deep .devui-dropdown-menu.devui-reset-min-width{min-width:auto}\n"], directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i4.CdkConnectedOverlay, selector: "[cdk-connected-overlay], [connected-overlay], [cdkConnectedOverlay]", inputs: ["cdkConnectedOverlayOrigin", "cdkConnectedOverlayPositions", "cdkConnectedOverlayPositionStrategy", "cdkConnectedOverlayOffsetX", "cdkConnectedOverlayOffsetY", "cdkConnectedOverlayWidth", "cdkConnectedOverlayHeight", "cdkConnectedOverlayMinWidth", "cdkConnectedOverlayMinHeight", "cdkConnectedOverlayBackdropClass", "cdkConnectedOverlayPanelClass", "cdkConnectedOverlayViewportMargin", "cdkConnectedOverlayScrollStrategy", "cdkConnectedOverlayOpen", "cdkConnectedOverlayDisableClose", "cdkConnectedOverlayTransformOriginOn", "cdkConnectedOverlayHasBackdrop", "cdkConnectedOverlayLockPosition", "cdkConnectedOverlayFlexibleDimensions", "cdkConnectedOverlayGrowAfterOpen", "cdkConnectedOverlayPush"], outputs: ["backdropClick", "positionChange", "attach", "detach", "overlayKeydown", "overlayOutsideClick"], exportAs: ["cdkConnectedOverlay"] }, { type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], animations: [fadeInOut], changeDetection: i0.ChangeDetectionStrategy.OnPush });
__decorate([
    WithConfig(),
    __metadata("design:type", Object)
], ToggleMenuContainerComponent.prototype, "showAnimation", void 0);
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: ToggleMenuContainerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-toggle-menu-container', animations: [fadeInOut], changeDetection: ChangeDetectionStrategy.OnPush, preserveWhitespaces: false, template: "<div\n  #selectBox\n  class=\"devui-toggle-menu-container devui-toggle-menu{{ size ? '-' + size : '' }} {{ disabled ? 'disabled' : '' }}\"\n  [tabindex]=\"0\"\n  (click)=\"toggle($event)\"\n  (focus)=\"autoToggle($event); setPassEvent($event, 'focus')\"\n  (blur)=\"setPassEvent($event, 'blur')\"\n  (keydown.esc)=\"setPassEvent($event, 'keydown.esc')\"\n  (keydown.ArrowUp)=\"setPassEvent($event, 'keydown.ArrowUp')\"\n  (keydown.ArrowDown)=\"setPassEvent($event, 'keydown.ArrowDown')\"\n  (keydown.enter)=\"setPassEvent($event, 'keydown.enter')\"\n  (keydown)=\"setPassEvent($event, 'keydown')\"\n>\n  <ng-content></ng-content>\n  <ng-container *ngIf=\"appendToBody; else selectDropdownTpl\">\n    <ng-template\n      cdk-connected-overlay\n      [cdkConnectedOverlayOrigin]=\"cdkConnectedOverlayOrigin\"\n      [cdkConnectedOverlayWidth]=\"dropDownWidth\"\n      [cdkConnectedOverlayOpen]=\"isOpen\"\n      [cdkConnectedOverlayPositions]=\"overlayPositions\"\n      (positionChange)=\"onPositionChange($event)\"\n      (backdropClick)=\"toggleChangeFn(false)\"\n    >\n      <ng-template [ngTemplateOutlet]=\"selectDropdownTpl\"></ng-template>\n    </ng-template>\n  </ng-container>\n  <ng-template #selectDropdownTpl>\n    <div\n      #selectMenu\n      class=\"devui-dropdown-menu\"\n      [ngClass]=\"{\n        'devui-dropdown-menu-cdk': appendToBody,\n        'devui-custom-right': listInstance?.customViewDirection === 'right',\n        'devui-custom-left': listInstance?.customViewDirection === 'left',\n        'devui-custom-top': listInstance?.customViewDirection === 'top',\n        'devui-dropdown-menu-multiple': listInstance?.multiple,\n        'devui-reset-min-width': width\n      }\"\n      [@fadeInOut]=\"isOpen && startAnimation ? (appendToBody ? menuPosition : popDirection) : 'void'\"\n      (@fadeInOut.done)=\"animationEnd()\"\n      [@.disabled]=\"!showAnimation\"\n    >\n      <ng-content select=\"d-toggle-menu-list\"></ng-content>\n    </div>\n  </ng-template>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}:host .devui-toggle-menu-container{padding:0;width:100%;height:auto;outline:none;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-radius:2px;border-radius:var(--devui-border-radius, 2px);border:solid 1px #d7d8da;border:solid 1px var(--devui-form-control-line, #d7d8da);background-color:#fff;background-color:var(--devui-base-bg, #ffffff)}:host .devui-toggle-menu-container.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);border-color:#dfe1e6;border-color:var(--devui-disabled-line, #dfe1e6);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}:host ::ng-deep d-toggle-menu-label{max-width:100%}:host ::ng-deep .devui-toggle-menu{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px}:host ::ng-deep .devui-toggle-menu d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu d-toggle-menu-search{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px;line-height:18px}:host ::ng-deep .devui-toggle-menu-lg{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px}:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-search{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px;line-height:46px}:host ::ng-deep .devui-toggle-menu-lg d-toggle-menu-list-item{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:40px;line-height:28px}:host ::ng-deep .devui-toggle-menu-sm{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px}:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-input,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-placeholder,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-search,:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-list-item{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px;line-height:14px}:host ::ng-deep .devui-toggle-menu-sm d-toggle-menu-list-item{min-height:26px}.devui-dropdown-menu{width:100%;padding-bottom:0}.devui-dropdown-menu:not(.devui-dropdown-menu-cdk){width:calc(100% + 2px);left:-1px;margin:4px 0}.devui-dropdown-menu-cdk{position:static;display:block;width:100%}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk d-toggle-menu-search{font-size:12px;font-size:var(--devui-font-size-md, 12px);min-height:26px;line-height:18px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-search{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:46px;line-height:46px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-lg d-toggle-menu-list-item{font-size:14px;font-size:var(--devui-font-size-lg, 14px);min-height:40px;line-height:28px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-input,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-placeholder,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-search,::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-list-item{font-size:12px;font-size:var(--devui-font-size-sm, 12px);min-height:24px;line-height:14px}::ng-deep .devui-dropdown-menu.devui-dropdown-menu-cdk-sm d-toggle-menu-list-item{min-height:26px}::ng-deep .devui-dropdown-menu.devui-custom-right,::ng-deep .devui-dropdown-menu.devui-custom-left,::ng-deep .devui-dropdown-menu.devui-custom-top{min-width:400px}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list{width:100%;display:flex!important}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list .devui-dropdown-menu-wrap{display:inline-block}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list .devui-select-custom-area{display:inline-block;overflow:auto}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-dropdown-menu-wrap{width:calc(50% - 1px)}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area{width:50%}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before,::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before,::ng-deep .devui-dropdown-menu.devui-custom-top d-toggle-menu-list:not(.devui-custom-top)>.devui-select-custom-area>.devui-select-custom-area:before{display:none}::ng-deep .devui-dropdown-menu.devui-custom-top{flex-direction:column-reverse}::ng-deep .devui-dropdown-menu.devui-custom-left d-toggle-menu-list .devui-select-custom-area{border-right:1px solid #f2f2f3;border-right:1px solid var(--devui-dividing-line, #f2f2f3);order:-1}::ng-deep .devui-dropdown-menu.devui-custom-right d-toggle-menu-list .devui-select-custom-area{border-left:1px solid #f2f2f3;border-left:1px solid var(--devui-dividing-line, #f2f2f3)}::ng-deep .devui-dropdown-menu.devui-custom-top>.devui-select-custom-area{border-bottom:1px solid #f2f2f3;border-bottom:1px solid var(--devui-dividing-line, #f2f2f3)}::ng-deep .devui-dropdown-menu.devui-reset-min-width{min-width:auto}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.WindowRef }, { type: i0.NgZone }, { type: i0.Renderer2 }, { type: i0.ChangeDetectorRef }, { type: i2.DevConfigService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { isOpen: [{
                type: Input
            }], appendToBody: [{
                type: Input
            }], appendToBodyDirections: [{
                type: Input
            }], width: [{
                type: Input
            }], size: [{
                type: Input
            }], overview: [{
                type: Input
            }], position: [{
                type: Input
            }], disabled: [{
                type: Input
            }], showAnimation: [{
                type: Input
            }], toggleOnFocus: [{
                type: Input
            }], closeScope: [{
                type: Input
            }], direction: [{
                type: Input
            }], selectWrapper: [{
                type: Input
            }], toggleChange: [{
                type: Output
            }], passEvent: [{
                type: Output
            }], selectBoxElement: [{
                type: ViewChild,
                args: ['selectBox', { static: true }]
            }], selectMenuElement: [{
                type: ViewChild,
                args: ['selectMenu', { static: true }]
            }], connectedOverlay: [{
                type: ViewChild,
                args: [CdkConnectedOverlay]
            }], listInstance: [{
                type: ContentChild,
                args: [ToggleMenuListComponent]
            }], setMouseEventTrue: [{
                type: HostListener,
                args: ['mousedown', ['$event']]
            }], setMouseEventFalse: [{
                type: HostListener,
                args: ['mouseup', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLW1lbnUtY29udGFpbmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2RldnVpL3RvZ2dsZS1tZW51L3RvZ2dsZS1tZW51LWNvbnRhaW5lci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi9kZXZ1aS90b2dnbGUtbWVudS90b2dnbGUtbWVudS1jb250YWluZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxtQkFBbUIsRUFDbkIsZ0JBQWdCLEVBSWpCLE1BQU0sc0JBQXNCLENBQUM7QUFDOUIsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzNDLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLFlBQVksRUFDWixZQUFZLEVBQ1osTUFBTSxFQUNOLEtBQUssRUFDTCxNQUFNLEVBR04sTUFBTSxFQUNOLFNBQVMsRUFFVCxTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNMLGdCQUFnQixFQUVoQiw0QkFBNEIsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLEVBQ3pELGdCQUFnQixFQUNoQixxQkFBcUIsRUFBRSxVQUFVLEVBQ2xDLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2hELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDOzs7Ozs7QUFVdkUsTUFBTSxPQUFPLDRCQUE0QjtJQStFdkMsWUFDUyxPQUFtQixFQUNsQixTQUFvQixFQUNwQixNQUFjLEVBQ2QsUUFBbUIsRUFDbkIsaUJBQW9DLEVBQ3BDLGdCQUFrQyxFQUNoQixHQUFRO1FBTjNCLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDbEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNwQixXQUFNLEdBQU4sTUFB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e1xuICBDZGtDb25uZWN0ZWRPdmVybGF5LFxuICBDZGtPdmVybGF5T3JpZ2luLFxuICBDb25uZWN0ZWRPdmVybGF5UG9zaXRpb25DaGFuZ2UsXG4gIENvbm5lY3RlZFBvc2l0aW9uLFxuICBWZXJ0aWNhbENvbm5lY3Rpb25Qb3Ncbn0gZnJvbSAnQGFuZ3VsYXIvY2RrL292ZXJsYXknO1xuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0TGlzdGVuZXIsXG4gIEluamVjdCxcbiAgSW5wdXQsXG4gIE5nWm9uZSxcbiAgT25DaGFuZ2VzLFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgUmVuZGVyZXIyLFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBhZGRDbGFzc1RvT3JpZ2luLFxuICBBcHBlbmRUb0JvZHlEaXJlY3Rpb24sXG4gIEFwcGVuZFRvQm9keURpcmVjdGlvbnNDb25maWcsIERldkNvbmZpZ1NlcnZpY2UsIGZhZGVJbk91dCxcbiAgZm9ybVdpdGhEcm9wRG93bixcbiAgcmVtb3ZlQ2xhc3NGcm9tT3JpZ2luLCBXaXRoQ29uZmlnXG59IGZyb20gJ25nLWRldnVpL3V0aWxzJztcbmltcG9ydCB7IFdpbmRvd1JlZiB9IGZyb20gJ25nLWRldnVpL3dpbmRvdy1yZWYnO1xuaW1wb3J0IHsgVG9nZ2xlTWVudUxpc3RDb21wb25lbnQgfSBmcm9tICcuL3RvZ2dsZS1tZW51LWxpc3QuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZC10b2dnbGUtbWVudS1jb250YWluZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vdG9nZ2xlLW1lbnUtY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbYC4vdG9nZ2xlLW1lbnUtY29udGFpbmVyLmNvbXBvbmVudC5zY3NzYF0sXG4gIGFuaW1hdGlvbnM6IFtmYWRlSW5PdXRdLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2UsXG59KVxuZXhwb3J0IGNsYXNzIFRvZ2dsZU1lbnVDb250YWluZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHNldCBpc09wZW4odmFsdWUpIHtcbiAgICBpZiAodGhpcy5faXNPcGVuID09PSB2YWx1ZSkge1xuICAgICAgLy8g5aaC5p6cdG9nZ2xlLWNvbnRhaW5lcuiHqui6q+inpuWPkeW8gOWFs++8jOeItue6p+e7hOS7tueahGlzT3Blbumaj3RvZ2dsZUNoYW5nZeaUueWPmO+8jOS8mumAmui/h2lucHV05YaN5qyh6L+U5Zue5a+86Ie06YeN5aSN6Kem5Y+R77yM6YCa6L+H5YC85piv5ZCm5Y+Y5YyW5bGP6JS96K+l5qyh6Kem5Y+RXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzT3BlbiA9IHZhbHVlO1xuICAgIHRoaXMudG9nZ2xlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgIHRoaXMuc2V0RG9jdW1lbnRDbGlja0xpc3RlbmVyKCk7XG4gICAgaWYgKHRoaXMuc2VsZWN0V3JhcHBlcikge1xuICAgICAgdGhpcy5kcm9wRG93bldpZHRoID0gdGhpcy53aWR0aCA/IHRoaXMud2lkdGggOiB0aGlzLnNlbGVjdFdyYXBwZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBhZGRDbGFzc1RvT3JpZ2luKHRoaXMuc2VsZWN0V3JhcHBlcik7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zdGFydEFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZUNsYXNzRnJvbU9yaWdpbih0aGlzLnNlbGVjdFdyYXBwZXIpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc09wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzT3BlbjtcbiAgfVxuICAvKipcbiAgICog44CQ5Y+v6YCJ44CR5piv5ZCmYXBwZW5kVG9Cb2R5XG4gICAqL1xuICBASW5wdXQoKSBhcHBlbmRUb0JvZHkgPSBmYWxzZTtcbiAgQElucHV0KCkgYXBwZW5kVG9Cb2R5RGlyZWN0aW9uczogQXJyYXk8QXBwZW5kVG9Cb2R5RGlyZWN0aW9uIHwgQ29ubmVjdGVkUG9zaXRpb24+ID0gWydyaWdodERvd24nLCAnbGVmdERvd24nLCAncmlnaHRVcCcsICdsZWZ0VXAnXTtcbiAgLyoqXG4gICAqIOOAkOWPr+mAieOAkWNka+aooeW8j29yaWdpbiB3aWR0aFxuICAgKi9cbiAgQElucHV0KCkgd2lkdGg6IG51bWJlcjtcbiAgQElucHV0KCkgc2l6ZTogJycgfCAnc20nIHwgJ2xnJztcbiAgLyoqXG4gICAqIGF1dG8tY29tcGxldGUg5Y+C5pWwXG4gICAqL1xuICBASW5wdXQoKSBvdmVydmlldzogc3RyaW5nO1xuICBASW5wdXQoKSBwb3NpdGlvbjogYW55O1xuICAvKipcbiAgICog44CQ5Y+v6YCJ44CR5piv5ZCm56aB55So5LiL5ouJ5qGGXG4gICAqL1xuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xuICAvKipcbiAgICog44CQ5Y+v6YCJ44CR5piv5ZCm5bGV56S65Yqo5pWIXG4gICAqL1xuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHNob3dBbmltYXRpb24gPSB0cnVlO1xuICAvKipcbiAgICog44CQ5Y+v6YCJ44CR5piv5ZCm5pSv5oyB6IGa54Sm6Ieq5Yqo5bGV5byA5LiL5ouJXG4gICAqL1xuICBASW5wdXQoKSB0b2dnbGVPbkZvY3VzID0gZmFsc2U7XG4gIEBJbnB1dCgpIGNsb3NlU2NvcGU6ICdhbGwnIHwgJ2JsYW5rJyB8ICdub25lJyA9ICdhbGwnO1xuICBASW5wdXQoKSBkaXJlY3Rpb246ICd1cCcgfCAnZG93bicgfCAnYXV0bycgPSAnZG93bic7XG4gIEBJbnB1dCgpIHNlbGVjdFdyYXBwZXI6IEVsZW1lbnRSZWY7XG5cbiAgLyoqXG4gICAqIHNlbGVjdOS4i+aLiXRvZ2dsZeS6i+S7tu+8jOWAvOS4unRydWXmiJZmYWxzZVxuICAgKi9cbiAgQE91dHB1dCgpIHRvZ2dsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgcGFzc0V2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBWaWV3Q2hpbGQoJ3NlbGVjdEJveCcsIHsgc3RhdGljOiB0cnVlIH0pIHNlbGVjdEJveEVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3NlbGVjdE1lbnUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBzZWxlY3RNZW51RWxlbWVudDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZChDZGtDb25uZWN0ZWRPdmVybGF5KSBjb25uZWN0ZWRPdmVybGF5OiBDZGtDb25uZWN0ZWRPdmVybGF5O1xuICBAQ29udGVudENoaWxkKFRvZ2dsZU1lbnVMaXN0Q29tcG9uZW50KSBsaXN0SW5zdGFuY2U6IFRvZ2dsZU1lbnVMaXN0Q29tcG9uZW50O1xuXG4gIF9pc09wZW4gPSBmYWxzZTtcbiAgaXNJbml0ID0gdHJ1ZTtcbiAgaXNNb3VzZUV2ZW50ID0gZmFsc2U7XG4gIHN0YXJ0QW5pbWF0aW9uID0gZmFsc2U7XG4gIGxhYmVsTWluSGVpZ2h0ID0gMjA7IC8vIHBvc2l0aW9uLnRvcOWwj+S6jjIwcHjml7blgJnvvIzooajnpLrlhYnmoIflnKjnrKzkuIDooYxcbiAgcG9wRGlyZWN0aW9uOiAndG9wJyB8ICdib3R0b20nID0gJ2JvdHRvbSc7XG4gIG1lbnVQb3NpdGlvbjogVmVydGljYWxDb25uZWN0aW9uUG9zID0gJ2JvdHRvbSc7XG4gIGNka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW46IENka092ZXJsYXlPcmlnaW47XG4gIG92ZXJsYXlQb3NpdGlvbnM6IEFycmF5PENvbm5lY3RlZFBvc2l0aW9uPjtcbiAgZHJvcERvd25XaWR0aDogbnVtYmVyO1xuICBkb2N1bWVudDogRG9jdW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSB3aW5kb3dSZWY6IFdpbmRvd1JlZixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIGRldkNvbmZpZ1NlcnZpY2U6IERldkNvbmZpZ1NlcnZpY2UsXG4gICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2M6IGFueVxuICApIHtcbiAgICB0aGlzLmRvY3VtZW50ID0gdGhpcy5kb2M7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmlzSW5pdCA9IGZhbHNlO1xuICAgIHRoaXMuc2V0UG9zaXRpb25zKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXNbJ2FwcGVuZFRvQm9keURpcmVjdGlvbnMnXSkge1xuICAgICAgdGhpcy5zZXRQb3NpdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICBhbmltYXRpb25FbmQoKSB7XG4gICAgaWYgKCF0aGlzLmlzT3BlbiAmJiB0aGlzLnNlbGVjdE1lbnVFbGVtZW50ICYmIHRoaXMuc2hvd0FuaW1hdGlvbikge1xuICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IHRoaXMuc2VsZWN0TWVudUVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgIHRoaXMuc3RhcnRBbmltYXRpb24gPSBmYWxzZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyDliqjnlLvkvJropobnm5blr7zoh7RkaXNwbGF56L+Y5pivYmxvY2vvvIwg5omA5Lul6KaB562J5Yqo55S76KaG55uW5a6MXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGFyZ2V0RWxlbWVudCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgc2V0UG9zaXRpb25zKCkge1xuICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keURpcmVjdGlvbnMgJiYgdGhpcy5hcHBlbmRUb0JvZHlEaXJlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMub3ZlcmxheVBvc2l0aW9ucyA9IHRoaXMuYXBwZW5kVG9Cb2R5RGlyZWN0aW9uc1xuICAgICAgICAubWFwKChwb3NpdGlvbikgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgcG9zaXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gQXBwZW5kVG9Cb2R5RGlyZWN0aW9uc0NvbmZpZ1twb3NpdGlvbl07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbiAhPT0gdW5kZWZpbmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vdmVybGF5UG9zaXRpb25zID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVBvc2l0aW9uKCkge1xuICAgIGlmICh0aGlzLmFwcGVuZFRvQm9keSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZE92ZXJsYXkgJiYgdGhpcy5jb25uZWN0ZWRPdmVybGF5Lm92ZXJsYXlSZWYpIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RlZE92ZXJsYXkub3ZlcmxheVJlZi51cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRQYXNzRXZlbnQoZXZlbnQsIHR5cGUpIHtcbiAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgIHRoaXMucGFzc0V2ZW50LmVtaXQoeyBldmVudCwgdHlwZSB9KTtcbiAgICB9XG4gIH1cblxuICBvblBvc2l0aW9uQ2hhbmdlKHBvc2l0aW9uOiBDb25uZWN0ZWRPdmVybGF5UG9zaXRpb25DaGFuZ2UpIHtcbiAgICB0aGlzLm1lbnVQb3NpdGlvbiA9IHBvc2l0aW9uLmNvbm5lY3Rpb25QYWlyLm9yaWdpblk7XG4gIH1cblxuICBzZXREb2N1bWVudENsaWNrTGlzdGVuZXIoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uRG9jdW1lbnRDbGljayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkRvY3VtZW50Q2xpY2spO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25Eb2N1bWVudENsaWNrID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLmxpc3RJbnN0YW5jZSAmJiB0aGlzLmlzT3BlbiAmJiB0aGlzLnNlbGVjdEJveEVsZW1lbnQgJiYgIXRoaXMuc2VsZWN0Qm94RWxlbWVudC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICB0aGlzLmxpc3RJbnN0YW5jZS5zZWxlY3RJbmRleCA9IHRoaXMubGlzdEluc3RhbmNlLmFjdGl2ZUluZGV4ID8gdGhpcy5saXN0SW5zdGFuY2UuYWN0aXZlSW5kZXggOiAtMTtcbiAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgfTtcblxuICAvLyBtb3VzZWRvd24gbW91c2V1cOino+WGs2ZvY3Vz5LiOY2xpY2vlhrLnqoHpl67pophcbiAgQEhvc3RMaXN0ZW5lcignbW91c2Vkb3duJywgWyckZXZlbnQnXSlcbiAgcHVibGljIHNldE1vdXNlRXZlbnRUcnVlKGV2ZW50KSB7XG4gICAgdGhpcy5pc01vdXNlRXZlbnQgPSB0cnVlO1xuICB9XG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNldXAnLCBbJyRldmVudCddKVxuICBwdWJsaWMgc2V0TW91c2VFdmVudEZhbHNlKGV2ZW50KSB7XG4gICAgdGhpcy5pc01vdXNlRXZlbnQgPSBmYWxzZTtcbiAgfVxuXG4gIGF1dG9Ub2dnbGUoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICh0aGlzLnRvZ2dsZU9uRm9jdXMgJiYgIXRoaXMuZGlzYWJsZWQgJiYgIXRoaXMuaXNPcGVuICYmICF0aGlzLmlzTW91c2VFdmVudCkge1xuICAgICAgdGhpcy50b2dnbGUoKTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGUoZXZlbnQ/OiBFdmVudCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICBpZiAoIXRoaXMuYXBwZW5kVG9Cb2R5KSB7XG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSAnJztcbiAgICAgICAgc3dpdGNoICh0aGlzLmRpcmVjdGlvbikge1xuICAgICAgICBjYXNlICdhdXRvJzpcbiAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmlzQm90dG9tUmVjdEVub3VnaCgpID8gJ2JvdHRvbScgOiAndG9wJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgICAgZGlyZWN0aW9uID0gJ2JvdHRvbSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICBkaXJlY3Rpb24gPSAndG9wJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBkaXJlY3Rpb24gPSAnYm90dG9tJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcERpcmVjdGlvbiA9IDxhbnk+ZGlyZWN0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVDZGtDb25uZWN0ZWRPdmVybGF5T3JpZ2luKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5zaG93QW5pbWF0aW9uKSB7XG4gICAgICAgIHRoaXMuc3RhcnRBbmltYXRpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNsb3NlU2NvcGUgPT09ICdub25lJyB8fCAodGhpcy5jbG9zZVNjb3BlID09PSAnYmxhbmsnICYmIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG4gIH1cblxuICBpc0JvdHRvbVJlY3RFbm91Z2goKSB7XG4gICAgY29uc3Qgc2VsZWN0TWVudUVsZW1lbnQgPSB0aGlzLnNlbGVjdFdyYXBwZXIubmF0aXZlRWxlbWVudDtcbiAgICBjb25zdCBzZWxlY3RJbnB1dEVsZW1lbnQgPSB0aGlzLnNlbGVjdEJveEVsZW1lbnQ7XG4gICAgY29uc3QgZGlzcGxheVN0eWxlID0gc2VsZWN0TWVudUVsZW1lbnQuc3R5bGVbJ2Rpc3BsYXknXSB8fCAoPGFueT53aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoc2VsZWN0TWVudUVsZW1lbnQpLmRpc3BsYXk7XG4gICAgbGV0IHRlbXBTdHlsZTtcbiAgICBpZiAoZGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgIC8vIOW/heimge+8jCDlkKbliJnpppbmrKHlsZXlvIDlv4XmnInpl67popjvvIwg5aaC5p6cYW5pbWF0aW9uRW5k5LmL5ZCO6K6+572u5Li6bm9uZeS5n+S8muaciemXrumimFxuICAgICAgdGVtcFN0eWxlID0ge1xuICAgICAgICB2aXNpYmlsaXR5OiBzZWxlY3RNZW51RWxlbWVudC5zdHlsZS52aXNpYmlsaXR5LFxuICAgICAgICBkaXNwbGF5OiBzZWxlY3RNZW51RWxlbWVudC5zdHlsZS5kaXNwbGF5LFxuICAgICAgICB0cmFuc2Zvcm06IHNlbGVjdE1lbnVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSxcbiAgICAgIH07XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNlbGVjdE1lbnVFbGVtZW50LCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoc2VsZWN0TWVudUVsZW1lbnQsICdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNlbGVjdE1lbnVFbGVtZW50LCAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAtOTk5OSknKTtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudEhlaWdodCA9IHNlbGVjdE1lbnVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICBjb25zdCBib3R0b21EaXN0YW5jZSA9IHRoaXMud2luZG93UmVmLmlubmVySGVpZ2h0IC0gc2VsZWN0SW5wdXRFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuICAgIGNvbnN0IGlzQm90dG9tRW5vdWdoID0gYm90dG9tRGlzdGFuY2UgPj0gZWxlbWVudEhlaWdodDtcbiAgICBpZiAoZGlzcGxheVN0eWxlID09PSAnbm9uZScpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoc2VsZWN0TWVudUVsZW1lbnQsICd2aXNpYmlsaXR5JywgdGVtcFN0eWxlLnZpc2liaWxpdHkpO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzZWxlY3RNZW51RWxlbWVudCwgJ2Rpc3BsYXknLCB0ZW1wU3R5bGUuZGlzcGxheSk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNlbGVjdE1lbnVFbGVtZW50LCAndHJhbnNmb3JtJywgdGVtcFN0eWxlLnRyYW5zZm9ybSk7XG4gICAgfVxuICAgIHJldHVybiBpc0JvdHRvbUVub3VnaDtcbiAgfVxuXG4gIHVwZGF0ZUNka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW4oKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0V3JhcHBlcj8ubmF0aXZlRWxlbWVudCkge1xuICAgICAgdGhpcy5jZGtDb25uZWN0ZWRPdmVybGF5T3JpZ2luID0gbmV3IENka092ZXJsYXlPcmlnaW4oZm9ybVdpdGhEcm9wRG93bih0aGlzLnNlbGVjdFdyYXBwZXIpIHx8IHRoaXMuc2VsZWN0V3JhcHBlci5uYXRpdmVFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVDaGFuZ2VGbihldmVudCkge1xuICAgIHRoaXMuaXNPcGVuID0gZXZlbnQ7XG4gIH1cbn1cbiIsIjxkaXZcbiAgI3NlbGVjdEJveFxuICBjbGFzcz1cImRldnVpLXRvZ2dsZS1tZW51LWNvbnRhaW5lciBkZXZ1aS10b2dnbGUtbWVudXt7IHNpemUgPyAnLScgKyBzaXplIDogJycgfX0ge3sgZGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogJycgfX1cIlxuICBbdGFiaW5kZXhdPVwiMFwiXG4gIChjbGljayk9XCJ0b2dnbGUoJGV2ZW50KVwiXG4gIChmb2N1cyk9XCJhdXRvVG9nZ2xlKCRldmVudCk7IHNldFBhc3NFdmVudCgkZXZlbnQsICdmb2N1cycpXCJcbiAgKGJsdXIpPVwic2V0UGFzc0V2ZW50KCRldmVudCwgJ2JsdXInKVwiXG4gIChrZXlkb3duLmVzYyk9XCJzZXRQYXNzRXZlbnQoJGV2ZW50LCAna2V5ZG93bi5lc2MnKVwiXG4gIChrZXlkb3duLkFycm93VXApPVwic2V0UGFzc0V2ZW50KCRldmVudCwgJ2tleWRvd24uQXJyb3dVcCcpXCJcbiAgKGtleWRvd24uQXJyb3dEb3duKT1cInNldFBhc3NFdmVudCgkZXZlbnQsICdrZXlkb3duLkFycm93RG93bicpXCJcbiAgKGtleWRvd24uZW50ZXIpPVwic2V0UGFzc0V2ZW50KCRldmVudCwgJ2tleWRvd24uZW50ZXInKVwiXG4gIChrZXlkb3duKT1cInNldFBhc3NFdmVudCgkZXZlbnQsICdrZXlkb3duJylcIlxuPlxuICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJhcHBlbmRUb0JvZHk7IGVsc2Ugc2VsZWN0RHJvcGRvd25UcGxcIj5cbiAgICA8bmctdGVtcGxhdGVcbiAgICAgIGNkay1jb25uZWN0ZWQtb3ZlcmxheVxuICAgICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPcmlnaW5dPVwiY2RrQ29ubmVjdGVkT3ZlcmxheU9yaWdpblwiXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheVdpZHRoXT1cImRyb3BEb3duV2lkdGhcIlxuICAgICAgW2Nka0Nvbm5lY3RlZE92ZXJsYXlPcGVuXT1cImlzT3BlblwiXG4gICAgICBbY2RrQ29ubmVjdGVkT3ZlcmxheVBvc2l0aW9uc109XCJvdmVybGF5UG9zaXRpb25zXCJcbiAgICAgIChwb3NpdGlvbkNoYW5nZSk9XCJvblBvc2l0aW9uQ2hhbmdlKCRldmVudClcIlxuICAgICAgKGJhY2tkcm9wQ2xpY2spPVwidG9nZ2xlQ2hhbmdlRm4oZmFsc2UpXCJcbiAgICA+XG4gICAgICA8bmctdGVtcGxhdGUgW25nVGVtcGxhdGVPdXRsZXRdPVwic2VsZWN0RHJvcGRvd25UcGxcIj48L25nLXRlbXBsYXRlPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvbmctY29udGFpbmVyPlxuICA8bmctdGVtcGxhdGUgI3NlbGVjdERyb3Bkb3duVHBsPlxuICAgIDxkaXZcbiAgICAgICNzZWxlY3RNZW51XG4gICAgICBjbGFzcz1cImRldnVpLWRyb3Bkb3duLW1lbnVcIlxuICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAnZGV2dWktZHJvcGRvd24tbWVudS1jZGsnOiBhcHBlbmRUb0JvZHksXG4gICAgICAgICdkZXZ1aS1jdXN0b20tcmlnaHQnOiBsaXN0SW5zdGFuY2U/LmN1c3RvbVZpZXdEaXJlY3Rpb24gPT09ICdyaWdodCcsXG4gICAgICAgICdkZXZ1aS1jdXN0b20tbGVmdCc6IGxpc3RJbnN0YW5jZT8uY3VzdG9tVmlld0RpcmVjdGlvbiA9PT0gJ2xlZnQnLFxuICAgICAgICAnZGV2dWktY3VzdG9tLXRvcCc6IGxpc3RJbnN0YW5jZT8uY3VzdG9tVmlld0RpcmVjdGlvbiA9PT0gJ3RvcCcsXG4gICAgICAgICdkZXZ1aS1kcm9wZG93bi1tZW51LW11bHRpcGxlJzogbGlzdEluc3RhbmNlPy5tdWx0aXBsZSxcbiAgICAgICAgJ2RldnVpLXJlc2V0LW1pbi13aWR0aCc6IHdpZHRoXG4gICAgICB9XCJcbiAgICAgIFtAZmFkZUluT3V0XT1cImlzT3BlbiAmJiBzdGFydEFuaW1hdGlvbiA/IChhcHBlbmRUb0JvZHkgPyBtZW51UG9zaXRpb24gOiBwb3BEaXJlY3Rpb24pIDogJ3ZvaWQnXCJcbiAgICAgIChAZmFkZUluT3V0LmRvbmUpPVwiYW5pbWF0aW9uRW5kKClcIlxuICAgICAgW0AuZGlzYWJsZWRdPVwiIXNob3dBbmltYXRpb25cIlxuICAgID5cbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cImQtdG9nZ2xlLW1lbnUtbGlzdFwiPjwvbmctY29udGVudD5cbiAgICA8L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvZGl2PlxuIl19