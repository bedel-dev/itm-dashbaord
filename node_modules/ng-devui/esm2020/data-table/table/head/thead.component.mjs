import { Component, ContentChildren, EventEmitter, Input, QueryList } from '@angular/core';
import { TableTrComponent } from '../row/tr.component';
import { TableThComponent } from './th/th.component';
import * as i0 from "@angular/core";
export class TableTheadComponent {
    constructor() {
        this.headerCheckStatusEvent = new EventEmitter();
        this.headerChildrenTableToggleEvent = new EventEmitter();
    }
    ngOnInit() { }
    ngAfterContentInit() {
        if (this.headerRowList) {
            this.headerFirstRow = this.headerRowList.first;
            if (this.headerFirstRow) {
                this.headerFirstRow.headerRowspan = this.headerRowList.length;
                this.headerFirstRow.headerCheckable = this.checkable;
                this.headerFirstRow.headerCheckDisabled = this.checkDisabled;
                this.headerFirstRow.headerCheckOptions = this.checkOptions;
                this.checkStatusSubscription = this.headerFirstRow.headerCheckStatusEvent.subscribe((status) => {
                    this.headerCheckStatusEvent.emit(status);
                });
            }
        }
        if (this.thList) {
            this.setNestedThToggle();
            this.thList.changes.subscribe((list) => {
                this.setNestedThToggle();
            });
        }
    }
    ngOnChanges(changes) {
        if ((changes['checkable'] && !changes['checkable'].isFirstChange()) ||
            (changes['checkDisabled'] && !changes['checkDisabled'].isFirstChange()) ||
            (changes['checkOptions'] && !changes['checkOptions'].isFirstChange())) {
            if (this.headerFirstRow) {
                this.headerFirstRow.headerRowspan = this.headerRowList.length;
                this.headerFirstRow.headerCheckable = this.checkable;
                this.headerFirstRow.headerCheckDisabled = this.checkDisabled;
                this.headerFirstRow.headerCheckOptions = this.checkOptions;
            }
        }
    }
    setNestedThToggle() {
        this.nestedTh = this.thList.find(th => {
            return th.nestedColumn;
        });
        if (this.nestedTh) {
            this.toggleTableSubscription = this.nestedTh.toggleChildrenTableEvent.subscribe((childrenTableOpen) => {
                this.headerChildrenTableToggleEvent.emit(childrenTableOpen);
            });
        }
    }
    setHeaderCheckStatus(status) {
        if (status.pageAllChecked !== undefined) {
            this.headerFirstRow.headerChecked = status.pageAllChecked;
        }
        if (status.pageHalfChecked !== undefined) {
            this.headerFirstRow.headerHalfChecked = status.pageHalfChecked;
        }
    }
    setHeaderToggleStatus(open) {
        if (this.nestedTh) {
            this.nestedTh.childrenTableOpen = open;
        }
    }
    ngOnDestroy() {
        if (this.checkStatusSubscription) {
            this.checkStatusSubscription.unsubscribe();
            this.checkStatusSubscription = null;
        }
        if (this.toggleTableSubscription) {
            this.toggleTableSubscription.unsubscribe();
            this.toggleTableSubscription = null;
        }
    }
}
TableTheadComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: TableTheadComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
TableTheadComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: TableTheadComponent, selector: "[dTableHead]", inputs: { checkable: "checkable", checkDisabled: "checkDisabled", checkOptions: "checkOptions" }, queries: [{ propertyName: "headerRowList", predicate: TableTrComponent }, { propertyName: "thList", predicate: TableThComponent, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<ng-content></ng-content>\n" });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: TableTheadComponent, decorators: [{
            type: Component,
            args: [{ selector: '[dTableHead]', template: "<ng-content></ng-content>\n" }]
        }], ctorParameters: function () { return []; }, propDecorators: { checkable: [{
                type: Input
            }], checkDisabled: [{
                type: Input
            }], checkOptions: [{
                type: Input
            }], headerRowList: [{
                type: ContentChildren,
                args: [TableTrComponent]
            }], thList: [{
                type: ContentChildren,
                args: [TableThComponent, { descendants: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhlYWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vZGV2dWkvZGF0YS10YWJsZS90YWJsZS9oZWFkL3RoZWFkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvdGFibGUvaGVhZC90aGVhZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ2EsU0FBUyxFQUFFLGVBQWUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFnQyxTQUFTLEVBQzNHLE1BQU0sZUFBZSxDQUFDO0FBR3ZCLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDOztBQU9yRCxNQUFNLE9BQU8sbUJBQW1CO0lBYzlCO1FBSEEsMkJBQXNCLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztRQUNyRCxtQ0FBOEIsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO0lBRTdDLENBQUM7SUFFakIsUUFBUSxLQUFJLENBQUM7SUFFYixrQkFBa0I7UUFDaEIsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7WUFDL0MsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO2dCQUN2QixJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztnQkFDOUQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDckQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO2dCQUM3RCxJQUFJLENBQUMsY0FBYyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxZQUFZLENB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dUJBQXVCLEVBQUU7WUFDaEMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzNDLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUM7U0FDckM7SUFDSCxDQUFDOztnSEE1RlUsbUJBQW1CO29HQUFuQixtQkFBbUIsb0xBSWIsZ0JBQWdCLHlDQUNoQixnQkFBZ0IscUVDbEJuQyw2QkFDQTsyRkRZYSxtQkFBbUI7a0JBTC9CLFNBQVM7K0JBRUUsY0FBYzswRUFJZixTQUFTO3NCQUFqQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDNkIsYUFBYTtzQkFBL0MsZUFBZTt1QkFBQyxnQkFBZ0I7Z0JBQ3lCLE1BQU07c0JBQS9ELGVBQWU7dUJBQUMsZ0JBQWdCLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJDb250ZW50SW5pdCwgQ29tcG9uZW50LCBDb250ZW50Q2hpbGRyZW4sIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIFF1ZXJ5TGlzdCwgU2ltcGxlQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVGFibGVDaGVja09wdGlvbnMsIFRhYmxlQ2hlY2tTdGF0dXNBcmcgfSBmcm9tICcuLi8uLi9kYXRhLXRhYmxlLm1vZGVsJztcbmltcG9ydCB7IFRhYmxlVHJDb21wb25lbnQgfSBmcm9tICcuLi9yb3cvdHIuY29tcG9uZW50JztcbmltcG9ydCB7IFRhYmxlVGhDb21wb25lbnQgfSBmcm9tICcuL3RoL3RoLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L2NvbXBvbmVudC1zZWxlY3RvciovXG4gIHNlbGVjdG9yOiAnW2RUYWJsZUhlYWRdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RoZWFkLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBUYWJsZVRoZWFkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIGNoZWNrYWJsZTogYm9vbGVhbjtcbiAgQElucHV0KCkgY2hlY2tEaXNhYmxlZDogYm9vbGVhbjtcbiAgQElucHV0KCkgY2hlY2tPcHRpb25zOiBUYWJsZUNoZWNrT3B0aW9uc1tdO1xuICBAQ29udGVudENoaWxkcmVuKFRhYmxlVHJDb21wb25lbnQpIGhlYWRlclJvd0xpc3Q6IFF1ZXJ5TGlzdDxUYWJsZVRyQ29tcG9uZW50PjtcbiAgQENvbnRlbnRDaGlsZHJlbihUYWJsZVRoQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIHRoTGlzdDogUXVlcnlMaXN0PFRhYmxlVGhDb21wb25lbnQ+O1xuXG4gIGhlYWRlckZpcnN0Um93OiBUYWJsZVRyQ29tcG9uZW50O1xuICBuZXN0ZWRUaDogVGFibGVUaENvbXBvbmVudDtcbiAgdG9nZ2xlVGFibGVTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgY2hlY2tTdGF0dXNTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgaGVhZGVyQ2hlY2tTdGF0dXNFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcbiAgaGVhZGVyQ2hpbGRyZW5UYWJsZVRvZ2dsZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgbmdPbkluaXQoKSB7fVxuXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICBpZiAodGhpcy5oZWFkZXJSb3dMaXN0KSB7XG4gICAgICB0aGlzLmhlYWRlckZpcnN0Um93ID0gdGhpcy5oZWFkZXJSb3dMaXN0LmZpcnN0O1xuICAgICAgaWYgKHRoaXMuaGVhZGVyRmlyc3RSb3cpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJGaXJzdFJvdy5oZWFkZXJSb3dzcGFuID0gdGhpcy5oZWFkZXJSb3dMaXN0Lmxlbmd0aDtcbiAgICAgICAgdGhpcy5oZWFkZXJGaXJzdFJvdy5oZWFkZXJDaGVja2FibGUgPSB0aGlzLmNoZWNrYWJsZTtcbiAgICAgICAgdGhpcy5oZWFkZXJGaXJzdFJvdy5oZWFkZXJDaGVja0Rpc2FibGVkID0gdGhpcy5jaGVja0Rpc2FibGVkO1xuICAgICAgICB0aGlzLmhlYWRlckZpcnN0Um93LmhlYWRlckNoZWNrT3B0aW9ucyA9IHRoaXMuY2hlY2tPcHRpb25zO1xuXG4gICAgICAgIHRoaXMuY2hlY2tTdGF0dXNTdWJzY3JpcHRpb24gPSB0aGlzLmhlYWRlckZpcnN0Um93LmhlYWRlckNoZWNrU3RhdHVzRXZlbnQuc3Vic2NyaWJlKChzdGF0dXMpID0+IHtcbiAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrU3RhdHVzRXZlbnQuZW1pdChzdGF0dXMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGhMaXN0KSB7XG4gICAgICB0aGlzLnNldE5lc3RlZFRoVG9nZ2xlKCk7XG4gICAgICB0aGlzLnRoTGlzdC5jaGFuZ2VzLnN1YnNjcmliZSgobGlzdCkgPT4ge1xuICAgICAgICB0aGlzLnNldE5lc3RlZFRoVG9nZ2xlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKFxuICAgICAgKGNoYW5nZXNbJ2NoZWNrYWJsZSddICYmICFjaGFuZ2VzWydjaGVja2FibGUnXS5pc0ZpcnN0Q2hhbmdlKCkpIHx8XG4gICAgICAoY2hhbmdlc1snY2hlY2tEaXNhYmxlZCddICYmICFjaGFuZ2VzWydjaGVja0Rpc2FibGVkJ10uaXNGaXJzdENoYW5nZSgpKSB8fFxuICAgICAgKGNoYW5nZXNbJ2NoZWNrT3B0aW9ucyddICYmICFjaGFuZ2VzWydjaGVja09wdGlvbnMnXS5pc0ZpcnN0Q2hhbmdlKCkpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5oZWFkZXJGaXJzdFJvdykge1xuICAgICAgICB0aGlzLmhlYWRlckZpcnN0Um93LmhlYWRlclJvd3NwYW4gPSB0aGlzLmhlYWRlclJvd0xpc3QubGVuZ3RoO1xuICAgICAgICB0aGlzLmhlYWRlckZpcnN0Um93LmhlYWRlckNoZWNrYWJsZSA9IHRoaXMuY2hlY2thYmxlO1xuICAgICAgICB0aGlzLmhlYWRlckZpcnN0Um93LmhlYWRlckNoZWNrRGlzYWJsZWQgPSB0aGlzLmNoZWNrRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuaGVhZGVyRmlyc3RSb3cuaGVhZGVyQ2hlY2tPcHRpb25zID0gdGhpcy5jaGVja09wdGlvbnM7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TmVzdGVkVGhUb2dnbGUoKSB7XG4gICAgdGhpcy5uZXN0ZWRUaCA9IHRoaXMudGhMaXN0LmZpbmQodGggPT4ge1xuICAgICAgcmV0dXJuIHRoLm5lc3RlZENvbHVtbjtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLm5lc3RlZFRoKSB7XG4gICAgICB0aGlzLnRvZ2dsZVRhYmxlU3Vic2NyaXB0aW9uID0gdGhpcy5uZXN0ZWRUaC50b2dnbGVDaGlsZHJlblRhYmxlRXZlbnQuc3Vic2NyaWJlKChjaGlsZHJlblRhYmxlT3BlbikgPT4ge1xuICAgICAgICB0aGlzLmhlYWRlckNoaWxkcmVuVGFibGVUb2dnbGVFdmVudC5lbWl0KGNoaWxkcmVuVGFibGVPcGVuKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNldEhlYWRlckNoZWNrU3RhdHVzKHN0YXR1czogVGFibGVDaGVja1N0YXR1c0FyZykge1xuICAgIGlmIChzdGF0dXMucGFnZUFsbENoZWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5oZWFkZXJGaXJzdFJvdy5oZWFkZXJDaGVja2VkID0gc3RhdHVzLnBhZ2VBbGxDaGVja2VkO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMucGFnZUhhbGZDaGVja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaGVhZGVyRmlyc3RSb3cuaGVhZGVySGFsZkNoZWNrZWQgPSBzdGF0dXMucGFnZUhhbGZDaGVja2VkO1xuICAgIH1cbiAgfVxuXG4gIHNldEhlYWRlclRvZ2dsZVN0YXR1cyhvcGVuOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMubmVzdGVkVGgpIHtcbiAgICAgIHRoaXMubmVzdGVkVGguY2hpbGRyZW5UYWJsZU9wZW4gPSBvcGVuO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmNoZWNrU3RhdHVzU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmNoZWNrU3RhdHVzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB0aGlzLmNoZWNrU3RhdHVzU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudG9nZ2xlVGFibGVTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMudG9nZ2xlVGFibGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMudG9nZ2xlVGFibGVTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuIiwiPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuIl19