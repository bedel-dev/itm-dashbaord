import { DOCUMENT } from '@angular/common';
import { ChangeDetectorRef, Component, EventEmitter, HostBinding, Inject, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { I18nService } from 'ng-devui/i18n';
import { BehaviorSubject, fromEvent, of } from 'rxjs';
import { debounceTime, map, switchMap } from 'rxjs/operators';
import { TABLE_TH } from '../th.token';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "ng-devui/dropdown";
import * as i3 from "ng-devui/checkbox";
import * as i4 from "@angular/cdk/scrolling";
import * as i5 from "@angular/common";
import * as i6 from "@angular/forms";
export class FilterComponent {
    constructor(ref, i18n, thComponent, doc) {
        this.ref = ref;
        this.i18n = i18n;
        this.thComponent = thComponent;
        this.doc = doc;
        this.filterMultiple = true;
        this.showFilterIcon = false;
        this.filterIconActiveChange = new EventEmitter(true);
        this.filterChange = new EventEmitter();
        this.filterToggle = new EventEmitter();
        this.checkedListForFilter = [];
        this.filterListDisplay = [];
        this.searchText = '';
        this.isFilterHidden = false;
        this.DEBONCE_TIME = 300;
        this.onContainerScroll = () => {
            this.closeFilter(this.filterDropdown);
        };
        this.i18nCommonText = this.i18n.getI18nText().common;
        this.document = this.doc;
    }
    get canShow() {
        return this.showFilterIcon || this.filterIconActive || this.filterIconActiveInner;
    }
    ngOnInit() {
        if (!this.searchFn) {
            this.searchFn = (item) => {
                return of((this.filterList ? this.filterList : [])
                    .filter(value => value.name.toLowerCase().includes(item.toLowerCase())));
            };
        }
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nCommonText = data.common;
        });
    }
    ngOnChanges(changes) {
        if (changes['filterList'] || changes['filterMultiple'] || changes['filterIconActive']) {
            if (this.filterIconActive !== undefined) {
                return;
            }
            if (this.filterList) {
                if (!this.filterMultiple) {
                    this.selectedItem = this.filterList.filter(item => item.selected)[0];
                    this.filterIconActiveInner = (this.selectedItem !== undefined && !!Object.keys(this.selectedItem).length);
                }
                else {
                    const checkedList = this.filterList.filter(item => item.checked);
                    if (checkedList.length) {
                        this.filterIconActiveInner = true;
                    }
                    else {
                        this.filterIconActiveInner = false;
                    }
                }
            }
            this.filterIconActiveChange.emit(this.filterIconActiveInner);
        }
    }
    closeFilter(dropdown) {
        dropdown.toggle();
    }
    getFilterDataMultiple() {
        // 兼容当前当用户未传入id时，使用name做重名判断
        const keyValue = this.checkedListForFilter.length
            ? Object.prototype.hasOwnProperty.call(this.checkedListForFilter[0], 'id') ? 'id' : 'name' : '';
        const checkedList = this.removeDuplication(this.checkedListForFilter, keyValue).filter(item => item.checked);
        this.setFilterIconActive(checkedList);
        this.filterChange.emit(checkedList);
    }
    removeDuplication(array, key) {
        const hash = {};
        return array.reduceRight((item, next) => {
            if (!hash[next[key]]) {
                hash[next[key]] = true;
                item.push(next);
            }
            return item;
        }, []);
    }
    setFilterIconActive(checkedData) {
        if (Array.isArray(checkedData) ? checkedData.length : checkedData) {
            this.filterIconActiveInner = true;
        }
        else {
            this.filterIconActiveInner = false;
        }
        this.filterIconActiveChange.emit(this.filterIconActiveInner);
    }
    getFilterDataRadio(item) {
        this.selectedItem = item;
        this.setFilterIconActive(item);
        this.filterChange.emit(item);
    }
    canFilter(isOpen) {
        let changeResult = Promise.resolve(true);
        if (this.beforeFilter) {
            const result = this.beforeFilter(isOpen);
            if (typeof result !== 'undefined') {
                if (result.then) {
                    changeResult = result;
                }
                else if (result.subscribe) {
                    changeResult = result.toPromise();
                }
                else {
                    changeResult = Promise.resolve(result);
                }
            }
        }
        return changeResult;
    }
    resetSources() {
        this.checkedListForFilter = [];
        if (this.sourceSubscription) {
            this.sourceSubscription.unsubscribe();
        }
        if (this.filterSubscription) {
            this.filterSubscription.unsubscribe();
        }
    }
    showFilterContent($event) {
        if (this.closeWhenScroll) {
            const tableViewElement = this.thComponent.tableViewRefElement.nativeElement.querySelector('.devui-scrollbar.scroll-view');
            if ($event) {
                this.document.addEventListener('scroll', this.onContainerScroll);
                if (tableViewElement) {
                    tableViewElement.addEventListener('scroll', this.onContainerScroll);
                }
            }
            else {
                this.document.removeEventListener('scroll', this.onContainerScroll);
                if (tableViewElement) {
                    tableViewElement.removeEventListener('scroll', this.onContainerScroll);
                }
            }
        }
        this.searchText = '';
        this.canFilter(!$event).then((change) => {
            if (!$event) {
                this.resetSources();
                return;
            }
            if (!change) {
                this.isFilterHidden = true;
                return;
            }
            this.isFilterHidden = false;
            if (!this.customFilterTemplate) {
                this.registerFilterChange();
            }
        });
        const keyValue = this.checkedListForFilter.length
            ? Object.prototype.hasOwnProperty.call(this.checkedListForFilter[0], 'id') ? 'id' : 'name' : '';
        const checkedList = this.removeDuplication(this.checkedListForFilter, keyValue).filter(item => item.checked);
        this.filterToggle.emit({
            isOpen: $event,
            checklist: checkedList
        });
    }
    filterCheckAll($event) {
        this.filterHalfChecked = false;
        // 全选时只针对当前面板操作，全不选时针对所有数据
        if ($event) {
            this.filterListDisplay.forEach(item => {
                item.checked = $event;
                this.checkedListForFilter.push(item);
            });
        }
        else {
            this.filterList.forEach(item => {
                item.checked = $event;
                this.checkedListForFilter.push(item);
            });
        }
    }
    setHalfChecked() {
        this.filterHalfChecked = false;
        const checked = this.filterListDisplay.filter(item => item.checked);
        if (checked.length === this.filterListDisplay.length) {
            this.filterAllChecked = true;
        }
        else if (checked.length > 0) {
            this.filterHalfChecked = true;
        }
        else {
            this.filterAllChecked = false;
            this.filterHalfChecked = false;
        }
    }
    checkboxChange($event, item) {
        this.checkedListForFilter.push(item);
        this.setHalfChecked();
    }
    searchInputValueChangeEvent() {
        this.filterSubscription = fromEvent(this.searchElement, 'input')
            .pipe(map((e) => e.target.value), debounceTime(this.DEBONCE_TIME) // hard code need refactory
        )
            .subscribe(term => {
            return this.sourceSubject.next(term);
        });
    }
    registerFilterChange() {
        this.sourceSubject = new BehaviorSubject('');
        setTimeout(() => {
            this.searchElement = this.document.querySelector('.data-table-column-filter-content input');
            this.searchInputValueChangeEvent();
        });
        this.sourceSubscription = this.sourceSubject.pipe(switchMap(term => this.searchFn(term))).subscribe(options => {
            this.filterListDisplay = options;
            this.checkedListForFilter.push(...options.filter(item => item.checked));
            this.setHalfChecked();
            this.ref.markForCheck();
        });
    }
    ngOnDestroy() {
        if (this.i18nSubscription) {
            this.i18nSubscription.unsubscribe();
        }
        this.resetSources();
    }
}
FilterComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: FilterComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.I18nService }, { token: TABLE_TH }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
FilterComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: FilterComponent, selector: "d-table-filter", inputs: { beforeFilter: "beforeFilter", customFilterTemplate: "customFilterTemplate", extraFilterTemplate: "extraFilterTemplate", searchFn: "searchFn", filterList: "filterList", filterIconActive: "filterIconActive", filterMultiple: "filterMultiple", filterBoxWidth: "filterBoxWidth", filterBoxHeight: "filterBoxHeight", column: "column", closeWhenScroll: "closeWhenScroll", showFilterIcon: "showFilterIcon" }, outputs: { filterIconActiveChange: "filterIconActiveChange", filterChange: "filterChange", filterToggle: "filterToggle" }, host: { properties: { "class.devui-icon-show": "this.canShow" } }, viewQueries: [{ propertyName: "filterDropdown", first: true, predicate: ["filterDropdown"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<span\n  dDropDown\n  appendToBody\n  [appendToBodyDirections]=\"['centerDown', 'centerUp', 'rightDown', 'leftDown', 'rightUp', 'leftUp']\"\n  [closeScope]=\"'blank'\"\n  (toggleEvent)=\"showFilterContent($event)\"\n  #filterDropdown=\"d-dropdown\"\n>\n  <span dDropDownToggle>\n    <i\n      class=\"filter-icon\"\n      [ngClass]=\"{\n        'filter-icon-active': filterIconActive || filterIconActiveInner,\n        'filter-icon-visiable': showFilterIcon\n      }\"\n    >\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g>\n            <polygon points=\"10.0085775 7 10.0085775 15 6 13 6 7 2 3 2 1 14 1 14 3\"></polygon>\n          </g>\n        </g>\n      </svg>\n    </i>\n  </span>\n  <div\n    dDropDownMenu\n    class=\"devui-dropdown-menu\"\n    [ngClass]=\"{ 'filter-content-hidden': isFilterHidden }\"\n    [style.width]=\"filterBoxWidth || '250px'\"\n    [ngStyle]=\"{ 'min-height': filterBoxHeight ? filterBoxHeight : '60px' }\"\n  >\n    <ng-template\n      *ngIf=\"filterDropdown.isOpen\"\n      [ngTemplateOutlet]=\"customFilterTemplate || (filterMultiple ? filterContentTmplForMultiple : filterContentTmplForRadio)\"\n      [ngTemplateOutletContext]=\"{\n        $implicit: this,\n        filterListDisplay: filterListDisplay,\n        dropdown: filterDropdown,\n        column: column\n      }\"\n    >\n    </ng-template>\n  </div>\n</span>\n\n<ng-template #filterContentTmplForMultiple let-filterListMultiple=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div class=\"filter-search-container\">\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\">\n      <d-checkbox\n        style=\"display: inline-block\"\n        [label]=\"i18nCommonText?.checkAll\"\n        (change)=\"filterCheckAll($event)\"\n        [halfchecked]=\"filterHalfChecked\"\n        [(ngModel)]=\"filterAllChecked\"\n      >\n      </d-checkbox>\n      <ng-container *ngIf=\"extraFilterTemplate\">\n        <ng-template\n          [ngTemplateOutlet]=\"extraFilterTemplate\"\n          [ngTemplateOutletContext]=\"{ checked: filterAllChecked, halfChecked: filterHalfChecked }\"\n        >\n        </ng-template>\n      </ng-container>\n      <div class=\"line\"></div>\n      <cdk-virtual-scroll-viewport\n        itemSize=\"30\"\n        minBufferPx=\"300\"\n        maxBufferPx=\"500\"\n        class=\"normal-filter-list-container devui-scrollbar\"\n        [style.height]=\"filterBoxHeight ? 'calc(' + filterBoxHeight + ' - 180px)' : 30 * (filterListMultiple?.length || 1) + 'px'\"\n        [style.maxHeight]=\"filterBoxHeight ? 'none' : '250px'\"\n      >\n        <div *cdkVirtualFor=\"let item of filterListMultiple\" class=\"checkbox-group\">\n          <d-checkbox [label]=\"item.name\" [(ngModel)]=\"item.checked\" (change)=\"checkboxChange($event, item)\"> </d-checkbox>\n        </div>\n        <div class=\"no-data-container\" *ngIf=\"!filterListMultiple?.length\">{{ i18nCommonText?.noData }}</div>\n      </cdk-virtual-scroll-viewport>\n    </div>\n    <div class=\"line\"></div>\n    <div style=\"text-align: center\">\n      <span class=\"button-style\" (click)=\"getFilterDataMultiple(); closeFilter(dropdown)\">{{ i18nCommonText?.btnOk }}</span>\n    </div>\n  </div>\n</ng-template>\n<ng-template #filterContentTmplForRadio let-filterListRadio=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div>\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\" role=\"menu\">\n      <div class=\"normal-filter-list-container devui-scrollbar\" role=\"menuitem\" [style.maxHeight]=\"filterBoxHeight ? 'none' : '350px'\">\n        <div\n          [title]=\"item.name\"\n          *ngFor=\"let item of filterListRadio\"\n          class=\"drop-down-item\"\n          [ngClass]=\"{ 'filter-item-active': selectedItem === item }\"\n          (click)=\"getFilterDataRadio(item); closeFilter(dropdown)\"\n        >\n          {{ item.name }}\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}:host{text-align:right}:host.devui-icon-show{display:block}.data-table-column-filter-content{background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff);border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.data-table-column-filter-content .drop-down-item{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.data-table-column-filter-content .line{width:calc(100% - 20px);margin-left:10px}.data-table-column-filter-content>.filter-options>d-checkbox{height:30px;padding:0 10px}.data-table-column-filter-content .checkbox-group{padding:0 10px}.filter-content-hidden{display:none!important}.line{height:1px;background:#f2f2f3;background:var(--devui-dividing-line, #f2f2f3);margin-top:5px;margin-bottom:5px}.checkbox-group{height:30px}.button-style{display:inline-block;width:45%;font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a);text-align:center;line-height:20px;cursor:pointer}.button-style:hover{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}::ng-deep .filter-options .normal-filter-list-container .cdk-virtual-scroll-content-wrapper{width:100%}::ng-deep .filter-options .normal-filter-list-container .cdk-virtual-scroll-content-wrapper .no-data-container{padding:0 10px;line-height:30px}.filter-options ::ng-deep .devui-checkbox>label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.normal-filter-list-container{overflow-y:auto}.icon-filter-style{color:#f2f2f3;color:var(--devui-dividing-line, #f2f2f3);cursor:pointer;margin-left:20px}.label-style{font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a);letter-spacing:0;margin-left:10px}.email-style{font-size:12px;font-size:var(--devui-font-size, 12px);color:#babbc0;color:var(--devui-placeholder, #babbc0);letter-spacing:0;margin-left:10px}.overlay-mask{position:fixed;top:0;bottom:0;right:0;left:0;z-index:9}.drop-down-item{padding:0 10px;height:30px;line-height:30px;cursor:pointer}.drop-down-item:hover{background:#f2f2f3;background:var(--devui-list-item-hover-bg, #f2f2f3);color:#252b3a;color:var(--devui-list-item-hover-text, #252b3a)}.filter-item-active{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.edit-padding-fix{margin-top:-6px;margin-bottom:-6px}.filter-icon{display:inline-block;vertical-align:-3px;visibility:hidden;cursor:pointer;height:16px;margin-top:-1px}.filter-icon>svg g{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da)}.filter-icon:hover>svg g{fill:#babbc0;fill:var(--devui-shape-icon-fill-active, #babbc0)}.filter-icon-visiable{visibility:visible}.filter-icon-active{visibility:visible!important}.filter-icon-active>svg g{fill:#5e7ce0;fill:var(--devui-brand, #5e7ce0)}.filter-icon-active:hover>svg g{fill:#5e7ce0;fill:var(--devui-brand, #5e7ce0)}\n"], components: [{ type: i2.DropDownAppendToBodyComponent, selector: "[dDropDown][appendToBody]", inputs: ["alignOrigin", "appendToBodyDirections"] }, { type: i3.CheckBoxComponent, selector: "d-checkbox", inputs: ["name", "label", "cssClass", "color", "disabled", "isShowTitle", "title", "labelTemplate", "halfchecked", "showAnimation", "beforeChange"], outputs: ["change"] }, { type: i4.CdkVirtualScrollViewport, selector: "cdk-virtual-scroll-viewport", inputs: ["orientation", "appendOnly"], outputs: ["scrolledIndexChange"] }], directives: [{ type: i2.DropDownDirective, selector: "[dDropDown]", inputs: ["isOpen", "disabled", "showAnimation", "trigger", "closeScope", "closeOnMouseLeaveMenu"], outputs: ["toggleEvent"], exportAs: ["d-dropdown"] }, { type: i2.DropDownToggleDirective, selector: "[dDropDownToggle]", inputs: ["toggleOnFocus", "autoFocus"], exportAs: ["d-dropdown-toggle"] }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i2.DropDownMenuDirective, selector: "[dDropDownMenu]", exportAs: ["d-dropdown-menu"] }, { type: i5.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i5.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i6.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i4.CdkFixedSizeVirtualScroll, selector: "cdk-virtual-scroll-viewport[itemSize]", inputs: ["itemSize", "minBufferPx", "maxBufferPx"] }, { type: i4.CdkVirtualForOf, selector: "[cdkVirtualFor][cdkVirtualForOf]", inputs: ["cdkVirtualForOf", "cdkVirtualForTrackBy", "cdkVirtualForTemplate", "cdkVirtualForTemplateCacheSize"] }, { type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: FilterComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-table-filter', template: "<span\n  dDropDown\n  appendToBody\n  [appendToBodyDirections]=\"['centerDown', 'centerUp', 'rightDown', 'leftDown', 'rightUp', 'leftUp']\"\n  [closeScope]=\"'blank'\"\n  (toggleEvent)=\"showFilterContent($event)\"\n  #filterDropdown=\"d-dropdown\"\n>\n  <span dDropDownToggle>\n    <i\n      class=\"filter-icon\"\n      [ngClass]=\"{\n        'filter-icon-active': filterIconActive || filterIconActiveInner,\n        'filter-icon-visiable': showFilterIcon\n      }\"\n    >\n      <svg\n        width=\"16px\"\n        height=\"16px\"\n        viewBox=\"0 0 16 16\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      >\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <g>\n            <polygon points=\"10.0085775 7 10.0085775 15 6 13 6 7 2 3 2 1 14 1 14 3\"></polygon>\n          </g>\n        </g>\n      </svg>\n    </i>\n  </span>\n  <div\n    dDropDownMenu\n    class=\"devui-dropdown-menu\"\n    [ngClass]=\"{ 'filter-content-hidden': isFilterHidden }\"\n    [style.width]=\"filterBoxWidth || '250px'\"\n    [ngStyle]=\"{ 'min-height': filterBoxHeight ? filterBoxHeight : '60px' }\"\n  >\n    <ng-template\n      *ngIf=\"filterDropdown.isOpen\"\n      [ngTemplateOutlet]=\"customFilterTemplate || (filterMultiple ? filterContentTmplForMultiple : filterContentTmplForRadio)\"\n      [ngTemplateOutletContext]=\"{\n        $implicit: this,\n        filterListDisplay: filterListDisplay,\n        dropdown: filterDropdown,\n        column: column\n      }\"\n    >\n    </ng-template>\n  </div>\n</span>\n\n<ng-template #filterContentTmplForMultiple let-filterListMultiple=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div class=\"filter-search-container\">\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\">\n      <d-checkbox\n        style=\"display: inline-block\"\n        [label]=\"i18nCommonText?.checkAll\"\n        (change)=\"filterCheckAll($event)\"\n        [halfchecked]=\"filterHalfChecked\"\n        [(ngModel)]=\"filterAllChecked\"\n      >\n      </d-checkbox>\n      <ng-container *ngIf=\"extraFilterTemplate\">\n        <ng-template\n          [ngTemplateOutlet]=\"extraFilterTemplate\"\n          [ngTemplateOutletContext]=\"{ checked: filterAllChecked, halfChecked: filterHalfChecked }\"\n        >\n        </ng-template>\n      </ng-container>\n      <div class=\"line\"></div>\n      <cdk-virtual-scroll-viewport\n        itemSize=\"30\"\n        minBufferPx=\"300\"\n        maxBufferPx=\"500\"\n        class=\"normal-filter-list-container devui-scrollbar\"\n        [style.height]=\"filterBoxHeight ? 'calc(' + filterBoxHeight + ' - 180px)' : 30 * (filterListMultiple?.length || 1) + 'px'\"\n        [style.maxHeight]=\"filterBoxHeight ? 'none' : '250px'\"\n      >\n        <div *cdkVirtualFor=\"let item of filterListMultiple\" class=\"checkbox-group\">\n          <d-checkbox [label]=\"item.name\" [(ngModel)]=\"item.checked\" (change)=\"checkboxChange($event, item)\"> </d-checkbox>\n        </div>\n        <div class=\"no-data-container\" *ngIf=\"!filterListMultiple?.length\">{{ i18nCommonText?.noData }}</div>\n      </cdk-virtual-scroll-viewport>\n    </div>\n    <div class=\"line\"></div>\n    <div style=\"text-align: center\">\n      <span class=\"button-style\" (click)=\"getFilterDataMultiple(); closeFilter(dropdown)\">{{ i18nCommonText?.btnOk }}</span>\n    </div>\n  </div>\n</ng-template>\n<ng-template #filterContentTmplForRadio let-filterListRadio=\"filterListDisplay\" let-dropdown=\"dropdown\">\n  <div class=\"data-table-column-filter-content filter-bg filter-font-color\" [style.width]=\"filterBoxWidth\" [style.height]=\"filterBoxHeight\">\n    <div>\n      <input\n        name=\"select\"\n        type=\"text\"\n        autocomplete=\"off\"\n        [placeholder]=\"i18nCommonText?.searchPlaceholder\"\n        [(ngModel)]=\"searchText\"\n        class=\"devui-form-control devui-input devui-search-in-dropdown\"\n      />\n    </div>\n    <div class=\"filter-options\" role=\"menu\">\n      <div class=\"normal-filter-list-container devui-scrollbar\" role=\"menuitem\" [style.maxHeight]=\"filterBoxHeight ? 'none' : '350px'\">\n        <div\n          [title]=\"item.name\"\n          *ngFor=\"let item of filterListRadio\"\n          class=\"drop-down-item\"\n          [ngClass]=\"{ 'filter-item-active': selectedItem === item }\"\n          (click)=\"getFilterDataRadio(item); closeFilter(dropdown)\"\n        >\n          {{ item.name }}\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}:host{text-align:right}:host.devui-icon-show{display:block}.data-table-column-filter-content{background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff);border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.data-table-column-filter-content .drop-down-item{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.data-table-column-filter-content .line{width:calc(100% - 20px);margin-left:10px}.data-table-column-filter-content>.filter-options>d-checkbox{height:30px;padding:0 10px}.data-table-column-filter-content .checkbox-group{padding:0 10px}.filter-content-hidden{display:none!important}.line{height:1px;background:#f2f2f3;background:var(--devui-dividing-line, #f2f2f3);margin-top:5px;margin-bottom:5px}.checkbox-group{height:30px}.button-style{display:inline-block;width:45%;font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a);text-align:center;line-height:20px;cursor:pointer}.button-style:hover{color:#5e7ce0;color:var(--devui-brand, #5e7ce0)}::ng-deep .filter-options .normal-filter-list-container .cdk-virtual-scroll-content-wrapper{width:100%}::ng-deep .filter-options .normal-filter-list-container .cdk-virtual-scroll-content-wrapper .no-data-container{padding:0 10px;line-height:30px}.filter-options ::ng-deep .devui-checkbox>label{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.normal-filter-list-container{overflow-y:auto}.icon-filter-style{color:#f2f2f3;color:var(--devui-dividing-line, #f2f2f3);cursor:pointer;margin-left:20px}.label-style{font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a);letter-spacing:0;margin-left:10px}.email-style{font-size:12px;font-size:var(--devui-font-size, 12px);color:#babbc0;color:var(--devui-placeholder, #babbc0);letter-spacing:0;margin-left:10px}.overlay-mask{position:fixed;top:0;bottom:0;right:0;left:0;z-index:9}.drop-down-item{padding:0 10px;height:30px;line-height:30px;cursor:pointer}.drop-down-item:hover{background:#f2f2f3;background:var(--devui-list-item-hover-bg, #f2f2f3);color:#252b3a;color:var(--devui-list-item-hover-text, #252b3a)}.filter-item-active{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc);color:#252b3a;color:var(--devui-list-item-active-text, #252b3a)}.edit-padding-fix{margin-top:-6px;margin-bottom:-6px}.filter-icon{display:inline-block;vertical-align:-3px;visibility:hidden;cursor:pointer;height:16px;margin-top:-1px}.filter-icon>svg g{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da)}.filter-icon:hover>svg g{fill:#babbc0;fill:var(--devui-shape-icon-fill-active, #babbc0)}.filter-icon-visiable{visibility:visible}.filter-icon-active{visibility:visible!important}.filter-icon-active>svg g{fill:#5e7ce0;fill:var(--devui-brand, #5e7ce0)}.filter-icon-active:hover>svg g{fill:#5e7ce0;fill:var(--devui-brand, #5e7ce0)}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.I18nService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [TABLE_TH]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { beforeFilter: [{
                type: Input
            }], customFilterTemplate: [{
                type: Input
            }], extraFilterTemplate: [{
                type: Input
            }], searchFn: [{
                type: Input
            }], filterList: [{
                type: Input
            }], filterIconActive: [{
                type: Input
            }], filterMultiple: [{
                type: Input
            }], filterBoxWidth: [{
                type: Input
            }], filterBoxHeight: [{
                type: Input
            }], column: [{
                type: Input
            }], closeWhenScroll: [{
                type: Input
            }], showFilterIcon: [{
                type: Input
            }], filterIconActiveChange: [{
                type: Output
            }], filterChange: [{
                type: Output
            }], filterToggle: [{
                type: Output
            }], canShow: [{
                type: HostBinding,
                args: ['class.devui-icon-show']
            }], filterDropdown: [{
                type: ViewChild,
                args: ['filterDropdown']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvdGFibGUvaGVhZC90aC9maWx0ZXIvZmlsdGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvdGFibGUvaGVhZC90aC9maWx0ZXIvZmlsdGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBQ0wsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFDdEUsTUFBTSxFQUFpQixXQUFXLEVBQUUsU0FBUyxFQUM5QyxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQWlCLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBYyxFQUFFLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQ2hGLE9BQU8sRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTlELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxhQUFhLENBQUM7Ozs7Ozs7O0FBT3ZDLE1BQU0sT0FBTyxlQUFlO0lBMkMxQixZQUFvQixHQUFzQixFQUFVLElBQWlCLEVBQTRCLFdBQWdCLEVBQzNFLEdBQVE7UUFEMUIsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUFhO1FBQTRCLGdCQUFXLEdBQVgsV0FBVyxDQUFLO1FBQzNFLFFBQUcsR0FBSCxHQUFHLENBQUs7UUFyQ3JDLG1CQUFjLEdBQUcsSUFBSSxDQUFDO1FBS3RCLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBRXRCLDJCQUFzQixHQUFHLElBQUksWUFB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MUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNyQztRQUNELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs0R0E5UFUsZUFBZSw4RUEyQ3FELFFBQVEsYUFDbkUsUUFBUTtnR0E1Q2pCLGVBQWUscXhCQ2pCNUIsbzZKQWlJQTsyRkRoSGEsZUFBZTtrQkFMM0IsU0FBUzsrQkFDRSxnQkFBZ0I7OzBCQStDOEMsTUFBTTsyQkFBQyxRQUFROzswQkFDMUUsTUFBTTsyQkFBQyxRQUFROzRDQTNDbkIsWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxvQkFBb0I7c0JBQTVCLEtBQUs7Z0JBQ0csbUJBQW1CO3NCQUEzQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csVUFBVTtzQkFBbEIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFFSSxzQkFBc0I7c0JBQS9CLE1BQU07Z0JBQ0csWUFBWTtzQkFBckIsTUFBTTtnQkFDRyxZQUFZO3NCQUFyQixNQUFNO2dCQU1ILE9BQU87c0JBRFYsV0FBVzt1QkFBQyx1QkFBdUI7Z0JBS1AsY0FBYztzQkFBMUMsU0FBUzt1QkFBQyxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEhvc3RCaW5kaW5nLCBJbmplY3QsIElucHV0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0LFxuICBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEcm9wRG93bkRpcmVjdGl2ZSB9IGZyb20gJ25nLWRldnVpL2Ryb3Bkb3duJztcbmltcG9ydCB7IEkxOG5JbnRlcmZhY2UsIEkxOG5TZXJ2aWNlIH0gZnJvbSAnbmctZGV2dWkvaTE4bic7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGZyb21FdmVudCwgT2JzZXJ2YWJsZSwgb2YsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBtYXAsIHN3aXRjaE1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IEZpbHRlckNvbmZpZyB9IGZyb20gJy4uLy4uLy4uLy4uL2RhdGEtdGFibGUubW9kZWwnO1xuaW1wb3J0IHsgVEFCTEVfVEggfSBmcm9tICcuLi90aC50b2tlbic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2QtdGFibGUtZmlsdGVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2ZpbHRlci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZpbHRlci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZpbHRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKSBiZWZvcmVGaWx0ZXI6ICh2YWx1ZSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4gfCBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICBASW5wdXQoKSBjdXN0b21GaWx0ZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgQElucHV0KCkgZXh0cmFGaWx0ZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgQElucHV0KCkgc2VhcmNoRm46ICh0ZXJtOiBzdHJpbmcpID0+IE9ic2VydmFibGU8QXJyYXk8YW55Pj47XG4gIEBJbnB1dCgpIGZpbHRlckxpc3Q6IEFycmF5PEZpbHRlckNvbmZpZz47XG4gIEBJbnB1dCgpIGZpbHRlckljb25BY3RpdmU6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGZpbHRlck11bHRpcGxlID0gdHJ1ZTtcbiAgQElucHV0KCkgZmlsdGVyQm94V2lkdGg6IGFueTtcbiAgQElucHV0KCkgZmlsdGVyQm94SGVpZ2h0OiBhbnk7XG4gIEBJbnB1dCgpIGNvbHVtbjogYW55OyAvLyDkuLrphY3nva5jb2x1bW7mlrnlvI/lhbzlrrnoh6rlrprkuYnov4fmu6TmqKHmnb9jb250ZXh0XG4gIEBJbnB1dCgpIGNsb3NlV2hlblNjcm9sbDogYm9vbGVhbjtcbiAgQElucHV0KCkgc2hvd0ZpbHRlckljb24gPSBmYWxzZTtcblxuICBAT3V0cHV0KCkgZmlsdGVySWNvbkFjdGl2ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4odHJ1ZSk7XG4gIEBPdXRwdXQoKSBmaWx0ZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPEZpbHRlckNvbmZpZ1tdPigpO1xuICBAT3V0cHV0KCkgZmlsdGVyVG9nZ2xlID0gbmV3IEV2ZW50RW1pdHRlcjx7XG4gICAgaXNPcGVuOiBib29sZWFuO1xuICAgIGNoZWNrbGlzdDogRmlsdGVyQ29uZmlnW107XG4gIH0+KCk7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5kZXZ1aS1pY29uLXNob3cnKVxuICBnZXQgY2FuU2hvdygpIHtcbiAgICByZXR1cm4gdGhpcy5zaG93RmlsdGVySWNvbiB8fCB0aGlzLmZpbHRlckljb25BY3RpdmUgfHwgdGhpcy5maWx0ZXJJY29uQWN0aXZlSW5uZXI7XG4gIH1cblxuICBAVmlld0NoaWxkKCdmaWx0ZXJEcm9wZG93bicpIGZpbHRlckRyb3Bkb3duO1xuICBwcml2YXRlIHNvdXJjZVN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxhbnk+O1xuICBwcml2YXRlIHNvdXJjZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIGZpbHRlclN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIGkxOG5TdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBzZWFyY2hFbGVtZW50O1xuICBjaGVja2VkTGlzdEZvckZpbHRlciA9IFtdO1xuICBmaWx0ZXJMaXN0RGlzcGxheSA9IFtdO1xuICBzZWFyY2hUZXh0ID0gJyc7XG4gIHNlbGVjdGVkSXRlbTogYW55O1xuICBpc0ZpbHRlckhpZGRlbiA9IGZhbHNlO1xuICBmaWx0ZXJIYWxmQ2hlY2tlZDogYm9vbGVhbjtcbiAgZmlsdGVyQWxsQ2hlY2tlZDogYm9vbGVhbjtcbiAgaTE4bkNvbW1vblRleHQ6IEkxOG5JbnRlcmZhY2VbJ2NvbW1vbiddO1xuICBmaWx0ZXJJY29uQWN0aXZlSW5uZXI6IGJvb2xlYW47XG4gIERFQk9OQ0VfVElNRSA9IDMwMDtcbiAgZG9jdW1lbnQ6IERvY3VtZW50O1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgaTE4bjogSTE4blNlcnZpY2UsIEBJbmplY3QoVEFCTEVfVEgpIHByaXZhdGUgdGhDb21wb25lbnQ6IGFueSxcbiAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2M6IGFueSkge1xuICAgIHRoaXMuaTE4bkNvbW1vblRleHQgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5jb21tb247XG4gICAgdGhpcy5kb2N1bWVudCA9IHRoaXMuZG9jO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLnNlYXJjaEZuKSB7XG4gICAgICB0aGlzLnNlYXJjaEZuID0gKGl0ZW0pID0+IHtcbiAgICAgICAgcmV0dXJuIG9mKFxuICAgICAgICAgICh0aGlzLmZpbHRlckxpc3QgPyB0aGlzLmZpbHRlckxpc3QgOiBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIodmFsdWUgPT4gdmFsdWUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGl0ZW0udG9Mb3dlckNhc2UoKSkpXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLmkxOG5TdWJzY3JpcHRpb24gPSB0aGlzLmkxOG4ubGFuZ0NoYW5nZSgpLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgdGhpcy5pMThuQ29tbW9uVGV4dCA9IGRhdGEuY29tbW9uO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VzWydmaWx0ZXJMaXN0J10gfHwgY2hhbmdlc1snZmlsdGVyTXVsdGlwbGUnXSB8fCBjaGFuZ2VzWydmaWx0ZXJJY29uQWN0aXZlJ10pIHtcbiAgICAgIGlmICh0aGlzLmZpbHRlckljb25BY3RpdmUgIT09IHVuZGVmaW5lZCkgeyByZXR1cm47IH1cbiAgICAgIGlmICh0aGlzLmZpbHRlckxpc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZpbHRlck11bHRpcGxlKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSB0aGlzLmZpbHRlckxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5zZWxlY3RlZClbMF07XG4gICAgICAgICAgdGhpcy5maWx0ZXJJY29uQWN0aXZlSW5uZXIgPSAodGhpcy5zZWxlY3RlZEl0ZW0gIT09IHVuZGVmaW5lZCAmJiAhIU9iamVjdC5rZXlzKHRoaXMuc2VsZWN0ZWRJdGVtKS5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGNoZWNrZWRMaXN0ID0gdGhpcy5maWx0ZXJMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uY2hlY2tlZCk7XG4gICAgICAgICAgaWYgKGNoZWNrZWRMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJJY29uQWN0aXZlSW5uZXIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckljb25BY3RpdmVJbm5lciA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJJY29uQWN0aXZlQ2hhbmdlLmVtaXQodGhpcy5maWx0ZXJJY29uQWN0aXZlSW5uZXIpO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlRmlsdGVyKGRyb3Bkb3duOiBEcm9wRG93bkRpcmVjdGl2ZSkge1xuICAgIGRyb3Bkb3duLnRvZ2dsZSgpO1xuICB9XG5cbiAgZ2V0RmlsdGVyRGF0YU11bHRpcGxlKCkge1xuICAgIC8vIOWFvOWuueW9k+WJjeW9k+eUqOaIt+acquS8oOWFpWlk5pe277yM5L2/55SobmFtZeWBmumHjeWQjeWIpOaWrVxuICAgIGNvbnN0IGtleVZhbHVlID0gdGhpcy5jaGVja2VkTGlzdEZvckZpbHRlci5sZW5ndGhcbiAgICAgID8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY2hlY2tlZExpc3RGb3JGaWx0ZXJbMF0sICdpZCcpID8gJ2lkJyA6ICduYW1lJyA6ICcnO1xuICAgIGNvbnN0IGNoZWNrZWRMaXN0ID0gdGhpcy5yZW1vdmVEdXBsaWNhdGlvbih0aGlzLmNoZWNrZWRMaXN0Rm9yRmlsdGVyLCBrZXlWYWx1ZSkuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jaGVja2VkKTtcbiAgICB0aGlzLnNldEZpbHRlckljb25BY3RpdmUoY2hlY2tlZExpc3QpO1xuICAgIHRoaXMuZmlsdGVyQ2hhbmdlLmVtaXQoY2hlY2tlZExpc3QpO1xuICB9XG5cbiAgcmVtb3ZlRHVwbGljYXRpb24oYXJyYXksIGtleSkge1xuICAgIGNvbnN0IGhhc2ggPSB7fTtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlUmlnaHQoKGl0ZW0sIG5leHQpID0+IHtcbiAgICAgIGlmICghaGFzaFtuZXh0W2tleV1dKSB7XG4gICAgICAgIGhhc2hbbmV4dFtrZXldXSA9IHRydWU7XG4gICAgICAgIGl0ZW0ucHVzaChuZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIHNldEZpbHRlckljb25BY3RpdmUoY2hlY2tlZERhdGEpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGVja2VkRGF0YSkgPyBjaGVja2VkRGF0YS5sZW5ndGggOiBjaGVja2VkRGF0YSkge1xuICAgICAgdGhpcy5maWx0ZXJJY29uQWN0aXZlSW5uZXIgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckljb25BY3RpdmVJbm5lciA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmZpbHRlckljb25BY3RpdmVDaGFuZ2UuZW1pdCh0aGlzLmZpbHRlckljb25BY3RpdmVJbm5lcik7XG4gIH1cblxuICBnZXRGaWx0ZXJEYXRhUmFkaW8oaXRlbSkge1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICB0aGlzLnNldEZpbHRlckljb25BY3RpdmUoaXRlbSk7XG4gICAgdGhpcy5maWx0ZXJDaGFuZ2UuZW1pdChpdGVtKTtcbiAgfVxuXG4gIGNhbkZpbHRlcihpc09wZW4pIHtcbiAgICBsZXQgY2hhbmdlUmVzdWx0ID0gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuXG4gICAgaWYgKHRoaXMuYmVmb3JlRmlsdGVyKSB7XG4gICAgICBjb25zdCByZXN1bHQ6IGFueSA9IHRoaXMuYmVmb3JlRmlsdGVyKGlzT3Blbik7XG4gICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHJlc3VsdC50aGVuKSB7XG4gICAgICAgICAgY2hhbmdlUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdWJzY3JpYmUpIHtcbiAgICAgICAgICBjaGFuZ2VSZXN1bHQgPSAocmVzdWx0IGFzIE9ic2VydmFibGU8Ym9vbGVhbj4pLnRvUHJvbWlzZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZVJlc3VsdCA9IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZVJlc3VsdDtcbiAgfVxuXG4gIHJlc2V0U291cmNlcygpIHtcbiAgICB0aGlzLmNoZWNrZWRMaXN0Rm9yRmlsdGVyID0gW107XG4gICAgaWYgKHRoaXMuc291cmNlU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnNvdXJjZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWx0ZXJTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuZmlsdGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgb25Db250YWluZXJTY3JvbGwgPSAoKSA9PiB7XG4gICAgdGhpcy5jbG9zZUZpbHRlcih0aGlzLmZpbHRlckRyb3Bkb3duKTtcbiAgfTtcblxuICBzaG93RmlsdGVyQ29udGVudCgkZXZlbnQpIHtcbiAgICBpZiAodGhpcy5jbG9zZVdoZW5TY3JvbGwpIHtcbiAgICAgIGNvbnN0IHRhYmxlVmlld0VsZW1lbnQgPSB0aGlzLnRoQ29tcG9uZW50LnRhYmxlVmlld1JlZkVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGV2dWktc2Nyb2xsYmFyLnNjcm9sbC12aWV3Jyk7XG4gICAgICBpZiAoJGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vbkNvbnRhaW5lclNjcm9sbCk7XG4gICAgICAgIGlmICh0YWJsZVZpZXdFbGVtZW50KSB7IHRhYmxlVmlld0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vbkNvbnRhaW5lclNjcm9sbCk7IH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vbkNvbnRhaW5lclNjcm9sbCk7XG4gICAgICAgIGlmICh0YWJsZVZpZXdFbGVtZW50KSB7IHRhYmxlVmlld0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vbkNvbnRhaW5lclNjcm9sbCk7IH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zZWFyY2hUZXh0ID0gJyc7XG4gICAgdGhpcy5jYW5GaWx0ZXIoISRldmVudCkudGhlbigoY2hhbmdlKSA9PiB7XG4gICAgICBpZiAoISRldmVudCkge1xuICAgICAgICB0aGlzLnJlc2V0U291cmNlcygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWNoYW5nZSkge1xuICAgICAgICB0aGlzLmlzRmlsdGVySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc0ZpbHRlckhpZGRlbiA9IGZhbHNlO1xuICAgICAgaWYgKCF0aGlzLmN1c3RvbUZpbHRlclRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJGaWx0ZXJDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBrZXlWYWx1ZSA9IHRoaXMuY2hlY2tlZExpc3RGb3JGaWx0ZXIubGVuZ3RoXG4gICAgICA/IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmNoZWNrZWRMaXN0Rm9yRmlsdGVyWzBdLCAnaWQnKSA/ICdpZCcgOiAnbmFtZScgOiAnJztcbiAgICBjb25zdCBjaGVja2VkTGlzdCA9IHRoaXMucmVtb3ZlRHVwbGljYXRpb24odGhpcy5jaGVja2VkTGlzdEZvckZpbHRlciwga2V5VmFsdWUpLmZpbHRlcihpdGVtID0+IGl0ZW0uY2hlY2tlZCk7XG4gICAgdGhpcy5maWx0ZXJUb2dnbGUuZW1pdCh7XG4gICAgICBpc09wZW46ICRldmVudCxcbiAgICAgIGNoZWNrbGlzdDogY2hlY2tlZExpc3RcbiAgICB9KTtcbiAgfVxuXG4gIGZpbHRlckNoZWNrQWxsKCRldmVudCkge1xuICAgIHRoaXMuZmlsdGVySGFsZkNoZWNrZWQgPSBmYWxzZTtcbiAgICAvLyDlhajpgInml7blj6rpkojlr7nlvZPliY3pnaLmnb/mk43kvZzvvIzlhajkuI3pgInml7bpkojlr7nmiYDmnInmlbDmja5cbiAgICBpZiAoJGV2ZW50KSB7XG4gICAgICB0aGlzLmZpbHRlckxpc3REaXNwbGF5LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGl0ZW0uY2hlY2tlZCA9ICRldmVudDtcbiAgICAgICAgdGhpcy5jaGVja2VkTGlzdEZvckZpbHRlci5wdXNoKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlsdGVyTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmNoZWNrZWQgPSAkZXZlbnQ7XG4gICAgICAgIHRoaXMuY2hlY2tlZExpc3RGb3JGaWx0ZXIucHVzaChpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHNldEhhbGZDaGVja2VkKCkge1xuICAgIHRoaXMuZmlsdGVySGFsZkNoZWNrZWQgPSBmYWxzZTtcbiAgICBjb25zdCBjaGVja2VkID0gdGhpcy5maWx0ZXJMaXN0RGlzcGxheS5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoZWNrZWQpO1xuICAgIGlmIChjaGVja2VkLmxlbmd0aCA9PT0gdGhpcy5maWx0ZXJMaXN0RGlzcGxheS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZmlsdGVyQWxsQ2hlY2tlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChjaGVja2VkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuZmlsdGVySGFsZkNoZWNrZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckFsbENoZWNrZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZmlsdGVySGFsZkNoZWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjaGVja2JveENoYW5nZSgkZXZlbnQsIGl0ZW0pIHtcbiAgICB0aGlzLmNoZWNrZWRMaXN0Rm9yRmlsdGVyLnB1c2goaXRlbSk7XG4gICAgdGhpcy5zZXRIYWxmQ2hlY2tlZCgpO1xuICB9XG5cbiAgc2VhcmNoSW5wdXRWYWx1ZUNoYW5nZUV2ZW50KCkge1xuICAgIHRoaXMuZmlsdGVyU3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KHRoaXMuc2VhcmNoRWxlbWVudCwgJ2lucHV0JylcbiAgICAgIC5waXBlKFxuICAgICAgICBtYXAoKGU6IGFueSkgPT4gZS50YXJnZXQudmFsdWUpLFxuICAgICAgICBkZWJvdW5jZVRpbWUodGhpcy5ERUJPTkNFX1RJTUUpIC8vIGhhcmQgY29kZSBuZWVkIHJlZmFjdG9yeVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSh0ZXJtID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlU3ViamVjdC5uZXh0KHRlcm0pO1xuICAgICAgfSk7XG4gIH1cblxuICByZWdpc3RlckZpbHRlckNoYW5nZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNvdXJjZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oJycpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gdGhpcy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0YS10YWJsZS1jb2x1bW4tZmlsdGVyLWNvbnRlbnQgaW5wdXQnKTtcbiAgICAgIHRoaXMuc2VhcmNoSW5wdXRWYWx1ZUNoYW5nZUV2ZW50KCk7XG4gICAgfSk7XG4gICAgdGhpcy5zb3VyY2VTdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZVN1YmplY3QucGlwZShzd2l0Y2hNYXAodGVybSA9PiB0aGlzLnNlYXJjaEZuKHRlcm0pKSkuc3Vic2NyaWJlKG9wdGlvbnMgPT4ge1xuICAgICAgdGhpcy5maWx0ZXJMaXN0RGlzcGxheSA9IG9wdGlvbnM7XG4gICAgICB0aGlzLmNoZWNrZWRMaXN0Rm9yRmlsdGVyLnB1c2goLi4ub3B0aW9ucy5maWx0ZXIoaXRlbSA9PiBpdGVtLmNoZWNrZWQpKTtcbiAgICAgIHRoaXMuc2V0SGFsZkNoZWNrZWQoKTtcbiAgICAgIHRoaXMucmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuaTE4blN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5pMThuU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHRoaXMucmVzZXRTb3VyY2VzKCk7XG4gIH1cbn1cbiIsIjxzcGFuXG4gIGREcm9wRG93blxuICBhcHBlbmRUb0JvZHlcbiAgW2FwcGVuZFRvQm9keURpcmVjdGlvbnNdPVwiWydjZW50ZXJEb3duJywgJ2NlbnRlclVwJywgJ3JpZ2h0RG93bicsICdsZWZ0RG93bicsICdyaWdodFVwJywgJ2xlZnRVcCddXCJcbiAgW2Nsb3NlU2NvcGVdPVwiJ2JsYW5rJ1wiXG4gICh0b2dnbGVFdmVudCk9XCJzaG93RmlsdGVyQ29udGVudCgkZXZlbnQpXCJcbiAgI2ZpbHRlckRyb3Bkb3duPVwiZC1kcm9wZG93blwiXG4+XG4gIDxzcGFuIGREcm9wRG93blRvZ2dsZT5cbiAgICA8aVxuICAgICAgY2xhc3M9XCJmaWx0ZXItaWNvblwiXG4gICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICdmaWx0ZXItaWNvbi1hY3RpdmUnOiBmaWx0ZXJJY29uQWN0aXZlIHx8IGZpbHRlckljb25BY3RpdmVJbm5lcixcbiAgICAgICAgJ2ZpbHRlci1pY29uLXZpc2lhYmxlJzogc2hvd0ZpbHRlckljb25cbiAgICAgIH1cIlxuICAgID5cbiAgICAgIDxzdmdcbiAgICAgICAgd2lkdGg9XCIxNnB4XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZweFwiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMTYgMTZcIlxuICAgICAgICB2ZXJzaW9uPVwiMS4xXCJcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICA+XG4gICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgPGc+XG4gICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9XCIxMC4wMDg1Nzc1IDcgMTAuMDA4NTc3NSAxNSA2IDEzIDYgNyAyIDMgMiAxIDE0IDEgMTQgM1wiPjwvcG9seWdvbj5cbiAgICAgICAgICA8L2c+XG4gICAgICAgIDwvZz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvaT5cbiAgPC9zcGFuPlxuICA8ZGl2XG4gICAgZERyb3BEb3duTWVudVxuICAgIGNsYXNzPVwiZGV2dWktZHJvcGRvd24tbWVudVwiXG4gICAgW25nQ2xhc3NdPVwieyAnZmlsdGVyLWNvbnRlbnQtaGlkZGVuJzogaXNGaWx0ZXJIaWRkZW4gfVwiXG4gICAgW3N0eWxlLndpZHRoXT1cImZpbHRlckJveFdpZHRoIHx8ICcyNTBweCdcIlxuICAgIFtuZ1N0eWxlXT1cInsgJ21pbi1oZWlnaHQnOiBmaWx0ZXJCb3hIZWlnaHQgPyBmaWx0ZXJCb3hIZWlnaHQgOiAnNjBweCcgfVwiXG4gID5cbiAgICA8bmctdGVtcGxhdGVcbiAgICAgICpuZ0lmPVwiZmlsdGVyRHJvcGRvd24uaXNPcGVuXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImN1c3RvbUZpbHRlclRlbXBsYXRlIHx8IChmaWx0ZXJNdWx0aXBsZSA/IGZpbHRlckNvbnRlbnRUbXBsRm9yTXVsdGlwbGUgOiBmaWx0ZXJDb250ZW50VG1wbEZvclJhZGlvKVwiXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie1xuICAgICAgICAkaW1wbGljaXQ6IHRoaXMsXG4gICAgICAgIGZpbHRlckxpc3REaXNwbGF5OiBmaWx0ZXJMaXN0RGlzcGxheSxcbiAgICAgICAgZHJvcGRvd246IGZpbHRlckRyb3Bkb3duLFxuICAgICAgICBjb2x1bW46IGNvbHVtblxuICAgICAgfVwiXG4gICAgPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuPC9zcGFuPlxuXG48bmctdGVtcGxhdGUgI2ZpbHRlckNvbnRlbnRUbXBsRm9yTXVsdGlwbGUgbGV0LWZpbHRlckxpc3RNdWx0aXBsZT1cImZpbHRlckxpc3REaXNwbGF5XCIgbGV0LWRyb3Bkb3duPVwiZHJvcGRvd25cIj5cbiAgPGRpdiBjbGFzcz1cImRhdGEtdGFibGUtY29sdW1uLWZpbHRlci1jb250ZW50IGZpbHRlci1iZyBmaWx0ZXItZm9udC1jb2xvclwiIFtzdHlsZS53aWR0aF09XCJmaWx0ZXJCb3hXaWR0aFwiIFtzdHlsZS5oZWlnaHRdPVwiZmlsdGVyQm94SGVpZ2h0XCI+XG4gICAgPGRpdiBjbGFzcz1cImZpbHRlci1zZWFyY2gtY29udGFpbmVyXCI+XG4gICAgICA8aW5wdXRcbiAgICAgICAgbmFtZT1cInNlbGVjdFwiXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgW3BsYWNlaG9sZGVyXT1cImkxOG5Db21tb25UZXh0Py5zZWFyY2hQbGFjZWhvbGRlclwiXG4gICAgICAgIFsobmdNb2RlbCldPVwic2VhcmNoVGV4dFwiXG4gICAgICAgIGNsYXNzPVwiZGV2dWktZm9ybS1jb250cm9sIGRldnVpLWlucHV0IGRldnVpLXNlYXJjaC1pbi1kcm9wZG93blwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItb3B0aW9uc1wiPlxuICAgICAgPGQtY2hlY2tib3hcbiAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBpbmxpbmUtYmxvY2tcIlxuICAgICAgICBbbGFiZWxdPVwiaTE4bkNvbW1vblRleHQ/LmNoZWNrQWxsXCJcbiAgICAgICAgKGNoYW5nZSk9XCJmaWx0ZXJDaGVja0FsbCgkZXZlbnQpXCJcbiAgICAgICAgW2hhbGZjaGVja2VkXT1cImZpbHRlckhhbGZDaGVja2VkXCJcbiAgICAgICAgWyhuZ01vZGVsKV09XCJmaWx0ZXJBbGxDaGVja2VkXCJcbiAgICAgID5cbiAgICAgIDwvZC1jaGVja2JveD5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJleHRyYUZpbHRlclRlbXBsYXRlXCI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZVxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImV4dHJhRmlsdGVyVGVtcGxhdGVcIlxuICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGNoZWNrZWQ6IGZpbHRlckFsbENoZWNrZWQsIGhhbGZDaGVja2VkOiBmaWx0ZXJIYWxmQ2hlY2tlZCB9XCJcbiAgICAgICAgPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8ZGl2IGNsYXNzPVwibGluZVwiPjwvZGl2PlxuICAgICAgPGNkay12aXJ0dWFsLXNjcm9sbC12aWV3cG9ydFxuICAgICAgICBpdGVtU2l6ZT1cIjMwXCJcbiAgICAgICAgbWluQnVmZmVyUHg9XCIzMDBcIlxuICAgICAgICBtYXhCdWZmZXJQeD1cIjUwMFwiXG4gICAgICAgIGNsYXNzPVwibm9ybWFsLWZpbHRlci1saXN0LWNvbnRhaW5lciBkZXZ1aS1zY3JvbGxiYXJcIlxuICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cImZpbHRlckJveEhlaWdodCA/ICdjYWxjKCcgKyBmaWx0ZXJCb3hIZWlnaHQgKyAnIC0gMTgwcHgpJyA6IDMwICogKGZpbHRlckxpc3RNdWx0aXBsZT8ubGVuZ3RoIHx8IDEpICsgJ3B4J1wiXG4gICAgICAgIFtzdHlsZS5tYXhIZWlnaHRdPVwiZmlsdGVyQm94SGVpZ2h0ID8gJ25vbmUnIDogJzI1MHB4J1wiXG4gICAgICA+XG4gICAgICAgIDxkaXYgKmNka1ZpcnR1YWxGb3I9XCJsZXQgaXRlbSBvZiBmaWx0ZXJMaXN0TXVsdGlwbGVcIiBjbGFzcz1cImNoZWNrYm94LWdyb3VwXCI+XG4gICAgICAgICAgPGQtY2hlY2tib3ggW2xhYmVsXT1cIml0ZW0ubmFtZVwiIFsobmdNb2RlbCldPVwiaXRlbS5jaGVja2VkXCIgKGNoYW5nZSk9XCJjaGVja2JveENoYW5nZSgkZXZlbnQsIGl0ZW0pXCI+IDwvZC1jaGVja2JveD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJuby1kYXRhLWNvbnRhaW5lclwiICpuZ0lmPVwiIWZpbHRlckxpc3RNdWx0aXBsZT8ubGVuZ3RoXCI+e3sgaTE4bkNvbW1vblRleHQ/Lm5vRGF0YSB9fTwvZGl2PlxuICAgICAgPC9jZGstdmlydHVhbC1zY3JvbGwtdmlld3BvcnQ+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj5cbiAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1zdHlsZVwiIChjbGljayk9XCJnZXRGaWx0ZXJEYXRhTXVsdGlwbGUoKTsgY2xvc2VGaWx0ZXIoZHJvcGRvd24pXCI+e3sgaTE4bkNvbW1vblRleHQ/LmJ0bk9rIH19PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG48bmctdGVtcGxhdGUgI2ZpbHRlckNvbnRlbnRUbXBsRm9yUmFkaW8gbGV0LWZpbHRlckxpc3RSYWRpbz1cImZpbHRlckxpc3REaXNwbGF5XCIgbGV0LWRyb3Bkb3duPVwiZHJvcGRvd25cIj5cbiAgPGRpdiBjbGFzcz1cImRhdGEtdGFibGUtY29sdW1uLWZpbHRlci1jb250ZW50IGZpbHRlci1iZyBmaWx0ZXItZm9udC1jb2xvclwiIFtzdHlsZS53aWR0aF09XCJmaWx0ZXJCb3hXaWR0aFwiIFtzdHlsZS5oZWlnaHRdPVwiZmlsdGVyQm94SGVpZ2h0XCI+XG4gICAgPGRpdj5cbiAgICAgIDxpbnB1dFxuICAgICAgICBuYW1lPVwic2VsZWN0XCJcbiAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICBbcGxhY2Vob2xkZXJdPVwiaTE4bkNvbW1vblRleHQ/LnNlYXJjaFBsYWNlaG9sZGVyXCJcbiAgICAgICAgWyhuZ01vZGVsKV09XCJzZWFyY2hUZXh0XCJcbiAgICAgICAgY2xhc3M9XCJkZXZ1aS1mb3JtLWNvbnRyb2wgZGV2dWktaW5wdXQgZGV2dWktc2VhcmNoLWluLWRyb3Bkb3duXCJcbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImZpbHRlci1vcHRpb25zXCIgcm9sZT1cIm1lbnVcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJub3JtYWwtZmlsdGVyLWxpc3QtY29udGFpbmVyIGRldnVpLXNjcm9sbGJhclwiIHJvbGU9XCJtZW51aXRlbVwiIFtzdHlsZS5tYXhIZWlnaHRdPVwiZmlsdGVyQm94SGVpZ2h0ID8gJ25vbmUnIDogJzM1MHB4J1wiPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgW3RpdGxlXT1cIml0ZW0ubmFtZVwiXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgZmlsdGVyTGlzdFJhZGlvXCJcbiAgICAgICAgICBjbGFzcz1cImRyb3AtZG93bi1pdGVtXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJ7ICdmaWx0ZXItaXRlbS1hY3RpdmUnOiBzZWxlY3RlZEl0ZW0gPT09IGl0ZW0gfVwiXG4gICAgICAgICAgKGNsaWNrKT1cImdldEZpbHRlckRhdGFSYWRpbyhpdGVtKTsgY2xvc2VGaWx0ZXIoZHJvcGRvd24pXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7IGl0ZW0ubmFtZSB9fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=