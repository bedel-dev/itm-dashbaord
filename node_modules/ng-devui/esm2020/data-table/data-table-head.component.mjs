import { DOCUMENT } from '@angular/common';
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Inject, Input, IterableDiffers, KeyValueDiffers, NgZone, Output, QueryList, ViewChildren } from '@angular/core';
import { I18nService } from 'ng-devui/i18n';
import { SortDirection } from './data-table.model';
import { DATA_TABLE } from './data-table.token';
import { TableThComponent } from './table/head/th/th.component';
import { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "ng-devui/checkbox";
import * as i3 from "ng-devui/dropdown";
import * as i4 from "./table/head/th/th.component";
import * as i5 from "@angular/common";
import * as i6 from "@angular/forms";
export class DataTableHeadComponent {
    constructor(dt, zone, element, differs, iterableDiffers, ref, i18n, doc) {
        this.dt = dt;
        this.zone = zone;
        this.element = element;
        this.differs = differs;
        this.iterableDiffers = iterableDiffers;
        this.ref = ref;
        this.i18n = i18n;
        this.doc = doc;
        this.multiSort = [];
        this.dataSource = [];
        this.headClickSortEvent = new EventEmitter();
        this.resizeHandlerEvent = new EventEmitter();
        this.beginResizeHandlerEvent = new EventEmitter();
        this.resizingHandlerEvent = new EventEmitter();
        this.dragTableEndEvent = new EventEmitter();
        this.searchQuery = {};
        this.multiSortArray = [];
        this.rowItem = undefined;
        this.classes = {
            originTable: 'sindu_origin_table',
            draggableTable: 'sindu_dragger',
            dragging: 'sindu_dragging',
            static: 'sindu_static',
            handle: 'sindu_handle',
        };
        this.oldCoord = 0;
        this.childTables = [];
        this.dataSourceChange = false;
        this.colOffset = 0;
        this.secondHeaderOffset = 0;
        this.cellMapOffset = 0;
        this.cellMap = {};
        this.searchText = '';
        this.filterListDisplay = [];
        this.isFilterHidden = false;
        this.checkedListForFilter = [];
        this.handleMousemove = (e) => {
            e.preventDefault();
            this.documentElement.removeEventListener('mousemove', this.handleMousemove);
            this.documentElement.addEventListener('mousedown', this.grab);
            this.documentElement.addEventListener('mouseup', this.release);
            setTimeout(() => {
                this.dispatchMousedown();
            });
        };
        this.grab = (e) => {
            e.preventDefault();
            this.documentElement.removeEventListener('mousedown', this.grab);
            this.addClass(this.documentElement, 'gu-unselectable');
            const context = this.canStart(e.target);
            this.grabbed = context;
            this.documentElement.addEventListener('mousemove', this.startBecauseMouseMoved);
        };
        this.startBecauseMouseMoved = (e) => {
            e.preventDefault();
            if (!this.grabbed) {
                return;
            }
            this.documentElement.removeEventListener('mousemove', this.startBecauseMouseMoved);
            this.documentElement.addEventListener('mousemove', this.drag);
            this.source = this.grabbed.source;
            this.item = this.grabbed.item;
            this.initialSibling = this.currentSibling = this.nextEl(this.grabbed.item);
            this.addClass(this.item, 'gu-transit');
            this.el.style.display = 'flex';
            this.el.style.position = 'relative';
            this.originTable.style.display = 'none';
            if (this.fixHeader) {
                this.fixTableOffsetTop = this.fixOriginTable.parentNode.parentNode.scrollTop;
                this.fixFakeTableEl.style.display = 'flex';
                this.fixOriginTable.style.display = 'none';
                this.fixFakeTableEl.style.position = 'relative';
            }
            this.offsetX = 15;
            this.offsetY = 15;
            this.renderMirrorImage(this.item);
        };
        this.release = (e) => {
            e.preventDefault();
            this.grabbed = null;
            this.documentElement.removeEventListener('mousemove', this.drag);
            this.documentElement.removeEventListener('mouseup', this.release);
            const to = Array.from(this.el.children).indexOf(this.item);
            this.removeMirrorImage();
            this.el.style.display = 'none';
            this.originTable.style.display = 'table';
            if (this.fixHeader) {
                this.fixFakeTableEl.style.display = 'none';
                this.fixOriginTable.style.display = 'table';
                this.fixFakeTableEl.style.position = 'absolute';
            }
            this.documentElement.style.overflow = this.bodyOverflow;
            this.documentElement.removeEventListener('mouseup', this.release);
            if (this.item) {
                this.rmClass(this.item, 'gu-transit');
            }
            this.sortColumn(this.originCellIndex.x, to);
            cancelAnimationFrame(this.animationRequestId);
        };
        this.sortColumn = (from, to) => {
            if (from === to) {
                return;
            }
            let offset = 0;
            if (this.checkable) {
                offset++;
            }
            if (this.showExpandToggle) {
                offset++;
            }
            from = from - offset;
            to = to - offset;
            let toCell = this.cellMap[to].sortKey[0];
            let fromCell = this.cellMap[from].sortKey[0];
            let loopCount = 1;
            if (this.cellMap[from].isAdvanceHeader) {
                loopCount = this.cellMap[from].headerLength;
                if (from > to) {
                    fromCell = this.cellMap[from].sortKey[this.cellMap[from].headerLength - 1];
                }
            }
            if (this.cellMap[to].isAdvanceHeader && from < to) {
                toCell = this.cellMap[to].sortKey[this.cellMap[to].headerLength - 1];
            }
            for (let i = 0; i < loopCount; i++) {
                this.dragTableEndEvent.emit({ from: fromCell, to: toCell });
            }
        };
        this.sort = ({ list, from, to }) => {
            if (!list[from] && !list[to]) {
                return;
            }
            if (from < to) {
                this.appendSibling({ target: list[from], origin: list[to] });
            }
            else {
                this.insertBeforeSibling({ target: list[from], origin: list[to] });
            }
        };
        this.rerenderTables = () => {
            this.dataSourceChange = true;
            if (this.fixHeader && this.tableBodyEl && this.dataSource.length) {
                this.fixOriginTable = this.tableBodyEl.nativeElement;
                setTimeout(() => {
                    this.renderFixFakeTableEl();
                    this.fixFakeTableEl.style.display = 'none';
                });
            }
            else {
                this.detecteOriginTable();
                setTimeout(() => {
                    this.renderFakeTable();
                    this.el.style.display = 'none';
                });
            }
        };
        this.drag = (e) => {
            e.preventDefault();
            if (!this.mirror) {
                return;
            }
            const clientX = this.getCoord('clientX', e);
            const clientY = this.getCoord('clientY', e);
            if (this.animationRequestId) {
                cancelAnimationFrame(this.animationRequestId);
                this.animationRequestId = null;
            }
            this.handleScroll(clientX, clientY, e);
            this.documentElement.style.overflow = 'hidden';
            const x = clientX - this.offsetX;
            const y = clientY - this.offsetY;
            this.mirror.style.left = x + 'px';
            this.mirror.style.top = y + 'px';
            this.mirror.style.visibility = 'visible';
            const elementBehindCursor = this.getElementBehindPoint(this.mirror, clientX, clientY);
            const dropTarget = this.findDropTarget(elementBehindCursor, clientX, clientY);
            if (!dropTarget) {
                return;
            }
            const immediate = this.getImmediateChild(dropTarget, elementBehindCursor);
            let reference;
            if (immediate) {
                reference = this.getReference(dropTarget, immediate, clientX);
            }
            const changed = dropTarget !== null && dropTarget !== this.lastDropTarget;
            if (changed || dropTarget === null) {
                this.lastDropTarget = dropTarget;
            }
            if ((reference === null && changed) ||
                reference !== this.item &&
                    reference !== this.nextEl(this.item)) {
                let mover;
                const nowCord = e.pageX;
                if (nowCord < this.oldCoord) {
                    mover = reference; // upward or right
                }
                else {
                    mover = reference ? (reference.previousElementSibling ? reference.previousElementSibling : reference) : dropTarget.lastElementChild;
                }
                this.oldCoord = nowCord;
                let from;
                let to;
                let moverIndex;
                let fixItemRect;
                let fixItem;
                let fixMoverRect;
                let fixMover;
                if (this.fixHeader) {
                    from = Array.from(this.el.children).indexOf(this.item);
                    to = Array.from(this.el.children).indexOf(reference);
                    moverIndex = Array.from(this.el.children).indexOf(mover);
                    fixItem = Array.from(this.fixFakeTableEl.children)[from];
                    fixItemRect = fixItem.getBoundingClientRect();
                    fixMover = Array.from(this.fixFakeTableEl.children)[moverIndex];
                    fixMoverRect = moverIndex !== -1 && fixMover.getBoundingClientRect();
                }
                const moverRect = mover && mover.getBoundingClientRect();
                const itemRact = this.item.getBoundingClientRect();
                this.moveTarget(dropTarget, this.item, reference);
                if (this.fixHeader) {
                    this.moveTarget(this.fixFakeTableEl, Array.from(this.fixFakeTableEl.children)[from], Array.from(this.fixFakeTableEl.children)[to]);
                }
                if (mover && moverRect) {
                    this.animate(moverRect, mover, 300);
                    this.animate(itemRact, this.item, 300);
                }
                if (this.fixHeader && moverIndex !== -1 && fixMoverRect) {
                    this.animate(fixMoverRect, fixMover, 300);
                    this.animate(fixItemRect, fixItem, 300);
                }
            }
        };
        this.getLongestRow = (table) => {
            let result = table.rows[0];
            Array.from(table.rows).forEach((row) => {
                const rowL = row.children.length;
                const resultL = result.children.length;
                result = rowL > resultL ? row : result;
            });
            return result;
        };
        this.getChildTableColumn = (table, index) => {
            const cTable = table.cloneNode(true);
            this.origin2DragItem(cTable);
            const empty = (node) => {
                while (node.firstChild) {
                    node.removeChild(node.firstChild);
                }
            };
            Array.from(cTable.rows).forEach((row) => {
                if (row.classList.contains('child-table')) {
                    const target = this.getChildTableColumn(row.children[0].children[0], index);
                    empty(row.children[0]);
                    row.children[0].appendChild(target);
                }
                else {
                    const target = row.children[index];
                    empty(row);
                    if (target) {
                        row.appendChild(target);
                    }
                }
            });
            this.sizeChildColumnFake(cTable, table, index);
            return cTable;
        };
        this.detecteChildTables = (table) => {
            Array.from(table.rows).forEach((row, index) => {
                if (row.classList.contains('child-table')) {
                    const childTable = table.rows[index].children[0].children[0];
                    this.childTables.push(childTable);
                    this.detecteChildTables(childTable);
                }
            });
        };
        this.getReference = (dropTarget, target, x) => {
            const resolve = (after) => {
                return after ? this.nextEl(target) : target;
            };
            const inside = () => {
                const rect = target.getBoundingClientRect();
                return resolve(x > rect.left + this.getRectWidth(rect) / 2);
            };
            const outside = () => {
                const len = dropTarget.children.length;
                let i;
                let el;
                let rect;
                for (i = 0; i < len; i++) {
                    el = dropTarget.children[i];
                    rect = el.getBoundingClientRect();
                    if ((rect.left + rect.width / 2) > x) {
                        return el;
                    }
                }
                return null;
            };
            const reference = target !== dropTarget ? inside() : outside();
            return reference;
        };
        this.getImmediateChild = (dropTarget, target) => {
            let immediate = target;
            const isElementDropFreeze = (element) => {
                const index = Array.from(element.parentNode.children).indexOf(element);
                return index < this.colDropFreezeTo;
            };
            while (immediate !== dropTarget && this.getParent(immediate) !== dropTarget) {
                immediate = this.getParent(immediate);
            }
            if (immediate === this.documentElement || isElementDropFreeze(immediate)) {
                return null;
            }
            return immediate;
        };
        this.i18nCommonText = this.i18n.getI18nText().common;
        this.document = this.doc;
        this.documentElement = this.doc.documentElement;
    }
    ngOnInit() {
        if (this.colDraggable) {
            this.iterableDiffer = this.iterableDiffers.find([]).create(null);
            this.objDiffer = {};
            this.dataSource.forEach((data, index) => {
                this.objDiffer[index] = this.differs.find(data).create();
            });
        }
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nCommonText = data.common;
        });
    }
    ngOnChanges(changes) {
        if ((changes['columns'] || changes.multiSort) && this.columns) {
            this.multiSortArray = [];
            this.columns.forEach(column => {
                if (column.sortable) {
                    const sortIndex = this.multiSort.findIndex(item => item['field'] === column.field);
                    this.multiSortArray.push({
                        field: column.field,
                        direction: sortIndex !== -1 ? this.multiSort[sortIndex].direction : SortDirection.default
                    });
                }
            });
        }
        if (changes['columns'] && this.columns) {
            this.rowCount = Math.max(...this.columns.map(column => {
                if (column.advancedHeader) {
                    return column.advancedHeader.length;
                }
                else {
                    return 0;
                }
            }));
            if (this.rowCount > 0) {
                this.rowCountArray = new Array(this.rowCount);
                this.initAdvanceHeader();
            }
            if (this.colDraggable) {
                this.rerenderTables();
            }
        }
        if (changes && changes.dataSource) {
            if (this.colDraggable) {
                this.rerenderTables();
            }
        }
        if (this.colDraggable && changes['tableBodyEl'] && this.tableBodyEl) {
            if (this.fixHeader && this.tableBodyEl && this.dataSource.length) {
                this.fixOriginTable = this.tableBodyEl.nativeElement;
                this.renderFixFakeTableEl();
                this.fixFakeTableEl.style.display = 'none';
                this.fixTableScrollViewEl = this.fixOriginTable.parentNode.parentNode;
                this.ref.markForCheck();
            }
        }
    }
    ngDoCheck() {
        if (!this.colDraggable) {
            return;
        }
        this.dataSource.forEach((elt, index) => {
            const objDiffer = this.objDiffer[index];
            if (!objDiffer) {
                return;
            }
            const objChanges = objDiffer.diff(elt);
            if (objChanges) {
                objChanges.forEachChangedItem((changeItem) => {
                    if (changeItem.key === '$isChildTableOpen' && elt.children && elt.children.length) {
                        this.rerenderTables();
                    }
                    if (changeItem.key === 'children') {
                        this.rerenderTables();
                    }
                });
            }
        });
        const changes = this.iterableDiffer.diff(this.columns);
        if (changes) {
            this.createCellMap();
        }
    }
    ngAfterViewInit() {
        if (this.colDraggable) {
            // set mirror container to table-wrap element
            this.mirrorContainer = this.element.nativeElement.parentNode.parentNode;
            this.bodyOverflow = this.documentElement.style.overflow;
            this.detecteOriginTable();
            setTimeout(() => {
                this.renderFakeTable();
                this.el.style.display = 'none';
            });
            this.documentElement.addEventListener('resize', this.renderFakeTable);
            this.createCellMap();
            this.scrollViewEl = this.originTable.parentNode.parentNode;
            this.scrollViewRect = this.scrollViewEl.getBoundingClientRect();
        }
    }
    createCellMap() {
        let cellIndex = 0;
        this.columns.forEach((column, index) => {
            if (!column.advancedHeader) {
                this.cellMap[cellIndex] = { name: column.field, sortKey: [index] };
                cellIndex++;
            }
            else {
                if (column.advancedHeader[0].colspan) {
                    this.cellMap[cellIndex] = {
                        name: column.field, isAdvanceHeader: true,
                        sortKey: [index], headerLength: column.advancedHeader[0].colspan
                    };
                    cellIndex++;
                }
                else {
                    Object.keys(this.cellMap).forEach(key => {
                        const item = this.cellMap[key];
                        if (item.isAdvanceHeader && item.sortKey.length < item.headerLength) {
                            item.sortKey.push(index);
                        }
                    });
                }
            }
        });
    }
    ngOnDestroy() {
        if (this.colDraggable) {
            this.documentElement.removeEventListener('resize', this.renderFakeTable);
        }
        if (this.i18nSubscription) {
            this.i18nSubscription.unsubscribe();
        }
    }
    onHeadClick(event, column) {
        event.field = column.field;
        delete event.th;
        this.headClickSortEvent.emit(event);
    }
    onCheckAllChange() {
        this.dt.onCheckAllChange(this.pageAllChecked);
    }
    onSearchQueryChange() {
        this.dt.onSearchQueryChange(this.searchQuery);
    }
    canFilterable(column) {
        return column.field && column.field !== '$index' && column.filterable;
    }
    getIfExistMultiSort(field) {
        const column = this.columns.find(item => item['field'] === field);
        return !!column.sortable;
    }
    getSortDirection(field) {
        if (!this.multiSortArray) {
            return false;
        }
        const filterField = this.multiSortArray.filter(item => {
            return item['field'] === field;
        });
        if (filterField.length !== 0) {
            return filterField[0]['direction'];
        }
        else {
            return undefined;
        }
    }
    onResize($event, column) {
        this.resizeHandlerEvent.emit({
            ...$event,
            field: column.field
        });
    }
    onBeginResize($event) {
        const thRenderWidthList = [];
        this.thList.forEach(th => {
            thRenderWidthList.push({ field: th.element.getAttribute('field'), width: th.element.clientWidth });
        });
        this.beginResizeHandlerEvent.emit({ event: $event, thRenderWidthList });
    }
    onResizing($event, column) {
        this.resizingHandlerEvent.emit({
            ...$event,
            field: column.field
        });
    }
    // 初始化多行表头，为了兼容resizeable对表头互相影响数据做了记录
    initAdvanceHeader() {
        if (this.resizeable) {
            this.columns.forEach((column, colIndex) => {
                if (column['advancedHeader']) {
                    column['advancedHeader'].forEach((item, rowIndex) => {
                        item['$rowIndex'] = rowIndex;
                        item['$colIndex'] = colIndex;
                        item['$cols'] = new Array(item.colspan).fill(1).map((v, i) => colIndex + i);
                    });
                }
                column['$colIndex'] = colIndex;
            });
        }
    }
    trackByFn(index, item) {
        return index;
    }
    onTap(e) {
        e.preventDefault();
        this.originCellIndex = this.findCellIndex(e);
        setTimeout(() => {
            this.documentElement.addEventListener('mousemove', this.handleMousemove);
            this.documentElement.addEventListener('mouseup', () => {
                this.documentElement.removeEventListener('mousemove', this.handleMousemove);
            });
        });
    }
    appendSibling({ target, origin }) {
        if (!target) {
            return;
        }
        target.parentNode.insertBefore(target, origin ? origin.nextElementSibling : null);
    }
    getOffset(el) {
        const rect = el.getBoundingClientRect();
        return {
            left: rect.left + this.getScroll('scrollLeft', 'pageXOffset'),
            top: rect.top + this.getScroll('scrollTop', 'pageYOffset')
        };
    }
    getScroll(scrollProp, offsetProp) {
        if (typeof window !== undefined && typeof window[offsetProp] !== 'undefined') {
            return window[offsetProp];
        }
        if (this.documentElement.clientHeight) {
            return this.documentElement[scrollProp];
        }
        return this.document.body[scrollProp];
    }
    dispatchMousedown() {
        const { el, originCellIndex } = this;
        el.children[originCellIndex.x].dispatchEvent(this.getTouchyEvent());
    }
    getTouchyEvent() {
        let event;
        // This is true only for IE,firefox
        if (this.document.createEvent) {
            // To create a mouse event , first we need to create an event and then initialize it.
            event = this.document.createEvent('MouseEvent');
            event.initMouseEvent('mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        }
        else {
            event = new MouseEvent('mousedown', {
                'view': window,
                'bubbles': true,
                'cancelable': true
            });
        }
        return event;
    }
    removeMirrorImage() {
        if (this.mirror) {
            this.documentElement.removeEventListener('mousemove', this.grab);
            this.getParent(this.mirror).removeChild(this.mirror);
            this.mirror = null;
            setTimeout(() => {
                this.rmClass(this.mirrorContainer, 'gu-unselectable');
                this.rmClass(this.documentElement, 'gu-unselectable');
            });
        }
    }
    canStart(item) {
        while (this.getParent(item) && this.isContainer(this.getParent(item)) === false) {
            item = this.getParent(item); // drag target should be a top element
            if (!item) {
                return;
            }
        }
        const source = this.getParent(item);
        if (!source) {
            return;
        }
        return {
            item: item,
            source: source
        };
    }
    detecteOriginTable() {
        let target = this.element.nativeElement;
        while (target.nodeName !== 'TABLE') {
            target = target.parentElement;
        }
        this.originTable = target;
        if (this.fixHeader && this.tableBodyEl) {
            this.fixOriginTable = this.tableBodyEl.nativeElement;
            this.detecteChildTables(this.fixOriginTable);
        }
        else {
            this.detecteChildTables(this.originTable);
        }
    }
    renderFakeTable() {
        if (this.el && !this.dataSourceChange) {
            return;
        }
        this.childTables = [];
        this.detecteChildTables(this.originTable);
        const fakeTable = this.buildFakeTable(this.originTable);
        this.fakeTable = fakeTable;
        const el = fakeTable.reduce((previous, current) => {
            const li = this.document.createElement('li');
            if (current) {
                li.appendChild(current);
            }
            return previous.appendChild(li) && previous;
        }, this.document.createElement('ul'));
        this.el = el;
        this.renderEl(el, this.originTable, fakeTable);
    }
    renderFixFakeTableEl() {
        if (this.fixFakeTableEl && !this.dataSourceChange) {
            return;
        }
        const fakeTable = this.buildFakeTable(this.fixOriginTable);
        this.mainFakeTable = fakeTable;
        const el = fakeTable.reduce((previous, current) => {
            const li = this.document.createElement('li');
            li.appendChild(current);
            return previous.appendChild(li) && previous;
        }, this.document.createElement('ul'));
        this.fixFakeTableEl = el;
        this.renderEl(el, this.fixOriginTable, this.mainFakeTable);
    }
    buildFakeTable(table) {
        this.colOffset = 0;
        this.secondHeaderOffset = 0;
        return Array.from(table.rows[0].children).map((cell, index) => {
            return this.getColumnAsTableByIndex(table, index, cell.colSpan, cell.rowSpan);
        });
    }
    renderEl(el, originEl, fakeTables) {
        if (typeof window === undefined) {
            return;
        }
        this.sizeColumnFake(fakeTables, originEl);
        this.css(el, {
            position: 'absolute',
        });
        if (originEl.parentNode.children[0].nodeName === 'UL') {
            originEl.parentNode.removeChild(originEl.parentNode.children[0]);
            this.insertBeforeSibling({ target: el, origin: originEl });
        }
        else {
            this.insertBeforeSibling({ target: el, origin: originEl });
        }
        // render every wrapper of table(element li)
        const spacing = window.getComputedStyle(originEl).getPropertyValue('border-spacing').split(' ')[0];
        const attr = 'margin-right';
        const length = el.children.length;
        Array.from(el.children).forEach((li, dex) => {
            if (spacing && dex < (length - 1)) {
                li.style[attr] = `-${spacing}`;
            }
        });
        this.addClass(el.parentElement, this.classes.dragging);
        this.addClass(el, this.classes.draggableTable);
        this.addClass(el, 'sindu_column');
    }
    sizeColumnFake(fakeTables, originEl) {
        // calculate width of every column
        Array.from(originEl.rows[0].children).forEach((cell, index) => {
            if (!fakeTables[index]) {
                return;
            }
            const w = cell.getBoundingClientRect().width;
            const t = fakeTables[index];
            this.css(t, { width: `${w}px` });
            this.css(t.rows[0].children[0], { width: `${w}px` });
        });
    }
    css(el, cssList) {
        Object.keys(cssList).forEach((k) => {
            el.style[k] = cssList[k];
        });
        return el;
    }
    insertBeforeSibling({ target, origin }) {
        if (!target) {
            return;
        }
        origin.parentNode.insertBefore(target, origin);
    }
    findCellIndex(e) {
        let target = e.target;
        while (target.nodeName !== 'TH') {
            target = target.parentElement || target.parentNode;
        }
        return { x: target.cellIndex, y: target.parentElement.rowIndex };
    }
    renderMirrorImage(target) {
        if (this.mirror) {
            return;
        }
        this.mirror = target.cloneNode(true);
        const getFixTableTotalHeight = () => {
            return this.fixOriginTable.parentNode.parentNode.parentNode.getBoundingClientRect().height;
        };
        const getTableTotalHeight = () => {
            return this.originTable.parentNode.parentNode.parentNode.getBoundingClientRect().height;
        };
        // 固定表头表格时，对拖动内容进行截取
        if (this.fixHeader) {
            const to = Array.from(this.el.children).indexOf(target);
            const fixTarget = this.fixFakeTableEl.children[to].children[0].cloneNode(true);
            const fixTargetContainer = this.document.createElement('div');
            const mirrorHeight = Math.min(parseInt(this.maxHeight, 10), getFixTableTotalHeight());
            fixTargetContainer.style.height = mirrorHeight + 'px';
            fixTargetContainer.style.overflow = 'hidden';
            fixTargetContainer.appendChild(fixTarget);
            fixTarget.style.maxHeight = this.maxHeight;
            fixTarget.style.top = '-' + this.fixTableOffsetTop + 'px';
            this.mirror.appendChild(fixTargetContainer);
        }
        // 设置最大高度，但不是固定表头的表格
        if (!this.fixHeader && this.maxHeight) {
            const mirrorHeight = Math.min(parseInt(this.maxHeight, 10), getTableTotalHeight());
            this.mirror.style.height = mirrorHeight + 'px';
            this.mirror.style.overflow = 'hidden';
        }
        this.mirror.style.visibility = 'hidden';
        const thNode = this.mirror.querySelector('th');
        this.addClass(thNode, 'hover');
        this.rmClass(this.mirror, 'gu-transit');
        this.addClass(this.mirror, 'gu-mirror');
        this.mirrorContainer.appendChild(this.mirror);
        this.addClass(this.mirrorContainer, 'gu-unselectable');
    }
    lookupClass(className) {
        const cache = {};
        const start = '(?:^|\\s)';
        const end = '(?:\\s|$)';
        let cached = cache[className];
        if (cached) {
            cached.lastIndex = 0;
        }
        else {
            cache[className] = cached = new RegExp(start + className + end, 'g');
        }
        return cached;
    }
    addClass(el, className) {
        const current = el.className;
        if (!current.length) {
            el.className = className;
        }
        else if (!this.lookupClass(className).test(current)) {
            el.className += ' ' + className;
        }
    }
    rmClass(el, className) {
        el.className = el.className.replace(this.lookupClass(className), ' ').trim();
    }
    handleScroll(x, y, e) {
        this.scrollViewRect = this.scrollViewEl.getBoundingClientRect();
        let fixTableScrollViewRect;
        if (this.fixHeader) {
            this.fixTableScrollViewEl = this.fixOriginTable.parentNode.parentNode;
            fixTableScrollViewRect = this.fixTableScrollViewEl.getBoundingClientRect();
        }
        let scrollLeft = this.scrollViewEl.scrollLeft;
        const range = 150;
        const scrollToLeft = () => {
            scrollLeft -= 50;
            if (this.fixHeader) {
                this.fixTableScrollViewEl.scrollTo(scrollLeft, 0);
            }
            this.scrollViewEl.scrollTo(scrollLeft, 0);
            this.animationRequestId = requestAnimationFrame(scrollToLeft);
            this.documentElement.dispatchEvent(e);
        };
        const scrollToRight = () => {
            scrollLeft += 50;
            if (this.fixHeader) {
                this.fixTableScrollViewEl.scrollTo(scrollLeft, 0);
            }
            this.scrollViewEl.scrollTo(scrollLeft, 0);
            this.animationRequestId = requestAnimationFrame(scrollToRight);
            this.documentElement.dispatchEvent(e);
        };
        if (!this.fixHeader && (y < this.scrollViewRect.top || y > this.scrollViewRect.bottom)) {
            return;
        }
        if (this.fixHeader && (y < this.scrollViewRect.top || y > fixTableScrollViewRect.bottom)) {
            return;
        }
        if (this.scrollViewRect.left < x && x < (this.scrollViewRect.left + range)) {
            this.animationRequestId = requestAnimationFrame(scrollToLeft);
        }
        if ((this.scrollViewRect.right - range) < x && x < this.scrollViewRect.right) {
            this.animationRequestId = requestAnimationFrame(scrollToRight);
        }
    }
    moveTarget(container, target, reference) {
        container.insertBefore(target, reference);
    }
    getParent(el) {
        return el.parentNode === this.document ? null : el.parentNode;
    }
    getEventHost(e) {
        if (e.targetTouches && e.targetTouches.length) {
            return e.targetTouches[0];
        }
        if (e.changedTouches && e.changedTouches.length) {
            return e.changedTouches[0];
        }
        return e;
    }
    getCoord(coord, e) {
        const host = this.getEventHost(e);
        return host[coord];
    }
    getColumnAsTableByIndex(table, selectedColIndex, colSpan, rowSpan) {
        const skipRowIndexList = this.getDataBetween(0, 0 + rowSpan);
        const cTable = table.cloneNode(true);
        cTable.removeChild(cTable.firstChild); // remove colgroup
        if (this.fixHeader) {
            cTable.deleteCaption();
        }
        else if (!this.fixHeader && cTable.tBodies.length > 1) {
            cTable.removeChild(cTable.tBodies[0]);
        }
        this.origin2DragItem(cTable);
        const empty = (node) => {
            while (node.firstChild) {
                node.removeChild(node.firstChild);
            }
        };
        const insertBodyColList = this.getDataBetween(selectedColIndex - 1 + this.colOffset, selectedColIndex + this.colOffset + colSpan);
        const insertHeaderColList = this.getDataBetween(selectedColIndex + this.secondHeaderOffset - 1, selectedColIndex +
            this.secondHeaderOffset + colSpan - rowSpan + 1);
        const getTreeTableCol = (row, rowIndex) => {
            const target = this.getChildTableColumn(row.children[0].children[0], selectedColIndex);
            empty(row.children[0]);
            row.children[0].appendChild(target);
        };
        const getMultipleHCol = (row, rowIndex) => {
            if (rowIndex === 0) {
                const target = row.children[selectedColIndex];
                empty(row);
                if (target) {
                    row.appendChild(target);
                }
                return;
            }
            if (rowIndex === 1) {
                const targets = insertHeaderColList.map((colIndex) => {
                    return row.children[colIndex];
                });
                empty(row);
                targets.forEach((target) => {
                    if (target) {
                        row.appendChild(target);
                    }
                });
                return;
            }
            else {
                const targets = insertBodyColList.map((colIndex) => {
                    return row.children[colIndex];
                });
                empty(row);
                targets.forEach((target) => {
                    if (target) {
                        row.appendChild(target);
                    }
                });
            }
        };
        const getNormalTableCol = (row, rowIndex) => {
            if (rowIndex === 0) {
                const target = row.children[selectedColIndex];
                empty(row);
                if (target) {
                    row.appendChild(target);
                }
            }
            else {
                const target = row.children[selectedColIndex + this.colOffset];
                empty(row);
                if (target && skipRowIndexList.indexOf(rowIndex) === -1) {
                    row.appendChild(target);
                }
            }
        };
        Array.from(cTable.rows).forEach((row, rowIndex) => {
            if (row.classList.contains('child-table')) {
                getTreeTableCol(row, rowIndex);
            }
            else {
                if (colSpan > 1) {
                    getMultipleHCol(row, rowIndex);
                }
                else {
                    getNormalTableCol(row, rowIndex);
                }
            }
            this.css(row, { height: `${table.rows[rowIndex].getBoundingClientRect().height}px` });
        });
        this.colOffset += (colSpan - 1);
        this.secondHeaderOffset = rowSpan > 1 ? this.secondHeaderOffset - 1 : this.secondHeaderOffset;
        return cTable;
    }
    getDataBetween(form, end) {
        const result = [];
        for (let i = form + 1; i < end; i++) {
            result.push(i);
        }
        return result;
    }
    sizeChildColumnFake(fakeTable, originEl, index) {
        // calculate width of every column
        const cell = Array.from(this.originTable.rows[0].children)[index];
        const w = cell.getBoundingClientRect().width;
        this.css(fakeTable, { width: `${w}px` });
        this.css(fakeTable.rows[0].children[0], { width: `${w}px` });
        // calculate height of every cell
        const rowHeights = Array.from(originEl.rows)
            .map(row => row.children[0].getBoundingClientRect().height);
        Array.from(fakeTable.rows).forEach((row, rowIndex) => {
            this.css(row, { height: `${rowHeights[rowIndex]}px` });
        });
    }
    origin2DragItem(liTable) {
        this.css(liTable, { 'table-layout': 'fixed', width: 'initial', height: 'initial', padding: 0, margin: 0 });
        ['width', 'height', 'id'].forEach((p) => {
            liTable.removeAttribute(p);
        });
    }
    getElementBehindPoint(point, x, y) {
        const p = point || {};
        const state = p.className;
        p.className += ' gu-hide';
        const el = this.document.elementFromPoint(x, y);
        p.className = state;
        return el;
    }
    findDropTarget(elementBehindCursor, clientX, clientY) {
        let target = elementBehindCursor;
        const accepted = () => {
            const droppable = this.isContainer(target);
            if (droppable === false) {
                return false;
            }
            const immediate = this.getImmediateChild(target, elementBehindCursor);
            if (!immediate) {
                return false;
            }
            const reference = this.getReference(target, immediate, clientX);
            const initial = this.isInitialPlacement(target, reference);
            if (initial) {
                return true; // should always be able to drop it right back where it was
            }
            return true;
        };
        while (target && !accepted()) {
            target = this.getParent(target);
        }
        return target;
    }
    getRectWidth(rect) {
        return rect.width || (rect.right - rect.left);
    }
    getRectHeight(rect) {
        return rect.height || (rect.bottom - rect.top);
    }
    nextEl(el) {
        return el.nextElementSibling || manually();
        function manually() {
            let sibling = el;
            do {
                sibling = sibling.nextSibling;
            } while (sibling && sibling.nodeType !== 1);
            return sibling;
        }
    }
    isInitialPlacement(target, s) {
        let sibling;
        if (s !== undefined) {
            sibling = s;
        }
        else if (this.mirror) {
            sibling = this.currentSibling;
        }
        else {
            sibling = this.nextEl(this.item);
        }
        return target === this.source && sibling === this.initialSibling;
    }
    isContainer(el) {
        return el === this.el;
    }
    animate(prevRect, target, time) {
        if (time) {
            if (!prevRect || !target) {
                return;
            }
            const currentRect = target.getBoundingClientRect();
            target.style.transition = 'none';
            target.style.transform = 'translate3d(' + (prevRect.left - currentRect.left) + 'px,' + (prevRect.top - currentRect.top) + 'px,0)';
            target.style.transition = 'all ' + time + 'ms cubic-bezier(0.755, 0.05, 0.855, 0.06)';
            target.style.transform = 'translate3d(0,0,0)';
            clearTimeout(target.animated);
            target.animated = setTimeout(function () {
                target.style.transition = '';
                target.style.transform = '';
                target.animated = false;
            }, time);
        }
    }
    toggleChildrenTable(event) {
        this.childrenTableOpen = !this.childrenTableOpen;
        this.dt.onToggleAllChildrenTable(this.childrenTableOpen);
    }
    onOptionSelect(option) {
        if (option.onChecked) {
            option.onChecked();
        }
    }
}
DataTableHeadComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DataTableHeadComponent, deps: [{ token: DATA_TABLE }, { token: i0.NgZone }, { token: i0.ElementRef }, { token: i0.KeyValueDiffers }, { token: i0.IterableDiffers }, { token: i0.ChangeDetectorRef }, { token: i1.I18nService }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
DataTableHeadComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: DataTableHeadComponent, selector: "d-data-table-head,[dDataTableHead]", inputs: { checkable: "checkable", headerCheckDisabled: "headerCheckDisabled", headerCheckVisible: "headerCheckVisible", checkOptions: "checkOptions", showExpandToggle: "showExpandToggle", pageAllChecked: "pageAllChecked", columns: "columns", multiSort: "multiSort", resizeable: "resizeable", maxHeight: "maxHeight", showSortIcon: "showSortIcon", showFilterIcon: "showFilterIcon", colDropFreezeTo: "colDropFreezeTo", colDraggable: "colDraggable", fixHeader: "fixHeader", dataSource: "dataSource", tableViewRefElement: "tableViewRefElement", tableBodyEl: "tableBodyEl", checkableColumn: "checkableColumn", showExpandToggleColumn: "showExpandToggleColumn", halfChecked: "halfChecked", childrenTableOpen: "childrenTableOpen" }, outputs: { headClickSortEvent: "headClickSortEvent", resizeHandlerEvent: "resizeHandlerEvent", beginResizeHandlerEvent: "beginResizeHandlerEvent", resizingHandlerEvent: "resizingHandlerEvent", dragTableEndEvent: "dragTableEndEvent" }, viewQueries: [{ propertyName: "thList", predicate: TableThComponent, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<ng-container>\n  <ng-template [ngTemplateOutlet]=\"defaultHeadTemplate\" [ngTemplateOutletContext]=\"{ $implicit: this }\" *ngIf=\"!(rowCount > 0)\">\n  </ng-template>\n  <ng-template\n    [ngTemplateOutlet]=\"AdvancedHeadTmpl\"\n    [ngTemplateOutletContext]=\"{ $implicit: this, rows: rowCountArray }\"\n    *ngIf=\"rowCount > 0\"\n  >\n  </ng-template>\n</ng-container>\n\n<!-- begin:template: header label template-->\n<ng-template #defaultHeadTemplate let-head=\"\">\n  <tr>\n    <th\n      *ngIf=\"showExpandToggle\"\n      class=\"devui-detail-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable\"\n      class=\"devui-checkable-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <th\n      dHeadCell\n      *ngFor=\"let column of columns; trackBy: trackByFn; let last = last; let colIndex = index\"\n      [minWidth]=\"column.minWidth\"\n      [maxWidth]=\"column.maxWidth\"\n      [attr.field]=\"column.field\"\n      [showSortIcon]=\"showSortIcon\"\n      [showFilterIcon]=\"showFilterIcon\"\n      [sortable]=\"getIfExistMultiSort(column.field)\"\n      [sortDirection]=\"getSortDirection(column.field)\"\n      (sortChange)=\"onHeadClick($event, column)\"\n      [filterable]=\"canFilterable(column)\"\n      [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n      [filterList]=\"column.filterList\"\n      [column]=\"column\"\n      [filterMultiple]=\"column.filterMultiple\"\n      [filterBoxWidth]=\"column.filterBoxWidth\"\n      [filterBoxHeight]=\"column.filterBoxHeight\"\n      [filterIconActive]=\"column.filterIconActive\"\n      [beforeFilter]=\"column.beforeFilter\"\n      [customFilterTemplate]=\"column.customFilterTemplate\"\n      [extraFilterTemplate]=\"column.extraFilterTemplate\"\n      [searchFn]=\"column.searchFn\"\n      (filterChange)=\"column.emitFilterData($event)\"\n      (filterToggle)=\"column.emitFilterToggle($event)\"\n      [fixedLeft]=\"column.fixedLeft\"\n      [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n      [fixedRight]=\"column.fixedRight\"\n      [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n      [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n      (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n      (tapEvent)=\"onTap($event)\"\n      [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n      [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n      [tableViewRefElement]=\"tableViewRefElement\"\n      [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n      [childrenTableOpen]=\"childrenTableOpen\"\n      [ngClass]=\"{\n        sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n        'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n      }\"\n      [resizeEnabled]=\"resizeable\"\n      (resizeEndEvent)=\"onResize($event, column)\"\n      (resizeStartEvent)=\"onBeginResize($event)\"\n      (resizingEvent)=\"onResizing($event, column)\"\n    >\n      <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n      <ng-container *ngIf=\"column.headCellTmpl?.template\">\n        <ng-template\n          [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n          [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n        ></ng-template>\n      </ng-container>\n    </th>\n  </tr>\n</ng-template>\n<!--end:tempate-->\n\n<ng-template let-head=\"\" let-rows=\"rows\" #AdvancedHeadTmpl>\n  <tr *ngFor=\"let rowContex of rows; let rowIndex = index\">\n    <th\n      *ngIf=\"showExpandToggle && rowIndex === 0\"\n      class=\"devui-detail-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable && rowIndex === 0\"\n      class=\"devui-checkable-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <ng-container *ngFor=\"let column of columns; trackBy: trackByFn; let colIndex = index; let last = last\">\n      <th\n        dHeadCell\n        *ngIf=\"column.advancedHeader && column.advancedHeader[rowIndex]?.rowspan && column.advancedHeader[rowIndex]?.colspan\"\n        [attr.rowspan]=\"column.advancedHeader[rowIndex]?.rowspan\"\n        [attr.colspan]=\"column.advancedHeader[rowIndex]?.colspan\"\n        [style.textAlign]=\"\n          rowIndex !== column.advancedHeader.length - 1 &&\n          (column.advancedHeader[rowIndex]?.rowspan > 0 || column.advancedHeader[rowIndex]?.colspan > 0)\n            ? 'center'\n            : ''\n        \"\n        [minWidth]=\"column.minWidth\"\n        [attr.field]=\"column.field\"\n        [maxWidth]=\"column.maxWidth\"\n        [resizeEnabled]=\"resizeable && rowIndex === column.advancedHeader.length - 1 && !last\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field) && rowIndex === column.advancedHeader.length - 1\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column) && rowIndex === column.advancedHeader.length - 1\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n      >\n        <span *ngIf=\"rowIndex < rows.length - 1 || !column.headCellTmpl?.template\" [attr.title]=\"column.advancedHeader[rowIndex].header\">{{\n          column.advancedHeader[rowIndex].header\n        }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template && rowIndex === rows.length - 1\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{\n              column: column,\n              $implicit: head,\n              rowIndex: rowIndex,\n              colIndex: colIndex\n            }\"\n          >\n          </ng-template>\n        </ng-container>\n      </th>\n      <th\n        dHeadCell\n        *ngIf=\"!column.advancedHeader && rowIndex === 0\"\n        [minWidth]=\"column.minWidth\"\n        [maxWidth]=\"column.maxWidth\"\n        [attr.field]=\"column.field\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field)\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column)\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n        [resizeEnabled]=\"resizeable\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [attr.rowspan]=\"rows?.length || 1\"\n      >\n        <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n          ></ng-template>\n        </ng-container>\n      </th>\n    </ng-container>\n    <!-- <th width=\"0\"  *ngIf=\"resizeable\"></th> -->\n  </tr>\n</ng-template>\n", styles: [".select-options{cursor:pointer;vertical-align:middle}svg>g>polygon{fill:#71757f;fill:var(--devui-icon-text, #71757f)}\n"], components: [{ type: i2.CheckBoxComponent, selector: "d-checkbox", inputs: ["name", "label", "cssClass", "color", "disabled", "isShowTitle", "title", "labelTemplate", "halfchecked", "showAnimation", "beforeChange"], outputs: ["change"] }, { type: i3.DropDownAppendToBodyComponent, selector: "[dDropDown][appendToBody]", inputs: ["alignOrigin", "appendToBodyDirections"] }, { type: i4.TableThComponent, selector: "[dHeadCell]", inputs: ["resizeEnabled", "filterable", "beforeFilter", "customFilterTemplate", "extraFilterTemplate", "searchFn", "showFilterIcon", "filterList", "filterIconActive", "filterMultiple", "closeFilterWhenScroll", "filterBoxWidth", "filterBoxHeight", "sortable", "sortDirection", "showSortIcon", "colDraggable", "nestedColumn", "iconFoldTable", "iconUnFoldTable", "tableViewRefElement", "minWidth", "maxWidth", "fixedLeft", "fixedRight", "isLastFixedLeft", "isFirstFixedRight", "childrenTableOpen", "column"], outputs: ["filterChange", "filterToggle", "sortDirectionChange", "sortChange", "resizeEndEvent", "resizeStartEvent", "resizingEvent", "toggleChildrenTableEvent", "tapEvent"] }], directives: [{ type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i5.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i3.DropDownDirective, selector: "[dDropDown]", inputs: ["isOpen", "disabled", "showAnimation", "trigger", "closeScope", "closeOnMouseLeaveMenu"], outputs: ["toggleEvent"], exportAs: ["d-dropdown"] }, { type: i3.DropDownToggleDirective, selector: "[dDropDownToggle]", inputs: ["toggleOnFocus", "autoFocus"], exportAs: ["d-dropdown-toggle"] }, { type: i3.DropDownMenuDirective, selector: "[dDropDownMenu]", exportAs: ["d-dropdown-menu"] }, { type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DataTableHeadComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-data-table-head,[dDataTableHead]', preserveWhitespaces: false, template: "<ng-container>\n  <ng-template [ngTemplateOutlet]=\"defaultHeadTemplate\" [ngTemplateOutletContext]=\"{ $implicit: this }\" *ngIf=\"!(rowCount > 0)\">\n  </ng-template>\n  <ng-template\n    [ngTemplateOutlet]=\"AdvancedHeadTmpl\"\n    [ngTemplateOutletContext]=\"{ $implicit: this, rows: rowCountArray }\"\n    *ngIf=\"rowCount > 0\"\n  >\n  </ng-template>\n</ng-container>\n\n<!-- begin:template: header label template-->\n<ng-template #defaultHeadTemplate let-head=\"\">\n  <tr>\n    <th\n      *ngIf=\"showExpandToggle\"\n      class=\"devui-detail-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable\"\n      class=\"devui-checkable-cell\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <th\n      dHeadCell\n      *ngFor=\"let column of columns; trackBy: trackByFn; let last = last; let colIndex = index\"\n      [minWidth]=\"column.minWidth\"\n      [maxWidth]=\"column.maxWidth\"\n      [attr.field]=\"column.field\"\n      [showSortIcon]=\"showSortIcon\"\n      [showFilterIcon]=\"showFilterIcon\"\n      [sortable]=\"getIfExistMultiSort(column.field)\"\n      [sortDirection]=\"getSortDirection(column.field)\"\n      (sortChange)=\"onHeadClick($event, column)\"\n      [filterable]=\"canFilterable(column)\"\n      [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n      [filterList]=\"column.filterList\"\n      [column]=\"column\"\n      [filterMultiple]=\"column.filterMultiple\"\n      [filterBoxWidth]=\"column.filterBoxWidth\"\n      [filterBoxHeight]=\"column.filterBoxHeight\"\n      [filterIconActive]=\"column.filterIconActive\"\n      [beforeFilter]=\"column.beforeFilter\"\n      [customFilterTemplate]=\"column.customFilterTemplate\"\n      [extraFilterTemplate]=\"column.extraFilterTemplate\"\n      [searchFn]=\"column.searchFn\"\n      (filterChange)=\"column.emitFilterData($event)\"\n      (filterToggle)=\"column.emitFilterToggle($event)\"\n      [fixedLeft]=\"column.fixedLeft\"\n      [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n      [fixedRight]=\"column.fixedRight\"\n      [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n      [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n      (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n      (tapEvent)=\"onTap($event)\"\n      [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n      [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n      [tableViewRefElement]=\"tableViewRefElement\"\n      [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n      [childrenTableOpen]=\"childrenTableOpen\"\n      [ngClass]=\"{\n        sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n        'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n      }\"\n      [resizeEnabled]=\"resizeable\"\n      (resizeEndEvent)=\"onResize($event, column)\"\n      (resizeStartEvent)=\"onBeginResize($event)\"\n      (resizingEvent)=\"onResizing($event, column)\"\n    >\n      <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n      <ng-container *ngIf=\"column.headCellTmpl?.template\">\n        <ng-template\n          [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n          [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n        ></ng-template>\n      </ng-container>\n    </th>\n  </tr>\n</ng-template>\n<!--end:tempate-->\n\n<ng-template let-head=\"\" let-rows=\"rows\" #AdvancedHeadTmpl>\n  <tr *ngFor=\"let rowContex of rows; let rowIndex = index\">\n    <th\n      *ngIf=\"showExpandToggle && rowIndex === 0\"\n      class=\"devui-detail-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"0\"\n    ></th>\n    <th\n      *ngIf=\"checkable && rowIndex === 0\"\n      class=\"devui-checkable-cell\"\n      [attr.rowspan]=\"rows?.length || 1\"\n      [ngClass]=\"{ 'devui-sticky-left-cell': columns[0]?.fixedLeft }\"\n      [style.left]=\"showExpandToggle && columns[0]?.fixedLeft ? '16px' : '0'\"\n    >\n      <d-checkbox\n        *ngIf=\"headerCheckVisible\"\n        class=\"check-box-all\"\n        [name]=\"'checkAll'\"\n        [disabled]=\"headerCheckDisabled\"\n        (change)=\"onCheckAllChange()\"\n        [(ngModel)]=\"pageAllChecked\"\n        [halfchecked]=\"halfChecked\"\n      >\n      </d-checkbox>\n      <div *ngIf=\"checkOptions && checkOptions.length > 0\" dDropDown appendToBody [trigger]=\"'hover'\" class=\"select-options\">\n        <div dDropDownToggle>\n          <svg\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            height=\"16px\"\n            version=\"1.1\"\n            viewBox=\"0 0 16 16\"\n            width=\"16px\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <g fill=\"none\" fill-rule=\"evenodd\" id=\"chevron_down\" stroke=\"none\" stroke-width=\"1\">\n              <polygon points=\"4.5 5 8 8.76923077 11.5 5 13 6.61538462 8 12 3 6.61538462\"></polygon>\n            </g>\n          </svg>\n        </div>\n        <ul dDropDownMenu class=\"devui-dropdown-menu\" role=\"menu\">\n          <li *ngFor=\"let option of checkOptions\" role=\"menuitem\" (click)=\"onOptionSelect(option)\">\n            <a class=\"devui-dropdown-item\">{{ option.label }}</a>\n          </li>\n        </ul>\n      </div>\n    </th>\n    <ng-container *ngFor=\"let column of columns; trackBy: trackByFn; let colIndex = index; let last = last\">\n      <th\n        dHeadCell\n        *ngIf=\"column.advancedHeader && column.advancedHeader[rowIndex]?.rowspan && column.advancedHeader[rowIndex]?.colspan\"\n        [attr.rowspan]=\"column.advancedHeader[rowIndex]?.rowspan\"\n        [attr.colspan]=\"column.advancedHeader[rowIndex]?.colspan\"\n        [style.textAlign]=\"\n          rowIndex !== column.advancedHeader.length - 1 &&\n          (column.advancedHeader[rowIndex]?.rowspan > 0 || column.advancedHeader[rowIndex]?.colspan > 0)\n            ? 'center'\n            : ''\n        \"\n        [minWidth]=\"column.minWidth\"\n        [attr.field]=\"column.field\"\n        [maxWidth]=\"column.maxWidth\"\n        [resizeEnabled]=\"resizeable && rowIndex === column.advancedHeader.length - 1 && !last\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field) && rowIndex === column.advancedHeader.length - 1\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column) && rowIndex === column.advancedHeader.length - 1\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n      >\n        <span *ngIf=\"rowIndex < rows.length - 1 || !column.headCellTmpl?.template\" [attr.title]=\"column.advancedHeader[rowIndex].header\">{{\n          column.advancedHeader[rowIndex].header\n        }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template && rowIndex === rows.length - 1\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{\n              column: column,\n              $implicit: head,\n              rowIndex: rowIndex,\n              colIndex: colIndex\n            }\"\n          >\n          </ng-template>\n        </ng-container>\n      </th>\n      <th\n        dHeadCell\n        *ngIf=\"!column.advancedHeader && rowIndex === 0\"\n        [minWidth]=\"column.minWidth\"\n        [maxWidth]=\"column.maxWidth\"\n        [attr.field]=\"column.field\"\n        [showSortIcon]=\"showSortIcon\"\n        [showFilterIcon]=\"showFilterIcon\"\n        [sortable]=\"getIfExistMultiSort(column.field)\"\n        [sortDirection]=\"getSortDirection(column.field)\"\n        (sortChange)=\"onHeadClick($event, column)\"\n        [filterable]=\"canFilterable(column)\"\n        [closeFilterWhenScroll]=\"column.closeFilterWhenScroll\"\n        [filterList]=\"column.filterList\"\n        [column]=\"column\"\n        [filterMultiple]=\"column.filterMultiple\"\n        [filterBoxWidth]=\"column.filterBoxWidth\"\n        [filterBoxHeight]=\"column.filterBoxHeight\"\n        [filterIconActive]=\"column.filterIconActive\"\n        [beforeFilter]=\"column.beforeFilter\"\n        [customFilterTemplate]=\"column.customFilterTemplate\"\n        [extraFilterTemplate]=\"column.extraFilterTemplate\"\n        [searchFn]=\"column.searchFn\"\n        (filterChange)=\"column.emitFilterData($event)\"\n        (filterToggle)=\"column.emitFilterToggle($event)\"\n        [fixedLeft]=\"column.fixedLeft\"\n        [isLastFixedLeft]=\"column.fixedLeft && !columns[colIndex + 1]?.fixedLeft\"\n        [fixedRight]=\"column.fixedRight\"\n        [isFirstFixedRight]=\"column.fixedRight && !columns[colIndex - 1]?.fixedRight\"\n        [nestedColumn]=\"column.extraOptions?.showHeadTableToggler\"\n        (toggleChildrenTableEvent)=\"toggleChildrenTable($event)\"\n        (tapEvent)=\"onTap($event)\"\n        [iconFoldTable]=\"column.extraOptions?.iconFoldTable\"\n        [iconUnFoldTable]=\"column.extraOptions?.iconUnFoldTable\"\n        [tableViewRefElement]=\"tableViewRefElement\"\n        [colDraggable]=\"colDraggable && colIndex > head?.colDropFreezeTo - 1\"\n        [childrenTableOpen]=\"childrenTableOpen\"\n        [ngClass]=\"{\n          sindu_handle: colDraggable && colIndex > head?.colDropFreezeTo - 1,\n          'drop-freeze': colDraggable && colIndex < head?.colDropFreezeTo\n        }\"\n        [resizeEnabled]=\"resizeable\"\n        (resizeEndEvent)=\"onResize($event, column)\"\n        (resizeStartEvent)=\"onBeginResize($event)\"\n        (resizingEvent)=\"onResizing($event, column)\"\n        [attr.rowspan]=\"rows?.length || 1\"\n      >\n        <span *ngIf=\"!column.headCellTmpl?.template\" [attr.title]=\"column.header\">{{ column.header }}</span>\n        <ng-container *ngIf=\"column.headCellTmpl?.template\">\n          <ng-template\n            [ngTemplateOutlet]=\"column.headCellTmpl?.template\"\n            [ngTemplateOutletContext]=\"{ column: column, $implicit: head }\"\n          ></ng-template>\n        </ng-container>\n      </th>\n    </ng-container>\n    <!-- <th width=\"0\"  *ngIf=\"resizeable\"></th> -->\n  </tr>\n</ng-template>\n", styles: [".select-options{cursor:pointer;vertical-align:middle}svg>g>polygon{fill:#71757f;fill:var(--devui-icon-text, #71757f)}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [DATA_TABLE]
                }] }, { type: i0.NgZone }, { type: i0.ElementRef }, { type: i0.KeyValueDiffers }, { type: i0.IterableDiffers }, { type: i0.ChangeDetectorRef }, { type: i1.I18nService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { checkable: [{
                type: Input
            }], headerCheckDisabled: [{
                type: Input
            }], headerCheckVisible: [{
                type: Input
            }], checkOptions: [{
                type: Input
            }], showExpandToggle: [{
                type: Input
            }], pageAllChecked: [{
                type: Input
            }], columns: [{
                type: Input
            }], multiSort: [{
                type: Input
            }], resizeable: [{
                type: Input
            }], maxHeight: [{
                type: Input
            }], showSortIcon: [{
                type: Input
            }], showFilterIcon: [{
                type: Input
            }], colDropFreezeTo: [{
                type: Input
            }], colDraggable: [{
                type: Input
            }], fixHeader: [{
                type: Input
            }], dataSource: [{
                type: Input
            }], tableViewRefElement: [{
                type: Input
            }], tableBodyEl: [{
                type: Input
            }], checkableColumn: [{
                type: Input
            }], showExpandToggleColumn: [{
                type: Input
            }], headClickSortEvent: [{
                type: Output
            }], resizeHandlerEvent: [{
                type: Output
            }], halfChecked: [{
                type: Input
            }], childrenTableOpen: [{
                type: Input
            }], beginResizeHandlerEvent: [{
                type: Output
            }], resizingHandlerEvent: [{
                type: Output
            }], dragTableEndEvent: [{
                type: Output
            }], thList: [{
                type: ViewChildren,
                args: [TableThComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS10YWJsZS1oZWFkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvZGF0YS10YWJsZS1oZWFkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvZGF0YS10YWJsZS1oZWFkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBQ1UsaUJBQWlCLEVBQUUsU0FBUyxFQUFXLFVBQVUsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFDN0YsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQWdDLE1BQU0sRUFBRSxTQUFTLEVBQWlCLFlBQVksRUFDdkgsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFpQixXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0QsT0FBTyxFQUFFLGFBQWEsRUFBbUMsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDaEUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0seUNBQXlDLENBQUM7Ozs7Ozs7O0FBUXZGLE1BQU0sT0FBTyxzQkFBc0I7SUFtR2pDLFlBQXVDLEVBQU8sRUFDMUIsSUFBWSxFQUNaLE9BQW1CLEVBQ25CLE9BQXdCLEVBQ3hCLGVBQWdDLEVBQ2hDLEdBQXNCLEVBQ3RCLElBQWlCLEVBQ0MsR0FBUTtRQVBQLE9BQUUsR0FBRixFQUFFLENBQUs7UUFDMUIsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNaLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDbkIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFDeEIsb0JBQWUsR0FBZixlQUFlLENBQWlCO1FBQ2hD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QU07Z0JBQ0csb0JBQW9CO3NCQUE3QixNQUFNO2dCQUNHLGlCQUFpQjtzQkFBMUIsTUFBTTtnQkFFeUIsTUFBTTtzQkFBckMsWUFBWTt1QkFBQyxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBEb0NoZWNrLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsXG4gIEl0ZXJhYmxlRGlmZmVycywgS2V5VmFsdWVEaWZmZXJzLCBOZ1pvbmUsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgUXVlcnlMaXN0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGRyZW5cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJMThuSW50ZXJmYWNlLCBJMThuU2VydmljZSB9IGZyb20gJ25nLWRldnVpL2kxOG4nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTb3J0RGlyZWN0aW9uLCBTb3J0RXZlbnRBcmcsIFRhYmxlQ2hlY2tPcHRpb25zIH0gZnJvbSAnLi9kYXRhLXRhYmxlLm1vZGVsJztcbmltcG9ydCB7IERBVEFfVEFCTEUgfSBmcm9tICcuL2RhdGEtdGFibGUudG9rZW4nO1xuaW1wb3J0IHsgVGFibGVUaENvbXBvbmVudCB9IGZyb20gJy4vdGFibGUvaGVhZC90aC90aC5jb21wb25lbnQnO1xuaW1wb3J0IHsgRGF0YVRhYmxlQ29sdW1uVG1wbENvbXBvbmVudCB9IGZyb20gJy4vdG1wbC9kYXRhLXRhYmxlLWNvbHVtbi10bXBsLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2QtZGF0YS10YWJsZS1oZWFkLFtkRGF0YVRhYmxlSGVhZF0nLFxuICB0ZW1wbGF0ZVVybDogJy4vZGF0YS10YWJsZS1oZWFkLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZGF0YS10YWJsZS1oZWFkLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBEYXRhVGFibGVIZWFkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgRG9DaGVjayB7XG4gIEBJbnB1dCgpIGNoZWNrYWJsZTogYm9vbGVhbjtcbiAgQElucHV0KCkgaGVhZGVyQ2hlY2tEaXNhYmxlZDogYm9vbGVhbjtcbiAgQElucHV0KCkgaGVhZGVyQ2hlY2tWaXNpYmxlOiBib29sZWFuO1xuICBASW5wdXQoKSBjaGVja09wdGlvbnM6IFRhYmxlQ2hlY2tPcHRpb25zW107XG4gIEBJbnB1dCgpIHNob3dFeHBhbmRUb2dnbGU6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHBhZ2VBbGxDaGVja2VkOiBib29sZWFuO1xuICBASW5wdXQoKSBjb2x1bW5zOiBEYXRhVGFibGVDb2x1bW5UbXBsQ29tcG9uZW50W107XG4gIEBJbnB1dCgpIG11bHRpU29ydDogU29ydEV2ZW50QXJnW10gPSBbXTtcbiAgQElucHV0KCkgcmVzaXplYWJsZTogYm9vbGVhbjtcbiAgQElucHV0KCkgbWF4SGVpZ2h0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNob3dTb3J0SWNvbjogYm9vbGVhbjtcbiAgQElucHV0KCkgc2hvd0ZpbHRlckljb246IGJvb2xlYW47XG4gIEBJbnB1dCgpIGNvbERyb3BGcmVlemVUbzogbnVtYmVyO1xuICBASW5wdXQoKSBjb2xEcmFnZ2FibGU6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGZpeEhlYWRlcjogYm9vbGVhbjtcbiAgQElucHV0KCkgZGF0YVNvdXJjZTogYW55W10gPSBbXTtcbiAgQElucHV0KCkgdGFibGVWaWV3UmVmRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQElucHV0KCkgdGFibGVCb2R5RWw6IEVsZW1lbnRSZWY7XG4gIEBJbnB1dCgpIGNoZWNrYWJsZUNvbHVtbjogRGF0YVRhYmxlQ29sdW1uVG1wbENvbXBvbmVudDtcbiAgQElucHV0KCkgc2hvd0V4cGFuZFRvZ2dsZUNvbHVtbjogRGF0YVRhYmxlQ29sdW1uVG1wbENvbXBvbmVudDtcbiAgQE91dHB1dCgpIGhlYWRDbGlja1NvcnRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ydEV2ZW50QXJnPigpO1xuICBAT3V0cHV0KCkgcmVzaXplSGFuZGxlckV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBJbnB1dCgpIGhhbGZDaGVja2VkOiBib29sZWFuO1xuICBASW5wdXQoKSBjaGlsZHJlblRhYmxlT3BlbjogYm9vbGVhbjtcbiAgQE91dHB1dCgpIGJlZ2luUmVzaXplSGFuZGxlckV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSByZXNpemluZ0hhbmRsZXJFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgZHJhZ1RhYmxlRW5kRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAVmlld0NoaWxkcmVuKFRhYmxlVGhDb21wb25lbnQpIHRoTGlzdDogUXVlcnlMaXN0PFRhYmxlVGhDb21wb25lbnQ+O1xuXG4gIG9iakRpZmZlcjoge307XG5cbiAgaXNEcmFnOiBib29sZWFuO1xuICBkcmFnQm94TGVmdDtcbiAgZHJhZ0NlbGxSZWY6IEhUTUxFbGVtZW50O1xuXG4gIHNlYXJjaFF1ZXJ5OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XG4gIG11bHRpU29ydEFycmF5OiBTb3J0RXZlbnRBcmdbXSA9IFtdO1xuICBzb3J0RmllbGQ6IHN0cmluZztcbiAgc29ydERpcmVjdGlvbjogJ0FTQycgfCAnREVTQycgfCAnJztcbiAgaXNEZXRhaWxPcGVuOiBib29sZWFuO1xuICByb3dJdGVtID0gdW5kZWZpbmVkO1xuICBtaXJyb3I7XG4gIGJpbmREcmFnO1xuICBsYXN0RHJvcFRhcmdldDtcbiAgb3JpZ2luQ2VsbEluZGV4O1xuICBsYXN0Q2VsbEluZGV4O1xuICBvcmlnaW5UYWJsZTtcbiAgZml4T3JpZ2luVGFibGU7XG4gIGZha2VUYWJsZTtcbiAgbWFpbkZha2VUYWJsZTtcbiAgY2xhc3NlcyA9IHtcbiAgICBvcmlnaW5UYWJsZTogJ3NpbmR1X29yaWdpbl90YWJsZScsXG4gICAgZHJhZ2dhYmxlVGFibGU6ICdzaW5kdV9kcmFnZ2VyJyxcbiAgICBkcmFnZ2luZzogJ3NpbmR1X2RyYWdnaW5nJyxcbiAgICBzdGF0aWM6ICdzaW5kdV9zdGF0aWMnLFxuICAgIGhhbmRsZTogJ3NpbmR1X2hhbmRsZScsXG4gIH07XG4gIGVsO1xuICBncmFiYmVkO1xuICBzb3VyY2U7XG4gIGl0ZW07XG4gIGluaXRpYWxTaWJsaW5nO1xuICBjdXJyZW50U2libGluZztcbiAgb2Zmc2V0WDtcbiAgb2Zmc2V0WTtcbiAgYm9keU92ZXJmbG93O1xuICBvbGRDb29yZCA9IDA7XG4gIG1pcnJvckNvbnRhaW5lcjtcbiAgLy8g55So5LqO5aSa6KGM5aSa5YiX5aS06YOoXG4gIHJvd0NvdW50O1xuICByb3dDb3VudEFycmF5O1xuICBmaXhGYWtlVGFibGVFbDtcbiAgZml4VGFibGVPZmZzZXRUb3A7XG4gIGNoaWxkVGFibGVzID0gW107XG4gIGRhdGFTb3VyY2VDaGFuZ2UgPSBmYWxzZTtcblxuICBzY3JvbGxWaWV3RWw7XG4gIHNjcm9sbFZpZXdSZWN0O1xuICBmaXhUYWJsZVNjcm9sbFZpZXdFbDtcbiAgYW5pbWF0aW9uUmVxdWVzdElkO1xuICBjb2xPZmZzZXQgPSAwO1xuICBzZWNvbmRIZWFkZXJPZmZzZXQgPSAwO1xuICBjZWxsTWFwT2Zmc2V0ID0gMDtcbiAgY2VsbE1hcCA9IHt9O1xuICBpdGVyYWJsZURpZmZlcjtcbiAgc2VhcmNoVGV4dCA9ICcnO1xuXG4gIGkxOG5Db21tb25UZXh0OiBJMThuSW50ZXJmYWNlWydjb21tb24nXTtcbiAgZmlsdGVySGFsZkNoZWNrZWQ6IGJvb2xlYW47XG4gIGZpbHRlckFsbENoZWNrZWQ6IGJvb2xlYW47XG4gIGZpbHRlckxpc3REaXNwbGF5ID0gW107XG4gIGlzRmlsdGVySGlkZGVuID0gZmFsc2U7XG4gIGNvbHVtbkZvckZpbHRlcjtcbiAgcHJpdmF0ZSBpMThuU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIGNoZWNrZWRMaXN0Rm9yRmlsdGVyID0gW107XG4gIGRvY3VtZW50OiBEb2N1bWVudDtcbiAgZG9jdW1lbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgY29uc3RydWN0b3IoQEluamVjdChEQVRBX1RBQkxFKSBwdWJsaWMgZHQ6IGFueSxcbiAgICAgICAgICAgICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXG4gICAgICAgICAgICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgcHJpdmF0ZSBkaWZmZXJzOiBLZXlWYWx1ZURpZmZlcnMsXG4gICAgICAgICAgICAgIHByaXZhdGUgaXRlcmFibGVEaWZmZXJzOiBJdGVyYWJsZURpZmZlcnMsXG4gICAgICAgICAgICAgIHByaXZhdGUgcmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgICAgcHJpdmF0ZSBpMThuOiBJMThuU2VydmljZSxcbiAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2M6IGFueSkge1xuICAgIHRoaXMuaTE4bkNvbW1vblRleHQgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5jb21tb247XG4gICAgdGhpcy5kb2N1bWVudCA9IHRoaXMuZG9jO1xuICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50ID0gdGhpcy5kb2MuZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuY29sRHJhZ2dhYmxlKSB7XG4gICAgICB0aGlzLml0ZXJhYmxlRGlmZmVyID0gdGhpcy5pdGVyYWJsZURpZmZlcnMuZmluZChbXSkuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5vYmpEaWZmZXIgPSB7fTtcbiAgICAgIHRoaXMuZGF0YVNvdXJjZS5mb3JFYWNoKChkYXRhLCBpbmRleCkgPT4ge1xuICAgICAgICB0aGlzLm9iakRpZmZlcltpbmRleF0gPSB0aGlzLmRpZmZlcnMuZmluZChkYXRhKS5jcmVhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gZGF0YS5jb21tb247XG4gICAgfSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKChjaGFuZ2VzWydjb2x1bW5zJ10gfHwgY2hhbmdlcy5tdWx0aVNvcnQpICYmIHRoaXMuY29sdW1ucykge1xuICAgICAgdGhpcy5tdWx0aVNvcnRBcnJheSA9IFtdO1xuICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgICAgaWYgKGNvbHVtbi5zb3J0YWJsZSkge1xuICAgICAgICAgIGNvbnN0IHNvcnRJbmRleCA9IHRoaXMubXVsdGlTb3J0LmZpbmRJbmRleChpdGVtID0+IGl0ZW1bJ2ZpZWxkJ10gPT09IGNvbHVtbi5maWVsZCk7XG4gICAgICAgICAgdGhpcy5tdWx0aVNvcnRBcnJheS5wdXNoKHtcbiAgICAgICAgICAgIGZpZWxkOiBjb2x1bW4uZmllbGQsXG4gICAgICAgICAgICBkaXJlY3Rpb246IHNvcnRJbmRleCAhPT0gLTEgPyB0aGlzLm11bHRpU29ydFtzb3J0SW5kZXhdLmRpcmVjdGlvbiA6IFNvcnREaXJlY3Rpb24uZGVmYXVsdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXNbJ2NvbHVtbnMnXSAmJiB0aGlzLmNvbHVtbnMpIHtcbiAgICAgIHRoaXMucm93Q291bnQgPSBNYXRoLm1heCguLi4gdGhpcy5jb2x1bW5zLm1hcChjb2x1bW4gPT4ge1xuICAgICAgICBpZiAoY29sdW1uLmFkdmFuY2VkSGVhZGVyKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbHVtbi5hZHZhbmNlZEhlYWRlci5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIGlmICh0aGlzLnJvd0NvdW50ID4gMCkge1xuICAgICAgICB0aGlzLnJvd0NvdW50QXJyYXkgPSBuZXcgQXJyYXkodGhpcy5yb3dDb3VudCk7XG4gICAgICAgIHRoaXMuaW5pdEFkdmFuY2VIZWFkZXIoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbERyYWdnYWJsZSkge1xuICAgICAgICB0aGlzLnJlcmVuZGVyVGFibGVzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzICYmIGNoYW5nZXMuZGF0YVNvdXJjZSkge1xuICAgICAgaWYgKHRoaXMuY29sRHJhZ2dhYmxlKSB7XG4gICAgICAgIHRoaXMucmVyZW5kZXJUYWJsZXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xEcmFnZ2FibGUgJiYgY2hhbmdlc1sndGFibGVCb2R5RWwnXSAmJiB0aGlzLnRhYmxlQm9keUVsKSB7XG4gICAgICBpZiAodGhpcy5maXhIZWFkZXIgJiYgdGhpcy50YWJsZUJvZHlFbCAmJiB0aGlzLmRhdGFTb3VyY2UubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuZml4T3JpZ2luVGFibGUgPSB0aGlzLnRhYmxlQm9keUVsLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyRml4RmFrZVRhYmxlRWwoKTtcbiAgICAgICAgdGhpcy5maXhGYWtlVGFibGVFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmZpeFRhYmxlU2Nyb2xsVmlld0VsID0gdGhpcy5maXhPcmlnaW5UYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIHRoaXMucmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5nRG9DaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuY29sRHJhZ2dhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGF0YVNvdXJjZS5mb3JFYWNoKChlbHQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBvYmpEaWZmZXIgPSB0aGlzLm9iakRpZmZlcltpbmRleF07XG4gICAgICBpZiAoIW9iakRpZmZlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBvYmpDaGFuZ2VzID0gb2JqRGlmZmVyLmRpZmYoZWx0KTtcbiAgICAgIGlmIChvYmpDaGFuZ2VzKSB7XG4gICAgICAgIG9iakNoYW5nZXMuZm9yRWFjaENoYW5nZWRJdGVtKChjaGFuZ2VJdGVtKSA9PiB7XG4gICAgICAgICAgaWYgKGNoYW5nZUl0ZW0ua2V5ID09PSAnJGlzQ2hpbGRUYWJsZU9wZW4nICYmIGVsdC5jaGlsZHJlbiAmJiBlbHQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnJlcmVuZGVyVGFibGVzKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNoYW5nZUl0ZW0ua2V5ID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICAgICB0aGlzLnJlcmVuZGVyVGFibGVzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLml0ZXJhYmxlRGlmZmVyLmRpZmYodGhpcy5jb2x1bW5zKTtcbiAgICBpZiAoY2hhbmdlcykge1xuICAgICAgdGhpcy5jcmVhdGVDZWxsTWFwKCk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLmNvbERyYWdnYWJsZSkge1xuICAgICAgLy8gc2V0IG1pcnJvciBjb250YWluZXIgdG8gdGFibGUtd3JhcCBlbGVtZW50XG4gICAgICB0aGlzLm1pcnJvckNvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgIHRoaXMuYm9keU92ZXJmbG93ID0gdGhpcy5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XG4gICAgICB0aGlzLmRldGVjdGVPcmlnaW5UYWJsZSgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IC8vIHdhaXQgZm9yIHRhYmxlIHJlbmRlciByZWFkeVxuICAgICAgICB0aGlzLnJlbmRlckZha2VUYWJsZSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgIH0pO1xuICAgICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZW5kZXJGYWtlVGFibGUpO1xuICAgICAgdGhpcy5jcmVhdGVDZWxsTWFwKCk7XG4gICAgICB0aGlzLnNjcm9sbFZpZXdFbCA9IHRoaXMub3JpZ2luVGFibGUucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgdGhpcy5zY3JvbGxWaWV3UmVjdCA9IHRoaXMuc2Nyb2xsVmlld0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ2VsbE1hcCgpIHtcbiAgICBsZXQgY2VsbEluZGV4ID0gMDtcbiAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sdW1uLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKCFjb2x1bW4uYWR2YW5jZWRIZWFkZXIpIHtcbiAgICAgICAgdGhpcy5jZWxsTWFwW2NlbGxJbmRleF0gPSB7IG5hbWU6IGNvbHVtbi5maWVsZCwgc29ydEtleTogW2luZGV4XSB9O1xuICAgICAgICBjZWxsSW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb2x1bW4uYWR2YW5jZWRIZWFkZXJbMF0uY29sc3Bhbikge1xuICAgICAgICAgIHRoaXMuY2VsbE1hcFtjZWxsSW5kZXhdID0ge1xuICAgICAgICAgICAgbmFtZTogY29sdW1uLmZpZWxkLCBpc0FkdmFuY2VIZWFkZXI6IHRydWUsXG4gICAgICAgICAgICBzb3J0S2V5OiBbaW5kZXhdLCBoZWFkZXJMZW5ndGg6IGNvbHVtbi5hZHZhbmNlZEhlYWRlclswXS5jb2xzcGFuXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjZWxsSW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNlbGxNYXApLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmNlbGxNYXBba2V5XTtcbiAgICAgICAgICAgIGlmIChpdGVtLmlzQWR2YW5jZUhlYWRlciAmJiBpdGVtLnNvcnRLZXkubGVuZ3RoIDwgaXRlbS5oZWFkZXJMZW5ndGgpIHtcbiAgICAgICAgICAgICAgaXRlbS5zb3J0S2V5LnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5jb2xEcmFnZ2FibGUpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVuZGVyRmFrZVRhYmxlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaTE4blN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5pMThuU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICB9XG5cbiAgb25IZWFkQ2xpY2soZXZlbnQ6IFNvcnRFdmVudEFyZywgY29sdW1uOiBEYXRhVGFibGVDb2x1bW5UbXBsQ29tcG9uZW50KSB7XG4gICAgZXZlbnQuZmllbGQgPSBjb2x1bW4uZmllbGQ7XG4gICAgZGVsZXRlIGV2ZW50LnRoO1xuICAgIHRoaXMuaGVhZENsaWNrU29ydEV2ZW50LmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgb25DaGVja0FsbENoYW5nZSgpIHtcbiAgICB0aGlzLmR0Lm9uQ2hlY2tBbGxDaGFuZ2UodGhpcy5wYWdlQWxsQ2hlY2tlZCk7XG4gIH1cblxuICBvblNlYXJjaFF1ZXJ5Q2hhbmdlKCkge1xuICAgIHRoaXMuZHQub25TZWFyY2hRdWVyeUNoYW5nZSh0aGlzLnNlYXJjaFF1ZXJ5KTtcbiAgfVxuXG4gIGNhbkZpbHRlcmFibGUoY29sdW1uOiBEYXRhVGFibGVDb2x1bW5UbXBsQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNvbHVtbi5maWVsZCAmJiBjb2x1bW4uZmllbGQgIT09ICckaW5kZXgnICYmIGNvbHVtbi5maWx0ZXJhYmxlO1xuICB9XG5cbiAgZ2V0SWZFeGlzdE11bHRpU29ydChmaWVsZCk6IGFueSB7XG4gICAgY29uc3QgY29sdW1uID0gdGhpcy5jb2x1bW5zLmZpbmQoaXRlbSA9PiBpdGVtWydmaWVsZCddID09PSBmaWVsZCk7XG4gICAgcmV0dXJuICEhY29sdW1uLnNvcnRhYmxlO1xuICB9XG5cbiAgZ2V0U29ydERpcmVjdGlvbihmaWVsZCk6IGFueSB7XG4gICAgaWYgKCF0aGlzLm11bHRpU29ydEFycmF5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGZpbHRlckZpZWxkID0gdGhpcy5tdWx0aVNvcnRBcnJheS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICByZXR1cm4gaXRlbVsnZmllbGQnXSA9PT0gZmllbGQ7XG4gICAgfSk7XG4gICAgaWYgKGZpbHRlckZpZWxkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgcmV0dXJuIGZpbHRlckZpZWxkWzBdWydkaXJlY3Rpb24nXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBvblJlc2l6ZSgkZXZlbnQsIGNvbHVtbikge1xuICAgIHRoaXMucmVzaXplSGFuZGxlckV2ZW50LmVtaXQoe1xuICAgICAgLi4uJGV2ZW50LFxuICAgICAgZmllbGQ6IGNvbHVtbi5maWVsZFxuICAgIH0pO1xuICB9XG5cbiAgb25CZWdpblJlc2l6ZSgkZXZlbnQpIHtcbiAgICBjb25zdCB0aFJlbmRlcldpZHRoTGlzdCA9IFtdO1xuICAgIHRoaXMudGhMaXN0LmZvckVhY2godGggPT4ge1xuICAgICAgdGhSZW5kZXJXaWR0aExpc3QucHVzaCh7IGZpZWxkOiB0aC5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZmllbGQnKSwgd2lkdGg6IHRoLmVsZW1lbnQuY2xpZW50V2lkdGggfSk7XG4gICAgfSk7XG4gICAgdGhpcy5iZWdpblJlc2l6ZUhhbmRsZXJFdmVudC5lbWl0KHsgZXZlbnQ6ICRldmVudCwgdGhSZW5kZXJXaWR0aExpc3QgfSk7XG4gIH1cblxuICBvblJlc2l6aW5nKCRldmVudCwgY29sdW1uKSB7XG4gICAgdGhpcy5yZXNpemluZ0hhbmRsZXJFdmVudC5lbWl0KHtcbiAgICAgIC4uLiRldmVudCxcbiAgICAgIGZpZWxkOiBjb2x1bW4uZmllbGRcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOWIneWni+WMluWkmuihjOihqOWktO+8jOS4uuS6huWFvOWuuXJlc2l6ZWFibGXlr7nooajlpLTkupLnm7jlvbHlk43mlbDmja7lgZrkuoborrDlvZVcbiAgaW5pdEFkdmFuY2VIZWFkZXIoKSB7XG4gICAgaWYgKHRoaXMucmVzaXplYWJsZSkge1xuICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGNvbHVtbiwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGNvbHVtblsnYWR2YW5jZWRIZWFkZXInXSkge1xuICAgICAgICAgIGNvbHVtblsnYWR2YW5jZWRIZWFkZXInXS5mb3JFYWNoKChpdGVtLCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgaXRlbVsnJHJvd0luZGV4J10gPSByb3dJbmRleDtcbiAgICAgICAgICAgIGl0ZW1bJyRjb2xJbmRleCddID0gY29sSW5kZXg7XG4gICAgICAgICAgICBpdGVtWyckY29scyddID0gbmV3IEFycmF5KGl0ZW0uY29sc3BhbikuZmlsbCgxKS5tYXAoKHYsIGkpID0+IGNvbEluZGV4ICsgaSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29sdW1uWyckY29sSW5kZXgnXSA9IGNvbEluZGV4O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgdHJhY2tCeUZuKGluZGV4LCBpdGVtKSB7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgb25UYXAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLm9yaWdpbkNlbGxJbmRleCA9IHRoaXMuZmluZENlbGxJbmRleChlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgLy8gZml4IGNocm9tZSBidWcsIG1vdXNlZG93bueahOaXtuWAmeS8mumUmeivr+eahOinpuWPkW1vdXNlbW92ZVxuICAgICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZW1vdmUpO1xuICAgICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZW1vdmUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVNb3VzZW1vdmUgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlbW92ZSk7XG4gICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5ncmFiKTtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5yZWxlYXNlKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgLy8gZml4IGNocm9tZSBidWcsIG1vdXNlZG93bueahOaXtuWAmeS8mumUmeivr+eahOinpuWPkW1vdXNlbW92ZVxuICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlZG93bigpO1xuICAgIH0pO1xuICB9O1xuXG4gIGdyYWIgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmdyYWIpO1xuICAgIHRoaXMuYWRkQ2xhc3ModGhpcy5kb2N1bWVudEVsZW1lbnQsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jYW5TdGFydChlLnRhcmdldCk7XG4gICAgdGhpcy5ncmFiYmVkID0gY29udGV4dDtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLnN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQpO1xuICB9O1xuXG4gIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMuZ3JhYmJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLnN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQpO1xuICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZHJhZyk7XG4gICAgdGhpcy5zb3VyY2UgPSB0aGlzLmdyYWJiZWQuc291cmNlO1xuICAgIHRoaXMuaXRlbSA9IHRoaXMuZ3JhYmJlZC5pdGVtO1xuICAgIHRoaXMuaW5pdGlhbFNpYmxpbmcgPSB0aGlzLmN1cnJlbnRTaWJsaW5nID0gdGhpcy5uZXh0RWwodGhpcy5ncmFiYmVkLml0ZW0pO1xuICAgIHRoaXMuYWRkQ2xhc3ModGhpcy5pdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHRoaXMuZWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICB0aGlzLmVsLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB0aGlzLm9yaWdpblRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWYgKHRoaXMuZml4SGVhZGVyKSB7XG4gICAgICB0aGlzLmZpeFRhYmxlT2Zmc2V0VG9wID0gdGhpcy5maXhPcmlnaW5UYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2Nyb2xsVG9wO1xuICAgICAgdGhpcy5maXhGYWtlVGFibGVFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgdGhpcy5maXhPcmlnaW5UYWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy5maXhGYWtlVGFibGVFbC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuICAgIHRoaXMub2Zmc2V0WCA9IDE1O1xuICAgIHRoaXMub2Zmc2V0WSA9IDE1O1xuICAgIHRoaXMucmVuZGVyTWlycm9ySW1hZ2UodGhpcy5pdGVtKTtcbiAgfTtcblxuICByZWxlYXNlID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5ncmFiYmVkID0gbnVsbDtcbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmRyYWcpO1xuICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLnJlbGVhc2UpO1xuICAgIGNvbnN0IHRvID0gQXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKS5pbmRleE9mKHRoaXMuaXRlbSk7XG4gICAgdGhpcy5yZW1vdmVNaXJyb3JJbWFnZSgpO1xuICAgIHRoaXMuZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLm9yaWdpblRhYmxlLnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xuICAgIGlmICh0aGlzLmZpeEhlYWRlcikge1xuICAgICAgdGhpcy5maXhGYWtlVGFibGVFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy5maXhPcmlnaW5UYWJsZS5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlJztcbiAgICAgIHRoaXMuZml4RmFrZVRhYmxlRWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIH1cbiAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IHRoaXMuYm9keU92ZXJmbG93O1xuICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLnJlbGVhc2UpO1xuICAgIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgIHRoaXMucm1DbGFzcyh0aGlzLml0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgfVxuICAgIHRoaXMuc29ydENvbHVtbih0aGlzLm9yaWdpbkNlbGxJbmRleC54LCB0byk7XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25SZXF1ZXN0SWQpO1xuICB9O1xuXG4gIHNvcnRDb2x1bW4gPSAoZnJvbSwgdG8pID0+IHtcbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgaWYgKHRoaXMuY2hlY2thYmxlKSB7XG4gICAgICBvZmZzZXQrKztcbiAgICB9XG4gICAgaWYgKHRoaXMuc2hvd0V4cGFuZFRvZ2dsZSkge1xuICAgICAgb2Zmc2V0Kys7XG4gICAgfVxuICAgIGZyb20gPSBmcm9tIC0gb2Zmc2V0O1xuICAgIHRvID0gdG8gLSBvZmZzZXQ7XG4gICAgbGV0IHRvQ2VsbCA9IHRoaXMuY2VsbE1hcFt0b10uc29ydEtleVswXTtcbiAgICBsZXQgZnJvbUNlbGwgPSB0aGlzLmNlbGxNYXBbZnJvbV0uc29ydEtleVswXTtcbiAgICBsZXQgbG9vcENvdW50ID0gMTtcbiAgICBpZiAodGhpcy5jZWxsTWFwW2Zyb21dLmlzQWR2YW5jZUhlYWRlcikge1xuICAgICAgbG9vcENvdW50ID0gdGhpcy5jZWxsTWFwW2Zyb21dLmhlYWRlckxlbmd0aDtcbiAgICAgIGlmIChmcm9tID4gdG8pIHtcbiAgICAgICAgZnJvbUNlbGwgPSB0aGlzLmNlbGxNYXBbZnJvbV0uc29ydEtleVt0aGlzLmNlbGxNYXBbZnJvbV0uaGVhZGVyTGVuZ3RoIC0gMV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmNlbGxNYXBbdG9dLmlzQWR2YW5jZUhlYWRlciAmJiBmcm9tIDwgdG8pIHtcbiAgICAgIHRvQ2VsbCA9IHRoaXMuY2VsbE1hcFt0b10uc29ydEtleVt0aGlzLmNlbGxNYXBbdG9dLmhlYWRlckxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvb3BDb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLmRyYWdUYWJsZUVuZEV2ZW50LmVtaXQoeyBmcm9tOiBmcm9tQ2VsbCwgdG86IHRvQ2VsbCB9KTtcbiAgICB9XG4gIH07XG5cbiAgc29ydCA9ICh7IGxpc3QsIGZyb20sIHRvIH0pID0+IHtcbiAgICBpZiAoIWxpc3RbZnJvbV0gJiYgIWxpc3RbdG9dKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmcm9tIDwgdG8pIHtcbiAgICAgIHRoaXMuYXBwZW5kU2libGluZyh7IHRhcmdldDogbGlzdFtmcm9tXSwgb3JpZ2luOiBsaXN0W3RvXSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnNlcnRCZWZvcmVTaWJsaW5nKHsgdGFyZ2V0OiBsaXN0W2Zyb21dLCBvcmlnaW46IGxpc3RbdG9dIH0pO1xuICAgIH1cbiAgfTtcblxuICBhcHBlbmRTaWJsaW5nKHsgdGFyZ2V0LCBvcmlnaW4gfSkge1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YXJnZXQsIG9yaWdpbiA/IG9yaWdpbi5uZXh0RWxlbWVudFNpYmxpbmcgOiBudWxsKTtcbiAgfVxuXG4gIGdldE9mZnNldChlbCkge1xuICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgdGhpcy5nZXRTY3JvbGwoJ3Njcm9sbExlZnQnLCAncGFnZVhPZmZzZXQnKSxcbiAgICAgIHRvcDogcmVjdC50b3AgKyB0aGlzLmdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgICB9O1xuICB9XG4gIGdldFNjcm9sbChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygd2luZG93W29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHdpbmRvd1tvZmZzZXRQcm9wXTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5ib2R5W3Njcm9sbFByb3BdO1xuICB9XG5cbiAgZGlzcGF0Y2hNb3VzZWRvd24oKSB7XG4gICAgY29uc3QgeyBlbCwgb3JpZ2luQ2VsbEluZGV4IH0gPSB0aGlzO1xuICAgIGVsLmNoaWxkcmVuW29yaWdpbkNlbGxJbmRleC54XS5kaXNwYXRjaEV2ZW50KHRoaXMuZ2V0VG91Y2h5RXZlbnQoKSk7XG4gIH1cblxuICBnZXRUb3VjaHlFdmVudCgpIHtcbiAgICBsZXQgZXZlbnQ7XG4gICAgLy8gVGhpcyBpcyB0cnVlIG9ubHkgZm9yIElFLGZpcmVmb3hcbiAgICBpZiAodGhpcy5kb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgICAgLy8gVG8gY3JlYXRlIGEgbW91c2UgZXZlbnQgLCBmaXJzdCB3ZSBuZWVkIHRvIGNyZWF0ZSBhbiBldmVudCBhbmQgdGhlbiBpbml0aWFsaXplIGl0LlxuICAgICAgZXZlbnQgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XG4gICAgICBldmVudC5pbml0TW91c2VFdmVudCgnbW91c2Vkb3duJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ21vdXNlZG93bicsIHtcbiAgICAgICAgJ3ZpZXcnOiB3aW5kb3csXG4gICAgICAgICdidWJibGVzJzogdHJ1ZSxcbiAgICAgICAgJ2NhbmNlbGFibGUnOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgcmVtb3ZlTWlycm9ySW1hZ2UoKSB7XG4gICAgaWYgKHRoaXMubWlycm9yKSB7XG4gICAgICB0aGlzLmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmdyYWIpO1xuICAgICAgdGhpcy5nZXRQYXJlbnQodGhpcy5taXJyb3IpLnJlbW92ZUNoaWxkKHRoaXMubWlycm9yKTtcbiAgICAgIHRoaXMubWlycm9yID0gbnVsbDtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnJtQ2xhc3ModGhpcy5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICAgICAgdGhpcy5ybUNsYXNzKHRoaXMuZG9jdW1lbnRFbGVtZW50LCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjYW5TdGFydChpdGVtKSB7XG4gICAgd2hpbGUgKHRoaXMuZ2V0UGFyZW50KGl0ZW0pICYmIHRoaXMuaXNDb250YWluZXIodGhpcy5nZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaXRlbSA9IHRoaXMuZ2V0UGFyZW50KGl0ZW0pOyAvLyBkcmFnIHRhcmdldCBzaG91bGQgYmUgYSB0b3AgZWxlbWVudFxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc291cmNlID0gdGhpcy5nZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICBzb3VyY2U6IHNvdXJjZVxuICAgIH07XG4gIH1cblxuICBkZXRlY3RlT3JpZ2luVGFibGUoKSB7XG4gICAgbGV0IHRhcmdldCA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgIHdoaWxlICh0YXJnZXQubm9kZU5hbWUgIT09ICdUQUJMRScpIHtcbiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICB0aGlzLm9yaWdpblRhYmxlID0gdGFyZ2V0O1xuICAgIGlmICh0aGlzLmZpeEhlYWRlciAmJiB0aGlzLnRhYmxlQm9keUVsKSB7XG4gICAgICB0aGlzLmZpeE9yaWdpblRhYmxlID0gdGhpcy50YWJsZUJvZHlFbC5uYXRpdmVFbGVtZW50O1xuICAgICAgdGhpcy5kZXRlY3RlQ2hpbGRUYWJsZXModGhpcy5maXhPcmlnaW5UYWJsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGV0ZWN0ZUNoaWxkVGFibGVzKHRoaXMub3JpZ2luVGFibGUpO1xuICAgIH1cbiAgfVxuXG4gIHJlcmVuZGVyVGFibGVzID0gKCkgPT4ge1xuICAgIHRoaXMuZGF0YVNvdXJjZUNoYW5nZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuZml4SGVhZGVyICYmIHRoaXMudGFibGVCb2R5RWwgJiYgdGhpcy5kYXRhU291cmNlLmxlbmd0aCkge1xuICAgICAgdGhpcy5maXhPcmlnaW5UYWJsZSA9IHRoaXMudGFibGVCb2R5RWwubmF0aXZlRWxlbWVudDtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnJlbmRlckZpeEZha2VUYWJsZUVsKCk7XG4gICAgICAgIHRoaXMuZml4RmFrZVRhYmxlRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRldGVjdGVPcmlnaW5UYWJsZSgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyRmFrZVRhYmxlKCk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXJGYWtlVGFibGUoKSB7XG4gICAgaWYgKHRoaXMuZWwgJiYgIXRoaXMuZGF0YVNvdXJjZUNoYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNoaWxkVGFibGVzID0gW107XG4gICAgdGhpcy5kZXRlY3RlQ2hpbGRUYWJsZXModGhpcy5vcmlnaW5UYWJsZSk7XG4gICAgY29uc3QgZmFrZVRhYmxlID0gdGhpcy5idWlsZEZha2VUYWJsZSh0aGlzLm9yaWdpblRhYmxlKTtcbiAgICB0aGlzLmZha2VUYWJsZSA9IGZha2VUYWJsZTtcbiAgICBjb25zdCBlbCA9IGZha2VUYWJsZS5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgICBjb25zdCBsaSA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIGxpLmFwcGVuZENoaWxkKGN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByZXZpb3VzLmFwcGVuZENoaWxkKGxpKSAmJiBwcmV2aW91cztcbiAgICB9LCB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLnJlbmRlckVsKGVsLCB0aGlzLm9yaWdpblRhYmxlLCBmYWtlVGFibGUpO1xuICB9XG5cbiAgcmVuZGVyRml4RmFrZVRhYmxlRWwoKSB7XG4gICAgaWYgKHRoaXMuZml4RmFrZVRhYmxlRWwgJiYgIXRoaXMuZGF0YVNvdXJjZUNoYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmYWtlVGFibGUgPSB0aGlzLmJ1aWxkRmFrZVRhYmxlKHRoaXMuZml4T3JpZ2luVGFibGUpO1xuICAgIHRoaXMubWFpbkZha2VUYWJsZSA9IGZha2VUYWJsZTtcbiAgICBjb25zdCBlbCA9IGZha2VUYWJsZS5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgICBjb25zdCBsaSA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIGxpLmFwcGVuZENoaWxkKGN1cnJlbnQpO1xuICAgICAgcmV0dXJuIHByZXZpb3VzLmFwcGVuZENoaWxkKGxpKSAmJiBwcmV2aW91cztcbiAgICB9LCB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuICAgIHRoaXMuZml4RmFrZVRhYmxlRWwgPSBlbDtcbiAgICB0aGlzLnJlbmRlckVsKGVsLCB0aGlzLmZpeE9yaWdpblRhYmxlLCB0aGlzLm1haW5GYWtlVGFibGUpO1xuICB9XG4gIGJ1aWxkRmFrZVRhYmxlKHRhYmxlKSB7XG4gICAgdGhpcy5jb2xPZmZzZXQgPSAwO1xuICAgIHRoaXMuc2Vjb25kSGVhZGVyT2Zmc2V0ID0gMDtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0YWJsZS5yb3dzWzBdLmNoaWxkcmVuKS5tYXAoKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2x1bW5Bc1RhYmxlQnlJbmRleCh0YWJsZSwgaW5kZXgsICg8YW55PmNlbGwpLmNvbFNwYW4sICg8YW55PmNlbGwpLnJvd1NwYW4pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyRWwoZWwsIG9yaWdpbkVsLCBmYWtlVGFibGVzKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNpemVDb2x1bW5GYWtlKGZha2VUYWJsZXMsIG9yaWdpbkVsKTtcbiAgICB0aGlzLmNzcyhlbCwge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgfSk7XG4gICAgaWYgKG9yaWdpbkVsLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0ubm9kZU5hbWUgPT09ICdVTCcpIHtcbiAgICAgIG9yaWdpbkVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob3JpZ2luRWwucGFyZW50Tm9kZS5jaGlsZHJlblswXSk7XG4gICAgICB0aGlzLmluc2VydEJlZm9yZVNpYmxpbmcoeyB0YXJnZXQ6IGVsLCBvcmlnaW46IG9yaWdpbkVsIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluc2VydEJlZm9yZVNpYmxpbmcoeyB0YXJnZXQ6IGVsLCBvcmlnaW46IG9yaWdpbkVsIH0pO1xuICAgIH1cblxuICAgIC8vIHJlbmRlciBldmVyeSB3cmFwcGVyIG9mIHRhYmxlKGVsZW1lbnQgbGkpXG4gICAgY29uc3Qgc3BhY2luZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9yaWdpbkVsKS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItc3BhY2luZycpLnNwbGl0KCcgJylbMF07XG4gICAgY29uc3QgYXR0ciA9ICdtYXJnaW4tcmlnaHQnO1xuICAgIGNvbnN0IGxlbmd0aCA9IGVsLmNoaWxkcmVuLmxlbmd0aDtcbiAgICBBcnJheS5mcm9tKGVsLmNoaWxkcmVuKS5mb3JFYWNoKChsaSwgZGV4KSA9PiB7XG4gICAgICBpZiAoc3BhY2luZyAmJiBkZXggPCAobGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgKDxhbnk+bGkpLnN0eWxlW2F0dHJdID0gYC0ke3NwYWNpbmd9YDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmFkZENsYXNzKGVsLnBhcmVudEVsZW1lbnQsIHRoaXMuY2xhc3Nlcy5kcmFnZ2luZyk7XG4gICAgdGhpcy5hZGRDbGFzcyhlbCwgdGhpcy5jbGFzc2VzLmRyYWdnYWJsZVRhYmxlKTtcbiAgICB0aGlzLmFkZENsYXNzKGVsLCAnc2luZHVfY29sdW1uJyk7XG4gIH1cblxuICBzaXplQ29sdW1uRmFrZShmYWtlVGFibGVzLCBvcmlnaW5FbCkge1xuICAgIC8vIGNhbGN1bGF0ZSB3aWR0aCBvZiBldmVyeSBjb2x1bW5cbiAgICBBcnJheS5mcm9tKG9yaWdpbkVsLnJvd3NbMF0uY2hpbGRyZW4pLmZvckVhY2goXG4gICAgICAoY2VsbCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCFmYWtlVGFibGVzW2luZGV4XSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3ID0gKDxhbnk+Y2VsbCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIGNvbnN0IHQgPSBmYWtlVGFibGVzW2luZGV4XTtcbiAgICAgICAgdGhpcy5jc3ModCwgeyB3aWR0aDogYCR7d31weGAgfSk7XG4gICAgICAgIHRoaXMuY3NzKHQucm93c1swXS5jaGlsZHJlblswXSwgeyB3aWR0aDogYCR7d31weGAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGNzcyhlbCwgY3NzTGlzdCkge1xuICAgIE9iamVjdC5rZXlzKGNzc0xpc3QpLmZvckVhY2goKGspID0+IHtcbiAgICAgIGVsLnN0eWxlW2tdID0gY3NzTGlzdFtrXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICBpbnNlcnRCZWZvcmVTaWJsaW5nKHsgdGFyZ2V0LCBvcmlnaW4gfSkge1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG9yaWdpbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YXJnZXQsIG9yaWdpbik7XG4gIH1cblxuICBmaW5kQ2VsbEluZGV4KGUpIHtcbiAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgd2hpbGUgKHRhcmdldC5ub2RlTmFtZSAhPT0gJ1RIJykge1xuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQgfHwgdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiB7IHg6IHRhcmdldC5jZWxsSW5kZXgsIHk6IHRhcmdldC5wYXJlbnRFbGVtZW50LnJvd0luZGV4IH07XG4gIH1cblxuICByZW5kZXJNaXJyb3JJbWFnZSh0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1pcnJvciA9IHRhcmdldC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgY29uc3QgZ2V0Rml4VGFibGVUb3RhbEhlaWdodCA9ICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmZpeE9yaWdpblRhYmxlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICB9O1xuICAgIGNvbnN0IGdldFRhYmxlVG90YWxIZWlnaHQgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5vcmlnaW5UYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgfTtcbiAgICAvLyDlm7rlrprooajlpLTooajmoLzml7bvvIzlr7nmi5bliqjlhoXlrrnov5vooYzmiKrlj5ZcbiAgICBpZiAodGhpcy5maXhIZWFkZXIpIHtcbiAgICAgIGNvbnN0IHRvID0gQXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKS5pbmRleE9mKHRhcmdldCk7XG4gICAgICBjb25zdCBmaXhUYXJnZXQgPSB0aGlzLmZpeEZha2VUYWJsZUVsLmNoaWxkcmVuW3RvXS5jaGlsZHJlblswXS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBjb25zdCBmaXhUYXJnZXRDb250YWluZXIgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3QgbWlycm9ySGVpZ2h0ID0gTWF0aC5taW4ocGFyc2VJbnQodGhpcy5tYXhIZWlnaHQsIDEwKSwgZ2V0Rml4VGFibGVUb3RhbEhlaWdodCgpKTtcbiAgICAgIGZpeFRhcmdldENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtaXJyb3JIZWlnaHQgKyAncHgnO1xuICAgICAgZml4VGFyZ2V0Q29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICBmaXhUYXJnZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZml4VGFyZ2V0KTtcbiAgICAgIGZpeFRhcmdldC5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm1heEhlaWdodDtcbiAgICAgIGZpeFRhcmdldC5zdHlsZS50b3AgPSAnLScgKyB0aGlzLmZpeFRhYmxlT2Zmc2V0VG9wICsgJ3B4JztcbiAgICAgIHRoaXMubWlycm9yLmFwcGVuZENoaWxkKGZpeFRhcmdldENvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLy8g6K6+572u5pyA5aSn6auY5bqm77yM5L2G5LiN5piv5Zu65a6a6KGo5aS055qE6KGo5qC8XG4gICAgaWYgKCF0aGlzLmZpeEhlYWRlciAmJiB0aGlzLm1heEhlaWdodCkge1xuICAgICAgY29uc3QgbWlycm9ySGVpZ2h0ID0gTWF0aC5taW4ocGFyc2VJbnQodGhpcy5tYXhIZWlnaHQsIDEwKSwgZ2V0VGFibGVUb3RhbEhlaWdodCgpKTtcbiAgICAgIHRoaXMubWlycm9yLnN0eWxlLmhlaWdodCA9IG1pcnJvckhlaWdodCArICdweCc7XG4gICAgICB0aGlzLm1pcnJvci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIH1cbiAgICB0aGlzLm1pcnJvci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgY29uc3QgdGhOb2RlID0gdGhpcy5taXJyb3IucXVlcnlTZWxlY3RvcigndGgnKTtcbiAgICB0aGlzLmFkZENsYXNzKHRoTm9kZSwgJ2hvdmVyJyk7XG4gICAgdGhpcy5ybUNsYXNzKHRoaXMubWlycm9yLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHRoaXMuYWRkQ2xhc3ModGhpcy5taXJyb3IsICdndS1taXJyb3InKTtcbiAgICB0aGlzLm1pcnJvckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLm1pcnJvcik7XG4gICAgdGhpcy5hZGRDbGFzcyh0aGlzLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICB9XG5cbiAgbG9va3VwQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgY2FjaGUgPSB7fTtcbiAgICBjb25zdCBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG4gICAgY29uc3QgZW5kID0gJyg/OlxcXFxzfCQpJztcbiAgICBsZXQgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBjYWNoZWQubGFzdEluZGV4ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cblxuICBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgY3VycmVudCA9IGVsLmNsYXNzTmFtZTtcbiAgICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfSBlbHNlIGlmICghdGhpcy5sb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgfVxuICB9XG5cbiAgcm1DbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5sb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbiAgfVxuXG4gIGRyYWcgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMubWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNsaWVudFggPSB0aGlzLmdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgY29uc3QgY2xpZW50WSA9IHRoaXMuZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICBpZiAodGhpcy5hbmltYXRpb25SZXF1ZXN0SWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uUmVxdWVzdElkKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uUmVxdWVzdElkID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVTY3JvbGwoY2xpZW50WCwgY2xpZW50WSwgZSk7XG4gICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgIGNvbnN0IHggPSBjbGllbnRYIC0gdGhpcy5vZmZzZXRYO1xuICAgIGNvbnN0IHkgPSBjbGllbnRZIC0gdGhpcy5vZmZzZXRZO1xuICAgIHRoaXMubWlycm9yLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICB0aGlzLm1pcnJvci5zdHlsZS50b3AgPSB5ICsgJ3B4JztcbiAgICB0aGlzLm1pcnJvci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuXG4gICAgY29uc3QgZWxlbWVudEJlaGluZEN1cnNvciA9IHRoaXMuZ2V0RWxlbWVudEJlaGluZFBvaW50KHRoaXMubWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBjb25zdCBkcm9wVGFyZ2V0ID0gdGhpcy5maW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBpZiAoIWRyb3BUYXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbW1lZGlhdGUgPSB0aGlzLmdldEltbWVkaWF0ZUNoaWxkKGRyb3BUYXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgIGxldCByZWZlcmVuY2U7XG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgcmVmZXJlbmNlID0gdGhpcy5nZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VkID0gZHJvcFRhcmdldCAhPT0gbnVsbCAmJiBkcm9wVGFyZ2V0ICE9PSB0aGlzLmxhc3REcm9wVGFyZ2V0O1xuICAgIGlmIChjaGFuZ2VkIHx8IGRyb3BUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMubGFzdERyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XG4gICAgICByZWZlcmVuY2UgIT09IHRoaXMuaXRlbSAmJlxuICAgICAgcmVmZXJlbmNlICE9PSB0aGlzLm5leHRFbCh0aGlzLml0ZW0pXG4gICAgKSB7XG4gICAgICBsZXQgbW92ZXI7XG4gICAgICBjb25zdCBub3dDb3JkID0gZS5wYWdlWDtcbiAgICAgIGlmIChub3dDb3JkIDwgdGhpcy5vbGRDb29yZCkge1xuICAgICAgICBtb3ZlciA9IHJlZmVyZW5jZTsgLy8gdXB3YXJkIG9yIHJpZ2h0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb3ZlciA9IHJlZmVyZW5jZSA/IChyZWZlcmVuY2UucHJldmlvdXNFbGVtZW50U2libGluZyA/IHJlZmVyZW5jZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIDogcmVmZXJlbmNlKSA6IGRyb3BUYXJnZXQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgIH1cbiAgICAgIHRoaXMub2xkQ29vcmQgPSBub3dDb3JkO1xuXG4gICAgICBsZXQgZnJvbTtcbiAgICAgIGxldCB0bztcbiAgICAgIGxldCBtb3ZlckluZGV4O1xuICAgICAgbGV0IGZpeEl0ZW1SZWN0O1xuICAgICAgbGV0IGZpeEl0ZW07XG4gICAgICBsZXQgZml4TW92ZXJSZWN0O1xuICAgICAgbGV0IGZpeE1vdmVyO1xuICAgICAgaWYgKHRoaXMuZml4SGVhZGVyKSB7XG4gICAgICAgIGZyb20gPSBBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pLmluZGV4T2YodGhpcy5pdGVtKTtcbiAgICAgICAgdG8gPSBBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pLmluZGV4T2YocmVmZXJlbmNlKTtcbiAgICAgICAgbW92ZXJJbmRleCA9IEFycmF5LmZyb20odGhpcy5lbC5jaGlsZHJlbikuaW5kZXhPZihtb3Zlcik7XG4gICAgICAgIGZpeEl0ZW0gPSBBcnJheS5mcm9tKHRoaXMuZml4RmFrZVRhYmxlRWwuY2hpbGRyZW4pW2Zyb21dO1xuICAgICAgICBmaXhJdGVtUmVjdCA9IGZpeEl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGZpeE1vdmVyID0gQXJyYXkuZnJvbSh0aGlzLmZpeEZha2VUYWJsZUVsLmNoaWxkcmVuKVttb3ZlckluZGV4XTtcbiAgICAgICAgZml4TW92ZXJSZWN0ID0gbW92ZXJJbmRleCAhPT0gLTEgJiYgZml4TW92ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1vdmVyUmVjdCA9IG1vdmVyICYmIG1vdmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgaXRlbVJhY3QgPSB0aGlzLml0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0aGlzLm1vdmVUYXJnZXQoZHJvcFRhcmdldCwgdGhpcy5pdGVtLCByZWZlcmVuY2UpO1xuICAgICAgaWYgKHRoaXMuZml4SGVhZGVyKSB7XG4gICAgICAgIHRoaXMubW92ZVRhcmdldCh0aGlzLmZpeEZha2VUYWJsZUVsLCBBcnJheS5mcm9tKHRoaXMuZml4RmFrZVRhYmxlRWwuY2hpbGRyZW4pW2Zyb21dLCBBcnJheS5mcm9tKHRoaXMuZml4RmFrZVRhYmxlRWwuY2hpbGRyZW4pW3RvXSk7XG4gICAgICB9XG4gICAgICBpZiAobW92ZXIgJiYgbW92ZXJSZWN0KSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZShtb3ZlclJlY3QsIG1vdmVyLCAzMDApO1xuICAgICAgICB0aGlzLmFuaW1hdGUoaXRlbVJhY3QsIHRoaXMuaXRlbSwgMzAwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZpeEhlYWRlciAmJiBtb3ZlckluZGV4ICE9PSAtMSAmJiBmaXhNb3ZlclJlY3QpIHtcbiAgICAgICAgdGhpcy5hbmltYXRlKGZpeE1vdmVyUmVjdCwgZml4TW92ZXIsIDMwMCk7XG4gICAgICAgIHRoaXMuYW5pbWF0ZShmaXhJdGVtUmVjdCwgZml4SXRlbSwgMzAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaGFuZGxlU2Nyb2xsKHgsIHksIGUpIHtcbiAgICB0aGlzLnNjcm9sbFZpZXdSZWN0ID0gdGhpcy5zY3JvbGxWaWV3RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IGZpeFRhYmxlU2Nyb2xsVmlld1JlY3Q7XG4gICAgaWYgKHRoaXMuZml4SGVhZGVyKSB7XG4gICAgICB0aGlzLmZpeFRhYmxlU2Nyb2xsVmlld0VsID0gdGhpcy5maXhPcmlnaW5UYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICBmaXhUYWJsZVNjcm9sbFZpZXdSZWN0ID0gdGhpcy5maXhUYWJsZVNjcm9sbFZpZXdFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgbGV0IHNjcm9sbExlZnQgPSB0aGlzLnNjcm9sbFZpZXdFbC5zY3JvbGxMZWZ0O1xuICAgIGNvbnN0IHJhbmdlID0gMTUwO1xuICAgIGNvbnN0IHNjcm9sbFRvTGVmdCA9ICgpID0+IHtcbiAgICAgIHNjcm9sbExlZnQgLT0gNTA7XG4gICAgICBpZiAodGhpcy5maXhIZWFkZXIpIHtcbiAgICAgICAgdGhpcy5maXhUYWJsZVNjcm9sbFZpZXdFbC5zY3JvbGxUbyhzY3JvbGxMZWZ0LCAwKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2Nyb2xsVmlld0VsLnNjcm9sbFRvKHNjcm9sbExlZnQsIDApO1xuICAgICAgdGhpcy5hbmltYXRpb25SZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsVG9MZWZ0KTtcbiAgICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNjcm9sbFRvUmlnaHQgPSAoKSA9PiB7XG4gICAgICBzY3JvbGxMZWZ0ICs9IDUwO1xuICAgICAgaWYgKHRoaXMuZml4SGVhZGVyKSB7XG4gICAgICAgIHRoaXMuZml4VGFibGVTY3JvbGxWaWV3RWwuc2Nyb2xsVG8oc2Nyb2xsTGVmdCwgMCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNjcm9sbFZpZXdFbC5zY3JvbGxUbyhzY3JvbGxMZWZ0LCAwKTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uUmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbFRvUmlnaHQpO1xuICAgICAgdGhpcy5kb2N1bWVudEVsZW1lbnQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB9O1xuICAgIGlmICghdGhpcy5maXhIZWFkZXIgJiYgKHkgPCB0aGlzLnNjcm9sbFZpZXdSZWN0LnRvcCB8fCB5ID4gdGhpcy5zY3JvbGxWaWV3UmVjdC5ib3R0b20pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmZpeEhlYWRlciAmJiAoeSA8IHRoaXMuc2Nyb2xsVmlld1JlY3QudG9wIHx8IHkgPiBmaXhUYWJsZVNjcm9sbFZpZXdSZWN0LmJvdHRvbSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zY3JvbGxWaWV3UmVjdC5sZWZ0IDwgeCAmJiB4IDwgKHRoaXMuc2Nyb2xsVmlld1JlY3QubGVmdCArIHJhbmdlKSkge1xuICAgICAgdGhpcy5hbmltYXRpb25SZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsVG9MZWZ0KTtcbiAgICB9XG4gICAgaWYgKCh0aGlzLnNjcm9sbFZpZXdSZWN0LnJpZ2h0IC0gcmFuZ2UpIDwgeCAmJiB4IDwgdGhpcy5zY3JvbGxWaWV3UmVjdC5yaWdodCkge1xuICAgICAgdGhpcy5hbmltYXRpb25SZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsVG9SaWdodCk7XG4gICAgfVxuICB9XG5cbiAgbW92ZVRhcmdldChjb250YWluZXIsIHRhcmdldCwgcmVmZXJlbmNlKSB7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZSh0YXJnZXQsIHJlZmVyZW5jZSk7XG4gIH1cblxuICBnZXRQYXJlbnQoZWwpIHtcbiAgICByZXR1cm4gZWwucGFyZW50Tm9kZSA9PT0gdGhpcy5kb2N1bWVudCA/IG51bGwgOiBlbC5wYXJlbnROb2RlO1xuICB9XG5cbiAgZ2V0RXZlbnRIb3N0KGUpIHtcbiAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gICAgfVxuICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cblxuICBnZXRDb29yZChjb29yZCwgZSkge1xuICAgIGNvbnN0IGhvc3QgPSB0aGlzLmdldEV2ZW50SG9zdChlKTtcbiAgICByZXR1cm4gaG9zdFtjb29yZF07XG4gIH1cblxuICBnZXRMb25nZXN0Um93ID0gKHRhYmxlKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IHRhYmxlLnJvd3NbMF07XG4gICAgQXJyYXkuZnJvbSh0YWJsZS5yb3dzKS5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIGNvbnN0IHJvd0wgPSAoPGFueT5yb3cpLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIGNvbnN0IHJlc3VsdEwgPSByZXN1bHQuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgcmVzdWx0ID0gcm93TCA+IHJlc3VsdEwgPyByb3cgOiByZXN1bHQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgZ2V0Q29sdW1uQXNUYWJsZUJ5SW5kZXgodGFibGUsIHNlbGVjdGVkQ29sSW5kZXgsIGNvbFNwYW4sIHJvd1NwYW4pIHtcbiAgICBjb25zdCBza2lwUm93SW5kZXhMaXN0ID0gdGhpcy5nZXREYXRhQmV0d2VlbigwLCAwICsgcm93U3Bhbik7XG4gICAgY29uc3QgY1RhYmxlID0gdGFibGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIGNUYWJsZS5yZW1vdmVDaGlsZChjVGFibGUuZmlyc3RDaGlsZCk7IC8vIHJlbW92ZSBjb2xncm91cFxuICAgIGlmICh0aGlzLmZpeEhlYWRlcikge1xuICAgICAgY1RhYmxlLmRlbGV0ZUNhcHRpb24oKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmZpeEhlYWRlciAmJiBjVGFibGUudEJvZGllcy5sZW5ndGggPiAxKSB7XG4gICAgICBjVGFibGUucmVtb3ZlQ2hpbGQoY1RhYmxlLnRCb2RpZXNbMF0pO1xuICAgIH1cbiAgICB0aGlzLm9yaWdpbjJEcmFnSXRlbShjVGFibGUpO1xuICAgIGNvbnN0IGVtcHR5ID0gKG5vZGUpID0+IHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaW5zZXJ0Qm9keUNvbExpc3QgPSB0aGlzLmdldERhdGFCZXR3ZWVuKHNlbGVjdGVkQ29sSW5kZXggLSAxICsgdGhpcy5jb2xPZmZzZXQsIHNlbGVjdGVkQ29sSW5kZXggKyB0aGlzLmNvbE9mZnNldCArIGNvbFNwYW4pO1xuICAgIGNvbnN0IGluc2VydEhlYWRlckNvbExpc3QgPSB0aGlzLmdldERhdGFCZXR3ZWVuKHNlbGVjdGVkQ29sSW5kZXggKyB0aGlzLnNlY29uZEhlYWRlck9mZnNldCAtIDEsIHNlbGVjdGVkQ29sSW5kZXggK1xuICAgICAgdGhpcy5zZWNvbmRIZWFkZXJPZmZzZXQgKyBjb2xTcGFuIC0gcm93U3BhbiArIDEpO1xuICAgIGNvbnN0IGdldFRyZWVUYWJsZUNvbCA9IChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmdldENoaWxkVGFibGVDb2x1bW4oKDxhbnk+cm93KS5jaGlsZHJlblswXS5jaGlsZHJlblswXSwgc2VsZWN0ZWRDb2xJbmRleCk7XG4gICAgICBlbXB0eSgoPGFueT5yb3cpLmNoaWxkcmVuWzBdKTtcbiAgICAgICg8YW55PnJvdykuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICB9O1xuICAgIGNvbnN0IGdldE11bHRpcGxlSENvbCA9IChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICBpZiAocm93SW5kZXggPT09IDApIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gKDxhbnk+cm93KS5jaGlsZHJlbltzZWxlY3RlZENvbEluZGV4XTtcbiAgICAgICAgZW1wdHkocm93KTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICg8YW55PnJvdykuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocm93SW5kZXggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IGluc2VydEhlYWRlckNvbExpc3QubWFwKChjb2xJbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiAoPGFueT5yb3cpLmNoaWxkcmVuW2NvbEluZGV4XTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVtcHR5KHJvdyk7XG4gICAgICAgIHRhcmdldHMuZm9yRWFjaCgodGFyZ2V0KSA9PiB7XG4gICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgKDxhbnk+cm93KS5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBpbnNlcnRCb2R5Q29sTGlzdC5tYXAoKGNvbEluZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuICg8YW55PnJvdykuY2hpbGRyZW5bY29sSW5kZXhdO1xuICAgICAgICB9KTtcbiAgICAgICAgZW1wdHkocm93KTtcbiAgICAgICAgdGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXQpID0+IHtcbiAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAoPGFueT5yb3cpLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0Tm9ybWFsVGFibGVDb2wgPSAocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgaWYgKHJvd0luZGV4ID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9ICg8YW55PnJvdykuY2hpbGRyZW5bc2VsZWN0ZWRDb2xJbmRleF07XG4gICAgICAgIGVtcHR5KHJvdyk7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAoPGFueT5yb3cpLmFwcGVuZENoaWxkKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9ICg8YW55PnJvdykuY2hpbGRyZW5bc2VsZWN0ZWRDb2xJbmRleCArIHRoaXMuY29sT2Zmc2V0XTtcbiAgICAgICAgZW1wdHkocm93KTtcbiAgICAgICAgaWYgKHRhcmdldCAmJiBza2lwUm93SW5kZXhMaXN0LmluZGV4T2Yocm93SW5kZXgpID09PSAtMSkge1xuICAgICAgICAgICg8YW55PnJvdykuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBBcnJheS5mcm9tKGNUYWJsZS5yb3dzKS5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICBpZiAoKDxhbnk+cm93KS5jbGFzc0xpc3QuY29udGFpbnMoJ2NoaWxkLXRhYmxlJykpIHtcbiAgICAgICAgZ2V0VHJlZVRhYmxlQ29sKHJvdywgcm93SW5kZXgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGNvbFNwYW4gPiAxKSB7XG4gICAgICAgICAgZ2V0TXVsdGlwbGVIQ29sKHJvdywgcm93SW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdldE5vcm1hbFRhYmxlQ29sKHJvdywgcm93SW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmNzcyhyb3csIHsgaGVpZ2h0OiBgJHt0YWJsZS5yb3dzW3Jvd0luZGV4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR9cHhgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuY29sT2Zmc2V0ICs9IChjb2xTcGFuIC0gMSk7XG4gICAgdGhpcy5zZWNvbmRIZWFkZXJPZmZzZXQgPSByb3dTcGFuID4gMSA/IHRoaXMuc2Vjb25kSGVhZGVyT2Zmc2V0IC0gMSA6IHRoaXMuc2Vjb25kSGVhZGVyT2Zmc2V0O1xuICAgIHJldHVybiBjVGFibGU7XG4gIH1cblxuICBnZXREYXRhQmV0d2Vlbihmb3JtLCBlbmQpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gZm9ybSArIDE7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBnZXRDaGlsZFRhYmxlQ29sdW1uID0gKHRhYmxlLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNUYWJsZSA9IHRhYmxlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLm9yaWdpbjJEcmFnSXRlbShjVGFibGUpO1xuICAgIGNvbnN0IGVtcHR5ID0gKG5vZGUpID0+IHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH07XG4gICAgQXJyYXkuZnJvbShjVGFibGUucm93cykuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICBpZiAoKDxhbnk+cm93KS5jbGFzc0xpc3QuY29udGFpbnMoJ2NoaWxkLXRhYmxlJykpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRDaGlsZFRhYmxlQ29sdW1uKCg8YW55PnJvdykuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0sIGluZGV4KTtcbiAgICAgICAgZW1wdHkoKDxhbnk+cm93KS5jaGlsZHJlblswXSk7XG4gICAgICAgICg8YW55PnJvdykuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9ICg8YW55PnJvdykuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICBlbXB0eShyb3cpO1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgKDxhbnk+cm93KS5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zaXplQ2hpbGRDb2x1bW5GYWtlKGNUYWJsZSwgdGFibGUsIGluZGV4KTtcbiAgICByZXR1cm4gY1RhYmxlO1xuICB9O1xuXG4gIHNpemVDaGlsZENvbHVtbkZha2UoZmFrZVRhYmxlLCBvcmlnaW5FbCwgaW5kZXgpIHtcbiAgICAvLyBjYWxjdWxhdGUgd2lkdGggb2YgZXZlcnkgY29sdW1uXG4gICAgY29uc3QgY2VsbCA9IEFycmF5LmZyb20odGhpcy5vcmlnaW5UYWJsZS5yb3dzWzBdLmNoaWxkcmVuKVtpbmRleF07XG4gICAgY29uc3QgdyA9ICg8YW55PmNlbGwpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIHRoaXMuY3NzKGZha2VUYWJsZSwgeyB3aWR0aDogYCR7d31weGAgfSk7XG4gICAgdGhpcy5jc3MoZmFrZVRhYmxlLnJvd3NbMF0uY2hpbGRyZW5bMF0sIHsgd2lkdGg6IGAke3d9cHhgIH0pO1xuXG4gICAgLy8gY2FsY3VsYXRlIGhlaWdodCBvZiBldmVyeSBjZWxsXG4gICAgY29uc3Qgcm93SGVpZ2h0cyA9IEFycmF5LmZyb20ob3JpZ2luRWwucm93cylcbiAgICAgIC5tYXAocm93ID0+ICg8YW55PnJvdykuY2hpbGRyZW5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KTtcbiAgICBBcnJheS5mcm9tKGZha2VUYWJsZS5yb3dzKS5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICB0aGlzLmNzcyhyb3csIHsgaGVpZ2h0OiBgJHtyb3dIZWlnaHRzW3Jvd0luZGV4XX1weGAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkZXRlY3RlQ2hpbGRUYWJsZXMgPSAodGFibGUpID0+IHtcbiAgICBBcnJheS5mcm9tKHRhYmxlLnJvd3MpLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHtcbiAgICAgIGlmICgoPGFueT5yb3cpLmNsYXNzTGlzdC5jb250YWlucygnY2hpbGQtdGFibGUnKSkge1xuICAgICAgICBjb25zdCBjaGlsZFRhYmxlID0gKDxhbnk+dGFibGUucm93c1tpbmRleF0pLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuICAgICAgICB0aGlzLmNoaWxkVGFibGVzLnB1c2goY2hpbGRUYWJsZSk7XG4gICAgICAgIHRoaXMuZGV0ZWN0ZUNoaWxkVGFibGVzKGNoaWxkVGFibGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBvcmlnaW4yRHJhZ0l0ZW0obGlUYWJsZSkge1xuICAgIHRoaXMuY3NzKGxpVGFibGUsIHsgJ3RhYmxlLWxheW91dCc6ICdmaXhlZCcsIHdpZHRoOiAnaW5pdGlhbCcsIGhlaWdodDogJ2luaXRpYWwnLCBwYWRkaW5nOiAwLCBtYXJnaW46IDAgfSk7XG4gICAgWyd3aWR0aCcsICdoZWlnaHQnLCAnaWQnXS5mb3JFYWNoKChwKSA9PiB7XG4gICAgICBsaVRhYmxlLnJlbW92ZUF0dHJpYnV0ZShwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEVsZW1lbnRCZWhpbmRQb2ludChwb2ludCwgeCwgeSkge1xuICAgIGNvbnN0IHAgPSBwb2ludCB8fCB7fTtcbiAgICBjb25zdCBzdGF0ZSA9IHAuY2xhc3NOYW1lO1xuICAgIHAuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XG4gICAgY29uc3QgZWwgPSB0aGlzLmRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XG4gICAgcC5jbGFzc05hbWUgPSBzdGF0ZTtcbiAgICByZXR1cm4gZWw7XG4gIH1cblxuICBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgbGV0IHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgY29uc3QgYWNjZXB0ZWQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkcm9wcGFibGUgPSB0aGlzLmlzQ29udGFpbmVyKHRhcmdldCk7XG4gICAgICBpZiAoZHJvcHBhYmxlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGltbWVkaWF0ZSA9IHRoaXMuZ2V0SW1tZWRpYXRlQ2hpbGQodGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlZmVyZW5jZSA9IHRoaXMuZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYKTtcbiAgICAgIGNvbnN0IGluaXRpYWwgPSB0aGlzLmlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQsIHJlZmVyZW5jZSk7XG4gICAgICBpZiAoaW5pdGlhbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc2hvdWxkIGFsd2F5cyBiZSBhYmxlIHRvIGRyb3AgaXQgcmlnaHQgYmFjayB3aGVyZSBpdCB3YXNcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICB3aGlsZSAodGFyZ2V0ICYmICFhY2NlcHRlZCgpKSB7XG4gICAgICB0YXJnZXQgPSB0aGlzLmdldFBhcmVudCh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgZ2V0UmVmZXJlbmNlID0gKGRyb3BUYXJnZXQsIHRhcmdldCwgeCkgPT4ge1xuICAgIGNvbnN0IHJlc29sdmUgPSAoYWZ0ZXIpID0+IHtcbiAgICAgIHJldHVybiBhZnRlciA/IHRoaXMubmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGluc2lkZSA9ICgpID0+IHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICBjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHJlc29sdmUoeCA+IHJlY3QubGVmdCArIHRoaXMuZ2V0UmVjdFdpZHRoKHJlY3QpIC8gMik7XG4gICAgfTtcblxuICAgIGNvbnN0IG91dHNpZGUgPSAoKSA9PiB7IC8vIHNsb3dlciwgYnV0IGFibGUgdG8gZmlndXJlIG91dCBhbnkgcG9zaXRpb25cbiAgICAgIGNvbnN0IGxlbiA9IGRyb3BUYXJnZXQuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgbGV0IGk7XG4gICAgICBsZXQgZWw7XG4gICAgICBsZXQgcmVjdDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBlbCA9IGRyb3BUYXJnZXQuY2hpbGRyZW5baV07XG4gICAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKChyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMikgPiB4KSB7XG4gICAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcbiAgfTtcblxuICBnZXRSZWN0V2lkdGgocmVjdCkge1xuICAgIHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTtcbiAgfVxuICBnZXRSZWN0SGVpZ2h0KHJlY3QpIHtcbiAgICByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApO1xuICB9XG5cbiAgbmV4dEVsKGVsKSB7XG4gICAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICAgIGZ1bmN0aW9uIG1hbnVhbGx5KCkge1xuICAgICAgbGV0IHNpYmxpbmcgPSBlbDtcbiAgICAgIGRvIHtcbiAgICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgICAgcmV0dXJuIHNpYmxpbmc7XG4gICAgfVxuICB9XG5cbiAgaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcykge1xuICAgIGxldCBzaWJsaW5nO1xuICAgIGlmIChzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNpYmxpbmcgPSBzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSB0aGlzLmN1cnJlbnRTaWJsaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gdGhpcy5uZXh0RWwodGhpcy5pdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldCA9PT0gdGhpcy5zb3VyY2UgJiYgc2libGluZyA9PT0gdGhpcy5pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGlzQ29udGFpbmVyKGVsKSB7XG4gICAgcmV0dXJuIGVsID09PSB0aGlzLmVsO1xuICB9XG5cbiAgZ2V0SW1tZWRpYXRlQ2hpbGQgPSAoZHJvcFRhcmdldCwgdGFyZ2V0KSA9PiB7XG4gICAgbGV0IGltbWVkaWF0ZSA9IHRhcmdldDtcbiAgICBjb25zdCBpc0VsZW1lbnREcm9wRnJlZXplID0gKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gQXJyYXkuZnJvbShlbGVtZW50LnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YoZWxlbWVudCk7XG4gICAgICByZXR1cm4gaW5kZXggPCB0aGlzLmNvbERyb3BGcmVlemVUbztcbiAgICB9O1xuICAgIHdoaWxlIChpbW1lZGlhdGUgIT09IGRyb3BUYXJnZXQgJiYgdGhpcy5nZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gdGhpcy5nZXRQYXJlbnQoaW1tZWRpYXRlKTtcbiAgICB9XG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gdGhpcy5kb2N1bWVudEVsZW1lbnQgfHwgaXNFbGVtZW50RHJvcEZyZWV6ZShpbW1lZGlhdGUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcbiAgfTtcblxuICBhbmltYXRlKHByZXZSZWN0LCB0YXJnZXQsIHRpbWUpIHtcbiAgICBpZiAodGltZSkge1xuICAgICAgaWYgKCFwcmV2UmVjdCB8fCAhdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyAocHJldlJlY3QubGVmdCAtIGN1cnJlbnRSZWN0LmxlZnQpICsgJ3B4LCcgKyAocHJldlJlY3QudG9wIC0gY3VycmVudFJlY3QudG9wKSArICdweCwwKSc7XG4gICAgICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgJyArIHRpbWUgKyAnbXMgY3ViaWMtYmV6aWVyKDAuNzU1LCAwLjA1LCAwLjg1NSwgMC4wNiknO1xuICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLDAsMCknO1xuICAgICAgY2xlYXJUaW1lb3V0KHRhcmdldC5hbmltYXRlZCk7XG4gICAgICB0YXJnZXQuYW5pbWF0ZWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICB0YXJnZXQuYW5pbWF0ZWQgPSBmYWxzZTtcbiAgICAgIH0sIHRpbWUpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUNoaWxkcmVuVGFibGUoZXZlbnQpIHtcbiAgICB0aGlzLmNoaWxkcmVuVGFibGVPcGVuID0gIXRoaXMuY2hpbGRyZW5UYWJsZU9wZW47XG4gICAgdGhpcy5kdC5vblRvZ2dsZUFsbENoaWxkcmVuVGFibGUodGhpcy5jaGlsZHJlblRhYmxlT3Blbik7XG4gIH1cblxuICBvbk9wdGlvblNlbGVjdChvcHRpb246IFRhYmxlQ2hlY2tPcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbi5vbkNoZWNrZWQpIHtcbiAgICAgIG9wdGlvbi5vbkNoZWNrZWQoKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxuZy1jb250YWluZXI+XG4gIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJkZWZhdWx0SGVhZFRlbXBsYXRlXCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgJGltcGxpY2l0OiB0aGlzIH1cIiAqbmdJZj1cIiEocm93Q291bnQgPiAwKVwiPlxuICA8L25nLXRlbXBsYXRlPlxuICA8bmctdGVtcGxhdGVcbiAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJBZHZhbmNlZEhlYWRUbXBsXCJcbiAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyAkaW1wbGljaXQ6IHRoaXMsIHJvd3M6IHJvd0NvdW50QXJyYXkgfVwiXG4gICAgKm5nSWY9XCJyb3dDb3VudCA+IDBcIlxuICA+XG4gIDwvbmctdGVtcGxhdGU+XG48L25nLWNvbnRhaW5lcj5cblxuPCEtLSBiZWdpbjp0ZW1wbGF0ZTogaGVhZGVyIGxhYmVsIHRlbXBsYXRlLS0+XG48bmctdGVtcGxhdGUgI2RlZmF1bHRIZWFkVGVtcGxhdGUgbGV0LWhlYWQ9XCJcIj5cbiAgPHRyPlxuICAgIDx0aFxuICAgICAgKm5nSWY9XCJzaG93RXhwYW5kVG9nZ2xlXCJcbiAgICAgIGNsYXNzPVwiZGV2dWktZGV0YWlsLWNlbGxcIlxuICAgICAgW25nQ2xhc3NdPVwieyAnZGV2dWktc3RpY2t5LWxlZnQtY2VsbCc6IGNvbHVtbnNbMF0/LmZpeGVkTGVmdCB9XCJcbiAgICAgIFtzdHlsZS5sZWZ0XT1cIjBcIlxuICAgID48L3RoPlxuICAgIDx0aFxuICAgICAgKm5nSWY9XCJjaGVja2FibGVcIlxuICAgICAgY2xhc3M9XCJkZXZ1aS1jaGVja2FibGUtY2VsbFwiXG4gICAgICBbbmdDbGFzc109XCJ7ICdkZXZ1aS1zdGlja3ktbGVmdC1jZWxsJzogY29sdW1uc1swXT8uZml4ZWRMZWZ0IH1cIlxuICAgICAgW3N0eWxlLmxlZnRdPVwic2hvd0V4cGFuZFRvZ2dsZSAmJiBjb2x1bW5zWzBdPy5maXhlZExlZnQgPyAnMTZweCcgOiAnMCdcIlxuICAgID5cbiAgICAgIDxkLWNoZWNrYm94XG4gICAgICAgICpuZ0lmPVwiaGVhZGVyQ2hlY2tWaXNpYmxlXCJcbiAgICAgICAgY2xhc3M9XCJjaGVjay1ib3gtYWxsXCJcbiAgICAgICAgW25hbWVdPVwiJ2NoZWNrQWxsJ1wiXG4gICAgICAgIFtkaXNhYmxlZF09XCJoZWFkZXJDaGVja0Rpc2FibGVkXCJcbiAgICAgICAgKGNoYW5nZSk9XCJvbkNoZWNrQWxsQ2hhbmdlKClcIlxuICAgICAgICBbKG5nTW9kZWwpXT1cInBhZ2VBbGxDaGVja2VkXCJcbiAgICAgICAgW2hhbGZjaGVja2VkXT1cImhhbGZDaGVja2VkXCJcbiAgICAgID5cbiAgICAgIDwvZC1jaGVja2JveD5cbiAgICAgIDxkaXYgKm5nSWY9XCJjaGVja09wdGlvbnMgJiYgY2hlY2tPcHRpb25zLmxlbmd0aCA+IDBcIiBkRHJvcERvd24gYXBwZW5kVG9Cb2R5IFt0cmlnZ2VyXT1cIidob3ZlcidcIiBjbGFzcz1cInNlbGVjdC1vcHRpb25zXCI+XG4gICAgICAgIDxkaXYgZERyb3BEb3duVG9nZ2xlPlxuICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgICAgICBoZWlnaHQ9XCIxNnB4XCJcbiAgICAgICAgICAgIHZlcnNpb249XCIxLjFcIlxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxNiAxNlwiXG4gICAgICAgICAgICB3aWR0aD1cIjE2cHhcIlxuICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGcgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgaWQ9XCJjaGV2cm9uX2Rvd25cIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiPlxuICAgICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9XCI0LjUgNSA4IDguNzY5MjMwNzcgMTEuNSA1IDEzIDYuNjE1Mzg0NjIgOCAxMiAzIDYuNjE1Mzg0NjJcIj48L3BvbHlnb24+XG4gICAgICAgICAgICA8L2c+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dWwgZERyb3BEb3duTWVudSBjbGFzcz1cImRldnVpLWRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiPlxuICAgICAgICAgIDxsaSAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIGNoZWNrT3B0aW9uc1wiIHJvbGU9XCJtZW51aXRlbVwiIChjbGljayk9XCJvbk9wdGlvblNlbGVjdChvcHRpb24pXCI+XG4gICAgICAgICAgICA8YSBjbGFzcz1cImRldnVpLWRyb3Bkb3duLWl0ZW1cIj57eyBvcHRpb24ubGFiZWwgfX08L2E+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvZGl2PlxuICAgIDwvdGg+XG4gICAgPHRoXG4gICAgICBkSGVhZENlbGxcbiAgICAgICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uczsgdHJhY2tCeTogdHJhY2tCeUZuOyBsZXQgbGFzdCA9IGxhc3Q7IGxldCBjb2xJbmRleCA9IGluZGV4XCJcbiAgICAgIFttaW5XaWR0aF09XCJjb2x1bW4ubWluV2lkdGhcIlxuICAgICAgW21heFdpZHRoXT1cImNvbHVtbi5tYXhXaWR0aFwiXG4gICAgICBbYXR0ci5maWVsZF09XCJjb2x1bW4uZmllbGRcIlxuICAgICAgW3Nob3dTb3J0SWNvbl09XCJzaG93U29ydEljb25cIlxuICAgICAgW3Nob3dGaWx0ZXJJY29uXT1cInNob3dGaWx0ZXJJY29uXCJcbiAgICAgIFtzb3J0YWJsZV09XCJnZXRJZkV4aXN0TXVsdGlTb3J0KGNvbHVtbi5maWVsZClcIlxuICAgICAgW3NvcnREaXJlY3Rpb25dPVwiZ2V0U29ydERpcmVjdGlvbihjb2x1bW4uZmllbGQpXCJcbiAgICAgIChzb3J0Q2hhbmdlKT1cIm9uSGVhZENsaWNrKCRldmVudCwgY29sdW1uKVwiXG4gICAgICBbZmlsdGVyYWJsZV09XCJjYW5GaWx0ZXJhYmxlKGNvbHVtbilcIlxuICAgICAgW2Nsb3NlRmlsdGVyV2hlblNjcm9sbF09XCJjb2x1bW4uY2xvc2VGaWx0ZXJXaGVuU2Nyb2xsXCJcbiAgICAgIFtmaWx0ZXJMaXN0XT1cImNvbHVtbi5maWx0ZXJMaXN0XCJcbiAgICAgIFtjb2x1bW5dPVwiY29sdW1uXCJcbiAgICAgIFtmaWx0ZXJNdWx0aXBsZV09XCJjb2x1bW4uZmlsdGVyTXVsdGlwbGVcIlxuICAgICAgW2ZpbHRlckJveFdpZHRoXT1cImNvbHVtbi5maWx0ZXJCb3hXaWR0aFwiXG4gICAgICBbZmlsdGVyQm94SGVpZ2h0XT1cImNvbHVtbi5maWx0ZXJCb3hIZWlnaHRcIlxuICAgICAgW2ZpbHRlckljb25BY3RpdmVdPVwiY29sdW1uLmZpbHRlckljb25BY3RpdmVcIlxuICAgICAgW2JlZm9yZUZpbHRlcl09XCJjb2x1bW4uYmVmb3JlRmlsdGVyXCJcbiAgICAgIFtjdXN0b21GaWx0ZXJUZW1wbGF0ZV09XCJjb2x1bW4uY3VzdG9tRmlsdGVyVGVtcGxhdGVcIlxuICAgICAgW2V4dHJhRmlsdGVyVGVtcGxhdGVdPVwiY29sdW1uLmV4dHJhRmlsdGVyVGVtcGxhdGVcIlxuICAgICAgW3NlYXJjaEZuXT1cImNvbHVtbi5zZWFyY2hGblwiXG4gICAgICAoZmlsdGVyQ2hhbmdlKT1cImNvbHVtbi5lbWl0RmlsdGVyRGF0YSgkZXZlbnQpXCJcbiAgICAgIChmaWx0ZXJUb2dnbGUpPVwiY29sdW1uLmVtaXRGaWx0ZXJUb2dnbGUoJGV2ZW50KVwiXG4gICAgICBbZml4ZWRMZWZ0XT1cImNvbHVtbi5maXhlZExlZnRcIlxuICAgICAgW2lzTGFzdEZpeGVkTGVmdF09XCJjb2x1bW4uZml4ZWRMZWZ0ICYmICFjb2x1bW5zW2NvbEluZGV4ICsgMV0/LmZpeGVkTGVmdFwiXG4gICAgICBbZml4ZWRSaWdodF09XCJjb2x1bW4uZml4ZWRSaWdodFwiXG4gICAgICBbaXNGaXJzdEZpeGVkUmlnaHRdPVwiY29sdW1uLmZpeGVkUmlnaHQgJiYgIWNvbHVtbnNbY29sSW5kZXggLSAxXT8uZml4ZWRSaWdodFwiXG4gICAgICBbbmVzdGVkQ29sdW1uXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LnNob3dIZWFkVGFibGVUb2dnbGVyXCJcbiAgICAgICh0b2dnbGVDaGlsZHJlblRhYmxlRXZlbnQpPVwidG9nZ2xlQ2hpbGRyZW5UYWJsZSgkZXZlbnQpXCJcbiAgICAgICh0YXBFdmVudCk9XCJvblRhcCgkZXZlbnQpXCJcbiAgICAgIFtpY29uRm9sZFRhYmxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25Gb2xkVGFibGVcIlxuICAgICAgW2ljb25VbkZvbGRUYWJsZV09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5pY29uVW5Gb2xkVGFibGVcIlxuICAgICAgW3RhYmxlVmlld1JlZkVsZW1lbnRdPVwidGFibGVWaWV3UmVmRWxlbWVudFwiXG4gICAgICBbY29sRHJhZ2dhYmxlXT1cImNvbERyYWdnYWJsZSAmJiBjb2xJbmRleCA+IGhlYWQ/LmNvbERyb3BGcmVlemVUbyAtIDFcIlxuICAgICAgW2NoaWxkcmVuVGFibGVPcGVuXT1cImNoaWxkcmVuVGFibGVPcGVuXCJcbiAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgc2luZHVfaGFuZGxlOiBjb2xEcmFnZ2FibGUgJiYgY29sSW5kZXggPiBoZWFkPy5jb2xEcm9wRnJlZXplVG8gLSAxLFxuICAgICAgICAnZHJvcC1mcmVlemUnOiBjb2xEcmFnZ2FibGUgJiYgY29sSW5kZXggPCBoZWFkPy5jb2xEcm9wRnJlZXplVG9cbiAgICAgIH1cIlxuICAgICAgW3Jlc2l6ZUVuYWJsZWRdPVwicmVzaXplYWJsZVwiXG4gICAgICAocmVzaXplRW5kRXZlbnQpPVwib25SZXNpemUoJGV2ZW50LCBjb2x1bW4pXCJcbiAgICAgIChyZXNpemVTdGFydEV2ZW50KT1cIm9uQmVnaW5SZXNpemUoJGV2ZW50KVwiXG4gICAgICAocmVzaXppbmdFdmVudCk9XCJvblJlc2l6aW5nKCRldmVudCwgY29sdW1uKVwiXG4gICAgPlxuICAgICAgPHNwYW4gKm5nSWY9XCIhY29sdW1uLmhlYWRDZWxsVG1wbD8udGVtcGxhdGVcIiBbYXR0ci50aXRsZV09XCJjb2x1bW4uaGVhZGVyXCI+e3sgY29sdW1uLmhlYWRlciB9fTwvc3Bhbj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4uaGVhZENlbGxUbXBsPy50ZW1wbGF0ZVwiPlxuICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJjb2x1bW4uaGVhZENlbGxUbXBsPy50ZW1wbGF0ZVwiXG4gICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgY29sdW1uOiBjb2x1bW4sICRpbXBsaWNpdDogaGVhZCB9XCJcbiAgICAgICAgPjwvbmctdGVtcGxhdGU+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L3RoPlxuICA8L3RyPlxuPC9uZy10ZW1wbGF0ZT5cbjwhLS1lbmQ6dGVtcGF0ZS0tPlxuXG48bmctdGVtcGxhdGUgbGV0LWhlYWQ9XCJcIiBsZXQtcm93cz1cInJvd3NcIiAjQWR2YW5jZWRIZWFkVG1wbD5cbiAgPHRyICpuZ0Zvcj1cImxldCByb3dDb250ZXggb2Ygcm93czsgbGV0IHJvd0luZGV4ID0gaW5kZXhcIj5cbiAgICA8dGhcbiAgICAgICpuZ0lmPVwic2hvd0V4cGFuZFRvZ2dsZSAmJiByb3dJbmRleCA9PT0gMFwiXG4gICAgICBjbGFzcz1cImRldnVpLWRldGFpbC1jZWxsXCJcbiAgICAgIFthdHRyLnJvd3NwYW5dPVwicm93cz8ubGVuZ3RoIHx8IDFcIlxuICAgICAgW25nQ2xhc3NdPVwieyAnZGV2dWktc3RpY2t5LWxlZnQtY2VsbCc6IGNvbHVtbnNbMF0/LmZpeGVkTGVmdCB9XCJcbiAgICAgIFtzdHlsZS5sZWZ0XT1cIjBcIlxuICAgID48L3RoPlxuICAgIDx0aFxuICAgICAgKm5nSWY9XCJjaGVja2FibGUgJiYgcm93SW5kZXggPT09IDBcIlxuICAgICAgY2xhc3M9XCJkZXZ1aS1jaGVja2FibGUtY2VsbFwiXG4gICAgICBbYXR0ci5yb3dzcGFuXT1cInJvd3M/Lmxlbmd0aCB8fCAxXCJcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ2RldnVpLXN0aWNreS1sZWZ0LWNlbGwnOiBjb2x1bW5zWzBdPy5maXhlZExlZnQgfVwiXG4gICAgICBbc3R5bGUubGVmdF09XCJzaG93RXhwYW5kVG9nZ2xlICYmIGNvbHVtbnNbMF0/LmZpeGVkTGVmdCA/ICcxNnB4JyA6ICcwJ1wiXG4gICAgPlxuICAgICAgPGQtY2hlY2tib3hcbiAgICAgICAgKm5nSWY9XCJoZWFkZXJDaGVja1Zpc2libGVcIlxuICAgICAgICBjbGFzcz1cImNoZWNrLWJveC1hbGxcIlxuICAgICAgICBbbmFtZV09XCInY2hlY2tBbGwnXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cImhlYWRlckNoZWNrRGlzYWJsZWRcIlxuICAgICAgICAoY2hhbmdlKT1cIm9uQ2hlY2tBbGxDaGFuZ2UoKVwiXG4gICAgICAgIFsobmdNb2RlbCldPVwicGFnZUFsbENoZWNrZWRcIlxuICAgICAgICBbaGFsZmNoZWNrZWRdPVwiaGFsZkNoZWNrZWRcIlxuICAgICAgPlxuICAgICAgPC9kLWNoZWNrYm94PlxuICAgICAgPGRpdiAqbmdJZj1cImNoZWNrT3B0aW9ucyAmJiBjaGVja09wdGlvbnMubGVuZ3RoID4gMFwiIGREcm9wRG93biBhcHBlbmRUb0JvZHkgW3RyaWdnZXJdPVwiJ2hvdmVyJ1wiIGNsYXNzPVwic2VsZWN0LW9wdGlvbnNcIj5cbiAgICAgICAgPGRpdiBkRHJvcERvd25Ub2dnbGU+XG4gICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgICAgIGhlaWdodD1cIjE2cHhcIlxuICAgICAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDE2IDE2XCJcbiAgICAgICAgICAgIHdpZHRoPVwiMTZweFwiXG4gICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZyBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBpZD1cImNoZXZyb25fZG93blwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCI+XG4gICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjQuNSA1IDggOC43NjkyMzA3NyAxMS41IDUgMTMgNi42MTUzODQ2MiA4IDEyIDMgNi42MTUzODQ2MlwiPjwvcG9seWdvbj5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx1bCBkRHJvcERvd25NZW51IGNsYXNzPVwiZGV2dWktZHJvcGRvd24tbWVudVwiIHJvbGU9XCJtZW51XCI+XG4gICAgICAgICAgPGxpICpuZ0Zvcj1cImxldCBvcHRpb24gb2YgY2hlY2tPcHRpb25zXCIgcm9sZT1cIm1lbnVpdGVtXCIgKGNsaWNrKT1cIm9uT3B0aW9uU2VsZWN0KG9wdGlvbilcIj5cbiAgICAgICAgICAgIDxhIGNsYXNzPVwiZGV2dWktZHJvcGRvd24taXRlbVwiPnt7IG9wdGlvbi5sYWJlbCB9fTwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgPC90aD5cbiAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uczsgdHJhY2tCeTogdHJhY2tCeUZuOyBsZXQgY29sSW5kZXggPSBpbmRleDsgbGV0IGxhc3QgPSBsYXN0XCI+XG4gICAgICA8dGhcbiAgICAgICAgZEhlYWRDZWxsXG4gICAgICAgICpuZ0lmPVwiY29sdW1uLmFkdmFuY2VkSGVhZGVyICYmIGNvbHVtbi5hZHZhbmNlZEhlYWRlcltyb3dJbmRleF0/LnJvd3NwYW4gJiYgY29sdW1uLmFkdmFuY2VkSGVhZGVyW3Jvd0luZGV4XT8uY29sc3BhblwiXG4gICAgICAgIFthdHRyLnJvd3NwYW5dPVwiY29sdW1uLmFkdmFuY2VkSGVhZGVyW3Jvd0luZGV4XT8ucm93c3BhblwiXG4gICAgICAgIFthdHRyLmNvbHNwYW5dPVwiY29sdW1uLmFkdmFuY2VkSGVhZGVyW3Jvd0luZGV4XT8uY29sc3BhblwiXG4gICAgICAgIFtzdHlsZS50ZXh0QWxpZ25dPVwiXG4gICAgICAgICAgcm93SW5kZXggIT09IGNvbHVtbi5hZHZhbmNlZEhlYWRlci5sZW5ndGggLSAxICYmXG4gICAgICAgICAgKGNvbHVtbi5hZHZhbmNlZEhlYWRlcltyb3dJbmRleF0/LnJvd3NwYW4gPiAwIHx8IGNvbHVtbi5hZHZhbmNlZEhlYWRlcltyb3dJbmRleF0/LmNvbHNwYW4gPiAwKVxuICAgICAgICAgICAgPyAnY2VudGVyJ1xuICAgICAgICAgICAgOiAnJ1xuICAgICAgICBcIlxuICAgICAgICBbbWluV2lkdGhdPVwiY29sdW1uLm1pbldpZHRoXCJcbiAgICAgICAgW2F0dHIuZmllbGRdPVwiY29sdW1uLmZpZWxkXCJcbiAgICAgICAgW21heFdpZHRoXT1cImNvbHVtbi5tYXhXaWR0aFwiXG4gICAgICAgIFtyZXNpemVFbmFibGVkXT1cInJlc2l6ZWFibGUgJiYgcm93SW5kZXggPT09IGNvbHVtbi5hZHZhbmNlZEhlYWRlci5sZW5ndGggLSAxICYmICFsYXN0XCJcbiAgICAgICAgKHJlc2l6ZUVuZEV2ZW50KT1cIm9uUmVzaXplKCRldmVudCwgY29sdW1uKVwiXG4gICAgICAgIChyZXNpemVTdGFydEV2ZW50KT1cIm9uQmVnaW5SZXNpemUoJGV2ZW50KVwiXG4gICAgICAgIChyZXNpemluZ0V2ZW50KT1cIm9uUmVzaXppbmcoJGV2ZW50LCBjb2x1bW4pXCJcbiAgICAgICAgW3Nob3dTb3J0SWNvbl09XCJzaG93U29ydEljb25cIlxuICAgICAgICBbc2hvd0ZpbHRlckljb25dPVwic2hvd0ZpbHRlckljb25cIlxuICAgICAgICBbc29ydGFibGVdPVwiZ2V0SWZFeGlzdE11bHRpU29ydChjb2x1bW4uZmllbGQpICYmIHJvd0luZGV4ID09PSBjb2x1bW4uYWR2YW5jZWRIZWFkZXIubGVuZ3RoIC0gMVwiXG4gICAgICAgIFtzb3J0RGlyZWN0aW9uXT1cImdldFNvcnREaXJlY3Rpb24oY29sdW1uLmZpZWxkKVwiXG4gICAgICAgIChzb3J0Q2hhbmdlKT1cIm9uSGVhZENsaWNrKCRldmVudCwgY29sdW1uKVwiXG4gICAgICAgIFtmaWx0ZXJhYmxlXT1cImNhbkZpbHRlcmFibGUoY29sdW1uKSAmJiByb3dJbmRleCA9PT0gY29sdW1uLmFkdmFuY2VkSGVhZGVyLmxlbmd0aCAtIDFcIlxuICAgICAgICBbY2xvc2VGaWx0ZXJXaGVuU2Nyb2xsXT1cImNvbHVtbi5jbG9zZUZpbHRlcldoZW5TY3JvbGxcIlxuICAgICAgICBbZmlsdGVyTGlzdF09XCJjb2x1bW4uZmlsdGVyTGlzdFwiXG4gICAgICAgIFtjb2x1bW5dPVwiY29sdW1uXCJcbiAgICAgICAgW2ZpbHRlck11bHRpcGxlXT1cImNvbHVtbi5maWx0ZXJNdWx0aXBsZVwiXG4gICAgICAgIFtmaWx0ZXJCb3hXaWR0aF09XCJjb2x1bW4uZmlsdGVyQm94V2lkdGhcIlxuICAgICAgICBbZmlsdGVyQm94SGVpZ2h0XT1cImNvbHVtbi5maWx0ZXJCb3hIZWlnaHRcIlxuICAgICAgICBbZmlsdGVySWNvbkFjdGl2ZV09XCJjb2x1bW4uZmlsdGVySWNvbkFjdGl2ZVwiXG4gICAgICAgIFtiZWZvcmVGaWx0ZXJdPVwiY29sdW1uLmJlZm9yZUZpbHRlclwiXG4gICAgICAgIFtjdXN0b21GaWx0ZXJUZW1wbGF0ZV09XCJjb2x1bW4uY3VzdG9tRmlsdGVyVGVtcGxhdGVcIlxuICAgICAgICBbZXh0cmFGaWx0ZXJUZW1wbGF0ZV09XCJjb2x1bW4uZXh0cmFGaWx0ZXJUZW1wbGF0ZVwiXG4gICAgICAgIFtzZWFyY2hGbl09XCJjb2x1bW4uc2VhcmNoRm5cIlxuICAgICAgICAoZmlsdGVyQ2hhbmdlKT1cImNvbHVtbi5lbWl0RmlsdGVyRGF0YSgkZXZlbnQpXCJcbiAgICAgICAgKGZpbHRlclRvZ2dsZSk9XCJjb2x1bW4uZW1pdEZpbHRlclRvZ2dsZSgkZXZlbnQpXCJcbiAgICAgICAgW2ZpeGVkTGVmdF09XCJjb2x1bW4uZml4ZWRMZWZ0XCJcbiAgICAgICAgW2lzTGFzdEZpeGVkTGVmdF09XCJjb2x1bW4uZml4ZWRMZWZ0ICYmICFjb2x1bW5zW2NvbEluZGV4ICsgMV0/LmZpeGVkTGVmdFwiXG4gICAgICAgIFtmaXhlZFJpZ2h0XT1cImNvbHVtbi5maXhlZFJpZ2h0XCJcbiAgICAgICAgW2lzRmlyc3RGaXhlZFJpZ2h0XT1cImNvbHVtbi5maXhlZFJpZ2h0ICYmICFjb2x1bW5zW2NvbEluZGV4IC0gMV0/LmZpeGVkUmlnaHRcIlxuICAgICAgICBbbmVzdGVkQ29sdW1uXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LnNob3dIZWFkVGFibGVUb2dnbGVyXCJcbiAgICAgICAgKHRvZ2dsZUNoaWxkcmVuVGFibGVFdmVudCk9XCJ0b2dnbGVDaGlsZHJlblRhYmxlKCRldmVudClcIlxuICAgICAgICAodGFwRXZlbnQpPVwib25UYXAoJGV2ZW50KVwiXG4gICAgICAgIFtpY29uRm9sZFRhYmxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25Gb2xkVGFibGVcIlxuICAgICAgICBbaWNvblVuRm9sZFRhYmxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25VbkZvbGRUYWJsZVwiXG4gICAgICAgIFt0YWJsZVZpZXdSZWZFbGVtZW50XT1cInRhYmxlVmlld1JlZkVsZW1lbnRcIlxuICAgICAgICBbY29sRHJhZ2dhYmxlXT1cImNvbERyYWdnYWJsZSAmJiBjb2xJbmRleCA+IGhlYWQ/LmNvbERyb3BGcmVlemVUbyAtIDFcIlxuICAgICAgICBbY2hpbGRyZW5UYWJsZU9wZW5dPVwiY2hpbGRyZW5UYWJsZU9wZW5cIlxuICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgc2luZHVfaGFuZGxlOiBjb2xEcmFnZ2FibGUgJiYgY29sSW5kZXggPiBoZWFkPy5jb2xEcm9wRnJlZXplVG8gLSAxLFxuICAgICAgICAgICdkcm9wLWZyZWV6ZSc6IGNvbERyYWdnYWJsZSAmJiBjb2xJbmRleCA8IGhlYWQ/LmNvbERyb3BGcmVlemVUb1xuICAgICAgICB9XCJcbiAgICAgID5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJyb3dJbmRleCA8IHJvd3MubGVuZ3RoIC0gMSB8fCAhY29sdW1uLmhlYWRDZWxsVG1wbD8udGVtcGxhdGVcIiBbYXR0ci50aXRsZV09XCJjb2x1bW4uYWR2YW5jZWRIZWFkZXJbcm93SW5kZXhdLmhlYWRlclwiPnt7XG4gICAgICAgICAgY29sdW1uLmFkdmFuY2VkSGVhZGVyW3Jvd0luZGV4XS5oZWFkZXJcbiAgICAgICAgfX08L3NwYW4+XG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4uaGVhZENlbGxUbXBsPy50ZW1wbGF0ZSAmJiByb3dJbmRleCA9PT0gcm93cy5sZW5ndGggLSAxXCI+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJjb2x1bW4uaGVhZENlbGxUbXBsPy50ZW1wbGF0ZVwiXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie1xuICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbixcbiAgICAgICAgICAgICAgJGltcGxpY2l0OiBoZWFkLFxuICAgICAgICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXG4gICAgICAgICAgICAgIGNvbEluZGV4OiBjb2xJbmRleFxuICAgICAgICAgICAgfVwiXG4gICAgICAgICAgPlxuICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC90aD5cbiAgICAgIDx0aFxuICAgICAgICBkSGVhZENlbGxcbiAgICAgICAgKm5nSWY9XCIhY29sdW1uLmFkdmFuY2VkSGVhZGVyICYmIHJvd0luZGV4ID09PSAwXCJcbiAgICAgICAgW21pbldpZHRoXT1cImNvbHVtbi5taW5XaWR0aFwiXG4gICAgICAgIFttYXhXaWR0aF09XCJjb2x1bW4ubWF4V2lkdGhcIlxuICAgICAgICBbYXR0ci5maWVsZF09XCJjb2x1bW4uZmllbGRcIlxuICAgICAgICBbc2hvd1NvcnRJY29uXT1cInNob3dTb3J0SWNvblwiXG4gICAgICAgIFtzaG93RmlsdGVySWNvbl09XCJzaG93RmlsdGVySWNvblwiXG4gICAgICAgIFtzb3J0YWJsZV09XCJnZXRJZkV4aXN0TXVsdGlTb3J0KGNvbHVtbi5maWVsZClcIlxuICAgICAgICBbc29ydERpcmVjdGlvbl09XCJnZXRTb3J0RGlyZWN0aW9uKGNvbHVtbi5maWVsZClcIlxuICAgICAgICAoc29ydENoYW5nZSk9XCJvbkhlYWRDbGljaygkZXZlbnQsIGNvbHVtbilcIlxuICAgICAgICBbZmlsdGVyYWJsZV09XCJjYW5GaWx0ZXJhYmxlKGNvbHVtbilcIlxuICAgICAgICBbY2xvc2VGaWx0ZXJXaGVuU2Nyb2xsXT1cImNvbHVtbi5jbG9zZUZpbHRlcldoZW5TY3JvbGxcIlxuICAgICAgICBbZmlsdGVyTGlzdF09XCJjb2x1bW4uZmlsdGVyTGlzdFwiXG4gICAgICAgIFtjb2x1bW5dPVwiY29sdW1uXCJcbiAgICAgICAgW2ZpbHRlck11bHRpcGxlXT1cImNvbHVtbi5maWx0ZXJNdWx0aXBsZVwiXG4gICAgICAgIFtmaWx0ZXJCb3hXaWR0aF09XCJjb2x1bW4uZmlsdGVyQm94V2lkdGhcIlxuICAgICAgICBbZmlsdGVyQm94SGVpZ2h0XT1cImNvbHVtbi5maWx0ZXJCb3hIZWlnaHRcIlxuICAgICAgICBbZmlsdGVySWNvbkFjdGl2ZV09XCJjb2x1bW4uZmlsdGVySWNvbkFjdGl2ZVwiXG4gICAgICAgIFtiZWZvcmVGaWx0ZXJdPVwiY29sdW1uLmJlZm9yZUZpbHRlclwiXG4gICAgICAgIFtjdXN0b21GaWx0ZXJUZW1wbGF0ZV09XCJjb2x1bW4uY3VzdG9tRmlsdGVyVGVtcGxhdGVcIlxuICAgICAgICBbZXh0cmFGaWx0ZXJUZW1wbGF0ZV09XCJjb2x1bW4uZXh0cmFGaWx0ZXJUZW1wbGF0ZVwiXG4gICAgICAgIFtzZWFyY2hGbl09XCJjb2x1bW4uc2VhcmNoRm5cIlxuICAgICAgICAoZmlsdGVyQ2hhbmdlKT1cImNvbHVtbi5lbWl0RmlsdGVyRGF0YSgkZXZlbnQpXCJcbiAgICAgICAgKGZpbHRlclRvZ2dsZSk9XCJjb2x1bW4uZW1pdEZpbHRlclRvZ2dsZSgkZXZlbnQpXCJcbiAgICAgICAgW2ZpeGVkTGVmdF09XCJjb2x1bW4uZml4ZWRMZWZ0XCJcbiAgICAgICAgW2lzTGFzdEZpeGVkTGVmdF09XCJjb2x1bW4uZml4ZWRMZWZ0ICYmICFjb2x1bW5zW2NvbEluZGV4ICsgMV0/LmZpeGVkTGVmdFwiXG4gICAgICAgIFtmaXhlZFJpZ2h0XT1cImNvbHVtbi5maXhlZFJpZ2h0XCJcbiAgICAgICAgW2lzRmlyc3RGaXhlZFJpZ2h0XT1cImNvbHVtbi5maXhlZFJpZ2h0ICYmICFjb2x1bW5zW2NvbEluZGV4IC0gMV0/LmZpeGVkUmlnaHRcIlxuICAgICAgICBbbmVzdGVkQ29sdW1uXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LnNob3dIZWFkVGFibGVUb2dnbGVyXCJcbiAgICAgICAgKHRvZ2dsZUNoaWxkcmVuVGFibGVFdmVudCk9XCJ0b2dnbGVDaGlsZHJlblRhYmxlKCRldmVudClcIlxuICAgICAgICAodGFwRXZlbnQpPVwib25UYXAoJGV2ZW50KVwiXG4gICAgICAgIFtpY29uRm9sZFRhYmxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25Gb2xkVGFibGVcIlxuICAgICAgICBbaWNvblVuRm9sZFRhYmxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25VbkZvbGRUYWJsZVwiXG4gICAgICAgIFt0YWJsZVZpZXdSZWZFbGVtZW50XT1cInRhYmxlVmlld1JlZkVsZW1lbnRcIlxuICAgICAgICBbY29sRHJhZ2dhYmxlXT1cImNvbERyYWdnYWJsZSAmJiBjb2xJbmRleCA+IGhlYWQ/LmNvbERyb3BGcmVlemVUbyAtIDFcIlxuICAgICAgICBbY2hpbGRyZW5UYWJsZU9wZW5dPVwiY2hpbGRyZW5UYWJsZU9wZW5cIlxuICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgc2luZHVfaGFuZGxlOiBjb2xEcmFnZ2FibGUgJiYgY29sSW5kZXggPiBoZWFkPy5jb2xEcm9wRnJlZXplVG8gLSAxLFxuICAgICAgICAgICdkcm9wLWZyZWV6ZSc6IGNvbERyYWdnYWJsZSAmJiBjb2xJbmRleCA8IGhlYWQ/LmNvbERyb3BGcmVlemVUb1xuICAgICAgICB9XCJcbiAgICAgICAgW3Jlc2l6ZUVuYWJsZWRdPVwicmVzaXplYWJsZVwiXG4gICAgICAgIChyZXNpemVFbmRFdmVudCk9XCJvblJlc2l6ZSgkZXZlbnQsIGNvbHVtbilcIlxuICAgICAgICAocmVzaXplU3RhcnRFdmVudCk9XCJvbkJlZ2luUmVzaXplKCRldmVudClcIlxuICAgICAgICAocmVzaXppbmdFdmVudCk9XCJvblJlc2l6aW5nKCRldmVudCwgY29sdW1uKVwiXG4gICAgICAgIFthdHRyLnJvd3NwYW5dPVwicm93cz8ubGVuZ3RoIHx8IDFcIlxuICAgICAgPlxuICAgICAgICA8c3BhbiAqbmdJZj1cIiFjb2x1bW4uaGVhZENlbGxUbXBsPy50ZW1wbGF0ZVwiIFthdHRyLnRpdGxlXT1cImNvbHVtbi5oZWFkZXJcIj57eyBjb2x1bW4uaGVhZGVyIH19PC9zcGFuPlxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sdW1uLmhlYWRDZWxsVG1wbD8udGVtcGxhdGVcIj5cbiAgICAgICAgICA8bmctdGVtcGxhdGVcbiAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNvbHVtbi5oZWFkQ2VsbFRtcGw/LnRlbXBsYXRlXCJcbiAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGNvbHVtbjogY29sdW1uLCAkaW1wbGljaXQ6IGhlYWQgfVwiXG4gICAgICAgICAgPjwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC90aD5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8IS0tIDx0aCB3aWR0aD1cIjBcIiAgKm5nSWY9XCJyZXNpemVhYmxlXCI+PC90aD4gLS0+XG4gIDwvdHI+XG48L25nLXRlbXBsYXRlPlxuIl19