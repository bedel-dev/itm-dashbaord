import { ChangeDetectorRef, Component, ComponentFactoryResolver, ElementRef, HostBinding, Inject, Input, NgZone, ViewChild } from '@angular/core';
import { InputNumberComponent } from 'ng-devui/input-number';
import { SelectComponent } from 'ng-devui/select';
import { TreeSelectComponent } from 'ng-devui/tree-select';
import { stopPropagationIfExist } from 'ng-devui/utils';
import { fromEvent } from 'rxjs';
import { DATA_TABLE_ROW } from './data-table-row.token';
import { DATA_TABLE } from './data-table.token';
import { EditorDirective } from './editor-host.directive';
import { DataTableColumnTmplComponent } from './tmpl/data-table-column-tmpl.component';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/datepicker";
import * as i2 from "@angular/common";
import * as i3 from "./editor-host.directive";
import * as i4 from "@angular/forms";
import * as i5 from "ng-devui/common";
import * as i6 from "ng-devui/utils";
import * as i7 from "./display-cell-value.pipe";
export class DataTableCellComponent {
    constructor(dt, changeDetectorRef, componentFactoryResolver, rowComponent, cellRef, ngZone) {
        this.dt = dt;
        this.changeDetectorRef = changeDetectorRef;
        this.componentFactoryResolver = componentFactoryResolver;
        this.rowComponent = rowComponent;
        this.cellRef = cellRef;
        this.ngZone = ngZone;
        this.clickCount = 0; // 记录点击次数
    }
    get isEditable() {
        return this.column.editable && !this.isCellEdit && this.column.extraOptions?.editableTip !== 'btn';
    }
    ngOnInit() {
        this.forceUpdateSubscription = this.rowComponent.forceUpdateEvent.subscribe(_ => this.forceUpdate());
        if (this.column.editable) {
            this.tdMousedownSubscription = fromEvent(this.cellRef.nativeElement, 'mousedown').subscribe(event => {
                this.clickInTd = true;
            });
            this.tdMouseupSubscription = fromEvent(this.cellRef.nativeElement, 'mouseup').subscribe(event => {
                this.clickInTd = false;
            });
        }
        this.ngZone.runOutsideAngular(() => {
            this.cellRef.nativeElement.addEventListener('click', this.onCellClick.bind(this));
            this.cellRef.nativeElement.addEventListener('dblclick', this.onCellDBClick.bind(this));
        });
    }
    ngOnChanges(changes) {
        const rowItem = changes['rowItem'];
        if (rowItem) {
            this.updateEditable(rowItem);
        }
    }
    updateEditable(rowItem) {
        const currentConfig = rowItem.currentValue['$editDeniedConfig'];
        if (!currentConfig) {
            if (this.fieldEditDenied) {
                this.fieldEditDenied = false;
            }
        }
        else {
            const index = currentConfig.findIndex((config) => {
                return config === this.column.field;
            });
            if (index === -1) {
                if (this.fieldEditDenied) {
                    this.fieldEditDenied = false;
                }
            }
            else {
                if (!this.fieldEditDenied) {
                    this.fieldEditDenied = true;
                }
            }
        }
    }
    onCellClick($event) {
        const cellSelectedEventArg = {
            rowIndex: this.rowIndex,
            colIndex: this.colIndex,
            column: this.column,
            rowItem: this.rowItem,
            cellComponent: this,
            rowComponent: this.rowComponent
        };
        this.clickCount++;
        if (this.clickCount === 1) {
            this.timeoutId = setTimeout(() => {
                if (this.clickCount === 1) {
                    this.dt.onCellClick(cellSelectedEventArg);
                }
                this.clickCount = 0;
                clearTimeout(this.timeoutId);
            }, this.timeout);
        }
    }
    onCellDBClick($event) {
        const cellSelectedEventArg = {
            rowIndex: this.rowIndex,
            colIndex: this.colIndex,
            column: this.column,
            rowItem: this.rowItem,
            cellComponent: this,
            rowComponent: this.rowComponent
        };
        this.dt.onCellDBClick(cellSelectedEventArg);
    }
    forceUpdate() {
        this.changeDetectorRef.markForCheck();
    }
    finishCellEdit($event) {
        if (this.editModel !== 'cell') {
            return;
        }
        this.isCellEdit = false;
        this.editorHost.viewContainerRef.clear();
        this.dynamicEditorActive = false;
        this.templateEditorActive = false;
        if (this.documentClickSubscription) {
            this.unSubscription(this.documentClickSubscription);
        }
        if (this.cellEditorClickSubscription) {
            this.unSubscription(this.cellEditorClickSubscription);
        }
        stopPropagationIfExist($event);
        this.dt.onCellEditEnd({
            rowIndex: this.rowIndex,
            colIndex: this.colIndex,
            column: this.column,
            rowItem: this.rowItem,
            cellComponent: this,
            rowComponent: this.rowComponent
        });
    }
    isCellEditEnable(column, rowItem) {
        if (this.editModel === 'cell') {
            return this.isCellEdit;
        }
        return this.isEditRow;
    }
    ngOnDestroy() {
        if (this.forceUpdateSubscription) {
            this.unSubscription(this.forceUpdateSubscription);
        }
        if (this.documentClickSubscription) {
            this.unSubscription(this.documentClickSubscription);
        }
        if (this.cellEditorClickSubscription) {
            this.unSubscription(this.cellEditorClickSubscription);
        }
        if (this.cellActionSubscription) {
            this.unSubscription(this.cellActionSubscription);
        }
        if (this.tdMousedownSubscription) {
            this.unSubscription(this.tdMousedownSubscription);
        }
        if (this.tdMouseupSubscription) {
            this.unSubscription(this.tdMouseupSubscription);
        }
    }
    unSubscription(sbscription) {
        if (sbscription) {
            sbscription.unsubscribe();
            /* eslint-disable-next-line no-param-reassign */
            sbscription = null;
        }
    }
    creatCellEditor() {
        let componentFactory;
        let editorComponent;
        switch (this.column.fieldType) {
            case 'number':
                editorComponent = InputNumberComponent;
                break;
            case 'select':
                editorComponent = SelectComponent;
                break;
            case 'treeSelect':
                editorComponent = TreeSelectComponent;
                break;
            default:
                this.templateEditorActive = true;
                break;
        }
        if (editorComponent) {
            componentFactory = this.componentFactoryResolver.resolveComponentFactory(editorComponent);
            const viewContainerRef = this.editorHost.viewContainerRef;
            viewContainerRef.clear();
            const componentRef = viewContainerRef.createComponent(componentFactory);
            const componentInstance = componentRef.instance;
            if (this.column.extraOptions) {
                componentFactory.inputs.forEach((input) => {
                    if (this.column.extraOptions[input.templateName]) {
                        componentInstance[input.propName] = this.column.extraOptions[input.templateName];
                    }
                });
            }
            componentInstance.writeValue(this.rowItem[this.column.field]);
            componentInstance.registerOnChange((value) => {
                this.rowItem[this.column.field] = value;
                if (this.column.extraOptions && this.column.extraOptions.finishEditingAfterValueChange) {
                    this.finishCellEdit();
                }
            });
            this.dynamicEditorActive = true;
        }
    }
    cellEditing($event) {
        $event.stopPropagation();
        $event.preventDefault();
        let beforeEdit = Promise.resolve(undefined);
        if (this.dt.beforeCellEdit) {
            beforeEdit = this.dt.beforeCellEdit(this.rowItem, this.column);
        }
        beforeEdit.then((extraOptions) => {
            if (extraOptions) {
                this.column.extraOptions = extraOptions;
            }
            this.dt.cellEditorClickEvent.emit($event);
            const cellSelectedEventArg = {
                rowIndex: this.rowIndex,
                colIndex: this.colIndex,
                column: this.column,
                rowItem: this.rowItem,
                cellComponent: this,
                rowComponent: this.rowComponent
            };
            if (this.column.editable && this.editModel === 'cell') {
                this.isCellEdit = true;
                this.creatCellEditor();
                this.documentClickSubscription = this.dt.documentClickEvent.subscribe(event => {
                    if (event === 'cancel' || (!this.cellRef.nativeElement.contains(event.target) && !this.clickInTd)) {
                        this.ngZone.run(() => {
                            this.finishCellEdit();
                        });
                    }
                    this.clickInTd = false;
                });
                this.cellEditorClickSubscription = this.dt.cellEditorClickEvent.subscribe(event => {
                    if (!this.cellRef.nativeElement.contains(event.target)) {
                        this.finishCellEdit();
                    }
                });
                this.dt.onCellEditStart(cellSelectedEventArg);
            }
        });
    }
    toggleChildTable(rowItem) {
        rowItem.$isChildTableOpen = !rowItem.$isChildTableOpen;
        this.dt.setRowChildToggleStatus(rowItem, rowItem.$isChildTableOpen);
    }
}
DataTableCellComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DataTableCellComponent, deps: [{ token: DATA_TABLE }, { token: i0.ChangeDetectorRef }, { token: i0.ComponentFactoryResolver }, { token: DATA_TABLE_ROW }, { token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });
DataTableCellComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: DataTableCellComponent, selector: "d-data-table-cell,[dDataTableCell]", inputs: { rowIndex: "rowIndex", colIndex: "colIndex", column: "column", rowItem: "rowItem", editModel: "editModel", isEditRow: "isEditRow", timeout: "timeout", tableLevel: "tableLevel" }, host: { properties: { "class.editable-cell": "this.isEditable" } }, viewQueries: [{ propertyName: "editorHost", first: true, predicate: EditorDirective, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<ng-template *ngIf=\"!column.editable || fieldEditDenied\" [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n\n<ng-container *ngIf=\"column.editable && !fieldEditDenied\">\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip === 'btn'\" class=\"cell-container\">\n    <div class=\"cell-container-inner not-break modify-holder\">\n      <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n      <span class=\"cell-modify\" (click)=\"cellEditing($event)\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16px\" height=\"16px\" version=\"1.1\">\n          <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"none\" stroke-width=\"1\">\n            <path\n              d=\"M 9.48528 3.41421 L 10.8995 2 L 13.7279 4.82843 L 12.3137 6.24264 L 9.48528 3.41421 Z M 5.24264 13.3137 L 2.41421 13.3137 L 2.41421 10.4853 L 8.77817 4.12132 L 11.6066 6.94975 L 5.24264 13.3137 Z\"\n            />\n          </g>\n        </svg>\n      </span>\n    </div>\n  </div>\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip !== 'btn'\" class=\"cell-editable\" (click)=\"cellEditing($event)\">\n    <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n  </div>\n  <div [ngClass]=\"{ 'edit-padding-fix': dynamicEditorActive }\">\n    <ng-template dEditorHost></ng-template>\n  </div>\n  <ng-template\n    *ngIf=\"templateEditorActive\"\n    [ngTemplateOutlet]=\"column.cellEditCmp ? column.cellEditCmp.template : column.fieldType === 'date' ? dateEditTempate : textEditTempate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      $implicit: this,\n      row: rowComponent\n    }\"\n  >\n  </ng-template>\n</ng-container>\n\n<ng-template #cellViewTemp>\n  <ng-container *ngIf=\"column.nestedColumn\">\n    <span *ngIf=\"tableLevel > 0\" class=\"cell-placeholder\" [ngStyle]=\"{ width: tableLevel * column.nestedColumnIndent + 'px' }\"></span>\n    <span [style.visibility]=\"rowItem.children ? 'visible' : 'hidden'\" class=\"childtable-toggler\" (click)=\"toggleChildTable(rowItem)\">\n      <ng-container *ngIf=\"rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-close\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <rect x=\"4\" y=\"7\" width=\"8\" height=\"2\"></rect>\n          </g>\n        </svg>\n\n        <span *ngIf=\"column.extraOptions?.iconFoldTable\" [innerHTML]=\"column.extraOptions?.iconFoldTable | safe: 'html'\"></span>\n      </ng-container>\n      <ng-container *ngIf=\"!rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconUnFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-open-folder\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <path\n              d=\"M8.75,4 L8.75,7.25 L12,7.25 L12,8.75 L8.749,8.75 L8.75,12 L7.25,12 L7.249,8.75 L4,8.75 L4,7.25 L7.25,7.25 L7.25,4 L8.75,4 Z\"\n            ></path>\n          </g>\n        </svg>\n        <span *ngIf=\"column.extraOptions?.iconUnFoldTable\" [innerHTML]=\"column.extraOptions?.iconUnFoldTable | safe: 'html'\"></span>\n      </ng-container>\n    </span>\n  </ng-container>\n  <ng-template\n    [ngTemplateOutlet]=\"column.cellCmp ? column.cellCmp.template : textViewTemplate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      cellItem: rowItem[column.field],\n      cellValue: rowItem | disPlayCellValuePipe: rowIndex:column,\n      $implicit: this,\n      row: rowComponent,\n      tableLevel: tableLevel\n    }\"\n  >\n  </ng-template>\n</ng-template>\n\n<ng-template let-cellValue=\"cellValue\" #textViewTemplate>\n  <span [attr.title]=\"cellValue\">{{ cellValue }}</span>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #textEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"form-group full-width\">\n      <div class=\"input-group full-width\">\n        <input\n          [dAutoFocus]=\"cell && cell.isCellEdit\"\n          [type]=\"column.fieldType\"\n          class=\"devui-form-control\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          [attr.maxlength]=\"column.extraOptions?.maxlength\"\n          [attr.minlength]=\"column.extraOptions?.minlength\"\n          [attr.pattern]=\"column.extraOptions?.pattern\"\n          (keydown.enter)=\"cell && cell.finishCellEdit($event)\"\n          [placeholder]=\"column.placeholder || ''\"\n        />\n      </div>\n    </div>\n  </form>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #dateEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"devui-form-group\">\n      <div class=\"devui-input-group devui-dropdown-origin\">\n        <input\n          class=\"devui-form-control search\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          dDatepicker\n          appendToBody\n          [dateFormat]=\"column.extraOptions?.dateFormat\"\n          #datePicker=\"datepicker\"\n          (ngModelChange)=\"!column.extraOptions?.showTime && cell && cell.finishCellEdit()\"\n          [maxDate]=\"column.extraOptions?.maxDate\"\n          [minDate]=\"column.extraOptions?.minDate\"\n          [cssClass]=\"column.extraOptions?.cssClass\"\n          [dateConfig]=\"column.extraOptions?.dateConfig\"\n          [locale]=\"column.extraOptions?.locale\"\n          [customViewTemplate]=\"column.extraOptions?.customViewTemplate\"\n          [disabled]=\"column.extraOptions?.disabled\"\n          [placeholder]=\"column.placeholder || ''\"\n          [autoOpen]=\"true\"\n          [showTime]=\"column.extraOptions?.showTime\"\n        />\n        <div class=\"devui-input-group-addon\" (click)=\"datePicker.toggle()\">\n          <i class=\"icon icon-calendar\"></i>\n        </div>\n      </div>\n    </div>\n  </form>\n</ng-template>\n", components: [{ type: i1.DatePickerAppendToBodyComponent, selector: "[dDatepicker][appendToBody]", inputs: ["appendToBodyDirections", "locale", "cssClass", "disabled", "dateConverter", "customViewTemplate", "autoOpen", "showAnimation", "showTime", "dateConfig", "dateFormat", "maxDate", "minDate"], outputs: ["selectedDateChange"], exportAs: ["datepicker"] }], directives: [{ type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i3.EditorDirective, selector: "[dEditorHost]" }, { type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i4.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i4.NgForm, selector: "form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]", inputs: ["ngFormOptions"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i5.AutoFocusDirective, selector: "[dAutoFocus]", inputs: ["dAutoFocus"] }, { type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i4.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { type: i4.MinLengthValidator, selector: "[minlength][formControlName],[minlength][formControl],[minlength][ngModel]", inputs: ["minlength"] }, { type: i4.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }], pipes: { "safe": i6.SafePipe, "disPlayCellValuePipe": i7.DisPlayCellValuePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DataTableCellComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-data-table-cell,[dDataTableCell]', preserveWhitespaces: false, template: "<ng-template *ngIf=\"!column.editable || fieldEditDenied\" [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n\n<ng-container *ngIf=\"column.editable && !fieldEditDenied\">\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip === 'btn'\" class=\"cell-container\">\n    <div class=\"cell-container-inner not-break modify-holder\">\n      <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n      <span class=\"cell-modify\" (click)=\"cellEditing($event)\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16px\" height=\"16px\" version=\"1.1\">\n          <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"none\" stroke-width=\"1\">\n            <path\n              d=\"M 9.48528 3.41421 L 10.8995 2 L 13.7279 4.82843 L 12.3137 6.24264 L 9.48528 3.41421 Z M 5.24264 13.3137 L 2.41421 13.3137 L 2.41421 10.4853 L 8.77817 4.12132 L 11.6066 6.94975 L 5.24264 13.3137 Z\"\n            />\n          </g>\n        </svg>\n      </span>\n    </div>\n  </div>\n  <div *ngIf=\"!isCellEdit && column.extraOptions?.editableTip !== 'btn'\" class=\"cell-editable\" (click)=\"cellEditing($event)\">\n    <ng-template [ngTemplateOutlet]=\"cellViewTemp\"></ng-template>\n  </div>\n  <div [ngClass]=\"{ 'edit-padding-fix': dynamicEditorActive }\">\n    <ng-template dEditorHost></ng-template>\n  </div>\n  <ng-template\n    *ngIf=\"templateEditorActive\"\n    [ngTemplateOutlet]=\"column.cellEditCmp ? column.cellEditCmp.template : column.fieldType === 'date' ? dateEditTempate : textEditTempate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      $implicit: this,\n      row: rowComponent\n    }\"\n  >\n  </ng-template>\n</ng-container>\n\n<ng-template #cellViewTemp>\n  <ng-container *ngIf=\"column.nestedColumn\">\n    <span *ngIf=\"tableLevel > 0\" class=\"cell-placeholder\" [ngStyle]=\"{ width: tableLevel * column.nestedColumnIndent + 'px' }\"></span>\n    <span [style.visibility]=\"rowItem.children ? 'visible' : 'hidden'\" class=\"childtable-toggler\" (click)=\"toggleChildTable(rowItem)\">\n      <ng-container *ngIf=\"rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-close\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <rect x=\"4\" y=\"7\" width=\"8\" height=\"2\"></rect>\n          </g>\n        </svg>\n\n        <span *ngIf=\"column.extraOptions?.iconFoldTable\" [innerHTML]=\"column.extraOptions?.iconFoldTable | safe: 'html'\"></span>\n      </ng-container>\n      <ng-container *ngIf=\"!rowItem['$isChildTableOpen']\">\n        <svg\n          *ngIf=\"!column.extraOptions?.iconUnFoldTable\"\n          width=\"16px\"\n          height=\"16px\"\n          viewBox=\"0 0 16 16\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          class=\"svg-icon svg-icon-open-folder\"\n        >\n          <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n            <rect x=\"0.5\" y=\"0.5\" width=\"15\" height=\"15\" rx=\"2\"></rect>\n            <path\n              d=\"M8.75,4 L8.75,7.25 L12,7.25 L12,8.75 L8.749,8.75 L8.75,12 L7.25,12 L7.249,8.75 L4,8.75 L4,7.25 L7.25,7.25 L7.25,4 L8.75,4 Z\"\n            ></path>\n          </g>\n        </svg>\n        <span *ngIf=\"column.extraOptions?.iconUnFoldTable\" [innerHTML]=\"column.extraOptions?.iconUnFoldTable | safe: 'html'\"></span>\n      </ng-container>\n    </span>\n  </ng-container>\n  <ng-template\n    [ngTemplateOutlet]=\"column.cellCmp ? column.cellCmp.template : textViewTemplate\"\n    [ngTemplateOutletContext]=\"{\n      rowIndex: rowIndex,\n      colIndex: colIndex,\n      column: column,\n      rowItem: rowItem,\n      cellItem: rowItem[column.field],\n      cellValue: rowItem | disPlayCellValuePipe: rowIndex:column,\n      $implicit: this,\n      row: rowComponent,\n      tableLevel: tableLevel\n    }\"\n  >\n  </ng-template>\n</ng-template>\n\n<ng-template let-cellValue=\"cellValue\" #textViewTemplate>\n  <span [attr.title]=\"cellValue\">{{ cellValue }}</span>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #textEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"form-group full-width\">\n      <div class=\"input-group full-width\">\n        <input\n          [dAutoFocus]=\"cell && cell.isCellEdit\"\n          [type]=\"column.fieldType\"\n          class=\"devui-form-control\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          [attr.maxlength]=\"column.extraOptions?.maxlength\"\n          [attr.minlength]=\"column.extraOptions?.minlength\"\n          [attr.pattern]=\"column.extraOptions?.pattern\"\n          (keydown.enter)=\"cell && cell.finishCellEdit($event)\"\n          [placeholder]=\"column.placeholder || ''\"\n        />\n      </div>\n    </div>\n  </form>\n</ng-template>\n\n<ng-template let-rowIndex=\"rowIndex\" let-colIndex=\"colIndex\" let-rowItem=\"rowItem\" let-column=\"column\" let-cell=\"\" #dateEditTempate>\n  <form class=\"form-inline edit-padding-fix\">\n    <div class=\"devui-form-group\">\n      <div class=\"devui-input-group devui-dropdown-origin\">\n        <input\n          class=\"devui-form-control search\"\n          [name]=\"column.field\"\n          [(ngModel)]=\"rowItem[column.field]\"\n          dDatepicker\n          appendToBody\n          [dateFormat]=\"column.extraOptions?.dateFormat\"\n          #datePicker=\"datepicker\"\n          (ngModelChange)=\"!column.extraOptions?.showTime && cell && cell.finishCellEdit()\"\n          [maxDate]=\"column.extraOptions?.maxDate\"\n          [minDate]=\"column.extraOptions?.minDate\"\n          [cssClass]=\"column.extraOptions?.cssClass\"\n          [dateConfig]=\"column.extraOptions?.dateConfig\"\n          [locale]=\"column.extraOptions?.locale\"\n          [customViewTemplate]=\"column.extraOptions?.customViewTemplate\"\n          [disabled]=\"column.extraOptions?.disabled\"\n          [placeholder]=\"column.placeholder || ''\"\n          [autoOpen]=\"true\"\n          [showTime]=\"column.extraOptions?.showTime\"\n        />\n        <div class=\"devui-input-group-addon\" (click)=\"datePicker.toggle()\">\n          <i class=\"icon icon-calendar\"></i>\n        </div>\n      </div>\n    </div>\n  </form>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [DATA_TABLE]
                }] }, { type: i0.ChangeDetectorRef }, { type: i0.ComponentFactoryResolver }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DATA_TABLE_ROW]
                }] }, { type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { editorHost: [{
                type: ViewChild,
                args: [EditorDirective]
            }], rowIndex: [{
                type: Input
            }], colIndex: [{
                type: Input
            }], column: [{
                type: Input
            }], rowItem: [{
                type: Input
            }], editModel: [{
                type: Input
            }], isEditRow: [{
                type: Input
            }], timeout: [{
                type: Input
            }], tableLevel: [{
                type: Input
            }], isEditable: [{
                type: HostBinding,
                args: ['class.editable-cell']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS10YWJsZS1jZWxsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvZGF0YS10YWJsZS1jZWxsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uL2RldnVpL2RhdGEtdGFibGUvZGF0YS10YWJsZS1jZWxsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULHdCQUF3QixFQUN4QixVQUFVLEVBQ1YsV0FBVyxFQUNYLE1BQU0sRUFDTixLQUFLLEVBQ0wsTUFBTSxFQUtOLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM3RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDbEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDM0QsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDL0MsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDMUQsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0seUNBQXlDLENBQUM7Ozs7Ozs7OztBQU92RixNQUFNLE9BQU8sc0JBQXNCO0lBNEJqQyxZQUF1QyxFQUFPLEVBQVUsaUJBQW9DLEVBQ3hFLHdCQUFrRCxFQUMzQixZQUFpQixFQUFVLE9BQW1CLEVBQVUsTUFBYztRQUYxRSxPQUFFLEdBQUYsRUFBRSxDQUFLO1FBQVUsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFt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QUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN0RSxDQUFDOzttSEEzUlUsc0JBQXNCLGtCQTRCYixVQUFVLHNGQUVWLGNBQWM7dUdBOUJ2QixzQkFBc0Isc1hBQ3RCLGVBQWUscUVDL0I1Qiw0dk5BNEpBOzJGRDlIYSxzQkFBc0I7a0JBTGxDLFNBQVM7K0JBQ0Usb0NBQW9DLHVCQUV6QixLQUFLOzswQkE4QmIsTUFBTTsyQkFBQyxVQUFVOzswQkFFakIsTUFBTTsyQkFBQyxjQUFjOzBGQTdCTixVQUFVO3NCQUFyQyxTQUFTO3VCQUFDLGVBQWU7Z0JBQ2pCLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csVUFBVTtzQkFBbEIsS0FBSztnQkFFa0MsVUFBVTtzQkFBakQsV0FBVzt1QkFBQyxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBJbmplY3QsXG4gIElucHV0LFxuICBOZ1pvbmUsXG4gIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIFNpbXBsZUNoYW5nZSxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSW5wdXROdW1iZXJDb21wb25lbnQgfSBmcm9tICduZy1kZXZ1aS9pbnB1dC1udW1iZXInO1xuaW1wb3J0IHsgU2VsZWN0Q29tcG9uZW50IH0gZnJvbSAnbmctZGV2dWkvc2VsZWN0JztcbmltcG9ydCB7IFRyZWVTZWxlY3RDb21wb25lbnQgfSBmcm9tICduZy1kZXZ1aS90cmVlLXNlbGVjdCc7XG5pbXBvcnQgeyBzdG9wUHJvcGFnYXRpb25JZkV4aXN0IH0gZnJvbSAnbmctZGV2dWkvdXRpbHMnO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IERBVEFfVEFCTEVfUk9XIH0gZnJvbSAnLi9kYXRhLXRhYmxlLXJvdy50b2tlbic7XG5pbXBvcnQgeyBEQVRBX1RBQkxFIH0gZnJvbSAnLi9kYXRhLXRhYmxlLnRva2VuJztcbmltcG9ydCB7IEVkaXRvckRpcmVjdGl2ZSB9IGZyb20gJy4vZWRpdG9yLWhvc3QuZGlyZWN0aXZlJztcbmltcG9ydCB7IERhdGFUYWJsZUNvbHVtblRtcGxDb21wb25lbnQgfSBmcm9tICcuL3RtcGwvZGF0YS10YWJsZS1jb2x1bW4tdG1wbC5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkLWRhdGEtdGFibGUtY2VsbCxbZERhdGFUYWJsZUNlbGxdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RhdGEtdGFibGUtY2VsbC5jb21wb25lbnQuaHRtbCcsXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBEYXRhVGFibGVDZWxsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XG4gIEBWaWV3Q2hpbGQoRWRpdG9yRGlyZWN0aXZlKSBlZGl0b3JIb3N0OiBFZGl0b3JEaXJlY3RpdmU7XG4gIEBJbnB1dCgpIHJvd0luZGV4OiBudW1iZXI7XG4gIEBJbnB1dCgpIGNvbEluZGV4OiBudW1iZXI7XG4gIEBJbnB1dCgpIGNvbHVtbjogRGF0YVRhYmxlQ29sdW1uVG1wbENvbXBvbmVudDtcbiAgQElucHV0KCkgcm93SXRlbTogYW55O1xuICBASW5wdXQoKSBlZGl0TW9kZWw6IHN0cmluZztcbiAgQElucHV0KCkgaXNFZGl0Um93OiBib29sZWFuO1xuICBASW5wdXQoKSB0aW1lb3V0OiBudW1iZXI7XG4gIEBJbnB1dCgpIHRhYmxlTGV2ZWw6IG51bWJlcjtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmVkaXRhYmxlLWNlbGwnKSBnZXQgaXNFZGl0YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2x1bW4uZWRpdGFibGUgJiYgIXRoaXMuaXNDZWxsRWRpdCAmJiB0aGlzLmNvbHVtbi5leHRyYU9wdGlvbnM/LmVkaXRhYmxlVGlwICE9PSAnYnRuJztcbiAgfVxuICBpc0NlbGxFZGl0OiBib29sZWFuO1xuICBmb3JjZVVwZGF0ZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBkb2N1bWVudENsaWNrU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHRkTW91c2Vkb3duU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHRkTW91c2V1cFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBjbGlja0luVGQ6IGJvb2xlYW47XG4gIGNlbGxFZGl0b3JDbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBjZWxsQWN0aW9uU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIGNsaWNrQ291bnQgPSAwOyAvLyDorrDlvZXngrnlh7vmrKHmlbBcbiAgdGltZW91dElkOyAvLyDlu7bml7ZpZFxuICBmaWVsZEVkaXREZW5pZWQ6IGJvb2xlYW47XG4gIHRlbXBsYXRlRWRpdG9yQWN0aXZlOiBib29sZWFuOyAvLyDpgJrov4fmqKHmnb/nlJ/miJDnmoTnvJbovpHmjqfku7bmv4DmtLtcbiAgZHluYW1pY0VkaXRvckFjdGl2ZTogYm9vbGVhbjsgLy8g5Yqo5oCB55Sf5oiQ55qE57yW6L6R5o6n5Lu25r+A5rS7XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChEQVRBX1RBQkxFKSBwdWJsaWMgZHQ6IGFueSwgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICAgIHByaXZhdGUgY29tcG9uZW50RmFjdG9yeVJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgICAgICAgICAgIEBJbmplY3QoREFUQV9UQUJMRV9ST1cpIHB1YmxpYyByb3dDb21wb25lbnQ6IGFueSwgcHJpdmF0ZSBjZWxsUmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XG5cbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZm9yY2VVcGRhdGVTdWJzY3JpcHRpb24gPSB0aGlzLnJvd0NvbXBvbmVudC5mb3JjZVVwZGF0ZUV2ZW50LnN1YnNjcmliZShfID0+IHRoaXMuZm9yY2VVcGRhdGUoKSk7XG4gICAgaWYgKHRoaXMuY29sdW1uLmVkaXRhYmxlKSB7XG4gICAgICB0aGlzLnRkTW91c2Vkb3duU3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KHRoaXMuY2VsbFJlZi5uYXRpdmVFbGVtZW50LCAnbW91c2Vkb3duJykuc3Vic2NyaWJlKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy5jbGlja0luVGQgPSB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudGRNb3VzZXVwU3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KHRoaXMuY2VsbFJlZi5uYXRpdmVFbGVtZW50LCAnbW91c2V1cCcpLnN1YnNjcmliZShldmVudCA9PiB7XG4gICAgICAgIHRoaXMuY2xpY2tJblRkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5jZWxsUmVmLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgdGhpcy5vbkNlbGxDbGljay5iaW5kKHRoaXMpXG4gICAgICApO1xuICAgICAgdGhpcy5jZWxsUmVmLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2RibGNsaWNrJyxcbiAgICAgICAgdGhpcy5vbkNlbGxEQkNsaWNrLmJpbmQodGhpcylcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiB7IFtwcm9wS2V5OiBzdHJpbmddOiBTaW1wbGVDaGFuZ2UgfSkge1xuICAgIGNvbnN0IHJvd0l0ZW0gPSBjaGFuZ2VzWydyb3dJdGVtJ107XG4gICAgaWYgKHJvd0l0ZW0pIHtcbiAgICAgIHRoaXMudXBkYXRlRWRpdGFibGUocm93SXRlbSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRWRpdGFibGUocm93SXRlbSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb25maWcgPSByb3dJdGVtLmN1cnJlbnRWYWx1ZVsnJGVkaXREZW5pZWRDb25maWcnXTtcbiAgICBpZiAoIWN1cnJlbnRDb25maWcpIHtcbiAgICAgIGlmICh0aGlzLmZpZWxkRWRpdERlbmllZCkge1xuICAgICAgICB0aGlzLmZpZWxkRWRpdERlbmllZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRDb25maWcuZmluZEluZGV4KChjb25maWc6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gY29uZmlnID09PSB0aGlzLmNvbHVtbi5maWVsZDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICBpZiAodGhpcy5maWVsZEVkaXREZW5pZWQpIHtcbiAgICAgICAgICB0aGlzLmZpZWxkRWRpdERlbmllZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuZmllbGRFZGl0RGVuaWVkKSB7XG4gICAgICAgICAgdGhpcy5maWVsZEVkaXREZW5pZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DZWxsQ2xpY2soJGV2ZW50KSB7XG4gICAgY29uc3QgY2VsbFNlbGVjdGVkRXZlbnRBcmcgPSB7XG4gICAgICByb3dJbmRleDogdGhpcy5yb3dJbmRleCxcbiAgICAgIGNvbEluZGV4OiB0aGlzLmNvbEluZGV4LFxuICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbixcbiAgICAgIHJvd0l0ZW06IHRoaXMucm93SXRlbSxcbiAgICAgIGNlbGxDb21wb25lbnQ6IHRoaXMsXG4gICAgICByb3dDb21wb25lbnQ6IHRoaXMucm93Q29tcG9uZW50XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tDb3VudCsrO1xuICAgIGlmICh0aGlzLmNsaWNrQ291bnQgPT09IDEpIHtcbiAgICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNsaWNrQ291bnQgPT09IDEpIHtcbiAgICAgICAgICB0aGlzLmR0Lm9uQ2VsbENsaWNrKGNlbGxTZWxlY3RlZEV2ZW50QXJnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWNrQ291bnQgPSAwO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpO1xuICAgICAgfSwgdGhpcy50aW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICBvbkNlbGxEQkNsaWNrKCRldmVudCkge1xuICAgIGNvbnN0IGNlbGxTZWxlY3RlZEV2ZW50QXJnID0ge1xuICAgICAgcm93SW5kZXg6IHRoaXMucm93SW5kZXgsXG4gICAgICBjb2xJbmRleDogdGhpcy5jb2xJbmRleCxcbiAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW4sXG4gICAgICByb3dJdGVtOiB0aGlzLnJvd0l0ZW0sXG4gICAgICBjZWxsQ29tcG9uZW50OiB0aGlzLFxuICAgICAgcm93Q29tcG9uZW50OiB0aGlzLnJvd0NvbXBvbmVudFxuICAgIH07XG4gICAgdGhpcy5kdC5vbkNlbGxEQkNsaWNrKGNlbGxTZWxlY3RlZEV2ZW50QXJnKTtcbiAgfVxuXG4gIGZvcmNlVXBkYXRlKCkge1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICBmaW5pc2hDZWxsRWRpdCgkZXZlbnQ/OiBFdmVudCkge1xuICAgIGlmICh0aGlzLmVkaXRNb2RlbCAhPT0gJ2NlbGwnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0NlbGxFZGl0ID0gZmFsc2U7XG4gICAgdGhpcy5lZGl0b3JIb3N0LnZpZXdDb250YWluZXJSZWYuY2xlYXIoKTtcbiAgICB0aGlzLmR5bmFtaWNFZGl0b3JBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnRlbXBsYXRlRWRpdG9yQWN0aXZlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5kb2N1bWVudENsaWNrU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnVuU3Vic2NyaXB0aW9uKHRoaXMuZG9jdW1lbnRDbGlja1N1YnNjcmlwdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2VsbEVkaXRvckNsaWNrU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnVuU3Vic2NyaXB0aW9uKHRoaXMuY2VsbEVkaXRvckNsaWNrU3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gICAgc3RvcFByb3BhZ2F0aW9uSWZFeGlzdCgkZXZlbnQpO1xuXG4gICAgdGhpcy5kdC5vbkNlbGxFZGl0RW5kKHtcbiAgICAgIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4LFxuICAgICAgY29sSW5kZXg6IHRoaXMuY29sSW5kZXgsXG4gICAgICBjb2x1bW46IHRoaXMuY29sdW1uLFxuICAgICAgcm93SXRlbTogdGhpcy5yb3dJdGVtLFxuICAgICAgY2VsbENvbXBvbmVudDogdGhpcyxcbiAgICAgIHJvd0NvbXBvbmVudDogdGhpcy5yb3dDb21wb25lbnRcbiAgICB9KTtcbiAgfVxuXG4gIGlzQ2VsbEVkaXRFbmFibGUoY29sdW1uLCByb3dJdGVtKSB7XG4gICAgaWYgKHRoaXMuZWRpdE1vZGVsID09PSAnY2VsbCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzQ2VsbEVkaXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaXNFZGl0Um93O1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZm9yY2VVcGRhdGVTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMudW5TdWJzY3JpcHRpb24odGhpcy5mb3JjZVVwZGF0ZVN1YnNjcmlwdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZG9jdW1lbnRDbGlja1N1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy51blN1YnNjcmlwdGlvbih0aGlzLmRvY3VtZW50Q2xpY2tTdWJzY3JpcHRpb24pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNlbGxFZGl0b3JDbGlja1N1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy51blN1YnNjcmlwdGlvbih0aGlzLmNlbGxFZGl0b3JDbGlja1N1YnNjcmlwdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2VsbEFjdGlvblN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy51blN1YnNjcmlwdGlvbih0aGlzLmNlbGxBY3Rpb25TdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICBpZiAodGhpcy50ZE1vdXNlZG93blN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy51blN1YnNjcmlwdGlvbih0aGlzLnRkTW91c2Vkb3duU3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudGRNb3VzZXVwU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnVuU3Vic2NyaXB0aW9uKHRoaXMudGRNb3VzZXVwU3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVuU3Vic2NyaXB0aW9uKHNic2NyaXB0aW9uOiBTdWJzY3JpcHRpb24pIHtcbiAgICBpZiAoc2JzY3JpcHRpb24pIHtcbiAgICAgIHNic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICAgIHNic2NyaXB0aW9uID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBjcmVhdENlbGxFZGl0b3IoKSB7XG4gICAgbGV0IGNvbXBvbmVudEZhY3Rvcnk7XG4gICAgbGV0IGVkaXRvckNvbXBvbmVudDtcbiAgICBzd2l0Y2ggKHRoaXMuY29sdW1uLmZpZWxkVHlwZSkge1xuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBlZGl0b3JDb21wb25lbnQgPSBJbnB1dE51bWJlckNvbXBvbmVudDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICBlZGl0b3JDb21wb25lbnQgPSBTZWxlY3RDb21wb25lbnQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd0cmVlU2VsZWN0JzpcbiAgICAgIGVkaXRvckNvbXBvbmVudCA9IFRyZWVTZWxlY3RDb21wb25lbnQ7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhpcy50ZW1wbGF0ZUVkaXRvckFjdGl2ZSA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoZWRpdG9yQ29tcG9uZW50KSB7XG4gICAgICBjb21wb25lbnRGYWN0b3J5ID0gdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoZWRpdG9yQ29tcG9uZW50KTtcbiAgICAgIGNvbnN0IHZpZXdDb250YWluZXJSZWYgPSB0aGlzLmVkaXRvckhvc3Qudmlld0NvbnRhaW5lclJlZjtcbiAgICAgIHZpZXdDb250YWluZXJSZWYuY2xlYXIoKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFJlZiA9IHZpZXdDb250YWluZXJSZWYuY3JlYXRlQ29tcG9uZW50PHsgd3JpdGVWYWx1ZTogRnVuY3Rpb247IHJlZ2lzdGVyT25DaGFuZ2U6IEZ1bmN0aW9uIH0+KGNvbXBvbmVudEZhY3RvcnkpO1xuICAgICAgY29uc3QgY29tcG9uZW50SW5zdGFuY2UgPSBjb21wb25lbnRSZWYuaW5zdGFuY2U7XG4gICAgICBpZiAodGhpcy5jb2x1bW4uZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIGNvbXBvbmVudEZhY3RvcnkuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuY29sdW1uLmV4dHJhT3B0aW9uc1tpbnB1dC50ZW1wbGF0ZU5hbWVdKSB7XG4gICAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZVtpbnB1dC5wcm9wTmFtZV0gPSB0aGlzLmNvbHVtbi5leHRyYU9wdGlvbnNbaW5wdXQudGVtcGxhdGVOYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50SW5zdGFuY2Uud3JpdGVWYWx1ZSh0aGlzLnJvd0l0ZW1bdGhpcy5jb2x1bW4uZmllbGRdKTtcbiAgICAgIGNvbXBvbmVudEluc3RhbmNlLnJlZ2lzdGVyT25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMucm93SXRlbVt0aGlzLmNvbHVtbi5maWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uLmV4dHJhT3B0aW9ucyAmJiB0aGlzLmNvbHVtbi5leHRyYU9wdGlvbnMuZmluaXNoRWRpdGluZ0FmdGVyVmFsdWVDaGFuZ2UpIHtcbiAgICAgICAgICB0aGlzLmZpbmlzaENlbGxFZGl0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5keW5hbWljRWRpdG9yQWN0aXZlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBjZWxsRWRpdGluZygkZXZlbnQpIHtcbiAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGJlZm9yZUVkaXQgPSBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICBpZiAodGhpcy5kdC5iZWZvcmVDZWxsRWRpdCkge1xuICAgICAgYmVmb3JlRWRpdCA9IHRoaXMuZHQuYmVmb3JlQ2VsbEVkaXQodGhpcy5yb3dJdGVtLCB0aGlzLmNvbHVtbik7XG4gICAgfVxuICAgIGJlZm9yZUVkaXQudGhlbigoZXh0cmFPcHRpb25zPzogYW55KSA9PiB7XG4gICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29sdW1uLmV4dHJhT3B0aW9ucyA9IGV4dHJhT3B0aW9ucztcbiAgICAgIH1cbiAgICAgIHRoaXMuZHQuY2VsbEVkaXRvckNsaWNrRXZlbnQuZW1pdCgkZXZlbnQpO1xuICAgICAgY29uc3QgY2VsbFNlbGVjdGVkRXZlbnRBcmcgPSB7XG4gICAgICAgIHJvd0luZGV4OiB0aGlzLnJvd0luZGV4LFxuICAgICAgICBjb2xJbmRleDogdGhpcy5jb2xJbmRleCxcbiAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbixcbiAgICAgICAgcm93SXRlbTogdGhpcy5yb3dJdGVtLFxuICAgICAgICBjZWxsQ29tcG9uZW50OiB0aGlzLFxuICAgICAgICByb3dDb21wb25lbnQ6IHRoaXMucm93Q29tcG9uZW50XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMuY29sdW1uLmVkaXRhYmxlICYmIHRoaXMuZWRpdE1vZGVsID09PSAnY2VsbCcpIHtcbiAgICAgICAgdGhpcy5pc0NlbGxFZGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jcmVhdENlbGxFZGl0b3IoKTtcbiAgICAgICAgdGhpcy5kb2N1bWVudENsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5kdC5kb2N1bWVudENsaWNrRXZlbnQuc3Vic2NyaWJlKFxuICAgICAgICAgIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudCA9PT0gJ2NhbmNlbCcgfHwgKCF0aGlzLmNlbGxSZWYubmF0aXZlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpICYmICF0aGlzLmNsaWNrSW5UZCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaENlbGxFZGl0KCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGlja0luVGQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2VsbEVkaXRvckNsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5kdC5jZWxsRWRpdG9yQ2xpY2tFdmVudC5zdWJzY3JpYmUoXG4gICAgICAgICAgZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNlbGxSZWYubmF0aXZlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHRoaXMuZmluaXNoQ2VsbEVkaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZHQub25DZWxsRWRpdFN0YXJ0KGNlbGxTZWxlY3RlZEV2ZW50QXJnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUNoaWxkVGFibGUocm93SXRlbSkge1xuICAgIHJvd0l0ZW0uJGlzQ2hpbGRUYWJsZU9wZW4gPSAhcm93SXRlbS4kaXNDaGlsZFRhYmxlT3BlbjtcbiAgICB0aGlzLmR0LnNldFJvd0NoaWxkVG9nZ2xlU3RhdHVzKHJvd0l0ZW0sIHJvd0l0ZW0uJGlzQ2hpbGRUYWJsZU9wZW4pO1xuICB9XG59XG4iLCI8bmctdGVtcGxhdGUgKm5nSWY9XCIhY29sdW1uLmVkaXRhYmxlIHx8IGZpZWxkRWRpdERlbmllZFwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNlbGxWaWV3VGVtcFwiPjwvbmctdGVtcGxhdGU+XG5cbjxuZy1jb250YWluZXIgKm5nSWY9XCJjb2x1bW4uZWRpdGFibGUgJiYgIWZpZWxkRWRpdERlbmllZFwiPlxuICA8ZGl2ICpuZ0lmPVwiIWlzQ2VsbEVkaXQgJiYgY29sdW1uLmV4dHJhT3B0aW9ucz8uZWRpdGFibGVUaXAgPT09ICdidG4nXCIgY2xhc3M9XCJjZWxsLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsLWNvbnRhaW5lci1pbm5lciBub3QtYnJlYWsgbW9kaWZ5LWhvbGRlclwiPlxuICAgICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNlbGxWaWV3VGVtcFwiPjwvbmctdGVtcGxhdGU+XG4gICAgICA8c3BhbiBjbGFzcz1cImNlbGwtbW9kaWZ5XCIgKGNsaWNrKT1cImNlbGxFZGl0aW5nKCRldmVudClcIj5cbiAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxNiAxNlwiIHdpZHRoPVwiMTZweFwiIGhlaWdodD1cIjE2cHhcIiB2ZXJzaW9uPVwiMS4xXCI+XG4gICAgICAgICAgPGcgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIj5cbiAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgIGQ9XCJNIDkuNDg1MjggMy40MTQyMSBMIDEwLjg5OTUgMiBMIDEzLjcyNzkgNC44Mjg0MyBMIDEyLjMxMzcgNi4yNDI2NCBMIDkuNDg1MjggMy40MTQyMSBaIE0gNS4yNDI2NCAxMy4zMTM3IEwgMi40MTQyMSAxMy4zMTM3IEwgMi40MTQyMSAxMC40ODUzIEwgOC43NzgxNyA0LjEyMTMyIEwgMTEuNjA2NiA2Ljk0OTc1IEwgNS4yNDI2NCAxMy4zMTM3IFpcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2c+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiAqbmdJZj1cIiFpc0NlbGxFZGl0ICYmIGNvbHVtbi5leHRyYU9wdGlvbnM/LmVkaXRhYmxlVGlwICE9PSAnYnRuJ1wiIGNsYXNzPVwiY2VsbC1lZGl0YWJsZVwiIChjbGljayk9XCJjZWxsRWRpdGluZygkZXZlbnQpXCI+XG4gICAgPG5nLXRlbXBsYXRlIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNlbGxWaWV3VGVtcFwiPjwvbmctdGVtcGxhdGU+XG4gIDwvZGl2PlxuICA8ZGl2IFtuZ0NsYXNzXT1cInsgJ2VkaXQtcGFkZGluZy1maXgnOiBkeW5hbWljRWRpdG9yQWN0aXZlIH1cIj5cbiAgICA8bmctdGVtcGxhdGUgZEVkaXRvckhvc3Q+PC9uZy10ZW1wbGF0ZT5cbiAgPC9kaXY+XG4gIDxuZy10ZW1wbGF0ZVxuICAgICpuZ0lmPVwidGVtcGxhdGVFZGl0b3JBY3RpdmVcIlxuICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImNvbHVtbi5jZWxsRWRpdENtcCA/IGNvbHVtbi5jZWxsRWRpdENtcC50ZW1wbGF0ZSA6IGNvbHVtbi5maWVsZFR5cGUgPT09ICdkYXRlJyA/IGRhdGVFZGl0VGVtcGF0ZSA6IHRleHRFZGl0VGVtcGF0ZVwiXG4gICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcbiAgICAgIGNvbEluZGV4OiBjb2xJbmRleCxcbiAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgcm93SXRlbTogcm93SXRlbSxcbiAgICAgICRpbXBsaWNpdDogdGhpcyxcbiAgICAgIHJvdzogcm93Q29tcG9uZW50XG4gICAgfVwiXG4gID5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctY29udGFpbmVyPlxuXG48bmctdGVtcGxhdGUgI2NlbGxWaWV3VGVtcD5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbHVtbi5uZXN0ZWRDb2x1bW5cIj5cbiAgICA8c3BhbiAqbmdJZj1cInRhYmxlTGV2ZWwgPiAwXCIgY2xhc3M9XCJjZWxsLXBsYWNlaG9sZGVyXCIgW25nU3R5bGVdPVwieyB3aWR0aDogdGFibGVMZXZlbCAqIGNvbHVtbi5uZXN0ZWRDb2x1bW5JbmRlbnQgKyAncHgnIH1cIj48L3NwYW4+XG4gICAgPHNwYW4gW3N0eWxlLnZpc2liaWxpdHldPVwicm93SXRlbS5jaGlsZHJlbiA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXCIgY2xhc3M9XCJjaGlsZHRhYmxlLXRvZ2dsZXJcIiAoY2xpY2spPVwidG9nZ2xlQ2hpbGRUYWJsZShyb3dJdGVtKVwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJvd0l0ZW1bJyRpc0NoaWxkVGFibGVPcGVuJ11cIj5cbiAgICAgICAgPHN2Z1xuICAgICAgICAgICpuZ0lmPVwiIWNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25Gb2xkVGFibGVcIlxuICAgICAgICAgIHdpZHRoPVwiMTZweFwiXG4gICAgICAgICAgaGVpZ2h0PVwiMTZweFwiXG4gICAgICAgICAgdmlld0JveD1cIjAgMCAxNiAxNlwiXG4gICAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgICBjbGFzcz1cInN2Zy1pY29uIHN2Zy1pY29uLWNsb3NlXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgICA8cmVjdCB4PVwiMC41XCIgeT1cIjAuNVwiIHdpZHRoPVwiMTVcIiBoZWlnaHQ9XCIxNVwiIHJ4PVwiMlwiPjwvcmVjdD5cbiAgICAgICAgICAgIDxyZWN0IHg9XCI0XCIgeT1cIjdcIiB3aWR0aD1cIjhcIiBoZWlnaHQ9XCIyXCI+PC9yZWN0PlxuICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9zdmc+XG5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5pY29uRm9sZFRhYmxlXCIgW2lubmVySFRNTF09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5pY29uRm9sZFRhYmxlIHwgc2FmZTogJ2h0bWwnXCI+PC9zcGFuPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIXJvd0l0ZW1bJyRpc0NoaWxkVGFibGVPcGVuJ11cIj5cbiAgICAgICAgPHN2Z1xuICAgICAgICAgICpuZ0lmPVwiIWNvbHVtbi5leHRyYU9wdGlvbnM/Lmljb25VbkZvbGRUYWJsZVwiXG4gICAgICAgICAgd2lkdGg9XCIxNnB4XCJcbiAgICAgICAgICBoZWlnaHQ9XCIxNnB4XCJcbiAgICAgICAgICB2aWV3Qm94PVwiMCAwIDE2IDE2XCJcbiAgICAgICAgICB2ZXJzaW9uPVwiMS4xXCJcbiAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxuICAgICAgICAgIGNsYXNzPVwic3ZnLWljb24gc3ZnLWljb24tb3Blbi1mb2xkZXJcIlxuICAgICAgICA+XG4gICAgICAgICAgPGcgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgICAgIDxyZWN0IHg9XCIwLjVcIiB5PVwiMC41XCIgd2lkdGg9XCIxNVwiIGhlaWdodD1cIjE1XCIgcng9XCIyXCI+PC9yZWN0PlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgZD1cIk04Ljc1LDQgTDguNzUsNy4yNSBMMTIsNy4yNSBMMTIsOC43NSBMOC43NDksOC43NSBMOC43NSwxMiBMNy4yNSwxMiBMNy4yNDksOC43NSBMNCw4Ljc1IEw0LDcuMjUgTDcuMjUsNy4yNSBMNy4yNSw0IEw4Ljc1LDQgWlwiXG4gICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgIDwvZz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIDxzcGFuICpuZ0lmPVwiY29sdW1uLmV4dHJhT3B0aW9ucz8uaWNvblVuRm9sZFRhYmxlXCIgW2lubmVySFRNTF09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5pY29uVW5Gb2xkVGFibGUgfCBzYWZlOiAnaHRtbCdcIj48L3NwYW4+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L3NwYW4+XG4gIDwvbmctY29udGFpbmVyPlxuICA8bmctdGVtcGxhdGVcbiAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJjb2x1bW4uY2VsbENtcCA/IGNvbHVtbi5jZWxsQ21wLnRlbXBsYXRlIDogdGV4dFZpZXdUZW1wbGF0ZVwiXG4gICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntcbiAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcbiAgICAgIGNvbEluZGV4OiBjb2xJbmRleCxcbiAgICAgIGNvbHVtbjogY29sdW1uLFxuICAgICAgcm93SXRlbTogcm93SXRlbSxcbiAgICAgIGNlbGxJdGVtOiByb3dJdGVtW2NvbHVtbi5maWVsZF0sXG4gICAgICBjZWxsVmFsdWU6IHJvd0l0ZW0gfCBkaXNQbGF5Q2VsbFZhbHVlUGlwZTogcm93SW5kZXg6Y29sdW1uLFxuICAgICAgJGltcGxpY2l0OiB0aGlzLFxuICAgICAgcm93OiByb3dDb21wb25lbnQsXG4gICAgICB0YWJsZUxldmVsOiB0YWJsZUxldmVsXG4gICAgfVwiXG4gID5cbiAgPC9uZy10ZW1wbGF0ZT5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSBsZXQtY2VsbFZhbHVlPVwiY2VsbFZhbHVlXCIgI3RleHRWaWV3VGVtcGxhdGU+XG4gIDxzcGFuIFthdHRyLnRpdGxlXT1cImNlbGxWYWx1ZVwiPnt7IGNlbGxWYWx1ZSB9fTwvc3Bhbj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSBsZXQtcm93SW5kZXg9XCJyb3dJbmRleFwiIGxldC1jb2xJbmRleD1cImNvbEluZGV4XCIgbGV0LXJvd0l0ZW09XCJyb3dJdGVtXCIgbGV0LWNvbHVtbj1cImNvbHVtblwiIGxldC1jZWxsPVwiXCIgI3RleHRFZGl0VGVtcGF0ZT5cbiAgPGZvcm0gY2xhc3M9XCJmb3JtLWlubGluZSBlZGl0LXBhZGRpbmctZml4XCI+XG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZnVsbC13aWR0aFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwIGZ1bGwtd2lkdGhcIj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgW2RBdXRvRm9jdXNdPVwiY2VsbCAmJiBjZWxsLmlzQ2VsbEVkaXRcIlxuICAgICAgICAgIFt0eXBlXT1cImNvbHVtbi5maWVsZFR5cGVcIlxuICAgICAgICAgIGNsYXNzPVwiZGV2dWktZm9ybS1jb250cm9sXCJcbiAgICAgICAgICBbbmFtZV09XCJjb2x1bW4uZmllbGRcIlxuICAgICAgICAgIFsobmdNb2RlbCldPVwicm93SXRlbVtjb2x1bW4uZmllbGRdXCJcbiAgICAgICAgICBbYXR0ci5tYXhsZW5ndGhdPVwiY29sdW1uLmV4dHJhT3B0aW9ucz8ubWF4bGVuZ3RoXCJcbiAgICAgICAgICBbYXR0ci5taW5sZW5ndGhdPVwiY29sdW1uLmV4dHJhT3B0aW9ucz8ubWlubGVuZ3RoXCJcbiAgICAgICAgICBbYXR0ci5wYXR0ZXJuXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LnBhdHRlcm5cIlxuICAgICAgICAgIChrZXlkb3duLmVudGVyKT1cImNlbGwgJiYgY2VsbC5maW5pc2hDZWxsRWRpdCgkZXZlbnQpXCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiY29sdW1uLnBsYWNlaG9sZGVyIHx8ICcnXCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Zvcm0+XG48L25nLXRlbXBsYXRlPlxuXG48bmctdGVtcGxhdGUgbGV0LXJvd0luZGV4PVwicm93SW5kZXhcIiBsZXQtY29sSW5kZXg9XCJjb2xJbmRleFwiIGxldC1yb3dJdGVtPVwicm93SXRlbVwiIGxldC1jb2x1bW49XCJjb2x1bW5cIiBsZXQtY2VsbD1cIlwiICNkYXRlRWRpdFRlbXBhdGU+XG4gIDxmb3JtIGNsYXNzPVwiZm9ybS1pbmxpbmUgZWRpdC1wYWRkaW5nLWZpeFwiPlxuICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS1mb3JtLWdyb3VwXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktaW5wdXQtZ3JvdXAgZGV2dWktZHJvcGRvd24tb3JpZ2luXCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIGNsYXNzPVwiZGV2dWktZm9ybS1jb250cm9sIHNlYXJjaFwiXG4gICAgICAgICAgW25hbWVdPVwiY29sdW1uLmZpZWxkXCJcbiAgICAgICAgICBbKG5nTW9kZWwpXT1cInJvd0l0ZW1bY29sdW1uLmZpZWxkXVwiXG4gICAgICAgICAgZERhdGVwaWNrZXJcbiAgICAgICAgICBhcHBlbmRUb0JvZHlcbiAgICAgICAgICBbZGF0ZUZvcm1hdF09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5kYXRlRm9ybWF0XCJcbiAgICAgICAgICAjZGF0ZVBpY2tlcj1cImRhdGVwaWNrZXJcIlxuICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIiFjb2x1bW4uZXh0cmFPcHRpb25zPy5zaG93VGltZSAmJiBjZWxsICYmIGNlbGwuZmluaXNoQ2VsbEVkaXQoKVwiXG4gICAgICAgICAgW21heERhdGVdPVwiY29sdW1uLmV4dHJhT3B0aW9ucz8ubWF4RGF0ZVwiXG4gICAgICAgICAgW21pbkRhdGVdPVwiY29sdW1uLmV4dHJhT3B0aW9ucz8ubWluRGF0ZVwiXG4gICAgICAgICAgW2Nzc0NsYXNzXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LmNzc0NsYXNzXCJcbiAgICAgICAgICBbZGF0ZUNvbmZpZ109XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5kYXRlQ29uZmlnXCJcbiAgICAgICAgICBbbG9jYWxlXT1cImNvbHVtbi5leHRyYU9wdGlvbnM/LmxvY2FsZVwiXG4gICAgICAgICAgW2N1c3RvbVZpZXdUZW1wbGF0ZV09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5jdXN0b21WaWV3VGVtcGxhdGVcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5kaXNhYmxlZFwiXG4gICAgICAgICAgW3BsYWNlaG9sZGVyXT1cImNvbHVtbi5wbGFjZWhvbGRlciB8fCAnJ1wiXG4gICAgICAgICAgW2F1dG9PcGVuXT1cInRydWVcIlxuICAgICAgICAgIFtzaG93VGltZV09XCJjb2x1bW4uZXh0cmFPcHRpb25zPy5zaG93VGltZVwiXG4gICAgICAgIC8+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS1pbnB1dC1ncm91cC1hZGRvblwiIChjbGljayk9XCJkYXRlUGlja2VyLnRvZ2dsZSgpXCI+XG4gICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGljb24tY2FsZW5kYXJcIj48L2k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZm9ybT5cbjwvbmctdGVtcGxhdGU+XG4iXX0=