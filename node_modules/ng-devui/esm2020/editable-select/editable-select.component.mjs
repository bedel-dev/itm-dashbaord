import { __decorate, __metadata } from "tslib";
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, HostListener, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { AutoCompleteDirective } from 'ng-devui/auto-complete';
import { I18nService } from 'ng-devui/i18n';
import { DevConfigService, WithConfig } from 'ng-devui/utils';
import * as i0 from "@angular/core";
import * as i1 from "ng-devui/i18n";
import * as i2 from "ng-devui/utils";
import * as i3 from "@angular/common";
import * as i4 from "@angular/forms";
import * as i5 from "ng-devui/auto-complete";
export class EditableSelectComponent {
    constructor(cdr, i18n, devConfigService) {
        this.cdr = cdr;
        this.i18n = i18n;
        this.devConfigService = devConfigService;
        this.appendToBody = false;
        this.appendToBodyDirections = ['rightDown', 'leftDown', 'rightUp', 'leftUp'];
        this.disabled = false;
        this.placeholder = '';
        this.source = [];
        this.allowClear = false;
        this.enableLazyLoad = false;
        this.formatter = (item) => (item ? item.label || item.toString() : '');
        this.valueParser = (item) => item;
        this.showAnimation = true;
        this.loadMore = new EventEmitter();
        this.toggleChange = new EventEmitter();
        this.multiItems = [];
        this.activeIndex = 0;
        this._dropDownOpen = false;
        this.onChange = (_) => null;
        this.onTouched = () => null;
    }
    set dropDownOpen(val) {
        this._dropDownOpen = val;
        if (this._dropDownOpen) {
            this.autoCompleteDirective.openPopup(this.activeIndex);
        }
        else {
            this.autoCompleteDirective.hidePopup();
            this.onTouched();
        }
    }
    get dropDownOpen() {
        return this._dropDownOpen;
    }
    onDocumentClick(event) {
        if (!this.dropDownOpen) {
            return;
        }
        const targetEl = event.target;
        if (!this.editableSelectBox.nativeElement.contains(targetEl)) {
            this.dropDownOpen = false;
        }
    }
    ngOnChanges(changes) {
        if (changes && changes['searchFn'] && typeof this.searchFn === 'function') {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
            this.subscription = this.searchFn('').subscribe((source) => {
                this.source = source;
            });
        }
    }
    ngOnInit() {
        this.i18nCommonText = this.i18n.getI18nText().common;
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nCommonText = data.common;
        });
    }
    ngOnDestroy() {
        if (this.i18nSubscription) {
            this.i18nSubscription.unsubscribe();
        }
    }
    writeValue(obj) {
        this.inputValue = obj || '';
        this.cdr.markForCheck();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    selectValue() {
        this.dropDownOpen = false;
    }
    valueClear(event) {
        event.stopPropagation();
        this.inputValue = '';
        this.onChange(this.inputValue);
    }
    onTermChange(value) {
        this.inputValue = value;
        this.onChange(this.inputValue);
    }
    toggle() {
        const inputString = this.formatter(this.inputValue);
        this.activeIndex = this.source.map((item) => this.formatter(item).toLowerCase()).indexOf(inputString.toLowerCase());
        this.activeIndex = this.activeIndex > -1 ? this.activeIndex : 0;
        this.dropDownOpen = !this.dropDownOpen;
    }
    loadMoreEvent(event) {
        this.loadMore.emit(event);
    }
    toggleChangeHandler(value) {
        this.toggleChange.emit(value);
    }
}
EditableSelectComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: EditableSelectComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.I18nService }, { token: i2.DevConfigService }], target: i0.ɵɵFactoryTarget.Component });
EditableSelectComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: EditableSelectComponent, selector: "d-editable-select", inputs: { appendToBody: "appendToBody", appendToBodyDirections: "appendToBodyDirections", disabled: "disabled", placeholder: "placeholder", source: "source", itemTemplate: "itemTemplate", noResultItemTemplate: "noResultItemTemplate", maxHeight: "maxHeight", width: "width", disabledKey: "disabledKey", allowClear: "allowClear", enableLazyLoad: "enableLazyLoad", formatter: "formatter", valueParser: "valueParser", searchFn: "searchFn", showAnimation: "showAnimation" }, outputs: { loadMore: "loadMore", toggleChange: "toggleChange" }, host: { listeners: { "document:click": "onDocumentClick($event)" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => EditableSelectComponent),
            multi: true,
        },
    ], viewQueries: [{ propertyName: "autoCompleteDirective", first: true, predicate: AutoCompleteDirective, descendants: true, static: true }, { propertyName: "editableSelectBox", first: true, predicate: ["editableSelectBox"], descendants: true, static: true }], exportAs: ["editable-select"], usesOnChanges: true, ngImport: i0, template: "<div\n  #editableSelectBox\n  class=\"devui-form-group devui-has-feedback\"\n  [ngClass]=\"{\n    'devui-select-open': dropDownOpen,\n    'allow-clear': (inputValue || inputValue === 0) && allowClear\n  }\"\n>\n  <input\n    (click)=\"toggle()\"\n    class=\"devui-form-control devui-dropdown-origin\"\n    type=\"text\"\n    name=\"autoCompleteControl\"\n    [source]=\"source\"\n    (ngModelChange)=\"onTermChange($event)\"\n    [ngModel]=\"inputValue\"\n    [searchFn]=\"searchFn\"\n    [disabled]=\"disabled\"\n    [disabledKey]=\"disabledKey\"\n    [placeholder]=\"placeholder\"\n    [itemTemplate]=\"itemTemplate\"\n    [noResultItemTemplate]=\"noResultItemTemplate || noResultDefaultTemplate\"\n    [appendToBody]=\"appendToBody\"\n    [appendToBodyDirections]=\"appendToBodyDirections\"\n    [maxHeight]=\"maxHeight\"\n    [sceneType]=\"'select'\"\n    [dAutoCompleteWidth]=\"width\"\n    dAutoComplete\n    [enableLazyLoad]=\"enableLazyLoad\"\n    [formatter]=\"formatter\"\n    [valueParser]=\"valueParser\"\n    [showAnimation]=\"showAnimation\"\n    (toggleChange)=\"toggleChangeHandler($event)\"\n    (loadMore)=\"loadMoreEvent($event)\"\n    (selectValue)=\"selectValue()\"\n  />\n  <span class=\"devui-form-control-feedback\">\n    <span class=\"devui-select-clear-icon\" (click)=\"valueClear($event)\">\n      <svg viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M5.87867966,5.17157288 C5.68341751,4.97631073 5.36683502,4.97631073 5.17157288,5.17157288 C4.99800652,5.34513923 4.97872137,5.61456363 5.11371742,5.80943177 L5.17157288,5.87867966 L7.29218611,7.99929289 L5.17157288,10.1213203 C4.97631073,10.3165825 4.97631073,10.633165 5.17157288,10.8284271 C5.34513923,11.0019935 5.61456363,11.0212786 5.80943177,10.8862826 L5.87867966,10.8284271 L7.99929289,8.70639967 L10.1213203,10.8284271 C10.3165825,11.0236893 10.633165,11.0236893 10.8284271,10.8284271 C11.0019935,10.6548608 11.0212786,10.3854364 10.8862826,10.1905682 L10.8284271,10.1213203 L8.70710678,8 L10.8284271,5.87867966 C11.0236893,5.68341751 11.0236893,5.36683502 10.8284271,5.17157288 C10.6548608,4.99800652 10.3854364,4.97872137 10.1905682,5.11371742 L10.1213203,5.17157288 L8,7.29289322 L5.87867966,5.17157288 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </span>\n    <span class=\"devui-select-chevron-icon\">\n      <svg viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M12.1464466,6.85355339 L8.35355339,10.6464466 C8.15829124,10.8417088 7.84170876,10.8417088 7.64644661,10.6464466 L3.85355339,6.85355339 C3.65829124,6.65829124 3.65829124,6.34170876 3.85355339,6.14644661 C3.94732158,6.05267842 4.07449854,6 4.20710678,6 L11.7928932,6 C12.0690356,6 12.2928932,6.22385763 12.2928932,6.5 C12.2928932,6.63260824 12.2402148,6.7597852 12.1464466,6.85355339 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </span>\n  </span>\n</div>\n\n<ng-template #noResultDefaultTemplate>\n  <span>{{ inputValue || inputValue === 0 ? i18nCommonText?.noRecordsFound : i18nCommonText?.noData }}</span>\n</ng-template>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-form-group.devui-has-feedback>.devui-form-control-feedback{height:100%;display:inline-flex;align-items:center;justify-content:center;padding:0;font-size:12px;font-size:var(--devui-font-size, 12px);z-index:10}.devui-form-group.devui-has-feedback>.devui-form-control-feedback>span{align-items:center}.devui-form-group.devui-has-feedback>.devui-form-control-feedback>span>svg{width:1em;height:1em}.devui-form-group.devui-has-feedback .devui-select-clear-icon{pointer-events:auto;display:none;cursor:pointer}.devui-form-group.devui-has-feedback .devui-select-clear-icon path{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da);transition:all cubic-bezier(.645,.045,.355,1) .3s;transition:all var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)) var(--devui-animation-duration-slow, .3s)}.devui-form-group.devui-has-feedback .devui-select-clear-icon:hover path{fill:#babbc0;fill:var(--devui-shape-icon-fill-hover, #babbc0)}.devui-form-group.devui-has-feedback .devui-select-chevron-icon{display:flex;transition:transform .3s cubic-bezier(.645,.045,.355,1);transition:transform var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1))}.devui-form-group.devui-has-feedback .devui-select-chevron-icon svg path{fill:#575d6c;fill:var(--devui-text-weak, #575d6c)}.devui-form-group.devui-has-feedback.allow-clear:hover .devui-select-chevron-icon{display:none}.devui-form-group.devui-has-feedback.allow-clear:hover .devui-select-clear-icon{display:flex}.devui-select-open .devui-select-chevron-icon{transform:rotate(180deg)}.devui-form-control{outline:none;padding-right:24px}input::-ms-clear{display:none}\n"], directives: [{ type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i5.AutoCompleteDirective, selector: "[dAutoComplete]", inputs: ["disabled", "cssClass", "delay", "minLength", "itemTemplate", "noResultItemTemplate", "searchingTemplate", "isSearching", "appendToBody", "appendToBodyDirections", "cdkOverlayOffsetY", "dAutoCompleteWidth", "formatter", "sceneType", "tipsText", "overview", "latestSource", "source", "valueParser", "searchFn", "dropdown", "maxHeight", "disabledKey", "showAnimation", "enableLazyLoad", "allowEmptyValueSearch"], outputs: ["loadMore", "selectValue", "transInputFocusEmit", "changeDropDownStatus", "toggleChange"], exportAs: ["autoComplete"] }, { type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }] });
__decorate([
    WithConfig(),
    __metadata("design:type", Object)
], EditableSelectComponent.prototype, "showAnimation", void 0);
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: EditableSelectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-editable-select', exportAs: 'editable-select', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => EditableSelectComponent),
                            multi: true,
                        },
                    ], preserveWhitespaces: false, template: "<div\n  #editableSelectBox\n  class=\"devui-form-group devui-has-feedback\"\n  [ngClass]=\"{\n    'devui-select-open': dropDownOpen,\n    'allow-clear': (inputValue || inputValue === 0) && allowClear\n  }\"\n>\n  <input\n    (click)=\"toggle()\"\n    class=\"devui-form-control devui-dropdown-origin\"\n    type=\"text\"\n    name=\"autoCompleteControl\"\n    [source]=\"source\"\n    (ngModelChange)=\"onTermChange($event)\"\n    [ngModel]=\"inputValue\"\n    [searchFn]=\"searchFn\"\n    [disabled]=\"disabled\"\n    [disabledKey]=\"disabledKey\"\n    [placeholder]=\"placeholder\"\n    [itemTemplate]=\"itemTemplate\"\n    [noResultItemTemplate]=\"noResultItemTemplate || noResultDefaultTemplate\"\n    [appendToBody]=\"appendToBody\"\n    [appendToBodyDirections]=\"appendToBodyDirections\"\n    [maxHeight]=\"maxHeight\"\n    [sceneType]=\"'select'\"\n    [dAutoCompleteWidth]=\"width\"\n    dAutoComplete\n    [enableLazyLoad]=\"enableLazyLoad\"\n    [formatter]=\"formatter\"\n    [valueParser]=\"valueParser\"\n    [showAnimation]=\"showAnimation\"\n    (toggleChange)=\"toggleChangeHandler($event)\"\n    (loadMore)=\"loadMoreEvent($event)\"\n    (selectValue)=\"selectValue()\"\n  />\n  <span class=\"devui-form-control-feedback\">\n    <span class=\"devui-select-clear-icon\" (click)=\"valueClear($event)\">\n      <svg viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M5.87867966,5.17157288 C5.68341751,4.97631073 5.36683502,4.97631073 5.17157288,5.17157288 C4.99800652,5.34513923 4.97872137,5.61456363 5.11371742,5.80943177 L5.17157288,5.87867966 L7.29218611,7.99929289 L5.17157288,10.1213203 C4.97631073,10.3165825 4.97631073,10.633165 5.17157288,10.8284271 C5.34513923,11.0019935 5.61456363,11.0212786 5.80943177,10.8862826 L5.87867966,10.8284271 L7.99929289,8.70639967 L10.1213203,10.8284271 C10.3165825,11.0236893 10.633165,11.0236893 10.8284271,10.8284271 C11.0019935,10.6548608 11.0212786,10.3854364 10.8862826,10.1905682 L10.8284271,10.1213203 L8.70710678,8 L10.8284271,5.87867966 C11.0236893,5.68341751 11.0236893,5.36683502 10.8284271,5.17157288 C10.6548608,4.99800652 10.3854364,4.97872137 10.1905682,5.11371742 L10.1213203,5.17157288 L8,7.29289322 L5.87867966,5.17157288 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </span>\n    <span class=\"devui-select-chevron-icon\">\n      <svg viewBox=\"0 0 16 16\">\n        <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n          <path\n            d=\"M12.1464466,6.85355339 L8.35355339,10.6464466 C8.15829124,10.8417088 7.84170876,10.8417088 7.64644661,10.6464466 L3.85355339,6.85355339 C3.65829124,6.65829124 3.65829124,6.34170876 3.85355339,6.14644661 C3.94732158,6.05267842 4.07449854,6 4.20710678,6 L11.7928932,6 C12.0690356,6 12.2928932,6.22385763 12.2928932,6.5 C12.2928932,6.63260824 12.2402148,6.7597852 12.1464466,6.85355339 Z\"\n            fill-rule=\"nonzero\"\n          ></path>\n        </g>\n      </svg>\n    </span>\n  </span>\n</div>\n\n<ng-template #noResultDefaultTemplate>\n  <span>{{ inputValue || inputValue === 0 ? i18nCommonText?.noRecordsFound : i18nCommonText?.noData }}</span>\n</ng-template>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-form-group.devui-has-feedback>.devui-form-control-feedback{height:100%;display:inline-flex;align-items:center;justify-content:center;padding:0;font-size:12px;font-size:var(--devui-font-size, 12px);z-index:10}.devui-form-group.devui-has-feedback>.devui-form-control-feedback>span{align-items:center}.devui-form-group.devui-has-feedback>.devui-form-control-feedback>span>svg{width:1em;height:1em}.devui-form-group.devui-has-feedback .devui-select-clear-icon{pointer-events:auto;display:none;cursor:pointer}.devui-form-group.devui-has-feedback .devui-select-clear-icon path{fill:#d7d8da;fill:var(--devui-shape-icon-fill, #d7d8da);transition:all cubic-bezier(.645,.045,.355,1) .3s;transition:all var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1)) var(--devui-animation-duration-slow, .3s)}.devui-form-group.devui-has-feedback .devui-select-clear-icon:hover path{fill:#babbc0;fill:var(--devui-shape-icon-fill-hover, #babbc0)}.devui-form-group.devui-has-feedback .devui-select-chevron-icon{display:flex;transition:transform .3s cubic-bezier(.645,.045,.355,1);transition:transform var(--devui-animation-duration-slow, .3s) var(--devui-animation-ease-in-out-smooth, cubic-bezier(.645, .045, .355, 1))}.devui-form-group.devui-has-feedback .devui-select-chevron-icon svg path{fill:#575d6c;fill:var(--devui-text-weak, #575d6c)}.devui-form-group.devui-has-feedback.allow-clear:hover .devui-select-chevron-icon{display:none}.devui-form-group.devui-has-feedback.allow-clear:hover .devui-select-clear-icon{display:flex}.devui-select-open .devui-select-chevron-icon{transform:rotate(180deg)}.devui-form-control{outline:none;padding-right:24px}input::-ms-clear{display:none}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.I18nService }, { type: i2.DevConfigService }]; }, propDecorators: { appendToBody: [{
                type: Input
            }], appendToBodyDirections: [{
                type: Input
            }], disabled: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], source: [{
                type: Input
            }], itemTemplate: [{
                type: Input
            }], noResultItemTemplate: [{
                type: Input
            }], maxHeight: [{
                type: Input
            }], width: [{
                type: Input
            }], disabledKey: [{
                type: Input
            }], allowClear: [{
                type: Input
            }], enableLazyLoad: [{
                type: Input
            }], formatter: [{
                type: Input
            }], valueParser: [{
                type: Input
            }], searchFn: [{
                type: Input
            }], showAnimation: [{
                type: Input
            }], loadMore: [{
                type: Output
            }], toggleChange: [{
                type: Output
            }], autoCompleteDirective: [{
                type: ViewChild,
                args: [AutoCompleteDirective, { static: true }]
            }], editableSelectBox: [{
                type: ViewChild,
                args: ['editableSelectBox', { static: true }]
            }], onDocumentClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdGFibGUtc2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2RldnVpL2VkaXRhYmxlLXNlbGVjdC9lZGl0YWJsZS1zZWxlY3QuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZGV2dWkvZWRpdGFibGUtc2VsZWN0L2VkaXRhYmxlLXNlbGVjdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsT0FBTyxFQUNMLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFJTCxNQUFNLEVBRU4sV0FBVyxFQUNYLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDL0QsT0FBTyxFQUFpQixXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0QsT0FBTyxFQUF5QixnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7OztBQWlCckYsTUFBTSxPQUFPLHVCQUF1QjtJQTJEbEMsWUFBb0IsR0FBc0IsRUFBVSxJQUFpQixFQUFVLGdCQUFrQztRQUE3RixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUFVLFNBQUksR0FBSixJQUFJLENBQWE7UUFBVSxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBMUR4RyxpQkFBWSxHQUFHLEtBQUssQ0FBQztRQUNyQiwyQkFBc0IsR0FBcUQsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUMxSCxhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGdCQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLFdBQU0sR0FBVSxFQUFFLENBQUM7UUFNbkIsZUFBVSxHQUFHLEtB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c0JBQWpCLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNpQixhQUFhO3NCQUFuQyxLQUFLO2dCQUNJLFFBQVE7c0JBQWpCLE1BQU07Z0JBQ0csWUFBWTtzQkFBckIsTUFBTTtnQkFDNkMscUJBQXFCO3NCQUF4RSxTQUFTO3VCQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFDQSxpQkFBaUI7c0JBQWxFLFNBQVM7dUJBQUMsbUJBQW1CLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQTRCaEQsZUFBZTtzQkFEZCxZQUFZO3VCQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGVkUG9zaXRpb24gfSBmcm9tICdAYW5ndWxhci9jZGsvb3ZlcmxheSc7XG5pbXBvcnQge1xuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIGZvcndhcmRSZWYsXG4gIEhvc3RMaXN0ZW5lcixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVGVtcGxhdGVSZWYsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEF1dG9Db21wbGV0ZURpcmVjdGl2ZSB9IGZyb20gJ25nLWRldnVpL2F1dG8tY29tcGxldGUnO1xuaW1wb3J0IHsgSTE4bkludGVyZmFjZSwgSTE4blNlcnZpY2UgfSBmcm9tICduZy1kZXZ1aS9pMThuJztcbmltcG9ydCB7IEFwcGVuZFRvQm9keURpcmVjdGlvbiwgRGV2Q29uZmlnU2VydmljZSwgV2l0aENvbmZpZyB9IGZyb20gJ25nLWRldnVpL3V0aWxzJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkLWVkaXRhYmxlLXNlbGVjdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9lZGl0YWJsZS1zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9lZGl0YWJsZS1zZWxlY3QuY29tcG9uZW50LnNjc3MnXSxcbiAgZXhwb3J0QXM6ICdlZGl0YWJsZS1zZWxlY3QnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEVkaXRhYmxlU2VsZWN0Q29tcG9uZW50KSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgIH0sXG4gIF0sXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxufSlcbmV4cG9ydCBjbGFzcyBFZGl0YWJsZVNlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KCkgYXBwZW5kVG9Cb2R5ID0gZmFsc2U7XG4gIEBJbnB1dCgpIGFwcGVuZFRvQm9keURpcmVjdGlvbnM6IEFycmF5PEFwcGVuZFRvQm9keURpcmVjdGlvbiB8IENvbm5lY3RlZFBvc2l0aW9uPiA9IFsncmlnaHREb3duJywgJ2xlZnREb3duJywgJ3JpZ2h0VXAnLCAnbGVmdFVwJ107XG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XG4gIEBJbnB1dCgpIHNvdXJjZTogYW55W10gPSBbXTtcbiAgQElucHV0KCkgaXRlbVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBASW5wdXQoKSBub1Jlc3VsdEl0ZW1UZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcbiAgQElucHV0KCkgbWF4SGVpZ2h0OiBudW1iZXI7XG4gIEBJbnB1dCgpIHdpZHRoOiBudW1iZXI7XG4gIEBJbnB1dCgpIGRpc2FibGVkS2V5OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGFsbG93Q2xlYXIgPSBmYWxzZTtcbiAgQElucHV0KCkgZW5hYmxlTGF6eUxvYWQgPSBmYWxzZTtcbiAgQElucHV0KCkgZm9ybWF0dGVyID0gKGl0ZW06IGFueSkgPT4gKGl0ZW0gPyBpdGVtLmxhYmVsIHx8IGl0ZW0udG9TdHJpbmcoKSA6ICcnKTtcbiAgQElucHV0KCkgdmFsdWVQYXJzZXIgPSAoaXRlbSkgPT4gaXRlbTtcbiAgQElucHV0KCkgc2VhcmNoRm46ICh0ZXJtOiBzdHJpbmcpID0+IE9ic2VydmFibGU8YW55W10+O1xuICBASW5wdXQoKSBAV2l0aENvbmZpZygpIHNob3dBbmltYXRpb24gPSB0cnVlO1xuICBAT3V0cHV0KCkgbG9hZE1vcmUgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHRvZ2dsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAVmlld0NoaWxkKEF1dG9Db21wbGV0ZURpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSkgYXV0b0NvbXBsZXRlRGlyZWN0aXZlOiBBdXRvQ29tcGxldGVEaXJlY3RpdmU7XG4gIEBWaWV3Q2hpbGQoJ2VkaXRhYmxlU2VsZWN0Qm94JywgeyBzdGF0aWM6IHRydWUgfSkgZWRpdGFibGVTZWxlY3RCb3g6IEVsZW1lbnRSZWY7XG5cbiAgbXVsdGlJdGVtczogYW55W10gPSBbXTtcbiAgaW5wdXRWYWx1ZTogYW55O1xuICBhY3RpdmVJbmRleCA9IDA7XG4gIGkxOG5Db21tb25UZXh0OiBJMThuSW50ZXJmYWNlWydjb21tb24nXTtcbiAgaTE4blN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBzZXQgZHJvcERvd25PcGVuKHZhbCkge1xuICAgIHRoaXMuX2Ryb3BEb3duT3BlbiA9IHZhbDtcbiAgICBpZiAodGhpcy5fZHJvcERvd25PcGVuKSB7XG4gICAgICB0aGlzLmF1dG9Db21wbGV0ZURpcmVjdGl2ZS5vcGVuUG9wdXAodGhpcy5hY3RpdmVJbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXV0b0NvbXBsZXRlRGlyZWN0aXZlLmhpZGVQb3B1cCgpO1xuICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZHJvcERvd25PcGVuKCkge1xuICAgIHJldHVybiB0aGlzLl9kcm9wRG93bk9wZW47XG4gIH1cblxuICBwcml2YXRlIF9kcm9wRG93bk9wZW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBvbkNoYW5nZSA9IChfOiBhbnkpID0+IG51bGw7XG4gIHByaXZhdGUgb25Ub3VjaGVkID0gKCkgPT4gbnVsbDtcblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDpjbGljaycsIFsnJGV2ZW50J10pXG4gIG9uRG9jdW1lbnRDbGljayhldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZHJvcERvd25PcGVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0RWwgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0aGlzLmVkaXRhYmxlU2VsZWN0Qm94Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnModGFyZ2V0RWwpKSB7XG4gICAgICB0aGlzLmRyb3BEb3duT3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBpMThuOiBJMThuU2VydmljZSwgcHJpdmF0ZSBkZXZDb25maWdTZXJ2aWNlOiBEZXZDb25maWdTZXJ2aWNlKSB7fVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlcyAmJiBjaGFuZ2VzWydzZWFyY2hGbiddICYmIHR5cGVvZiB0aGlzLnNlYXJjaEZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zZWFyY2hGbignJykuc3Vic2NyaWJlKChzb3VyY2UpID0+IHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkuY29tbW9uO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gZGF0YS5jb21tb247XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pMThuU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmkxOG5TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cblxuICB3cml0ZVZhbHVlKG9iajogYW55KTogdm9pZCB7XG4gICAgdGhpcy5pbnB1dFZhbHVlID0gb2JqIHx8ICcnO1xuICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBzZWxlY3RWYWx1ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmRyb3BEb3duT3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgdmFsdWVDbGVhcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmlucHV0VmFsdWUgPSAnJztcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuaW5wdXRWYWx1ZSk7XG4gIH1cblxuICBvblRlcm1DaGFuZ2UodmFsdWU6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMub25DaGFuZ2UodGhpcy5pbnB1dFZhbHVlKTtcbiAgfVxuXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dFN0cmluZyA9IHRoaXMuZm9ybWF0dGVyKHRoaXMuaW5wdXRWYWx1ZSk7XG4gICAgdGhpcy5hY3RpdmVJbmRleCA9IHRoaXMuc291cmNlLm1hcCgoaXRlbSkgPT4gdGhpcy5mb3JtYXR0ZXIoaXRlbSkudG9Mb3dlckNhc2UoKSkuaW5kZXhPZihpbnB1dFN0cmluZy50b0xvd2VyQ2FzZSgpKTtcbiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy5hY3RpdmVJbmRleCA+IC0xID8gdGhpcy5hY3RpdmVJbmRleCA6IDA7XG4gICAgdGhpcy5kcm9wRG93bk9wZW4gPSAhdGhpcy5kcm9wRG93bk9wZW47XG4gIH1cblxuICBsb2FkTW9yZUV2ZW50KGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmxvYWRNb3JlLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgdG9nZ2xlQ2hhbmdlSGFuZGxlcih2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMudG9nZ2xlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICB9XG59XG4iLCI8ZGl2XG4gICNlZGl0YWJsZVNlbGVjdEJveFxuICBjbGFzcz1cImRldnVpLWZvcm0tZ3JvdXAgZGV2dWktaGFzLWZlZWRiYWNrXCJcbiAgW25nQ2xhc3NdPVwie1xuICAgICdkZXZ1aS1zZWxlY3Qtb3Blbic6IGRyb3BEb3duT3BlbixcbiAgICAnYWxsb3ctY2xlYXInOiAoaW5wdXRWYWx1ZSB8fCBpbnB1dFZhbHVlID09PSAwKSAmJiBhbGxvd0NsZWFyXG4gIH1cIlxuPlxuICA8aW5wdXRcbiAgICAoY2xpY2spPVwidG9nZ2xlKClcIlxuICAgIGNsYXNzPVwiZGV2dWktZm9ybS1jb250cm9sIGRldnVpLWRyb3Bkb3duLW9yaWdpblwiXG4gICAgdHlwZT1cInRleHRcIlxuICAgIG5hbWU9XCJhdXRvQ29tcGxldGVDb250cm9sXCJcbiAgICBbc291cmNlXT1cInNvdXJjZVwiXG4gICAgKG5nTW9kZWxDaGFuZ2UpPVwib25UZXJtQ2hhbmdlKCRldmVudClcIlxuICAgIFtuZ01vZGVsXT1cImlucHV0VmFsdWVcIlxuICAgIFtzZWFyY2hGbl09XCJzZWFyY2hGblwiXG4gICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICBbZGlzYWJsZWRLZXldPVwiZGlzYWJsZWRLZXlcIlxuICAgIFtwbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgW2l0ZW1UZW1wbGF0ZV09XCJpdGVtVGVtcGxhdGVcIlxuICAgIFtub1Jlc3VsdEl0ZW1UZW1wbGF0ZV09XCJub1Jlc3VsdEl0ZW1UZW1wbGF0ZSB8fCBub1Jlc3VsdERlZmF1bHRUZW1wbGF0ZVwiXG4gICAgW2FwcGVuZFRvQm9keV09XCJhcHBlbmRUb0JvZHlcIlxuICAgIFthcHBlbmRUb0JvZHlEaXJlY3Rpb25zXT1cImFwcGVuZFRvQm9keURpcmVjdGlvbnNcIlxuICAgIFttYXhIZWlnaHRdPVwibWF4SGVpZ2h0XCJcbiAgICBbc2NlbmVUeXBlXT1cIidzZWxlY3QnXCJcbiAgICBbZEF1dG9Db21wbGV0ZVdpZHRoXT1cIndpZHRoXCJcbiAgICBkQXV0b0NvbXBsZXRlXG4gICAgW2VuYWJsZUxhenlMb2FkXT1cImVuYWJsZUxhenlMb2FkXCJcbiAgICBbZm9ybWF0dGVyXT1cImZvcm1hdHRlclwiXG4gICAgW3ZhbHVlUGFyc2VyXT1cInZhbHVlUGFyc2VyXCJcbiAgICBbc2hvd0FuaW1hdGlvbl09XCJzaG93QW5pbWF0aW9uXCJcbiAgICAodG9nZ2xlQ2hhbmdlKT1cInRvZ2dsZUNoYW5nZUhhbmRsZXIoJGV2ZW50KVwiXG4gICAgKGxvYWRNb3JlKT1cImxvYWRNb3JlRXZlbnQoJGV2ZW50KVwiXG4gICAgKHNlbGVjdFZhbHVlKT1cInNlbGVjdFZhbHVlKClcIlxuICAvPlxuICA8c3BhbiBjbGFzcz1cImRldnVpLWZvcm0tY29udHJvbC1mZWVkYmFja1wiPlxuICAgIDxzcGFuIGNsYXNzPVwiZGV2dWktc2VsZWN0LWNsZWFyLWljb25cIiAoY2xpY2spPVwidmFsdWVDbGVhcigkZXZlbnQpXCI+XG4gICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMTYgMTZcIj5cbiAgICAgICAgPGcgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk04LDEgQzExLjg2NTk5MzIsMSAxNSw0LjEzNDAwNjc1IDE1LDggQzE1LDExLjg2NTk5MzIgMTEuODY1OTkzMiwxNSA4LDE1IEM0LjEzNDAwNjc1LDE1IDEsMTEuODY1OTkzMiAxLDggQzEsNC4xMzQwMDY3NSA0LjEzNDAwNjc1LDEgOCwxIFogTTUuODc4Njc5NjYsNS4xNzE1NzI4OCBDNS42ODM0MTc1MSw0Ljk3NjMxMDczIDUuMzY2ODM1MDIsNC45NzYzMTA3MyA1LjE3MTU3Mjg4LDUuMTcxNTcyODggQzQuOTk4MDA2NTIsNS4zNDUxMzkyMyA0Ljk3ODcyMTM3LDUuNjE0NTYzNjMgNS4xMTM3MTc0Miw1LjgwOTQzMTc3IEw1LjE3MTU3Mjg4LDUuODc4Njc5NjYgTDcuMjkyMTg2MTEsNy45OTkyOTI4OSBMNS4xNzE1NzI4OCwxMC4xMjEzMjAzIEM0Ljk3NjMxMDczLDEwLjMxNjU4MjUgNC45NzYzMTA3MywxMC42MzMxNjUgNS4xNzE1NzI4OCwxMC44Mjg0MjcxIEM1LjM0NTEzOTIzLDExLjAwMTk5MzUgNS42MTQ1NjM2MywxMS4wMjEyNzg2IDUuODA5NDMxNzcsMTAuODg2MjgyNiBMNS44Nzg2Nzk2NiwxMC44Mjg0MjcxIEw3Ljk5OTI5Mjg5LDguNzA2Mzk5NjcgTDEwLjEyMTMyMDMsMTAuODI4NDI3MSBDMTAuMzE2NTgyNSwxMS4wMjM2ODkzIDEwLjYzMzE2NSwxMS4wMjM2ODkzIDEwLjgyODQyNzEsMTAuODI4NDI3MSBDMTEuMDAxOTkzNSwxMC42NTQ4NjA4IDExLjAyMTI3ODYsMTAuMzg1NDM2NCAxMC44ODYyODI2LDEwLjE5MDU2ODIgTDEwLjgyODQyNzEsMTAuMTIxMzIwMyBMOC43MDcxMDY3OCw4IEwxMC44Mjg0MjcxLDUuODc4Njc5NjYgQzExLjAyMzY4OTMsNS42ODM0MTc1MSAxMS4wMjM2ODkzLDUuMzY2ODM1MDIgMTAuODI4NDI3MSw1LjE3MTU3Mjg4IEMxMC42NTQ4NjA4LDQuOTk4MDA2NTIgMTAuMzg1NDM2NCw0Ljk3ODcyMTM3IDEwLjE5MDU2ODIsNS4xMTM3MTc0MiBMMTAuMTIxMzIwMyw1LjE3MTU3Mjg4IEw4LDcuMjkyODkzMjIgTDUuODc4Njc5NjYsNS4xNzE1NzI4OCBaXCJcbiAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgID48L3BhdGg+XG4gICAgICAgIDwvZz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz1cImRldnVpLXNlbGVjdC1jaGV2cm9uLWljb25cIj5cbiAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAxNiAxNlwiPlxuICAgICAgICA8ZyBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTEyLjE0NjQ0NjYsNi44NTM1NTMzOSBMOC4zNTM1NTMzOSwxMC42NDY0NDY2IEM4LjE1ODI5MTI0LDEwLjg0MTcwODggNy44NDE3MDg3NiwxMC44NDE3MDg4IDcuNjQ2NDQ2NjEsMTAuNjQ2NDQ2NiBMMy44NTM1NTMzOSw2Ljg1MzU1MzM5IEMzLjY1ODI5MTI0LDYuNjU4MjkxMjQgMy42NTgyOTEyNCw2LjM0MTcwODc2IDMuODUzNTUzMzksNi4xNDY0NDY2MSBDMy45NDczMjE1OCw2LjA1MjY3ODQyIDQuMDc0NDk4NTQsNiA0LjIwNzEwNjc4LDYgTDExLjc5Mjg5MzIsNiBDMTIuMDY5MDM1Niw2IDEyLjI5Mjg5MzIsNi4yMjM4NTc2MyAxMi4yOTI4OTMyLDYuNSBDMTIuMjkyODkzMiw2LjYzMjYwODI0IDEyLjI0MDIxNDgsNi43NTk3ODUyIDEyLjE0NjQ0NjYsNi44NTM1NTMzOSBaXCJcbiAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgID48L3BhdGg+XG4gICAgICAgIDwvZz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvc3Bhbj5cbiAgPC9zcGFuPlxuPC9kaXY+XG5cbjxuZy10ZW1wbGF0ZSAjbm9SZXN1bHREZWZhdWx0VGVtcGxhdGU+XG4gIDxzcGFuPnt7IGlucHV0VmFsdWUgfHwgaW5wdXRWYWx1ZSA9PT0gMCA/IGkxOG5Db21tb25UZXh0Py5ub1JlY29yZHNGb3VuZCA6IGkxOG5Db21tb25UZXh0Py5ub0RhdGEgfX08L3NwYW4+XG48L25nLXRlbXBsYXRlPlxuIl19