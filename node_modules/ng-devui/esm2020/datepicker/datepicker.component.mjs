import { ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, HostListener, Input, Output, Renderer2, TemplateRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { I18nService } from 'ng-devui/i18n';
import { DefaultDateConverter, unshiftString } from 'ng-devui/utils';
import { SelectDateChangeReason } from './date-change-event-args.model';
import { DatePickerConfigService as DatePickerConfig } from './date-picker.config.service';
import * as i0 from "@angular/core";
import * as i1 from "./date-picker.config.service";
import * as i2 from "ng-devui/i18n";
import * as i3 from "ng-devui/button";
import * as i4 from "@angular/common";
import * as i5 from "@angular/forms";
export class DatepickerComponent {
    constructor(elementRef, renderer2, datePickerConfig, changeDetectorRef, i18n) {
        this.elementRef = elementRef;
        this.renderer2 = renderer2;
        this.datePickerConfig = datePickerConfig;
        this.changeDetectorRef = changeDetectorRef;
        this.i18n = i18n;
        this.selectedDateChange = new EventEmitter();
        this.disabled = false;
        this.mode = 'date';
        this.yearNumber = 12;
        this._yearNumber = 12;
        this.onChange = (_) => null;
        this.onTouched = () => null;
        this.clearAll = (reason) => {
            this.writeValue(null);
            this.selectedDate = null;
            const currentReason = typeof reason === 'number' ? reason : SelectDateChangeReason.custom;
            const dateObj = {
                reason: currentReason,
                selectedDate: null
            };
            // 清空时将null作为ngModelChange参数传出
            this.onChange(dateObj);
            this.selectedDateChange.emit(dateObj);
        };
        this.chooseDate = (date, event = {}, reason = SelectDateChangeReason.custom) => {
            const parseDate = this.dateConverter.parse(date, this.dateFormat);
            this.selectedDate = parseDate || new Date();
            this.onSelectDateChanged();
            this.onSelectDate(event, parseDate, undefined, reason);
        };
        this._dateConfig = datePickerConfig['dateConfig'];
        this.dateConverter = datePickerConfig['dateConfig'].dateConverter || new DefaultDateConverter();
        this.renderer2.setStyle(this.elementRef.nativeElement, 'display', 'inline-block');
        this.setI18nText();
    }
    ngOnInit() {
        this._minDate = this.minDate ? new Date(this.minDate) : new Date(this.dateConfig.min, 0, 1, 0, 0, 0);
        this._maxDate = this.maxDate ? new Date(this.maxDate) : new Date(this.dateConfig.max, 11, 31, 23, 59, 59);
        this.hourOptions = new Array(24).fill(0).map((value, index) => this.fillLeft(index));
        this.minuteOptions = new Array(60).fill(0).map((value, index) => this.fillLeft(index));
        const nowDate = this.selectedDate || new Date();
        this.nowMinYear = (nowDate).getFullYear() - Math.floor(this._yearNumber / 2) < this.minDate.getFullYear() ?
            this.minDate.getFullYear() : (nowDate).getFullYear() - Math.floor(this._yearNumber / 2);
        this.nowMaxYear = (nowDate).getFullYear() + Math.floor(this._yearNumber / 2) > this.maxDate.getFullYear() ?
            this.maxDate.getFullYear() : (nowDate).getFullYear() + Math.floor(this._yearNumber / 2);
        this.initMode();
        this.onSelectDateChanged();
        this.onDisplayWeeksChange();
        this.onYearRangeChange();
        this.initDatePicker();
    }
    initMode() {
        if (this.mode === 'year') {
            this.openChooseYear = true;
            this.openChooseMonth = false;
            if (!this.selectedDate) {
                this.selectedDate = new Date();
            }
            if (this.maxDate.getTime() < this.selectedDate.getTime()) {
                this.selectedDate = new Date(this.maxDate);
            }
            if (this.minDate.getTime() > this.selectedDate.getTime()) {
                this.selectedDate = new Date(this.minDate);
            }
        }
        else if (this.mode === 'month') {
            this.openChooseYear = false;
            this.openChooseMonth = true;
            if (!this.selectedDate) {
                this.selectedDate = new Date();
            }
            if (this.maxDate.getTime() < this.selectedDate.getTime()) {
                this.selectedDate = new Date(this.maxDate);
            }
            if (this.minDate.getTime() > this.selectedDate.getTime()) {
                this.selectedDate = new Date(this.minDate);
            }
        }
        else {
            this.openChooseYear = this.openChooseMonth = false;
        }
    }
    ngOnChanges(changes) {
        if (changes && changes['selectedDate'] && changes['selectedDate'].currentValue) {
            this.writeValue(this.selectedDate);
        }
    }
    onDocumentClick($event) {
        if (!this.elementRef.nativeElement.contains($event.target)) {
            this.openChooseYear = this.openChooseMonth = false;
            this.resetYearOptions();
        }
    }
    onClick($event) {
        $event.stopPropagation();
    }
    set showTime(showTime) {
        this._showTime = showTime;
    }
    get showTime() {
        return typeof this._showTime === 'boolean' ? this._showTime : this.dateConfig.timePicker;
    }
    set dateConfig(dateConfig) {
        if (this.checkDateConfig(dateConfig)) {
            this._dateConfig = dateConfig;
        }
        else {
            this._dateConfig = this.datePickerConfig.dateConfig;
        }
    }
    get dateConfig() {
        return this._dateConfig;
    }
    checkDateConfig(dateConfig) {
        if (!dateConfig) {
            return false;
        }
        if (typeof (dateConfig.timePicker) !== 'boolean' || !dateConfig.max || !dateConfig.min) {
            return false;
        }
        return true;
    }
    set minDate(date) {
        const parseDate = this.dateConverter.parse(date, this.dateFormat);
        if (parseDate) {
            this._minDate = parseDate;
            this.onYearRangeChange();
        }
    }
    get minDate() {
        return this._minDate;
    }
    set maxDate(date) {
        const parseDate = this.dateConverter.parse(date, this.dateFormat);
        if (parseDate) {
            this._maxDate = parseDate;
            this.onYearRangeChange();
        }
    }
    get maxDate() {
        return this._maxDate;
    }
    set currentHour(hour) {
        this._currentHour = hour;
    }
    get currentHour() {
        return unshiftString(String(this._currentHour), 2, '0');
    }
    set currentMinute(min) {
        this._currentMinute = min;
    }
    get currentMinute() {
        return unshiftString(String(this._currentMinute), 2, '0');
    }
    set currentSecond(sec) {
        this._currentSecond = sec;
    }
    get currentSecond() {
        return unshiftString(String(this._currentSecond), 2, '0');
    }
    resetYearOptions() {
        this.initMode();
        const baseYear = this.selectedDate ? this.selectedDate.getFullYear() : (new Date()).getFullYear();
        this.currentYear = baseYear;
        this.nowMinYear = baseYear - Math.floor(this._yearNumber / 2) < this.minDate.getFullYear() ?
            this.minDate.getFullYear() : baseYear - Math.floor(this._yearNumber / 2);
        this.nowMaxYear = baseYear + Math.floor(this._yearNumber / 2) > this.maxDate.getFullYear() ?
            this.maxDate.getFullYear() : baseYear + Math.floor(this._yearNumber / 2);
        this.onYearRangeChange();
    }
    onYearRangeChange() {
        if (!this.nowMinYear || !this.nowMaxYear) {
            return;
        }
        let baseYear = Math.round((this.nowMinYear + this.nowMaxYear) / 2);
        if (this.nowMaxYear - this.nowMinYear < this._yearNumber - 1) {
            if (this.nowMinYear === this.minDate.getFullYear() && this.nowMaxYear === this.maxDate.getFullYear()) {
                baseYear = this.nowMinYear + Math.round((this.nowMaxYear - this.nowMinYear) / 2);
            }
            else if (this.nowMinYear === this.minDate.getFullYear()) {
                baseYear = this.nowMaxYear - this._yearNumber / 2 + 1;
            }
            else if (this.nowMaxYear === this.maxDate.getFullYear()) {
                baseYear = this.nowMinYear + this._yearNumber / 2;
            }
        }
        this.yearOptions = new Array(this._yearNumber).fill(0).map((value, index) => {
            const title = baseYear - this._yearNumber / 2 + index;
            return {
                title: title,
                disabled: false
            };
        });
        if (this._yearNumber > this.nowMaxYear - this.nowMinYear + 1) {
            this.yearOptions.forEach((value, index) => {
                if (index < 6) {
                    value.disabled = value.title < this.nowMinYear;
                }
                else {
                    value.disabled = value.title > this.nowMaxYear;
                }
            });
        }
    }
    writeValue(obj) {
        if (!obj) {
            return;
        }
        this.selectedDate = this.dateConverter.parse(obj, this.dateFormat);
        this.onSelectDateChanged();
        this.onDisplayWeeksChange();
        this.availableMonths = this.onDisplayMonthsChange();
        this.changeDetectorRef.markForCheck();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    hasPreMonth() {
        if (this.currentYear > this.minDate.getFullYear()) {
            return true;
        }
        else if (this.currentYear === this.minDate.getFullYear() && this.currentMonthIndex > this.minDate.getMonth()) {
            return true;
        }
        else {
            return false;
        }
    }
    onPreMonth() {
        if (!this.hasPreMonth()) {
            return;
        }
        const date = new Date(this.currentYear, this.currentMonthIndex);
        date.setMonth(date.getMonth() - 1);
        this.currentMonthIndex = date.getMonth();
        this.currentYear = date.getFullYear();
        this.onDisplayWeeksChange();
    }
    hasNextMonth() {
        if (this.currentYear < this.maxDate.getFullYear()) {
            return true;
        }
        else if (this.currentYear === this.maxDate.getFullYear() && this.currentMonthIndex < this.maxDate.getMonth()) {
            return true;
        }
        else {
            return false;
        }
    }
    onNextMonth(currentDate, invocation) {
        if (!this.hasNextMonth() && invocation !== 'init') {
            return;
        }
        let date;
        if (currentDate) {
            date = new Date(currentDate.getTime());
        }
        else {
            date = new Date(this.currentYear, this.currentMonthIndex);
        }
        date.setMonth(date.getMonth() + 1);
        this.currentMonthIndex = date.getMonth();
        this.currentYear = date.getFullYear();
        this.onDisplayWeeksChange();
    }
    hasPreYearOption() {
        if (this.openChooseYear) {
            return this.yearOptions[0].title.toString() > this.minDate.getFullYear();
        }
        else {
            return Number(this.currentYear) > this.minDate.getFullYear();
        }
    }
    onPreYearOption() {
        if (!this.hasPreYearOption()) {
            return;
        }
        if (this.openChooseYear) {
            if (this.nowMinYear - this._yearNumber >= this.minDate.getFullYear()) {
                this.nowMaxYear = this.nowMinYear - 1;
                this.nowMinYear = this.nowMinYear - this._yearNumber;
            }
            else {
                this.nowMaxYear = this.nowMinYear - 1;
                this.nowMinYear = this.minDate.getFullYear();
            }
            this.onYearRangeChange();
        }
        else {
            this.onSelectYear(Number(this.currentYear) - 1);
        }
    }
    hasNextYearOption() {
        if (this.openChooseYear) {
            return this.yearOptions[11].title.toString() < this.maxDate.getFullYear();
        }
        else {
            return Number(this.currentYear) < this.maxDate.getFullYear();
        }
    }
    onNextYearOption() {
        if (!this.hasNextYearOption()) {
            return;
        }
        if (this.openChooseYear) {
            if (this.nowMaxYear + this._yearNumber <= this.maxDate.getFullYear()) {
                this.nowMinYear = this.nowMaxYear + 1;
                this.nowMaxYear = this.nowMaxYear + this._yearNumber;
            }
            else {
                this.nowMinYear = this.nowMaxYear + 1;
                this.nowMaxYear = this.maxDate.getFullYear();
            }
            this.onYearRangeChange();
        }
        else {
            this.onSelectYear(Number(this.currentYear) + 1);
        }
    }
    onSelectYear(year, $event) {
        if ($event) {
            $event.stopPropagation();
        }
        const yearDisabled = typeof year === 'object' ? year.disabled : false;
        const yearTitle = typeof year === 'object' ? year.title : year;
        if (yearDisabled) {
            return;
        }
        this.currentYear = yearTitle;
        if (this.mode === 'year') {
            this.onSelectDate($event, new Date(yearTitle, 0, 1));
        }
        else if (this.mode === 'month') {
            this.openChooseYear = false;
            this.availableMonths = this.onDisplayMonthsChange();
            this.currentMonthIndex = null;
            this.openChooseMonth = true;
        }
        else {
            this.onDisplayWeeksChange();
            this.availableMonths = this.onDisplayMonthsChange();
            this.openChooseYear = false;
            this.openChooseMonth = !!$event;
        }
    }
    onSelectDateChanged() {
        let date = this.selectedDate || new Date();
        if (date.getTime() < this.minDate.getTime()) {
            date = this.minDate;
        }
        if (date.getTime() > this.maxDate.getTime()) {
            date = this.maxDate;
        }
        this.currentYear = date.getFullYear();
        this.currentMonthIndex = date.getMonth();
        this.currentHour = this.showTime ? date.getHours() : 0;
        this.currentMinute = this.showTime ? date.getMinutes() : 0;
        this.currentSecond = this.showTime ? date.getSeconds() : 0;
    }
    onDisplayWeeksChange() {
        const today = new Date();
        const firstDayOfMonth = new Date(this.currentYear, this.currentMonthIndex, 1);
        const weekOfDay = firstDayOfMonth.getDay();
        const startDate = new Date(firstDayOfMonth.getTime() - weekOfDay * DatepickerComponent.DAY_DURATION);
        const displayWeeks = [];
        for (let i = 0; i < 6; i++) {
            const startWeekDate = startDate.getTime() + i * 7 * DatepickerComponent.DAY_DURATION;
            const weekDays = new Array(7).fill(0).map((value, index) => {
                const currentDate = new Date(startWeekDate + index * DatepickerComponent.DAY_DURATION);
                return {
                    day: this.fillLeft(currentDate.getDate()),
                    date: currentDate,
                    inMonth: currentDate.getMonth().toString() === this.currentMonthIndex.toString(),
                    isToday: currentDate.getFullYear() === today.getFullYear() &&
                        currentDate.getMonth() === today.getMonth() &&
                        currentDate.getDate() === today.getDate()
                };
            });
            displayWeeks.push(weekDays);
        }
        this.displayWeeks = displayWeeks;
    }
    onDisplayMonthsChange() {
        const all = new Array(12).fill(0).map((value, index) => {
            return {
                index: index,
                title: this.i18nText.monthsOfYear[index],
                disabled: false
            };
        });
        if (this.currentYear < this.minDate.getFullYear() || this.currentYear > this.maxDate.getFullYear()) {
            all.map(month => { month.disabled = true; });
        }
        if (this.currentYear === this.minDate.getFullYear()) {
            all.map(month => { month.disabled = month.index < this.minDate.getMonth(); });
        }
        if (this.currentYear === this.maxDate.getFullYear()) {
            all.map(month => { month.disabled = month.index > this.maxDate.getMonth(); });
        }
        return all;
    }
    fillLeft(num) {
        return num < 10 ? `0${num}` : `${num}`;
    }
    isDisabledDay(date) {
        if (this.disabled) {
            return true;
        }
        if (!date) {
            return false;
        }
        const minDate = new Date(this.minDate.getFullYear(), this.minDate.getMonth(), this.minDate.getDate());
        const maxDate = new Date(this.maxDate.getFullYear(), this.maxDate.getMonth(), this.maxDate.getDate(), 23, 59, 59);
        const dis = date.getTime() < minDate.getTime();
        return this.disabled || (date.getTime() < minDate.getTime() ||
            date.getTime() > maxDate.getTime());
    }
    isSelectDay(date) {
        if (!this.selectedDate || !date) {
            return false;
        }
        return (date.getFullYear() === this.selectedDate.getFullYear() &&
            date.getMonth() === this.selectedDate.getMonth() &&
            date.getDate() === this.selectedDate.getDate());
    }
    /*
    **  @param invocation:调用时机
    */
    onSelectDate($event, date, invocation, reason) {
        if ($event.stopPropagation) {
            $event.stopPropagation();
        }
        if (this.isDisabledDay(date)) {
            return;
        }
        this.selectedDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), Number(this.currentHour), Number(this.currentMinute), Number(this.currentSecond));
        const currentReason = typeof reason === 'number' ? reason : SelectDateChangeReason.date;
        const dateObj = {
            reason: currentReason,
            selectedDate: this.selectedDate
        };
        this.onTouched();
        this.writeValue(this.selectedDate);
        // 初始化的时候不触发emit和ngModelChange
        if (invocation !== 'init') {
            this.onChange(dateObj);
            this.selectedDateChange.emit(dateObj);
        }
        if (this.currentMonthIndex !== this.selectedDate.getMonth() ||
            this.currentYear !== this.selectedDate.getFullYear()) {
            this.currentYear = this.selectedDate.getFullYear();
            this.currentMonthIndex = this.selectedDate.getMonth();
            this.onDisplayWeeksChange();
        }
    }
    fixTime(event, type) {
        // 由于keypress不监听微软输入法需要使用keydown
        // 而keydown中微软输入法的key是'Process'，且keydown没有charCode，所以需要用code判断
        // 故退格和输入使用同一个事件
        let timeType;
        const min = 0;
        let max = 59;
        switch (type) {
            case 'h': {
                timeType = 'currentHour';
                max = 23;
                break;
            }
            case 'm': {
                timeType = 'currentMinute';
                break;
            }
            case 's': {
                timeType = 'currentSecond';
                break;
            }
        }
        let value = event.target['value'];
        const selectionStart = event.target['selectionStart'];
        const selectionEnd = event.target['selectionEnd'];
        // 是数字的时候再处理，分为小键盘和数字键
        if (/^(Digit|Numpad)\d$/.test(event.code)) {
            event.preventDefault();
            let input;
            if (event['clipboardData']) {
                input = event['clipboardData'].getData('text');
            }
            else if (event['code']) {
                input = event['code'].slice(event['code'].length - 1);
            }
            value = value.substring(0, selectionStart) + input + value.substring(selectionEnd);
            if (value.length === 3 && value.indexOf('0') === 0) {
                value = value.slice(1);
            }
        }
        else if (event.keyCode === 8) {
            event.preventDefault();
            value = value.substring(0, selectionStart - 1) + value.substring(selectionEnd);
            if (value.length < 2) {
                value = '0' + value;
            }
        }
        else if (!(event.keyCode >= 37 && event.keyCode <= 40)) {
            // 如果不是上下左右，就阻拦，执行自己的处理
            event.preventDefault();
        }
        if (/^(Digit|Numpad)\d$/.test(event.code) || event.keyCode === 8) {
            if (Number(value) >= min && Number(value) <= max) {
                this[timeType] = value;
                this.onTimeChange();
            }
        }
    }
    onTimeChange() {
        const date = this.selectedDate || new Date();
        this.selectedDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), Number(this.currentHour), Number(this.currentMinute), Number(this.currentSecond));
        const dateObj = {
            reason: SelectDateChangeReason.time,
            selectedDate: this.selectedDate
        };
        this.onTouched();
        this.writeValue(this.selectedDate);
        this.onChange(dateObj);
        this.selectedDateChange.emit(dateObj);
    }
    timeUp(type) {
        switch (type) {
            case 'h': {
                Number(this.currentHour) < 23 ? this.currentHour = (Number(this.currentHour) + 1) : this.currentHour = 0;
                break;
            }
            case 'm': {
                Number(this.currentMinute) < 59 ? this.currentMinute = (Number(this.currentMinute) + 1) : this.currentMinute = 0;
                break;
            }
            case 's': {
                Number(this.currentSecond) < 59 ? this.currentSecond = (Number(this.currentSecond) + 1) : this.currentSecond = 0;
                break;
            }
        }
        this.onTimeChange();
    }
    timeDown(type) {
        switch (type) {
            case 'h': {
                Number(this.currentHour) > 0 ? this.currentHour = (Number(this.currentHour) - 1) : this.currentHour = 23;
                break;
            }
            case 'm': {
                Number(this.currentMinute) > 0 ? this.currentMinute = (Number(this.currentMinute) - 1) : this.currentMinute = 59;
                break;
            }
            case 's': {
                Number(this.currentSecond) > 0 ? this.currentSecond = (Number(this.currentSecond) - 1) : this.currentSecond = 59;
                break;
            }
        }
        this.onTimeChange();
    }
    toggle($event, which) {
        $event.stopPropagation();
        if (which === 'year') {
            if (this.mode === 'year') {
                return;
            }
            else if (this.mode === 'month') {
                this.openChooseYear = true;
                this.openChooseMonth = false;
                return;
            }
            else {
                this.openChooseYear = !this.openChooseYear;
                this.openChooseMonth = false;
            }
        }
        else {
            if (this.mode === 'month') {
                return;
            }
            this.openChooseMonth = !this.openChooseMonth;
            this.openChooseYear = false;
        }
    }
    isTodayDisable() {
        return this.isDisabledDay(new Date());
    }
    isDisabledTime() {
        return this.isDisabledDay(this.selectedDate);
    }
    initDatePicker() {
        this.selectedDate = this.selectedDate ? this.selectedDate : new Date();
        if (this.isDisabledDay(this.selectedDate)) {
            return;
        }
        this.selectedDate = this.selectedDate ? this.selectedDate : new Date();
        this.onSelectDateChanged();
        this.onSelectDate({}, this.selectedDate, 'init');
    }
    confirmTime(event) {
        event.stopPropagation();
        const dateObj = {
            reason: SelectDateChangeReason.button,
            selectedDate: this.selectedDate
        };
        this.writeValue(this.selectedDate);
        this.onChange(dateObj);
        this.selectedDateChange.emit(dateObj);
    }
    chooseToday() {
        const today = new Date();
        if (this.isDisabledDay(today)) {
            return;
        }
        this.selectedDate = today;
        this.onSelectDateChanged();
        this.onSelectDate({}, today, undefined, SelectDateChangeReason.button);
    }
    onSelectMonth(month) {
        if (month.disabled) {
            return;
        }
        this.currentMonthIndex = month.index;
        if (this.mode === 'month') {
            this.onSelectDate({}, new Date(this.currentYear, this.currentMonthIndex, 1));
        }
        else {
            this.onDisplayWeeksChange();
            this.openChooseMonth = false;
        }
    }
    get minDateDefined() {
        return this.minDate.getTime() !== new Date(this.dateConfig.min, 0, 1, 0, 0, 0).getTime();
    }
    get maxDateDefined() {
        return this.maxDate.getTime() !== new Date(this.dateConfig.max, 11, 31, 23, 59, 59).getTime();
    }
    setI18nText() {
        this.i18nText = this.i18n.getI18nText().datePicker;
        this.i18nLocale = this.i18n.getI18nText().locale;
        this.i18nCommonText = this.i18n.getI18nText().common;
        this.i18nSubscription = this.i18n.langChange().subscribe((data) => {
            this.i18nText = data.datePicker;
            this.i18nLocale = data.locale;
            this.i18nCommonText = data.common;
        });
    }
    ngOnDestroy() {
        if (this.i18nSubscription) {
            this.i18nSubscription.unsubscribe();
        }
    }
}
DatepickerComponent.DAY_DURATION = 24 * 60 * 60 * 1000;
DatepickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DatepickerComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: i1.DatePickerConfigService }, { token: i0.ChangeDetectorRef }, { token: i2.I18nService }], target: i0.ɵɵFactoryTarget.Component });
DatepickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.3", type: DatepickerComponent, selector: "d-datepicker", inputs: { cssClass: "cssClass", dateConverter: "dateConverter", locale: "locale", disabled: "disabled", customViewTemplate: "customViewTemplate", selectedDate: "selectedDate", mode: "mode", dateFormat: "dateFormat", showTime: "showTime", dateConfig: "dateConfig", minDate: "minDate", maxDate: "maxDate" }, outputs: { selectedDateChange: "selectedDateChange" }, host: { listeners: { "document:click": "onDocumentClick($event)", "click": "onClick($event)" } }, providers: [{
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => DatepickerComponent),
            multi: true
        }], usesOnChanges: true, ngImport: i0, template: "<div class=\"devui-month-view {{ cssClass }}\">\n  <table class=\"devui-table devui-month-view-table\">\n    <thead class=\"devui-noSelect\">\n      <tr class=\"devui-date-header\">\n        <td>\n          <a\n            class=\"devui-btn-link\"\n            aria-hidden=\"true\"\n            (click)=\"onPreYearOption()\"\n            [ngClass]=\"{\n              'devui-year-month-disabled': !hasPreYearOption()\n            }\"\n          >\n            <svg\n              width=\"10px\"\n              height=\"10px\"\n              viewBox=\"0 0 10 10\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-1.000000, -1.000000)\">\n                  <path\n                    d=\"M11,1.83333333 L11,10.1666667 L7,7.38833333 L7,10.1666667 L1,6 L7,1.83333333 L7,4.61033333 L11,1.83333333 Z\"\n                  ></path>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td>\n          <a\n            *ngIf=\"!openChooseYear && !openChooseMonth\"\n            class=\"devui-btn-link devui-btn-left\"\n            aria-hidden=\"true\"\n            (click)=\"onPreMonth()\"\n            [ngClass]=\"{ 'devui-year-month-disabled': !hasPreMonth() }\"\n          >\n            <svg\n              width=\"6px\"\n              height=\"10px\"\n              viewBox=\"0 0 6 10\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-3.000000, -1.000000)\">\n                  <polygon\n                    transform=\"translate(6.000000, 6.000000) rotate(-90.000000) translate(-6.000000, -6.000000) \"\n                    points=\"6 3 10.1666667 9 1.83333333 9\"\n                  ></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td colspan=\"3\" class=\"devui-dropdown\">\n          <span class=\"devui-date-title\" (click)=\"toggle($event, 'year')\">{{ i18nText?.yearDisplay(currentYear) }}</span>\n          <span class=\"devui-date-title\" (click)=\"toggle($event, 'month')\" *ngIf=\"mode !== 'year'\">{{\n            (i18nText?.monthsOfYear)[currentMonthIndex]\n          }}</span>\n          <ul class=\"devui-monthOption text-center\" [style.display]=\"openChooseMonth ? 'block' : 'none'\">\n            <li\n              *ngFor=\"let month of availableMonths\"\n              [ngClass]=\"{ active: currentMonthIndex == month.index, disabled: month.disabled }\"\n              (click)=\"onSelectMonth(month)\"\n            >\n              {{ month.title }}\n            </li>\n          </ul>\n          <ul class=\"devui-yearOption text-center\" [style.display]=\"openChooseYear ? 'block' : 'none'\">\n            <li\n              *ngFor=\"let item of yearOptions\"\n              [ngClass]=\"{ active: currentYear == item.title, disabled: item.disabled }\"\n              (click)=\"onSelectYear(item, $event)\"\n            >\n              {{ item.title }}\n            </li>\n          </ul>\n        </td>\n        <td>\n          <a\n            *ngIf=\"!openChooseYear && !openChooseMonth\"\n            class=\"devui-btn-link devui-btn-right\"\n            aria-hidden=\"true\"\n            (click)=\"onNextMonth()\"\n            [ngClass]=\"{ 'devui-year-month-disabled': !hasNextMonth() }\"\n          >\n            <svg\n              width=\"6px\"\n              height=\"9px\"\n              viewBox=\"0 0 6 9\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-3.000000, -2.000000)\">\n                  <polygon\n                    transform=\"translate(6.000000, 6.166667) scale(-1, 1) rotate(-90.000000) translate(-6.000000, -6.166667) \"\n                    points=\"6 3.16666667 10.1666667 9.16666667 1.83333333 9.16666667\"\n                  ></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td>\n          <a\n            class=\"devui-btn-link\"\n            aria-hidden=\"true\"\n            (click)=\"onNextYearOption()\"\n            [ngClass]=\"{\n              'devui-year-month-disabled': !hasNextYearOption()\n            }\"\n          >\n            <svg\n              width=\"10px\"\n              height=\"9px\"\n              viewBox=\"0 0 10 9\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-1.000000, -2.000000)\">\n                  <polygon points=\"5 4.77777778 5 2 11 6.16666667 5 10.3333333 5 7.55555556 1 10.3333333 1 2\"></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n      </tr>\n      <tr class=\"small text-center devui-week-header\">\n        <td *ngFor=\"let item of i18nText?.daysOfWeek\">{{ item }}</td>\n      </tr>\n    </thead>\n    <tbody class=\"devui-noSelect\">\n      <tr *ngFor=\"let week of displayWeeks\">\n        <td\n          *ngFor=\"let day of week\"\n          class=\"devui-day\"\n          [ngClass]=\"{\n            'devui-out-of-month': !day.inMonth,\n            'devui-in-month-day': day.inMonth,\n            active: isSelectDay(day.date),\n            disabled: isDisabledDay(day.date),\n            'devui-today': day.isToday\n          }\"\n          (click)=\"onSelectDate($event, day.date)\"\n        >\n          <div class=\"devui-calendar-date\">{{ day.day }}</div>\n        </td>\n      </tr>\n    </tbody>\n    <tfoot [ngClass]=\"{ 'devui-noSelect': !customViewTemplate }\">\n      <tr class=\"time-picker-view\" (click)=\"!customViewTemplate && $event.stopPropagation()\" *ngIf=\"showTime || !customViewTemplate\">\n        <td colspan=\"4\">\n          <div class=\"devui-timepicker\" *ngIf=\"showTime\" [ngClass]=\"{ 'devui-timepicker-disabled': isDisabledTime() }\">\n            <div class=\"devui-time\">\n              <input [ngModel]=\"currentHour\" (keydown)=\"fixTime($event, 'h')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('h')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('h')\"></div>\n              </div>\n            </div>\n            <div class=\"devui-time\">\n              <input class=\"devui-minutes\" [ngModel]=\"currentMinute\" (keydown)=\"fixTime($event, 'm')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('m')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('m')\"></div>\n              </div>\n            </div>\n            <div class=\"devui-time\">\n              <input class=\"devui-seconds\" [ngModel]=\"currentSecond\" (keydown)=\"fixTime($event, 's')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('s')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('s')\"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td colspan=\"3\">\n          <div class=\"devui-btn-wrapper\" *ngIf=\"showTime\">\n            <d-button bsStyle=\"common\" [disabled]=\"disabled\" (btnClick)=\"confirmTime($event)\" bsSize=\"sm\"\n              >{{ i18nCommonText?.btnConfirm }}\n            </d-button>\n          </div>\n          <div class=\"devui-btn-wrapper\" *ngIf=\"!showTime\">\n            <d-button bsStyle=\"common\" [disabled]=\"isTodayDisable() || disabled\" (btnClick)=\"chooseToday()\" bsSize=\"sm\"\n              >{{ i18nText?.today }}\n            </d-button>\n          </div>\n        </td>\n      </tr>\n      <tr class=\"time-picker-view devui-custom-area\" *ngIf=\"customViewTemplate\">\n        <td colspan=\"7\">\n          <ng-template\n            [ngTemplateOutlet]=\"customViewTemplate\"\n            [ngTemplateOutletContext]=\"{ $implicit: this, chooseDate: chooseDate, clearAll: clearAll }\"\n          ></ng-template>\n        </td>\n      </tr>\n    </tfoot>\n  </table>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-date-header{height:38px}.devui-month-view{background-color:#fff;background-color:var(--devui-connected-overlay-bg, #ffffff);font-size:12px;font-size:var(--devui-font-size, 12px);width:240px;text-align:center;box-shadow:0 2px 8px rgba(37,43,58,.2);box-shadow:var(--devui-shadow-connected-overlay, 0 2px 8px 0) var(--devui-shadow, rgba(37, 43, 58, .2));border-radius:2px;border-radius:var(--devui-border-radius, 2px);position:relative}.devui-month-view .devui-month-view-table{margin-bottom:0;background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff);table-layout:fixed;border-collapse:collapse;width:100%}.devui-month-view .devui-date-title{font-weight:700;cursor:pointer;font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-month-view .devui-date-title:hover{color:#7693f5;color:var(--devui-brand-hover, #7693f5)}.devui-month-view .devui-btn-link{text-decoration:none;cursor:pointer;display:block}.devui-month-view .devui-btn-link.devui-year-month-disabled{cursor:not-allowed}.devui-month-view .devui-btn-link.devui-year-month-disabled svg path,.devui-month-view .devui-btn-link.devui-year-month-disabled svg polygon{fill:#cfd0d3;fill:var(--devui-disabled-text, #cfd0d3)}.devui-month-view .devui-btn-link svg path,.devui-month-view .devui-btn-link svg polygon{fill:#575d6c;fill:var(--devui-text-weak, #575d6c)}.devui-month-view .devui-btn-link:not(.devui-year-month-disabled):hover svg path,.devui-month-view .devui-btn-link:not(.devui-year-month-disabled):hover svg polygon{fill:#252b3a;fill:var(--devui-icon-fill-active-hover, #252b3a)}.devui-month-view .date-select{border:none;background:transparent;outline:none;-moz-appearance:none;-webkit-appearance:none;appearance:none}.devui-month-view .devui-week-header{cursor:default;margin-bottom:16px}.devui-month-view .devui-week-header td{width:32px;height:24px;line-height:24px;color:#252b3a;color:var(--devui-text, #252b3a);border:none}.devui-month-view .devui-day:not(.disabled){cursor:pointer;font-size:12px;font-size:var(--devui-font-size, 12px);color:#dfe1e6;color:var(--devui-feedback-overlay-text, #dfe1e6)}.devui-month-view .devui-day.disabled{cursor:not-allowed}.devui-calendar-date{display:block;margin:0 3px;width:20px;height:20px;padding:0;line-height:20px;background:transparent;text-align:center;font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a)}.devui-month-view .devui-out-of-month .devui-calendar-date{opacity:.8;background-color:#fff;background-color:var(--devui-connected-overlay-bg, #ffffff);color:#d7d8da;color:var(--devui-line, #d7d8da)}.devui-month-view .devui-out-of-month:not(.disabled):hover .devui-calendar-date{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-view .devui-minutes:before{content:\":\";text-align:center;position:absolute;margin-left:-13px}.devui-month-view .devui-seconds:before{content:\":\";text-align:center;position:absolute;margin-left:-13px}.devui-yearOption,.devui-monthOption{width:240px;height:195px;position:absolute;left:-68px;top:30px;background:#ffffff;background:var(--devui-base-bg, #ffffff);z-index:1}.devui-yearOption li,.devui-monthOption li{width:60px;height:68px;line-height:68px;text-align:center;display:inline-block;background:#ffffff;background:var(--devui-base-bg, #ffffff);border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.devui-yearOption li:hover,.devui-monthOption li:hover{background:#f2f2f3;background:var(--devui-list-item-hover-bg, #f2f2f3);color:#252b3a;color:var(--devui-list-item-hover-text, #252b3a);cursor:pointer}.devui-yearOption li.active:not(.disabled),.devui-monthOption li.active:not(.disabled){color:#252b3a;color:var(--devui-list-item-active-text, #252b3a);background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-yearOption li.active:not(.disabled):hover,.devui-monthOption li.active:not(.disabled):hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-hover-bg, #f2f5fc)}.devui-yearOption li.disabled,.devui-monthOption li.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);cursor:not-allowed}.devui-month-view .devui-timepicker{background:#f5f5f5;background:var(--devui-area, #f5f5f5);display:flex;justify-content:space-evenly}.devui-month-view .devui-timepicker input{outline:0;border:0;background:#f5f5f5;background:var(--devui-area, #f5f5f5);color:#252b3a;color:var(--devui-text, #252b3a);width:30px;padding:0 0 0 3px;height:30px;text-align:center}.devui-month-view .devui-timepicker.devui-timepicker-disabled{background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-timepicker.devui-timepicker-disabled input{cursor:not-allowed;color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-timepicker .devui-time{position:relative;display:inline-block;width:40px}.devui-month-view .devui-timepicker .devui-time:not(:first-child):before{content:\":\"}.devui-month-view .devui-table>tbody>tr>td{vertical-align:middle;padding:4px;border-top:none;border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.devui-month-view .devui-table>tbody>tr>td.devui-day-start{border-radius:2px 0 0 2px;border-radius:var(--devui-border-radius, 2px) 0 0 var(--devui-border-radius, 2px)}.devui-month-view .devui-table>tbody>tr>td.devui-day-end{border-radius:0 2px 2px 0;border-radius:0 var(--devui-border-radius, 2px) var(--devui-border-radius, 2px) 0}.devui-month-view .devui-table>tbody>tr>td:not(.disabled){border-top:none;background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff)}.devui-month-view .devui-table>tbody>tr>td.devui-day:hover:not(.active):not(.disabled):not(.devui-out-of-month){background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled).active:hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-hover-bg, #f2f5fc)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled).active:hover>.devui-calendar-date{color:#fff;color:var(--devui-light-text, #ffffff)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled):not(.active):not(.devui-out-of-month):not(:hover).devui-today .devui-calendar-date{color:#5e7ce0;color:var(--devui-brand, #5e7ce0);font-weight:700}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);cursor:not-allowed}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled .devui-calendar-date{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled:not(.active){background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled.active{background-color:#dfe1e6;background-color:var(--devui-disabled-line, #dfe1e6)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day:not(.disabled).active{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day:not(.disabled).active>.devui-calendar-date{color:#fff;color:var(--devui-light-text, #ffffff)}.devui-month-view .devui-table>thead>tr>td{vertical-align:middle;line-height:1.5;padding:4px}.devui-noSelect{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.devui-month-view .devui-month-view-table td{border-bottom:none}.devui-month-view .devui-table tfoot,.devui-custom-area{border-top:1px solid #f5f5f5;border-top:1px solid var(--devui-area, #f5f5f5)}.devui-month-view tfoot td{padding:10px;vertical-align:middle;border-top:none}.devui-dropdown-menu{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-btn-wrapper{margin-top:0}.devui-btn-nav{display:none;position:absolute;right:9px;top:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.devui-btn-nav .btn-up,.devui-btn-nav .btn-down{position:absolute;width:0;height:0;border:6px solid}.devui-btn-nav .btn-up{padding-top:2px;padding-bottom:1px;border-color:transparent transparent #252b3a transparent;border-color:transparent transparent var(--devui-text, #252b3a) transparent}.devui-btn-nav .btn-up:hover{border-color:transparent transparent #252b3a transparent;border-color:transparent transparent var(--devui-icon-fill-active, #252b3a) transparent}.devui-btn-nav .btn-down{top:16px;padding-bottom:4px;border-color:#252b3a transparent transparent transparent;border-color:var(--devui-text, #252b3a) transparent transparent transparent}.devui-btn-nav .btn-down:hover{border-color:#252b3a transparent transparent transparent;border-color:var(--devui-icon-fill-active, #252b3a) transparent transparent transparent}.devui-time input[type=number]::-webkit-inner-spin-button,.devui-time input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.devui-time input[type=number]{-moz-appearance:textfield}.devui-time:hover .devui-btn-nav{display:block}:host ::ng-deep .cdk-overlay-pane d-datepicker.devui-dropdown-menu{padding:0}:host .devui-form-control{padding-right:0}\n"], components: [{ type: i3.ButtonComponent, selector: "d-button", inputs: ["id", "type", "bsStyle", "shape", "bsSize", "bsPosition", "bordered", "icon", "disabled", "showLoading", "width", "autofocus", "loadingTemplateRef"], outputs: ["btnClick"] }], directives: [{ type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i5.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i5.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.3", ngImport: i0, type: DatepickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'd-datepicker', providers: [{
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => DatepickerComponent),
                            multi: true
                        }], preserveWhitespaces: false, template: "<div class=\"devui-month-view {{ cssClass }}\">\n  <table class=\"devui-table devui-month-view-table\">\n    <thead class=\"devui-noSelect\">\n      <tr class=\"devui-date-header\">\n        <td>\n          <a\n            class=\"devui-btn-link\"\n            aria-hidden=\"true\"\n            (click)=\"onPreYearOption()\"\n            [ngClass]=\"{\n              'devui-year-month-disabled': !hasPreYearOption()\n            }\"\n          >\n            <svg\n              width=\"10px\"\n              height=\"10px\"\n              viewBox=\"0 0 10 10\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-1.000000, -1.000000)\">\n                  <path\n                    d=\"M11,1.83333333 L11,10.1666667 L7,7.38833333 L7,10.1666667 L1,6 L7,1.83333333 L7,4.61033333 L11,1.83333333 Z\"\n                  ></path>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td>\n          <a\n            *ngIf=\"!openChooseYear && !openChooseMonth\"\n            class=\"devui-btn-link devui-btn-left\"\n            aria-hidden=\"true\"\n            (click)=\"onPreMonth()\"\n            [ngClass]=\"{ 'devui-year-month-disabled': !hasPreMonth() }\"\n          >\n            <svg\n              width=\"6px\"\n              height=\"10px\"\n              viewBox=\"0 0 6 10\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-3.000000, -1.000000)\">\n                  <polygon\n                    transform=\"translate(6.000000, 6.000000) rotate(-90.000000) translate(-6.000000, -6.000000) \"\n                    points=\"6 3 10.1666667 9 1.83333333 9\"\n                  ></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td colspan=\"3\" class=\"devui-dropdown\">\n          <span class=\"devui-date-title\" (click)=\"toggle($event, 'year')\">{{ i18nText?.yearDisplay(currentYear) }}</span>\n          <span class=\"devui-date-title\" (click)=\"toggle($event, 'month')\" *ngIf=\"mode !== 'year'\">{{\n            (i18nText?.monthsOfYear)[currentMonthIndex]\n          }}</span>\n          <ul class=\"devui-monthOption text-center\" [style.display]=\"openChooseMonth ? 'block' : 'none'\">\n            <li\n              *ngFor=\"let month of availableMonths\"\n              [ngClass]=\"{ active: currentMonthIndex == month.index, disabled: month.disabled }\"\n              (click)=\"onSelectMonth(month)\"\n            >\n              {{ month.title }}\n            </li>\n          </ul>\n          <ul class=\"devui-yearOption text-center\" [style.display]=\"openChooseYear ? 'block' : 'none'\">\n            <li\n              *ngFor=\"let item of yearOptions\"\n              [ngClass]=\"{ active: currentYear == item.title, disabled: item.disabled }\"\n              (click)=\"onSelectYear(item, $event)\"\n            >\n              {{ item.title }}\n            </li>\n          </ul>\n        </td>\n        <td>\n          <a\n            *ngIf=\"!openChooseYear && !openChooseMonth\"\n            class=\"devui-btn-link devui-btn-right\"\n            aria-hidden=\"true\"\n            (click)=\"onNextMonth()\"\n            [ngClass]=\"{ 'devui-year-month-disabled': !hasNextMonth() }\"\n          >\n            <svg\n              width=\"6px\"\n              height=\"9px\"\n              viewBox=\"0 0 6 9\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-3.000000, -2.000000)\">\n                  <polygon\n                    transform=\"translate(6.000000, 6.166667) scale(-1, 1) rotate(-90.000000) translate(-6.000000, -6.166667) \"\n                    points=\"6 3.16666667 10.1666667 9.16666667 1.83333333 9.16666667\"\n                  ></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n        <td>\n          <a\n            class=\"devui-btn-link\"\n            aria-hidden=\"true\"\n            (click)=\"onNextYearOption()\"\n            [ngClass]=\"{\n              'devui-year-month-disabled': !hasNextYearOption()\n            }\"\n          >\n            <svg\n              width=\"10px\"\n              height=\"9px\"\n              viewBox=\"0 0 10 9\"\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            >\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g transform=\"translate(-1.000000, -2.000000)\">\n                  <polygon points=\"5 4.77777778 5 2 11 6.16666667 5 10.3333333 5 7.55555556 1 10.3333333 1 2\"></polygon>\n                </g>\n              </g>\n            </svg>\n          </a>\n        </td>\n      </tr>\n      <tr class=\"small text-center devui-week-header\">\n        <td *ngFor=\"let item of i18nText?.daysOfWeek\">{{ item }}</td>\n      </tr>\n    </thead>\n    <tbody class=\"devui-noSelect\">\n      <tr *ngFor=\"let week of displayWeeks\">\n        <td\n          *ngFor=\"let day of week\"\n          class=\"devui-day\"\n          [ngClass]=\"{\n            'devui-out-of-month': !day.inMonth,\n            'devui-in-month-day': day.inMonth,\n            active: isSelectDay(day.date),\n            disabled: isDisabledDay(day.date),\n            'devui-today': day.isToday\n          }\"\n          (click)=\"onSelectDate($event, day.date)\"\n        >\n          <div class=\"devui-calendar-date\">{{ day.day }}</div>\n        </td>\n      </tr>\n    </tbody>\n    <tfoot [ngClass]=\"{ 'devui-noSelect': !customViewTemplate }\">\n      <tr class=\"time-picker-view\" (click)=\"!customViewTemplate && $event.stopPropagation()\" *ngIf=\"showTime || !customViewTemplate\">\n        <td colspan=\"4\">\n          <div class=\"devui-timepicker\" *ngIf=\"showTime\" [ngClass]=\"{ 'devui-timepicker-disabled': isDisabledTime() }\">\n            <div class=\"devui-time\">\n              <input [ngModel]=\"currentHour\" (keydown)=\"fixTime($event, 'h')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('h')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('h')\"></div>\n              </div>\n            </div>\n            <div class=\"devui-time\">\n              <input class=\"devui-minutes\" [ngModel]=\"currentMinute\" (keydown)=\"fixTime($event, 'm')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('m')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('m')\"></div>\n              </div>\n            </div>\n            <div class=\"devui-time\">\n              <input class=\"devui-seconds\" [ngModel]=\"currentSecond\" (keydown)=\"fixTime($event, 's')\" [disabled]=\"isDisabledTime()\" />\n              <div class=\"devui-btn-nav\" *ngIf=\"!isDisabledTime()\">\n                <div class=\"btn-up\" (click)=\"timeUp('s')\"></div>\n                <div class=\"btn-down\" (click)=\"timeDown('s')\"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td colspan=\"3\">\n          <div class=\"devui-btn-wrapper\" *ngIf=\"showTime\">\n            <d-button bsStyle=\"common\" [disabled]=\"disabled\" (btnClick)=\"confirmTime($event)\" bsSize=\"sm\"\n              >{{ i18nCommonText?.btnConfirm }}\n            </d-button>\n          </div>\n          <div class=\"devui-btn-wrapper\" *ngIf=\"!showTime\">\n            <d-button bsStyle=\"common\" [disabled]=\"isTodayDisable() || disabled\" (btnClick)=\"chooseToday()\" bsSize=\"sm\"\n              >{{ i18nText?.today }}\n            </d-button>\n          </div>\n        </td>\n      </tr>\n      <tr class=\"time-picker-view devui-custom-area\" *ngIf=\"customViewTemplate\">\n        <td colspan=\"7\">\n          <ng-template\n            [ngTemplateOutlet]=\"customViewTemplate\"\n            [ngTemplateOutletContext]=\"{ $implicit: this, chooseDate: chooseDate, clearAll: clearAll }\"\n          ></ng-template>\n        </td>\n      </tr>\n    </tfoot>\n  </table>\n</div>\n", styles: [".devui-font-size-base{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-font-base{font-size:12px;font-size:var(--devui-font-size, 12px);font-weight:400;line-height:1.5}.devui-font-size-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px)}.devui-font-modal-title{font-size:18px;font-size:var(--devui-font-size-modal-title, 18px);font-weight:700;line-height:1.5}.devui-font-size-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px)}.devui-font-page-title{font-size:16px;font-size:var(--devui-font-size-page-title, 16px);font-weight:700;line-height:1.5}.devui-font-size-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px)}.devui-font-secondary-title{font-size:14px;font-size:var(--devui-font-size-card-title, 14px);font-weight:700;line-height:1.5}.devui-date-header{height:38px}.devui-month-view{background-color:#fff;background-color:var(--devui-connected-overlay-bg, #ffffff);font-size:12px;font-size:var(--devui-font-size, 12px);width:240px;text-align:center;box-shadow:0 2px 8px rgba(37,43,58,.2);box-shadow:var(--devui-shadow-connected-overlay, 0 2px 8px 0) var(--devui-shadow, rgba(37, 43, 58, .2));border-radius:2px;border-radius:var(--devui-border-radius, 2px);position:relative}.devui-month-view .devui-month-view-table{margin-bottom:0;background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff);table-layout:fixed;border-collapse:collapse;width:100%}.devui-month-view .devui-date-title{font-weight:700;cursor:pointer;font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-month-view .devui-date-title:hover{color:#7693f5;color:var(--devui-brand-hover, #7693f5)}.devui-month-view .devui-btn-link{text-decoration:none;cursor:pointer;display:block}.devui-month-view .devui-btn-link.devui-year-month-disabled{cursor:not-allowed}.devui-month-view .devui-btn-link.devui-year-month-disabled svg path,.devui-month-view .devui-btn-link.devui-year-month-disabled svg polygon{fill:#cfd0d3;fill:var(--devui-disabled-text, #cfd0d3)}.devui-month-view .devui-btn-link svg path,.devui-month-view .devui-btn-link svg polygon{fill:#575d6c;fill:var(--devui-text-weak, #575d6c)}.devui-month-view .devui-btn-link:not(.devui-year-month-disabled):hover svg path,.devui-month-view .devui-btn-link:not(.devui-year-month-disabled):hover svg polygon{fill:#252b3a;fill:var(--devui-icon-fill-active-hover, #252b3a)}.devui-month-view .date-select{border:none;background:transparent;outline:none;-moz-appearance:none;-webkit-appearance:none;appearance:none}.devui-month-view .devui-week-header{cursor:default;margin-bottom:16px}.devui-month-view .devui-week-header td{width:32px;height:24px;line-height:24px;color:#252b3a;color:var(--devui-text, #252b3a);border:none}.devui-month-view .devui-day:not(.disabled){cursor:pointer;font-size:12px;font-size:var(--devui-font-size, 12px);color:#dfe1e6;color:var(--devui-feedback-overlay-text, #dfe1e6)}.devui-month-view .devui-day.disabled{cursor:not-allowed}.devui-calendar-date{display:block;margin:0 3px;width:20px;height:20px;padding:0;line-height:20px;background:transparent;text-align:center;font-size:12px;font-size:var(--devui-font-size, 12px);color:#252b3a;color:var(--devui-text, #252b3a)}.devui-month-view .devui-out-of-month .devui-calendar-date{opacity:.8;background-color:#fff;background-color:var(--devui-connected-overlay-bg, #ffffff);color:#d7d8da;color:var(--devui-line, #d7d8da)}.devui-month-view .devui-out-of-month:not(.disabled):hover .devui-calendar-date{background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-view .devui-minutes:before{content:\":\";text-align:center;position:absolute;margin-left:-13px}.devui-month-view .devui-seconds:before{content:\":\";text-align:center;position:absolute;margin-left:-13px}.devui-yearOption,.devui-monthOption{width:240px;height:195px;position:absolute;left:-68px;top:30px;background:#ffffff;background:var(--devui-base-bg, #ffffff);z-index:1}.devui-yearOption li,.devui-monthOption li{width:60px;height:68px;line-height:68px;text-align:center;display:inline-block;background:#ffffff;background:var(--devui-base-bg, #ffffff);border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.devui-yearOption li:hover,.devui-monthOption li:hover{background:#f2f2f3;background:var(--devui-list-item-hover-bg, #f2f2f3);color:#252b3a;color:var(--devui-list-item-hover-text, #252b3a);cursor:pointer}.devui-yearOption li.active:not(.disabled),.devui-monthOption li.active:not(.disabled){color:#252b3a;color:var(--devui-list-item-active-text, #252b3a);background-color:#f2f5fc;background-color:var(--devui-list-item-active-bg, #f2f5fc)}.devui-yearOption li.active:not(.disabled):hover,.devui-monthOption li.active:not(.disabled):hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-hover-bg, #f2f5fc)}.devui-yearOption li.disabled,.devui-monthOption li.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5);cursor:not-allowed}.devui-month-view .devui-timepicker{background:#f5f5f5;background:var(--devui-area, #f5f5f5);display:flex;justify-content:space-evenly}.devui-month-view .devui-timepicker input{outline:0;border:0;background:#f5f5f5;background:var(--devui-area, #f5f5f5);color:#252b3a;color:var(--devui-text, #252b3a);width:30px;padding:0 0 0 3px;height:30px;text-align:center}.devui-month-view .devui-timepicker.devui-timepicker-disabled{background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-timepicker.devui-timepicker-disabled input{cursor:not-allowed;color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-timepicker .devui-time{position:relative;display:inline-block;width:40px}.devui-month-view .devui-timepicker .devui-time:not(:first-child):before{content:\":\"}.devui-month-view .devui-table>tbody>tr>td{vertical-align:middle;padding:4px;border-top:none;border-radius:2px;border-radius:var(--devui-border-radius, 2px)}.devui-month-view .devui-table>tbody>tr>td.devui-day-start{border-radius:2px 0 0 2px;border-radius:var(--devui-border-radius, 2px) 0 0 var(--devui-border-radius, 2px)}.devui-month-view .devui-table>tbody>tr>td.devui-day-end{border-radius:0 2px 2px 0;border-radius:0 var(--devui-border-radius, 2px) var(--devui-border-radius, 2px) 0}.devui-month-view .devui-table>tbody>tr>td:not(.disabled){border-top:none;background:#ffffff;background:var(--devui-connected-overlay-bg, #ffffff)}.devui-month-view .devui-table>tbody>tr>td.devui-day:hover:not(.active):not(.disabled):not(.devui-out-of-month){background-color:#f2f2f3;background-color:var(--devui-list-item-hover-bg, #f2f2f3)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled).active:hover{background-color:#f2f5fc;background-color:var(--devui-list-item-active-hover-bg, #f2f5fc)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled).active:hover>.devui-calendar-date{color:#fff;color:var(--devui-light-text, #ffffff)}.devui-month-view .devui-table>tbody>tr>td.devui-day:not(.disabled):not(.active):not(.devui-out-of-month):not(:hover).devui-today .devui-calendar-date{color:#5e7ce0;color:var(--devui-brand, #5e7ce0);font-weight:700}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3);cursor:not-allowed}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled .devui-calendar-date{color:#cfd0d3;color:var(--devui-disabled-text, #cfd0d3)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled:not(.active){background-color:#f5f5f5;background-color:var(--devui-disabled-bg, #f5f5f5)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day.disabled.active{background-color:#dfe1e6;background-color:var(--devui-disabled-line, #dfe1e6)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day:not(.disabled).active{background:#f2f5fc;background:var(--devui-list-item-active-bg, #f2f5fc)}.devui-month-view .devui-table>tbody>tr>td.devui-in-month-day:not(.disabled).active>.devui-calendar-date{color:#fff;color:var(--devui-light-text, #ffffff)}.devui-month-view .devui-table>thead>tr>td{vertical-align:middle;line-height:1.5;padding:4px}.devui-noSelect{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.devui-month-view .devui-month-view-table td{border-bottom:none}.devui-month-view .devui-table tfoot,.devui-custom-area{border-top:1px solid #f5f5f5;border-top:1px solid var(--devui-area, #f5f5f5)}.devui-month-view tfoot td{padding:10px;vertical-align:middle;border-top:none}.devui-dropdown-menu{font-size:12px;font-size:var(--devui-font-size, 12px)}.devui-btn-wrapper{margin-top:0}.devui-btn-nav{display:none;position:absolute;right:9px;top:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.devui-btn-nav .btn-up,.devui-btn-nav .btn-down{position:absolute;width:0;height:0;border:6px solid}.devui-btn-nav .btn-up{padding-top:2px;padding-bottom:1px;border-color:transparent transparent #252b3a transparent;border-color:transparent transparent var(--devui-text, #252b3a) transparent}.devui-btn-nav .btn-up:hover{border-color:transparent transparent #252b3a transparent;border-color:transparent transparent var(--devui-icon-fill-active, #252b3a) transparent}.devui-btn-nav .btn-down{top:16px;padding-bottom:4px;border-color:#252b3a transparent transparent transparent;border-color:var(--devui-text, #252b3a) transparent transparent transparent}.devui-btn-nav .btn-down:hover{border-color:#252b3a transparent transparent transparent;border-color:var(--devui-icon-fill-active, #252b3a) transparent transparent transparent}.devui-time input[type=number]::-webkit-inner-spin-button,.devui-time input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.devui-time input[type=number]{-moz-appearance:textfield}.devui-time:hover .devui-btn-nav{display:block}:host ::ng-deep .cdk-overlay-pane d-datepicker.devui-dropdown-menu{padding:0}:host .devui-form-control{padding-right:0}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i1.DatePickerConfigService }, { type: i0.ChangeDetectorRef }, { type: i2.I18nService }]; }, propDecorators: { cssClass: [{
                type: Input
            }], dateConverter: [{
                type: Input
            }], locale: [{
                type: Input
            }], selectedDateChange: [{
                type: Output
            }], disabled: [{
                type: Input
            }], customViewTemplate: [{
                type: Input
            }], selectedDate: [{
                type: Input
            }], mode: [{
                type: Input
            }], dateFormat: [{
                type: Input
            }], onDocumentClick: [{
                type: HostListener,
                args: ['document:click', ['$event']]
            }], onClick: [{
                type: HostListener,
                args: ['click', ['$event']]
            }], showTime: [{
                type: Input
            }], dateConfig: [{
                type: Input
            }], minDate: [{
                type: Input
            }], maxDate: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZXBpY2tlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9kZXZ1aS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZGV2dWkvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBSUwsTUFBTSxFQUNOLFNBQVMsRUFFVCxXQUFXLEVBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBaUIsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNELE9BQU8sRUFBaUIsb0JBQW9CLEVBQUUsYUFBYSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFcEYsT0FBTyxFQUE2QixzQkFBc0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ25HLE9BQU8sRUFBRSx1QkFBdUIsSUFBSSxnQkFBZ0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDOzs7Ozs7O0FBYTNGLE1BQU0sT0FBTyxtQkFBbUI7SUF1QzlCLFlBQ1ksVUFBc0IsRUFDdEIsU0FBb0IsRUFDcEIsZ0JBQWtDLEVBQ2xDLGlCQUFvQyxFQUNwQyxJQUFpQjtRQUpqQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGNBQVMsR0FBVCxTQUFTLENBQVc7UUFDcEIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLFNBQUksR0FBSixJQUFJLENBQWE7UUFuQ25CLHVCQUFrQixHQUFHLElBQUksWUFBWSxFQUE2QixDQUFDO1FBQ3BFLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFHakIsU0FBSSxH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QU07c0JBQWQsS0FBSztnQkFDSSxrQkFBa0I7c0JBQTNCLE1BQU07Z0JBQ0UsUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxrQkFBa0I7c0JBQTFCLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csVUFBVTtzQkFBbEIsS0FBSztnQkE2Rk4sZUFBZTtzQkFEZCxZQUFZO3VCQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDO2dCQVMxQyxPQUFPO3NCQUROLFlBQVk7dUJBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDO2dCQUtwQixRQUFRO3NCQUFwQixLQUFLO2dCQVFPLFVBQVU7c0JBQXRCLEtBQUs7Z0JBb0JPLE9BQU87c0JBQW5CLEtBQUs7Z0JBV08sT0FBTztzQkFBbkIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSG9zdExpc3RlbmVyLFxuICBJbnB1dCxcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBSZW5kZXJlcjIsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIFRlbXBsYXRlUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSTE4bkludGVyZmFjZSwgSTE4blNlcnZpY2UgfSBmcm9tICduZy1kZXZ1aS9pMThuJztcbmltcG9ydCB7IERhdGVDb252ZXJ0ZXIsIERlZmF1bHREYXRlQ29udmVydGVyLCB1bnNoaWZ0U3RyaW5nIH0gZnJvbSAnbmctZGV2dWkvdXRpbHMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTZWxlY3REYXRlQ2hhbmdlRXZlbnRBcmdzLCBTZWxlY3REYXRlQ2hhbmdlUmVhc29uIH0gZnJvbSAnLi9kYXRlLWNoYW5nZS1ldmVudC1hcmdzLm1vZGVsJztcbmltcG9ydCB7IERhdGVQaWNrZXJDb25maWdTZXJ2aWNlIGFzIERhdGVQaWNrZXJDb25maWcgfSBmcm9tICcuL2RhdGUtcGlja2VyLmNvbmZpZy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZC1kYXRlcGlja2VyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9kYXRlcGlja2VyLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW3tcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBEYXRlcGlja2VyQ29tcG9uZW50KSxcbiAgICBtdWx0aTogdHJ1ZVxuICB9XSxcbiAgcHJlc2VydmVXaGl0ZXNwYWNlczogZmFsc2Vcbn0pXG5leHBvcnQgY2xhc3MgRGF0ZXBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcbiAgc3RhdGljIERBWV9EVVJBVElPTiA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gIHByb3RlY3RlZCBfbWF4RGF0ZTogRGF0ZTtcbiAgcHJvdGVjdGVkIF9taW5EYXRlOiBEYXRlO1xuICBwcm90ZWN0ZWQgbm93TWluWWVhcjogbnVtYmVyO1xuICBwcm90ZWN0ZWQgbm93TWF4WWVhcjogbnVtYmVyO1xuICBASW5wdXQoKSBjc3NDbGFzczogc3RyaW5nO1xuICBASW5wdXQoKSBkYXRlQ29udmVydGVyOiBEYXRlQ29udmVydGVyO1xuICBASW5wdXQoKSBsb2NhbGU6IHN0cmluZztcbiAgQE91dHB1dCgpIHNlbGVjdGVkRGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0RGF0ZUNoYW5nZUV2ZW50QXJncz4oKTtcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgY3VzdG9tVmlld1RlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBASW5wdXQoKSBzZWxlY3RlZERhdGU6IERhdGU7XG4gIEBJbnB1dCgpIG1vZGU6ICd5ZWFyJ3wnbW9udGgnfCdkYXRlJyA9ICdkYXRlJztcbiAgQElucHV0KCkgZGF0ZUZvcm1hdDogc3RyaW5nO1xuICB5ZWFyTnVtYmVyID0gMTI7XG4gIF95ZWFyTnVtYmVyID0gMTI7XG4gIF9kYXRlQ29uZmlnOiBhbnk7XG4gIGN1cnJlbnRZZWFyOiBudW1iZXI7XG4gIGN1cnJlbnRNb250aEluZGV4OiBudW1iZXI7XG4gIF9jdXJyZW50SG91cjogbnVtYmVyIHwgc3RyaW5nO1xuICBfY3VycmVudE1pbnV0ZTogbnVtYmVyIHwgc3RyaW5nO1xuICBfY3VycmVudFNlY29uZDogbnVtYmVyIHwgc3RyaW5nO1xuICBfc2hvd1RpbWU6IGJvb2xlYW47XG4gIGhvdXJPcHRpb25zOiBzdHJpbmdbXTtcbiAgbWludXRlT3B0aW9uczogc3RyaW5nW107XG4gIGRpc3BsYXlXZWVrczogYW55W107XG4gIHllYXJPcHRpb25zOiBhbnlbXTtcbiAgb3BlbkNob29zZVllYXI6IGJvb2xlYW47XG4gIG9wZW5DaG9vc2VNb250aDogYm9vbGVhbjtcbiAgYXZhaWxhYmxlTW9udGhzOiBhbnlbXTtcbiAgaTE4blRleHQ6IEkxOG5JbnRlcmZhY2VbJ2RhdGVQaWNrZXInXTtcbiAgaTE4bkxvY2FsZTogSTE4bkludGVyZmFjZVsnbG9jYWxlJ107XG4gIGkxOG5Db21tb25UZXh0OiBJMThuSW50ZXJmYWNlWydjb21tb24nXTtcbiAgaTE4blN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIHByb3RlY3RlZCBvbkNoYW5nZSA9IChfOiBhbnkpID0+IG51bGw7XG4gIHByb3RlY3RlZCBvblRvdWNoZWQgPSAoKSA9PiBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHByb3RlY3RlZCByZW5kZXJlcjI6IFJlbmRlcmVyMixcbiAgICBwcm90ZWN0ZWQgZGF0ZVBpY2tlckNvbmZpZzogRGF0ZVBpY2tlckNvbmZpZyxcbiAgICBwcm90ZWN0ZWQgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByb3RlY3RlZCBpMThuOiBJMThuU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9kYXRlQ29uZmlnID0gZGF0ZVBpY2tlckNvbmZpZ1snZGF0ZUNvbmZpZyddO1xuICAgIHRoaXMuZGF0ZUNvbnZlcnRlciA9IGRhdGVQaWNrZXJDb25maWdbJ2RhdGVDb25maWcnXS5kYXRlQ29udmVydGVyIHx8IG5ldyBEZWZhdWx0RGF0ZUNvbnZlcnRlcigpO1xuICAgIHRoaXMucmVuZGVyZXIyLnNldFN0eWxlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICB0aGlzLnNldEkxOG5UZXh0KCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLl9taW5EYXRlID0gdGhpcy5taW5EYXRlID8gbmV3IERhdGUodGhpcy5taW5EYXRlKSA6IG5ldyBEYXRlKHRoaXMuZGF0ZUNvbmZpZy5taW4sIDAsIDEsIDAsIDAsIDApO1xuICAgIHRoaXMuX21heERhdGUgPSB0aGlzLm1heERhdGUgPyBuZXcgRGF0ZSh0aGlzLm1heERhdGUpIDogbmV3IERhdGUodGhpcy5kYXRlQ29uZmlnLm1heCwgMTEsIDMxLCAyMywgNTksIDU5KTtcblxuICAgIHRoaXMuaG91ck9wdGlvbnMgPSBuZXcgQXJyYXkoMjQpLmZpbGwoMCkubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHRoaXMuZmlsbExlZnQoaW5kZXgpKTtcbiAgICB0aGlzLm1pbnV0ZU9wdGlvbnMgPSBuZXcgQXJyYXkoNjApLmZpbGwoMCkubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHRoaXMuZmlsbExlZnQoaW5kZXgpKTtcbiAgICBjb25zdCBub3dEYXRlID0gdGhpcy5zZWxlY3RlZERhdGUgfHwgbmV3IERhdGUoKTtcbiAgICB0aGlzLm5vd01pblllYXIgPSAobm93RGF0ZSkuZ2V0RnVsbFllYXIoKSAtIE1hdGguZmxvb3IodGhpcy5feWVhck51bWJlciAvIDIpIDwgdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgP1xuICAgICAgdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgOiAobm93RGF0ZSkuZ2V0RnVsbFllYXIoKSAtIE1hdGguZmxvb3IodGhpcy5feWVhck51bWJlciAvIDIpO1xuICAgIHRoaXMubm93TWF4WWVhciA9IChub3dEYXRlKS5nZXRGdWxsWWVhcigpICsgTWF0aC5mbG9vcih0aGlzLl95ZWFyTnVtYmVyIC8gMikgPiB0aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKSA/XG4gICAgICB0aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKSA6IChub3dEYXRlKS5nZXRGdWxsWWVhcigpICsgTWF0aC5mbG9vcih0aGlzLl95ZWFyTnVtYmVyIC8gMik7XG4gICAgdGhpcy5pbml0TW9kZSgpO1xuICAgIHRoaXMub25TZWxlY3REYXRlQ2hhbmdlZCgpO1xuICAgIHRoaXMub25EaXNwbGF5V2Vla3NDaGFuZ2UoKTtcbiAgICB0aGlzLm9uWWVhclJhbmdlQ2hhbmdlKCk7XG4gICAgdGhpcy5pbml0RGF0ZVBpY2tlcigpO1xuICB9XG5cbiAgaW5pdE1vZGUoKSB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3llYXInKSB7XG4gICAgICB0aGlzLm9wZW5DaG9vc2VZZWFyID0gdHJ1ZTtcbiAgICAgIHRoaXMub3BlbkNob29zZU1vbnRoID0gZmFsc2U7XG4gICAgICBpZighdGhpcy5zZWxlY3RlZERhdGUpe1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICB9XG4gICAgICBpZih0aGlzLm1heERhdGUuZ2V0VGltZSgpIDwgdGhpcy5zZWxlY3RlZERhdGUuZ2V0VGltZSgpKXtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLm1heERhdGUpO1xuICAgICAgfVxuICAgICAgaWYodGhpcy5taW5EYXRlLmdldFRpbWUoKSA+IHRoaXMuc2VsZWN0ZWREYXRlLmdldFRpbWUoKSl7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbmV3IERhdGUodGhpcy5taW5EYXRlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ21vbnRoJykge1xuICAgICAgdGhpcy5vcGVuQ2hvb3NlWWVhciA9IGZhbHNlO1xuICAgICAgdGhpcy5vcGVuQ2hvb3NlTW9udGggPSB0cnVlO1xuICAgICAgaWYoIXRoaXMuc2VsZWN0ZWREYXRlKXtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYodGhpcy5tYXhEYXRlLmdldFRpbWUoKSA8IHRoaXMuc2VsZWN0ZWREYXRlLmdldFRpbWUoKSl7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gbmV3IERhdGUodGhpcy5tYXhEYXRlKTtcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMubWluRGF0ZS5nZXRUaW1lKCkgPiB0aGlzLnNlbGVjdGVkRGF0ZS5nZXRUaW1lKCkpe1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMubWluRGF0ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3BlbkNob29zZVllYXIgPSB0aGlzLm9wZW5DaG9vc2VNb250aCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcyAmJiBjaGFuZ2VzWydzZWxlY3RlZERhdGUnXSAmJiBjaGFuZ2VzWydzZWxlY3RlZERhdGUnXS5jdXJyZW50VmFsdWUpIHtcbiAgICAgIHRoaXMud3JpdGVWYWx1ZSh0aGlzLnNlbGVjdGVkRGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Y2xpY2snLCBbJyRldmVudCddKVxuICBvbkRvY3VtZW50Q2xpY2soJGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jb250YWlucygkZXZlbnQudGFyZ2V0KSkge1xuICAgICAgdGhpcy5vcGVuQ2hvb3NlWWVhciA9IHRoaXMub3BlbkNob29zZU1vbnRoID0gZmFsc2U7XG4gICAgICB0aGlzLnJlc2V0WWVhck9wdGlvbnMoKTtcbiAgICB9XG4gIH1cblxuICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXG4gIG9uQ2xpY2soJGV2ZW50KSB7XG4gICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHNob3dUaW1lKHNob3dUaW1lOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2hvd1RpbWUgPSBzaG93VGltZTtcbiAgfVxuXG4gIGdldCBzaG93VGltZSgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMuX3Nob3dUaW1lID09PSAnYm9vbGVhbicgPyB0aGlzLl9zaG93VGltZSA6IHRoaXMuZGF0ZUNvbmZpZy50aW1lUGlja2VyO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGRhdGVDb25maWcoZGF0ZUNvbmZpZzogYW55KSB7XG4gICAgaWYgKHRoaXMuY2hlY2tEYXRlQ29uZmlnKGRhdGVDb25maWcpKSB7XG4gICAgICB0aGlzLl9kYXRlQ29uZmlnID0gZGF0ZUNvbmZpZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGF0ZUNvbmZpZyA9IHRoaXMuZGF0ZVBpY2tlckNvbmZpZy5kYXRlQ29uZmlnO1xuICAgIH1cbiAgfVxuXG4gIGdldCBkYXRlQ29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLl9kYXRlQ29uZmlnO1xuICB9XG5cbiAgY2hlY2tEYXRlQ29uZmlnKGRhdGVDb25maWc6IGFueSkge1xuICAgIGlmICghZGF0ZUNvbmZpZykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAodHlwZW9mKGRhdGVDb25maWcudGltZVBpY2tlcikgIT09ICdib29sZWFuJyB8fCAhZGF0ZUNvbmZpZy5tYXggfHwgIWRhdGVDb25maWcubWluKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IG1pbkRhdGUoZGF0ZTogRGF0ZSB8IGFueSkge1xuICAgIGNvbnN0IHBhcnNlRGF0ZSA9IHRoaXMuZGF0ZUNvbnZlcnRlci5wYXJzZShkYXRlLCB0aGlzLmRhdGVGb3JtYXQpO1xuICAgIGlmIChwYXJzZURhdGUpIHtcbiAgICAgIHRoaXMuX21pbkRhdGUgPSBwYXJzZURhdGU7XG4gICAgICB0aGlzLm9uWWVhclJhbmdlQ2hhbmdlKCk7XG4gICAgfVxuICB9XG4gIGdldCBtaW5EYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9taW5EYXRlO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IG1heERhdGUoZGF0ZTogRGF0ZSB8IGFueSkge1xuICAgIGNvbnN0IHBhcnNlRGF0ZSA9IHRoaXMuZGF0ZUNvbnZlcnRlci5wYXJzZShkYXRlLCB0aGlzLmRhdGVGb3JtYXQpO1xuICAgIGlmIChwYXJzZURhdGUpIHtcbiAgICAgIHRoaXMuX21heERhdGUgPSBwYXJzZURhdGU7XG4gICAgICB0aGlzLm9uWWVhclJhbmdlQ2hhbmdlKCk7XG4gICAgfVxuICB9XG4gIGdldCBtYXhEYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9tYXhEYXRlO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRIb3VyKGhvdXI6IG51bWJlciB8IHN0cmluZykge1xuICAgIHRoaXMuX2N1cnJlbnRIb3VyID0gaG91cjtcbiAgfVxuXG4gIGdldCBjdXJyZW50SG91cigpIHtcbiAgICByZXR1cm4gdW5zaGlmdFN0cmluZyhTdHJpbmcodGhpcy5fY3VycmVudEhvdXIpLCAyLCAnMCcpO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRNaW51dGUobWluOiBudW1iZXIgfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9jdXJyZW50TWludXRlID0gbWluO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRNaW51dGUoKSB7XG4gICAgcmV0dXJuIHVuc2hpZnRTdHJpbmcoU3RyaW5nKHRoaXMuX2N1cnJlbnRNaW51dGUpLCAyLCAnMCcpO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRTZWNvbmQoc2VjOiBudW1iZXIgfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9jdXJyZW50U2Vjb25kID0gc2VjO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRTZWNvbmQoKSB7XG4gICAgcmV0dXJuIHVuc2hpZnRTdHJpbmcoU3RyaW5nKHRoaXMuX2N1cnJlbnRTZWNvbmQpLCAyLCAnMCcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlc2V0WWVhck9wdGlvbnMoKSB7XG4gICAgdGhpcy5pbml0TW9kZSgpO1xuICAgIGNvbnN0IGJhc2VZZWFyID0gdGhpcy5zZWxlY3RlZERhdGUgPyB0aGlzLnNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpIDogKG5ldyBEYXRlKCkpLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy5jdXJyZW50WWVhciA9IGJhc2VZZWFyO1xuICAgIHRoaXMubm93TWluWWVhciA9IGJhc2VZZWFyIC0gTWF0aC5mbG9vcih0aGlzLl95ZWFyTnVtYmVyIC8gMikgPCB0aGlzLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA/XG4gICAgICB0aGlzLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA6IGJhc2VZZWFyIC0gTWF0aC5mbG9vcih0aGlzLl95ZWFyTnVtYmVyIC8gMik7XG4gICAgdGhpcy5ub3dNYXhZZWFyID0gYmFzZVllYXIgKyBNYXRoLmZsb29yKHRoaXMuX3llYXJOdW1iZXIgLyAyKSA+IHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpID9cbiAgICAgIHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpIDogYmFzZVllYXIgKyBNYXRoLmZsb29yKHRoaXMuX3llYXJOdW1iZXIgLyAyKTtcbiAgICB0aGlzLm9uWWVhclJhbmdlQ2hhbmdlKCk7XG4gIH1cblxuICBvblllYXJSYW5nZUNoYW5nZSgpIHtcbiAgICBpZiAoIXRoaXMubm93TWluWWVhciB8fCAhdGhpcy5ub3dNYXhZZWFyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBiYXNlWWVhciA9IE1hdGgucm91bmQoKHRoaXMubm93TWluWWVhciArIHRoaXMubm93TWF4WWVhcikgLyAyKTtcbiAgICBpZiAodGhpcy5ub3dNYXhZZWFyIC0gdGhpcy5ub3dNaW5ZZWFyIDwgdGhpcy5feWVhck51bWJlciAtIDEpIHtcbiAgICAgIGlmICh0aGlzLm5vd01pblllYXIgPT09IHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpICYmIHRoaXMubm93TWF4WWVhciA9PT0gdGhpcy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgYmFzZVllYXIgPSB0aGlzLm5vd01pblllYXIgKyBNYXRoLnJvdW5kKCh0aGlzLm5vd01heFllYXIgLSB0aGlzLm5vd01pblllYXIpIC8gMik7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubm93TWluWWVhciA9PT0gdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgYmFzZVllYXIgPSB0aGlzLm5vd01heFllYXIgLSB0aGlzLl95ZWFyTnVtYmVyIC8gMiArIDE7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubm93TWF4WWVhciA9PT0gdGhpcy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgYmFzZVllYXIgPSB0aGlzLm5vd01pblllYXIgKyB0aGlzLl95ZWFyTnVtYmVyIC8gMjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy55ZWFyT3B0aW9ucyA9IG5ldyBBcnJheSh0aGlzLl95ZWFyTnVtYmVyKS5maWxsKDApLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCB0aXRsZSA9IGJhc2VZZWFyIC0gdGhpcy5feWVhck51bWJlciAvIDIgKyBpbmRleDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH0pO1xuICAgIGlmICh0aGlzLl95ZWFyTnVtYmVyID4gdGhpcy5ub3dNYXhZZWFyIC0gdGhpcy5ub3dNaW5ZZWFyICsgMSkge1xuICAgICAgdGhpcy55ZWFyT3B0aW9ucy5mb3JFYWNoKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4IDwgNikge1xuICAgICAgICAgIHZhbHVlLmRpc2FibGVkID0gdmFsdWUudGl0bGUgPCB0aGlzLm5vd01pblllYXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUuZGlzYWJsZWQgPSB2YWx1ZS50aXRsZSA+IHRoaXMubm93TWF4WWVhcjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgd3JpdGVWYWx1ZShvYmo6IGFueSk6IHZvaWQge1xuICAgIGlmICghb2JqKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdGhpcy5kYXRlQ29udmVydGVyLnBhcnNlKG9iaiwgdGhpcy5kYXRlRm9ybWF0KTtcbiAgICB0aGlzLm9uU2VsZWN0RGF0ZUNoYW5nZWQoKTtcbiAgICB0aGlzLm9uRGlzcGxheVdlZWtzQ2hhbmdlKCk7XG4gICAgdGhpcy5hdmFpbGFibGVNb250aHMgPSB0aGlzLm9uRGlzcGxheU1vbnRoc0NoYW5nZSgpO1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIGhhc1ByZU1vbnRoKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRZZWFyID4gdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50WWVhciA9PT0gdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgJiYgdGhpcy5jdXJyZW50TW9udGhJbmRleCA+IHRoaXMubWluRGF0ZS5nZXRNb250aCgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uUHJlTW9udGgoKSB7XG4gICAgaWYgKCF0aGlzLmhhc1ByZU1vbnRoKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50WWVhciwgdGhpcy5jdXJyZW50TW9udGhJbmRleCk7XG4gICAgZGF0ZS5zZXRNb250aChkYXRlLmdldE1vbnRoKCkgLSAxKTtcbiAgICB0aGlzLmN1cnJlbnRNb250aEluZGV4ID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHRoaXMuY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy5vbkRpc3BsYXlXZWVrc0NoYW5nZSgpO1xuICB9XG5cbiAgaGFzTmV4dE1vbnRoKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRZZWFyIDwgdGhpcy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50WWVhciA9PT0gdGhpcy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgJiYgdGhpcy5jdXJyZW50TW9udGhJbmRleCA8IHRoaXMubWF4RGF0ZS5nZXRNb250aCgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uTmV4dE1vbnRoKGN1cnJlbnREYXRlPzogRGF0ZSwgaW52b2NhdGlvbj86IGFueSkge1xuICAgIGlmICghdGhpcy5oYXNOZXh0TW9udGgoKSAmJiBpbnZvY2F0aW9uICE9PSAnaW5pdCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGRhdGU7XG4gICAgaWYgKGN1cnJlbnREYXRlKSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUoY3VycmVudERhdGUuZ2V0VGltZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudFllYXIsIHRoaXMuY3VycmVudE1vbnRoSW5kZXgpO1xuICAgIH1cbiAgICBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKSArIDEpO1xuICAgIHRoaXMuY3VycmVudE1vbnRoSW5kZXggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgdGhpcy5jdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICB0aGlzLm9uRGlzcGxheVdlZWtzQ2hhbmdlKCk7XG4gIH1cblxuICBoYXNQcmVZZWFyT3B0aW9uKCkge1xuICAgIGlmICh0aGlzLm9wZW5DaG9vc2VZZWFyKSB7XG4gICAgICByZXR1cm4gdGhpcy55ZWFyT3B0aW9uc1swXS50aXRsZS50b1N0cmluZygpID4gdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOdW1iZXIodGhpcy5jdXJyZW50WWVhcikgPiB0aGlzLm1pbkRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICB9XG4gIH1cblxuICBvblByZVllYXJPcHRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmhhc1ByZVllYXJPcHRpb24oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcGVuQ2hvb3NlWWVhcikge1xuICAgICAgaWYgKHRoaXMubm93TWluWWVhciAtIHRoaXMuX3llYXJOdW1iZXIgPj0gdGhpcy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgdGhpcy5ub3dNYXhZZWFyID0gdGhpcy5ub3dNaW5ZZWFyIC0gMTtcbiAgICAgICAgdGhpcy5ub3dNaW5ZZWFyID0gdGhpcy5ub3dNaW5ZZWFyIC0gdGhpcy5feWVhck51bWJlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubm93TWF4WWVhciA9IHRoaXMubm93TWluWWVhciAtIDE7XG4gICAgICAgIHRoaXMubm93TWluWWVhciA9IHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5vblllYXJSYW5nZUNoYW5nZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uU2VsZWN0WWVhcihOdW1iZXIodGhpcy5jdXJyZW50WWVhcikgLSAxKTtcbiAgICB9XG4gIH1cblxuICBoYXNOZXh0WWVhck9wdGlvbigpIHtcbiAgICBpZiAodGhpcy5vcGVuQ2hvb3NlWWVhcikge1xuICAgICAgcmV0dXJuIHRoaXMueWVhck9wdGlvbnNbMTFdLnRpdGxlLnRvU3RyaW5nKCkgPCB0aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmN1cnJlbnRZZWFyKSA8IHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIH1cbiAgfVxuXG4gIG9uTmV4dFllYXJPcHRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmhhc05leHRZZWFyT3B0aW9uKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMub3BlbkNob29zZVllYXIpIHtcbiAgICAgIGlmICh0aGlzLm5vd01heFllYXIgKyB0aGlzLl95ZWFyTnVtYmVyIDw9IHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgIHRoaXMubm93TWluWWVhciA9IHRoaXMubm93TWF4WWVhciArIDE7XG4gICAgICAgIHRoaXMubm93TWF4WWVhciA9IHRoaXMubm93TWF4WWVhciArIHRoaXMuX3llYXJOdW1iZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5vd01pblllYXIgPSB0aGlzLm5vd01heFllYXIgKyAxO1xuICAgICAgICB0aGlzLm5vd01heFllYXIgPSB0aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub25ZZWFyUmFuZ2VDaGFuZ2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vblNlbGVjdFllYXIoTnVtYmVyKHRoaXMuY3VycmVudFllYXIpICsgMSk7XG4gICAgfVxuICB9XG5cbiAgb25TZWxlY3RZZWFyKHllYXIsICRldmVudD86IEV2ZW50KSB7XG4gICAgaWYgKCRldmVudCkge1xuICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBjb25zdCB5ZWFyRGlzYWJsZWQgPSB0eXBlb2YgeWVhciA9PT0gJ29iamVjdCcgPyB5ZWFyLmRpc2FibGVkIDogZmFsc2U7XG4gICAgY29uc3QgeWVhclRpdGxlID0gdHlwZW9mIHllYXIgPT09ICdvYmplY3QnID8geWVhci50aXRsZSA6IHllYXI7XG4gICAgaWYgKHllYXJEaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmN1cnJlbnRZZWFyID0geWVhclRpdGxlO1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICd5ZWFyJykge1xuICAgICAgdGhpcy5vblNlbGVjdERhdGUoJGV2ZW50LCBuZXcgRGF0ZSh5ZWFyVGl0bGUsIDAsIDEpKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gJ21vbnRoJykge1xuICAgICAgdGhpcy5vcGVuQ2hvb3NlWWVhciA9IGZhbHNlO1xuICAgICAgdGhpcy5hdmFpbGFibGVNb250aHMgPSB0aGlzLm9uRGlzcGxheU1vbnRoc0NoYW5nZSgpO1xuICAgICAgdGhpcy5jdXJyZW50TW9udGhJbmRleCA9IG51bGw7XG4gICAgICB0aGlzLm9wZW5DaG9vc2VNb250aCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25EaXNwbGF5V2Vla3NDaGFuZ2UoKTtcbiAgICAgIHRoaXMuYXZhaWxhYmxlTW9udGhzID0gdGhpcy5vbkRpc3BsYXlNb250aHNDaGFuZ2UoKTtcbiAgICAgIHRoaXMub3BlbkNob29zZVllYXIgPSBmYWxzZTtcbiAgICAgIHRoaXMub3BlbkNob29zZU1vbnRoID0gISEkZXZlbnQ7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIG9uU2VsZWN0RGF0ZUNoYW5nZWQoKSB7XG4gICAgbGV0IGRhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgIGlmIChkYXRlLmdldFRpbWUoKSA8IHRoaXMubWluRGF0ZS5nZXRUaW1lKCkpIHtcbiAgICAgIGRhdGUgPSB0aGlzLm1pbkRhdGU7XG4gICAgfVxuICAgIGlmIChkYXRlLmdldFRpbWUoKSA+IHRoaXMubWF4RGF0ZS5nZXRUaW1lKCkpIHtcbiAgICAgIGRhdGUgPSB0aGlzLm1heERhdGU7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy5jdXJyZW50TW9udGhJbmRleCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICB0aGlzLmN1cnJlbnRIb3VyID0gdGhpcy5zaG93VGltZSA/IGRhdGUuZ2V0SG91cnMoKSA6IDA7XG4gICAgdGhpcy5jdXJyZW50TWludXRlID0gdGhpcy5zaG93VGltZSA/IGRhdGUuZ2V0TWludXRlcygpIDogMDtcbiAgICB0aGlzLmN1cnJlbnRTZWNvbmQgPSB0aGlzLnNob3dUaW1lID8gZGF0ZS5nZXRTZWNvbmRzKCkgOiAwO1xuICB9XG5cbiAgcHVibGljIG9uRGlzcGxheVdlZWtzQ2hhbmdlKCkge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBmaXJzdERheU9mTW9udGggPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRZZWFyLCB0aGlzLmN1cnJlbnRNb250aEluZGV4LCAxKTtcbiAgICBjb25zdCB3ZWVrT2ZEYXkgPSBmaXJzdERheU9mTW9udGguZ2V0RGF5KCk7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoZmlyc3REYXlPZk1vbnRoLmdldFRpbWUoKSAtIHdlZWtPZkRheSAqIERhdGVwaWNrZXJDb21wb25lbnQuREFZX0RVUkFUSU9OKTtcbiAgICBjb25zdCBkaXNwbGF5V2Vla3MgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgY29uc3Qgc3RhcnRXZWVrRGF0ZSA9IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgKyBpICogNyAqIERhdGVwaWNrZXJDb21wb25lbnQuREFZX0RVUkFUSU9OO1xuICAgICAgY29uc3Qgd2Vla0RheXMgPSBuZXcgQXJyYXkoNykuZmlsbCgwKS5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0V2Vla0RhdGUgKyBpbmRleCAqIERhdGVwaWNrZXJDb21wb25lbnQuREFZX0RVUkFUSU9OKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXk6IHRoaXMuZmlsbExlZnQoY3VycmVudERhdGUuZ2V0RGF0ZSgpKSxcbiAgICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgICBpbk1vbnRoOiBjdXJyZW50RGF0ZS5nZXRNb250aCgpLnRvU3RyaW5nKCkgPT09IHRoaXMuY3VycmVudE1vbnRoSW5kZXgudG9TdHJpbmcoKSxcbiAgICAgICAgICBpc1RvZGF5OiBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpID09PSB0b2RheS5nZXRGdWxsWWVhcigpICYmXG4gICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpICYmXG4gICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXREYXRlKCkgPT09IHRvZGF5LmdldERhdGUoKVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICBkaXNwbGF5V2Vla3MucHVzaCh3ZWVrRGF5cyk7XG4gICAgfVxuICAgIHRoaXMuZGlzcGxheVdlZWtzID0gZGlzcGxheVdlZWtzO1xuICB9XG5cbiAgcHVibGljIG9uRGlzcGxheU1vbnRoc0NoYW5nZSgpIHtcbiAgICBjb25zdCBhbGwgPSBuZXcgQXJyYXkoMTIpLmZpbGwoMCkubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgdGl0bGU6IHRoaXMuaTE4blRleHQubW9udGhzT2ZZZWFyW2luZGV4XSxcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuY3VycmVudFllYXIgPCB0aGlzLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSB8fCB0aGlzLmN1cnJlbnRZZWFyID4gdGhpcy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgIGFsbC5tYXAobW9udGggPT4ge21vbnRoLmRpc2FibGVkID0gdHJ1ZTsgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudFllYXIgPT09IHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICBhbGwubWFwKG1vbnRoID0+IHttb250aC5kaXNhYmxlZCA9IG1vbnRoLmluZGV4IDwgdGhpcy5taW5EYXRlLmdldE1vbnRoKCk7IH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRZZWFyID09PSB0aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgYWxsLm1hcChtb250aCA9PiB7bW9udGguZGlzYWJsZWQgPSBtb250aC5pbmRleCA+IHRoaXMubWF4RGF0ZS5nZXRNb250aCgpOyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFsbDtcbiAgfVxuXG4gIHByb3RlY3RlZCBmaWxsTGVmdChudW06IG51bWJlcikge1xuICAgIHJldHVybiBudW0gPCAxMCA/IGAwJHtudW19YCA6IGAke251bX1gO1xuICB9XG5cbiAgaXNEaXNhYmxlZERheShkYXRlKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWRhdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbWluRGF0ZSA9IG5ldyBEYXRlKHRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLm1pbkRhdGUuZ2V0TW9udGgoKSwgdGhpcy5taW5EYXRlLmdldERhdGUoKSk7XG4gICAgY29uc3QgbWF4RGF0ZSA9IG5ldyBEYXRlKHRoaXMubWF4RGF0ZS5nZXRGdWxsWWVhcigpLCB0aGlzLm1heERhdGUuZ2V0TW9udGgoKSwgdGhpcy5tYXhEYXRlLmdldERhdGUoKSwgMjMsIDU5LCA1OSk7XG4gICAgY29uc3QgZGlzID0gZGF0ZS5nZXRUaW1lKCkgPCBtaW5EYXRlLmdldFRpbWUoKTtcbiAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCB8fCAoZGF0ZS5nZXRUaW1lKCkgPCBtaW5EYXRlLmdldFRpbWUoKSB8fFxuICAgICAgZGF0ZS5nZXRUaW1lKCkgPiBtYXhEYXRlLmdldFRpbWUoKSk7XG4gIH1cblxuICBpc1NlbGVjdERheShkYXRlKSB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRGF0ZSB8fCAhZGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpID09PSB0aGlzLnNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpICYmXG4gICAgICBkYXRlLmdldE1vbnRoKCkgPT09IHRoaXMuc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgJiZcbiAgICAgIGRhdGUuZ2V0RGF0ZSgpID09PSB0aGlzLnNlbGVjdGVkRGF0ZS5nZXREYXRlKClcbiAgICApO1xuICB9XG5cbiAgLypcbiAgKiogIEBwYXJhbSBpbnZvY2F0aW9uOuiwg+eUqOaXtuaculxuICAqL1xuICBvblNlbGVjdERhdGUoJGV2ZW50LCBkYXRlLCBpbnZvY2F0aW9uPzogYW55LCByZWFzb24/OiBTZWxlY3REYXRlQ2hhbmdlUmVhc29uKSB7XG4gICAgaWYgKCRldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNEaXNhYmxlZERheShkYXRlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSxcbiAgICAgIE51bWJlcih0aGlzLmN1cnJlbnRIb3VyKSwgTnVtYmVyKHRoaXMuY3VycmVudE1pbnV0ZSksIE51bWJlcih0aGlzLmN1cnJlbnRTZWNvbmQpKTtcbiAgICBjb25zdCBjdXJyZW50UmVhc29uID0gdHlwZW9mIHJlYXNvbiA9PT0gJ251bWJlcicgPyByZWFzb24gOiBTZWxlY3REYXRlQ2hhbmdlUmVhc29uLmRhdGU7XG4gICAgY29uc3QgZGF0ZU9iaiA9IHtcbiAgICAgIHJlYXNvbjogY3VycmVudFJlYXNvbixcbiAgICAgIHNlbGVjdGVkRGF0ZTogdGhpcy5zZWxlY3RlZERhdGVcbiAgICB9O1xuICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgdGhpcy53cml0ZVZhbHVlKHRoaXMuc2VsZWN0ZWREYXRlKTtcbiAgICAvLyDliJ3lp4vljJbnmoTml7blgJnkuI3op6blj5FlbWl05ZKMbmdNb2RlbENoYW5nZVxuICAgIGlmIChpbnZvY2F0aW9uICE9PSAnaW5pdCcpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoZGF0ZU9iaik7XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZUNoYW5nZS5lbWl0KGRhdGVPYmopO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJyZW50TW9udGhJbmRleCAhPT0gdGhpcy5zZWxlY3RlZERhdGUuZ2V0TW9udGgoKSB8fFxuICAgICAgdGhpcy5jdXJyZW50WWVhciAhPT0gdGhpcy5zZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKVxuICAgICkge1xuICAgICAgdGhpcy5jdXJyZW50WWVhciA9IHRoaXMuc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB0aGlzLmN1cnJlbnRNb250aEluZGV4ID0gdGhpcy5zZWxlY3RlZERhdGUuZ2V0TW9udGgoKTtcbiAgICAgIHRoaXMub25EaXNwbGF5V2Vla3NDaGFuZ2UoKTtcbiAgICB9XG4gIH1cblxuICBmaXhUaW1lKGV2ZW50LCB0eXBlKSB7XG4gICAgLy8g55Sx5LqOa2V5cHJlc3PkuI3nm5HlkKzlvq7ova/ovpPlhaXms5XpnIDopoHkvb/nlKhrZXlkb3duXG4gICAgLy8g6ICMa2V5ZG93buS4reW+rui9r+i+k+WFpeazleeahGtleeaYrydQcm9jZXNzJ++8jOS4lGtleWRvd27msqHmnIljaGFyQ29kZe+8jOaJgOS7pemcgOimgeeUqGNvZGXliKTmlq1cbiAgICAvLyDmlYXpgIDmoLzlkozovpPlhaXkvb/nlKjlkIzkuIDkuKrkuovku7ZcbiAgICBsZXQgdGltZVR5cGU6IHN0cmluZztcbiAgICBjb25zdCBtaW4gPSAwO1xuICAgIGxldCBtYXggPSA1OTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdoJzoge1xuICAgICAgdGltZVR5cGUgPSAnY3VycmVudEhvdXInO1xuICAgICAgbWF4ID0gMjM7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnbSc6IHtcbiAgICAgIHRpbWVUeXBlID0gJ2N1cnJlbnRNaW51dGUnO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ3MnOiB7XG4gICAgICB0aW1lVHlwZSA9ICdjdXJyZW50U2Vjb25kJztcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB9XG4gICAgbGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0Wyd2YWx1ZSddO1xuICAgIGNvbnN0IHNlbGVjdGlvblN0YXJ0ID0gZXZlbnQudGFyZ2V0WydzZWxlY3Rpb25TdGFydCddO1xuICAgIGNvbnN0IHNlbGVjdGlvbkVuZCA9IGV2ZW50LnRhcmdldFsnc2VsZWN0aW9uRW5kJ107XG4gICAgLy8g5piv5pWw5a2X55qE5pe25YCZ5YaN5aSE55CG77yM5YiG5Li65bCP6ZSu55uY5ZKM5pWw5a2X6ZSuXG4gICAgaWYgKC9eKERpZ2l0fE51bXBhZClcXGQkLy50ZXN0KGV2ZW50LmNvZGUpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGV0IGlucHV0O1xuICAgICAgaWYgKGV2ZW50WydjbGlwYm9hcmREYXRhJ10pIHtcbiAgICAgICAgaW5wdXQgPSBldmVudFsnY2xpcGJvYXJkRGF0YSddLmdldERhdGEoJ3RleHQnKTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnRbJ2NvZGUnXSkge1xuICAgICAgICBpbnB1dCA9IGV2ZW50Wydjb2RlJ10uc2xpY2UoZXZlbnRbJ2NvZGUnXS5sZW5ndGggLSAxKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIHNlbGVjdGlvblN0YXJ0KSArIGlucHV0ICsgdmFsdWUuc3Vic3RyaW5nKHNlbGVjdGlvbkVuZCk7XG4gICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAzICYmIHZhbHVlLmluZGV4T2YoJzAnKSA9PT0gMCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gOCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsIHNlbGVjdGlvblN0YXJ0IC0gMSkgKyB2YWx1ZS5zdWJzdHJpbmcoc2VsZWN0aW9uRW5kKTtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPCAyKSB7XG4gICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKGV2ZW50LmtleUNvZGUgPj0gMzcgJiYgZXZlbnQua2V5Q29kZSA8PSA0MCkpIHtcbiAgICAgIC8vIOWmguaenOS4jeaYr+S4iuS4i+W3puWPs++8jOWwsemYu+aLpu+8jOaJp+ihjOiHquW3seeahOWkhOeQhlxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgaWYgKC9eKERpZ2l0fE51bXBhZClcXGQkLy50ZXN0KGV2ZW50LmNvZGUpIHx8IGV2ZW50LmtleUNvZGUgPT09IDgpIHtcbiAgICAgIGlmIChOdW1iZXIodmFsdWUpID49IG1pbiAmJiBOdW1iZXIodmFsdWUpIDw9IG1heCkge1xuICAgICAgICB0aGlzW3RpbWVUeXBlXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLm9uVGltZUNoYW5nZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uVGltZUNoYW5nZSgpIHtcbiAgICBjb25zdCBkYXRlID0gdGhpcy5zZWxlY3RlZERhdGUgfHwgbmV3IERhdGUoKTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICAgIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCksIE51bWJlcih0aGlzLmN1cnJlbnRIb3VyKSwgTnVtYmVyKHRoaXMuY3VycmVudE1pbnV0ZSksIE51bWJlcih0aGlzLmN1cnJlbnRTZWNvbmQpKTtcbiAgICBjb25zdCBkYXRlT2JqID0ge1xuICAgICAgcmVhc29uOiBTZWxlY3REYXRlQ2hhbmdlUmVhc29uLnRpbWUsXG4gICAgICBzZWxlY3RlZERhdGU6IHRoaXMuc2VsZWN0ZWREYXRlXG4gICAgfTtcbiAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIHRoaXMud3JpdGVWYWx1ZSh0aGlzLnNlbGVjdGVkRGF0ZSk7XG4gICAgdGhpcy5vbkNoYW5nZShkYXRlT2JqKTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZUNoYW5nZS5lbWl0KGRhdGVPYmopO1xuICB9XG5cbiAgdGltZVVwKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdoJzoge1xuICAgICAgTnVtYmVyKHRoaXMuY3VycmVudEhvdXIpIDwgMjMgPyB0aGlzLmN1cnJlbnRIb3VyID0gKE51bWJlcih0aGlzLmN1cnJlbnRIb3VyKSArIDEpIDogdGhpcy5jdXJyZW50SG91ciA9IDA7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnbSc6IHtcbiAgICAgIE51bWJlcih0aGlzLmN1cnJlbnRNaW51dGUpIDwgNTkgPyB0aGlzLmN1cnJlbnRNaW51dGUgPSAoTnVtYmVyKHRoaXMuY3VycmVudE1pbnV0ZSkgKyAxKSA6IHRoaXMuY3VycmVudE1pbnV0ZSA9IDA7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAncyc6IHtcbiAgICAgIE51bWJlcih0aGlzLmN1cnJlbnRTZWNvbmQpIDwgNTkgPyB0aGlzLmN1cnJlbnRTZWNvbmQgPSAoTnVtYmVyKHRoaXMuY3VycmVudFNlY29uZCkgKyAxKSA6IHRoaXMuY3VycmVudFNlY29uZCA9IDA7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgfVxuICAgIHRoaXMub25UaW1lQ2hhbmdlKCk7XG4gIH1cblxuICB0aW1lRG93bih0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnaCc6IHtcbiAgICAgIE51bWJlcih0aGlzLmN1cnJlbnRIb3VyKSA+IDAgPyB0aGlzLmN1cnJlbnRIb3VyID0gKE51bWJlcih0aGlzLmN1cnJlbnRIb3VyKSAtIDEpIDogdGhpcy5jdXJyZW50SG91ciA9IDIzO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ20nOiB7XG4gICAgICBOdW1iZXIodGhpcy5jdXJyZW50TWludXRlKSA+IDAgPyB0aGlzLmN1cnJlbnRNaW51dGUgPSAoTnVtYmVyKHRoaXMuY3VycmVudE1pbnV0ZSkgLSAxKSA6IHRoaXMuY3VycmVudE1pbnV0ZSA9IDU5O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ3MnOiB7XG4gICAgICBOdW1iZXIodGhpcy5jdXJyZW50U2Vjb25kKSA+IDAgPyB0aGlzLmN1cnJlbnRTZWNvbmQgPSAoTnVtYmVyKHRoaXMuY3VycmVudFNlY29uZCkgLSAxKSA6IHRoaXMuY3VycmVudFNlY29uZCA9IDU5O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIH1cbiAgICB0aGlzLm9uVGltZUNoYW5nZSgpO1xuICB9XG5cbiAgY2xlYXJBbGwgPSAocmVhc29uPzogU2VsZWN0RGF0ZUNoYW5nZVJlYXNvbikgPT4ge1xuICAgIHRoaXMud3JpdGVWYWx1ZShudWxsKTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IG51bGw7XG4gICAgY29uc3QgY3VycmVudFJlYXNvbiA9IHR5cGVvZiByZWFzb24gPT09ICdudW1iZXInID8gcmVhc29uIDogU2VsZWN0RGF0ZUNoYW5nZVJlYXNvbi5jdXN0b207XG4gICAgY29uc3QgZGF0ZU9iaiA9IHtcbiAgICAgIHJlYXNvbjogY3VycmVudFJlYXNvbixcbiAgICAgIHNlbGVjdGVkRGF0ZTogbnVsbFxuICAgIH07XG4gICAgLy8g5riF56m65pe25bCGbnVsbOS9nOS4um5nTW9kZWxDaGFuZ2Xlj4LmlbDkvKDlh7pcbiAgICB0aGlzLm9uQ2hhbmdlKGRhdGVPYmopO1xuICAgIHRoaXMuc2VsZWN0ZWREYXRlQ2hhbmdlLmVtaXQoZGF0ZU9iaik7XG4gIH07XG5cbiAgdG9nZ2xlKCRldmVudDogRXZlbnQsIHdoaWNoKSB7XG4gICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICh3aGljaCA9PT0gJ3llYXInKSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSAneWVhcicpIHtcbiAgICAgICAgcmV0dXJuIDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnbW9udGgnKSB7XG4gICAgICAgIHRoaXMub3BlbkNob29zZVllYXIgPSB0cnVlO1xuICAgICAgICB0aGlzLm9wZW5DaG9vc2VNb250aCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcGVuQ2hvb3NlWWVhciA9ICF0aGlzLm9wZW5DaG9vc2VZZWFyO1xuICAgICAgICB0aGlzLm9wZW5DaG9vc2VNb250aCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSAnbW9udGgnKSB7XG4gICAgICAgIHJldHVybiA7XG4gICAgICB9XG4gICAgICB0aGlzLm9wZW5DaG9vc2VNb250aCA9ICF0aGlzLm9wZW5DaG9vc2VNb250aDtcbiAgICAgIHRoaXMub3BlbkNob29zZVllYXIgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpc1RvZGF5RGlzYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0Rpc2FibGVkRGF5KG5ldyBEYXRlKCkpO1xuICB9XG5cbiAgaXNEaXNhYmxlZFRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNEaXNhYmxlZERheSh0aGlzLnNlbGVjdGVkRGF0ZSk7XG4gIH1cblxuICBpbml0RGF0ZVBpY2tlcigpIHtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlID8gdGhpcy5zZWxlY3RlZERhdGUgOiBuZXcgRGF0ZSgpO1xuICAgIGlmICh0aGlzLmlzRGlzYWJsZWREYXkodGhpcy5zZWxlY3RlZERhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdGhpcy5zZWxlY3RlZERhdGUgPyB0aGlzLnNlbGVjdGVkRGF0ZSA6IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5vblNlbGVjdERhdGVDaGFuZ2VkKCk7XG4gICAgdGhpcy5vblNlbGVjdERhdGUoe30sIHRoaXMuc2VsZWN0ZWREYXRlLCAnaW5pdCcpO1xuICB9XG5cbiAgY29uZmlybVRpbWUoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBkYXRlT2JqID0ge1xuICAgICAgcmVhc29uOiBTZWxlY3REYXRlQ2hhbmdlUmVhc29uLmJ1dHRvbixcbiAgICAgIHNlbGVjdGVkRGF0ZTogdGhpcy5zZWxlY3RlZERhdGVcbiAgICB9O1xuICAgIHRoaXMud3JpdGVWYWx1ZSh0aGlzLnNlbGVjdGVkRGF0ZSk7XG4gICAgdGhpcy5vbkNoYW5nZShkYXRlT2JqKTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZUNoYW5nZS5lbWl0KGRhdGVPYmopO1xuICB9XG5cbiAgY2hvb3NlVG9kYXkoKSB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGlmICh0aGlzLmlzRGlzYWJsZWREYXkodG9kYXkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdG9kYXk7XG4gICAgdGhpcy5vblNlbGVjdERhdGVDaGFuZ2VkKCk7XG4gICAgdGhpcy5vblNlbGVjdERhdGUoe30sIHRvZGF5LCB1bmRlZmluZWQsIFNlbGVjdERhdGVDaGFuZ2VSZWFzb24uYnV0dG9uKTtcbiAgfVxuXG4gIG9uU2VsZWN0TW9udGgobW9udGgpIHtcbiAgICBpZiAobW9udGguZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50TW9udGhJbmRleCA9IG1vbnRoLmluZGV4O1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdtb250aCcpIHtcbiAgICAgIHRoaXMub25TZWxlY3REYXRlKHt9ICwgbmV3IERhdGUodGhpcy5jdXJyZW50WWVhciwgdGhpcy5jdXJyZW50TW9udGhJbmRleCwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uRGlzcGxheVdlZWtzQ2hhbmdlKCk7XG4gICAgICB0aGlzLm9wZW5DaG9vc2VNb250aCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNob29zZURhdGUgPSAoZGF0ZTogc3RyaW5nLCBldmVudCA9IHt9LCByZWFzb24gPSBTZWxlY3REYXRlQ2hhbmdlUmVhc29uLmN1c3RvbSkgPT4ge1xuICAgIGNvbnN0IHBhcnNlRGF0ZSA9IHRoaXMuZGF0ZUNvbnZlcnRlci5wYXJzZShkYXRlLCB0aGlzLmRhdGVGb3JtYXQpO1xuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gcGFyc2VEYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5vblNlbGVjdERhdGVDaGFuZ2VkKCk7XG4gICAgdGhpcy5vblNlbGVjdERhdGUoZXZlbnQsIHBhcnNlRGF0ZSwgdW5kZWZpbmVkLCByZWFzb24pO1xuICB9O1xuXG4gIGdldCBtaW5EYXRlRGVmaW5lZCgpIHtcbiAgICByZXR1cm4gdGhpcy5taW5EYXRlLmdldFRpbWUoKSAhPT0gbmV3IERhdGUodGhpcy5kYXRlQ29uZmlnLm1pbiwgMCwgMSwgMCwgMCwgMCkuZ2V0VGltZSgpO1xuICB9XG5cbiAgZ2V0IG1heERhdGVEZWZpbmVkKCkge1xuICAgIHJldHVybiB0aGlzLm1heERhdGUuZ2V0VGltZSgpICE9PSBuZXcgRGF0ZSh0aGlzLmRhdGVDb25maWcubWF4LCAxMSwgMzEsIDIzLCA1OSwgNTkpLmdldFRpbWUoKTtcbiAgfVxuXG4gIHNldEkxOG5UZXh0KCkge1xuICAgIHRoaXMuaTE4blRleHQgPSB0aGlzLmkxOG4uZ2V0STE4blRleHQoKS5kYXRlUGlja2VyO1xuICAgIHRoaXMuaTE4bkxvY2FsZSA9IHRoaXMuaTE4bi5nZXRJMThuVGV4dCgpLmxvY2FsZTtcbiAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gdGhpcy5pMThuLmdldEkxOG5UZXh0KCkuY29tbW9uO1xuICAgIHRoaXMuaTE4blN1YnNjcmlwdGlvbiA9IHRoaXMuaTE4bi5sYW5nQ2hhbmdlKCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLmkxOG5UZXh0ID0gZGF0YS5kYXRlUGlja2VyO1xuICAgICAgdGhpcy5pMThuTG9jYWxlID0gZGF0YS5sb2NhbGU7XG4gICAgICB0aGlzLmkxOG5Db21tb25UZXh0ID0gZGF0YS5jb21tb247XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5pMThuU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmkxOG5TdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJkZXZ1aS1tb250aC12aWV3IHt7IGNzc0NsYXNzIH19XCI+XG4gIDx0YWJsZSBjbGFzcz1cImRldnVpLXRhYmxlIGRldnVpLW1vbnRoLXZpZXctdGFibGVcIj5cbiAgICA8dGhlYWQgY2xhc3M9XCJkZXZ1aS1ub1NlbGVjdFwiPlxuICAgICAgPHRyIGNsYXNzPVwiZGV2dWktZGF0ZS1oZWFkZXJcIj5cbiAgICAgICAgPHRkPlxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBjbGFzcz1cImRldnVpLWJ0bi1saW5rXCJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAoY2xpY2spPVwib25QcmVZZWFyT3B0aW9uKClcIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgICAnZGV2dWkteWVhci1tb250aC1kaXNhYmxlZCc6ICFoYXNQcmVZZWFyT3B0aW9uKClcbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgd2lkdGg9XCIxMHB4XCJcbiAgICAgICAgICAgICAgaGVpZ2h0PVwiMTBweFwiXG4gICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMTAgMTBcIlxuICAgICAgICAgICAgICB2ZXJzaW9uPVwiMS4xXCJcbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0xLjAwMDAwMCwgLTEuMDAwMDAwKVwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0xMSwxLjgzMzMzMzMzIEwxMSwxMC4xNjY2NjY3IEw3LDcuMzg4MzMzMzMgTDcsMTAuMTY2NjY2NyBMMSw2IEw3LDEuODMzMzMzMzMgTDcsNC42MTAzMzMzMyBMMTEsMS44MzMzMzMzMyBaXCJcbiAgICAgICAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvdGQ+XG4gICAgICAgIDx0ZD5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgKm5nSWY9XCIhb3BlbkNob29zZVllYXIgJiYgIW9wZW5DaG9vc2VNb250aFwiXG4gICAgICAgICAgICBjbGFzcz1cImRldnVpLWJ0bi1saW5rIGRldnVpLWJ0bi1sZWZ0XCJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAoY2xpY2spPVwib25QcmVNb250aCgpXCJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgJ2RldnVpLXllYXItbW9udGgtZGlzYWJsZWQnOiAhaGFzUHJlTW9udGgoKSB9XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgIHdpZHRoPVwiNnB4XCJcbiAgICAgICAgICAgICAgaGVpZ2h0PVwiMTBweFwiXG4gICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgNiAxMFwiXG4gICAgICAgICAgICAgIHZlcnNpb249XCIxLjFcIlxuICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGcgc3Ryb2tlPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cbiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoLTMuMDAwMDAwLCAtMS4wMDAwMDApXCI+XG4gICAgICAgICAgICAgICAgICA8cG9seWdvblxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNi4wMDAwMDAsIDYuMDAwMDAwKSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC02LjAwMDAwMCwgLTYuMDAwMDAwKSBcIlxuICAgICAgICAgICAgICAgICAgICBwb2ludHM9XCI2IDMgMTAuMTY2NjY2NyA5IDEuODMzMzMzMzMgOVwiXG4gICAgICAgICAgICAgICAgICA+PC9wb2x5Z29uPlxuICAgICAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3RkPlxuICAgICAgICA8dGQgY29sc3Bhbj1cIjNcIiBjbGFzcz1cImRldnVpLWRyb3Bkb3duXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXZ1aS1kYXRlLXRpdGxlXCIgKGNsaWNrKT1cInRvZ2dsZSgkZXZlbnQsICd5ZWFyJylcIj57eyBpMThuVGV4dD8ueWVhckRpc3BsYXkoY3VycmVudFllYXIpIH19PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGV2dWktZGF0ZS10aXRsZVwiIChjbGljayk9XCJ0b2dnbGUoJGV2ZW50LCAnbW9udGgnKVwiICpuZ0lmPVwibW9kZSAhPT0gJ3llYXInXCI+e3tcbiAgICAgICAgICAgIChpMThuVGV4dD8ubW9udGhzT2ZZZWFyKVtjdXJyZW50TW9udGhJbmRleF1cbiAgICAgICAgICB9fTwvc3Bhbj5cbiAgICAgICAgICA8dWwgY2xhc3M9XCJkZXZ1aS1tb250aE9wdGlvbiB0ZXh0LWNlbnRlclwiIFtzdHlsZS5kaXNwbGF5XT1cIm9wZW5DaG9vc2VNb250aCA/ICdibG9jaycgOiAnbm9uZSdcIj5cbiAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgbW9udGggb2YgYXZhaWxhYmxlTW9udGhzXCJcbiAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyBhY3RpdmU6IGN1cnJlbnRNb250aEluZGV4ID09IG1vbnRoLmluZGV4LCBkaXNhYmxlZDogbW9udGguZGlzYWJsZWQgfVwiXG4gICAgICAgICAgICAgIChjbGljayk9XCJvblNlbGVjdE1vbnRoKG1vbnRoKVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7IG1vbnRoLnRpdGxlIH19XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPHVsIGNsYXNzPVwiZGV2dWkteWVhck9wdGlvbiB0ZXh0LWNlbnRlclwiIFtzdHlsZS5kaXNwbGF5XT1cIm9wZW5DaG9vc2VZZWFyID8gJ2Jsb2NrJyA6ICdub25lJ1wiPlxuICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIHllYXJPcHRpb25zXCJcbiAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyBhY3RpdmU6IGN1cnJlbnRZZWFyID09IGl0ZW0udGl0bGUsIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkIH1cIlxuICAgICAgICAgICAgICAoY2xpY2spPVwib25TZWxlY3RZZWFyKGl0ZW0sICRldmVudClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7eyBpdGVtLnRpdGxlIH19XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvdGQ+XG4gICAgICAgIDx0ZD5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgKm5nSWY9XCIhb3BlbkNob29zZVllYXIgJiYgIW9wZW5DaG9vc2VNb250aFwiXG4gICAgICAgICAgICBjbGFzcz1cImRldnVpLWJ0bi1saW5rIGRldnVpLWJ0bi1yaWdodFwiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgKGNsaWNrKT1cIm9uTmV4dE1vbnRoKClcIlxuICAgICAgICAgICAgW25nQ2xhc3NdPVwieyAnZGV2dWkteWVhci1tb250aC1kaXNhYmxlZCc6ICFoYXNOZXh0TW9udGgoKSB9XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgIHdpZHRoPVwiNnB4XCJcbiAgICAgICAgICAgICAgaGVpZ2h0PVwiOXB4XCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCA2IDlcIlxuICAgICAgICAgICAgICB2ZXJzaW9uPVwiMS4xXCJcbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxnIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0zLjAwMDAwMCwgLTIuMDAwMDAwKVwiPlxuICAgICAgICAgICAgICAgICAgPHBvbHlnb25cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDYuMDAwMDAwLCA2LjE2NjY2Nykgc2NhbGUoLTEsIDEpIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNi4xNjY2NjcpIFwiXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cz1cIjYgMy4xNjY2NjY2NyAxMC4xNjY2NjY3IDkuMTY2NjY2NjcgMS44MzMzMzMzMyA5LjE2NjY2NjY3XCJcbiAgICAgICAgICAgICAgICAgID48L3BvbHlnb24+XG4gICAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvdGQ+XG4gICAgICAgIDx0ZD5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgY2xhc3M9XCJkZXZ1aS1idG4tbGlua1wiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgKGNsaWNrKT1cIm9uTmV4dFllYXJPcHRpb24oKVwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgICAgICdkZXZ1aS15ZWFyLW1vbnRoLWRpc2FibGVkJzogIWhhc05leHRZZWFyT3B0aW9uKClcbiAgICAgICAgICAgIH1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgd2lkdGg9XCIxMHB4XCJcbiAgICAgICAgICAgICAgaGVpZ2h0PVwiOXB4XCJcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAxMCA5XCJcbiAgICAgICAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZyBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGw9XCJub25lXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxuICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMS4wMDAwMDAsIC0yLjAwMDAwMClcIj5cbiAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjUgNC43Nzc3Nzc3OCA1IDIgMTEgNi4xNjY2NjY2NyA1IDEwLjMzMzMzMzMgNSA3LjU1NTU1NTU2IDEgMTAuMzMzMzMzMyAxIDJcIj48L3BvbHlnb24+XG4gICAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RyPlxuICAgICAgPHRyIGNsYXNzPVwic21hbGwgdGV4dC1jZW50ZXIgZGV2dWktd2Vlay1oZWFkZXJcIj5cbiAgICAgICAgPHRkICpuZ0Zvcj1cImxldCBpdGVtIG9mIGkxOG5UZXh0Py5kYXlzT2ZXZWVrXCI+e3sgaXRlbSB9fTwvdGQ+XG4gICAgICA8L3RyPlxuICAgIDwvdGhlYWQ+XG4gICAgPHRib2R5IGNsYXNzPVwiZGV2dWktbm9TZWxlY3RcIj5cbiAgICAgIDx0ciAqbmdGb3I9XCJsZXQgd2VlayBvZiBkaXNwbGF5V2Vla3NcIj5cbiAgICAgICAgPHRkXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGRheSBvZiB3ZWVrXCJcbiAgICAgICAgICBjbGFzcz1cImRldnVpLWRheVwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgJ2RldnVpLW91dC1vZi1tb250aCc6ICFkYXkuaW5Nb250aCxcbiAgICAgICAgICAgICdkZXZ1aS1pbi1tb250aC1kYXknOiBkYXkuaW5Nb250aCxcbiAgICAgICAgICAgIGFjdGl2ZTogaXNTZWxlY3REYXkoZGF5LmRhdGUpLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWREYXkoZGF5LmRhdGUpLFxuICAgICAgICAgICAgJ2RldnVpLXRvZGF5JzogZGF5LmlzVG9kYXlcbiAgICAgICAgICB9XCJcbiAgICAgICAgICAoY2xpY2spPVwib25TZWxlY3REYXRlKCRldmVudCwgZGF5LmRhdGUpXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS1jYWxlbmRhci1kYXRlXCI+e3sgZGF5LmRheSB9fTwvZGl2PlxuICAgICAgICA8L3RkPlxuICAgICAgPC90cj5cbiAgICA8L3Rib2R5PlxuICAgIDx0Zm9vdCBbbmdDbGFzc109XCJ7ICdkZXZ1aS1ub1NlbGVjdCc6ICFjdXN0b21WaWV3VGVtcGxhdGUgfVwiPlxuICAgICAgPHRyIGNsYXNzPVwidGltZS1waWNrZXItdmlld1wiIChjbGljayk9XCIhY3VzdG9tVmlld1RlbXBsYXRlICYmICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiICpuZ0lmPVwic2hvd1RpbWUgfHwgIWN1c3RvbVZpZXdUZW1wbGF0ZVwiPlxuICAgICAgICA8dGQgY29sc3Bhbj1cIjRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktdGltZXBpY2tlclwiICpuZ0lmPVwic2hvd1RpbWVcIiBbbmdDbGFzc109XCJ7ICdkZXZ1aS10aW1lcGlja2VyLWRpc2FibGVkJzogaXNEaXNhYmxlZFRpbWUoKSB9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktdGltZVwiPlxuICAgICAgICAgICAgICA8aW5wdXQgW25nTW9kZWxdPVwiY3VycmVudEhvdXJcIiAoa2V5ZG93bik9XCJmaXhUaW1lKCRldmVudCwgJ2gnKVwiIFtkaXNhYmxlZF09XCJpc0Rpc2FibGVkVGltZSgpXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldnVpLWJ0bi1uYXZcIiAqbmdJZj1cIiFpc0Rpc2FibGVkVGltZSgpXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi11cFwiIChjbGljayk9XCJ0aW1lVXAoJ2gnKVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG4tZG93blwiIChjbGljayk9XCJ0aW1lRG93bignaCcpXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktdGltZVwiPlxuICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJkZXZ1aS1taW51dGVzXCIgW25nTW9kZWxdPVwiY3VycmVudE1pbnV0ZVwiIChrZXlkb3duKT1cImZpeFRpbWUoJGV2ZW50LCAnbScpXCIgW2Rpc2FibGVkXT1cImlzRGlzYWJsZWRUaW1lKClcIiAvPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktYnRuLW5hdlwiICpuZ0lmPVwiIWlzRGlzYWJsZWRUaW1lKClcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLXVwXCIgKGNsaWNrKT1cInRpbWVVcCgnbScpXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1kb3duXCIgKGNsaWNrKT1cInRpbWVEb3duKCdtJylcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS10aW1lXCI+XG4gICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImRldnVpLXNlY29uZHNcIiBbbmdNb2RlbF09XCJjdXJyZW50U2Vjb25kXCIgKGtleWRvd24pPVwiZml4VGltZSgkZXZlbnQsICdzJylcIiBbZGlzYWJsZWRdPVwiaXNEaXNhYmxlZFRpbWUoKVwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXZ1aS1idG4tbmF2XCIgKm5nSWY9XCIhaXNEaXNhYmxlZFRpbWUoKVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG4tdXBcIiAoY2xpY2spPVwidGltZVVwKCdzJylcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLWRvd25cIiAoY2xpY2spPVwidGltZURvd24oJ3MnKVwiPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RkPlxuICAgICAgICA8dGQgY29sc3Bhbj1cIjNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV2dWktYnRuLXdyYXBwZXJcIiAqbmdJZj1cInNob3dUaW1lXCI+XG4gICAgICAgICAgICA8ZC1idXR0b24gYnNTdHlsZT1cImNvbW1vblwiIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiIChidG5DbGljayk9XCJjb25maXJtVGltZSgkZXZlbnQpXCIgYnNTaXplPVwic21cIlxuICAgICAgICAgICAgICA+e3sgaTE4bkNvbW1vblRleHQ/LmJ0bkNvbmZpcm0gfX1cbiAgICAgICAgICAgIDwvZC1idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRldnVpLWJ0bi13cmFwcGVyXCIgKm5nSWY9XCIhc2hvd1RpbWVcIj5cbiAgICAgICAgICAgIDxkLWJ1dHRvbiBic1N0eWxlPVwiY29tbW9uXCIgW2Rpc2FibGVkXT1cImlzVG9kYXlEaXNhYmxlKCkgfHwgZGlzYWJsZWRcIiAoYnRuQ2xpY2spPVwiY2hvb3NlVG9kYXkoKVwiIGJzU2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgPnt7IGkxOG5UZXh0Py50b2RheSB9fVxuICAgICAgICAgICAgPC9kLWJ1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvdHI+XG4gICAgICA8dHIgY2xhc3M9XCJ0aW1lLXBpY2tlci12aWV3IGRldnVpLWN1c3RvbS1hcmVhXCIgKm5nSWY9XCJjdXN0b21WaWV3VGVtcGxhdGVcIj5cbiAgICAgICAgPHRkIGNvbHNwYW49XCI3XCI+XG4gICAgICAgICAgPG5nLXRlbXBsYXRlXG4gICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJjdXN0b21WaWV3VGVtcGxhdGVcIlxuICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgJGltcGxpY2l0OiB0aGlzLCBjaG9vc2VEYXRlOiBjaG9vc2VEYXRlLCBjbGVhckFsbDogY2xlYXJBbGwgfVwiXG4gICAgICAgICAgPjwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RyPlxuICAgIDwvdGZvb3Q+XG4gIDwvdGFibGU+XG48L2Rpdj5cbiJdfQ==